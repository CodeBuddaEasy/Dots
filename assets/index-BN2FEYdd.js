var NL=Object.defineProperty;var LL=(n,e,t)=>e in n?NL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var uo=(n,e,t)=>LL(n,typeof e!="symbol"?e+"":e,t);function IL(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function fS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gx={exports:{}},hp={},yx={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jM;function DL(){if(jM)return Kt;jM=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=m&&G[m]||G["@@iterator"],typeof G=="function"?G:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function M(G,Z,ce){this.props=G,this.context=Z,this.refs=E,this.updater=ce||v}M.prototype.isReactComponent={},M.prototype.setState=function(G,Z){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Z,"setState")},M.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=M.prototype;function C(G,Z,ce){this.props=G,this.context=Z,this.refs=E,this.updater=ce||v}var T=C.prototype=new x;T.constructor=C,S(T,M.prototype),T.isPureReactComponent=!0;var P=Array.isArray,I=Object.prototype.hasOwnProperty,k={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function z(G,Z,ce){var fe,Ee={},be=null,ee=null;if(Z!=null)for(fe in Z.ref!==void 0&&(ee=Z.ref),Z.key!==void 0&&(be=""+Z.key),Z)I.call(Z,fe)&&!B.hasOwnProperty(fe)&&(Ee[fe]=Z[fe]);var Ve=arguments.length-2;if(Ve===1)Ee.children=ce;else if(1<Ve){for(var je=Array(Ve),Ie=0;Ie<Ve;Ie++)je[Ie]=arguments[Ie+2];Ee.children=je}if(G&&G.defaultProps)for(fe in Ve=G.defaultProps,Ve)Ee[fe]===void 0&&(Ee[fe]=Ve[fe]);return{$$typeof:n,type:G,key:be,ref:ee,props:Ee,_owner:k.current}}function U(G,Z){return{$$typeof:n,type:G.type,key:Z,ref:G.ref,props:G.props,_owner:G._owner}}function F(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function K(G){var Z={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ce){return Z[ce]})}var ae=/\/+/g;function re(G,Z){return typeof G=="object"&&G!==null&&G.key!=null?K(""+G.key):Z.toString(36)}function H(G,Z,ce,fe,Ee){var be=typeof G;(be==="undefined"||be==="boolean")&&(G=null);var ee=!1;if(G===null)ee=!0;else switch(be){case"string":case"number":ee=!0;break;case"object":switch(G.$$typeof){case n:case e:ee=!0}}if(ee)return ee=G,Ee=Ee(ee),G=fe===""?"."+re(ee,0):fe,P(Ee)?(ce="",G!=null&&(ce=G.replace(ae,"$&/")+"/"),H(Ee,Z,ce,"",function(Ie){return Ie})):Ee!=null&&(F(Ee)&&(Ee=U(Ee,ce+(!Ee.key||ee&&ee.key===Ee.key?"":(""+Ee.key).replace(ae,"$&/")+"/")+G)),Z.push(Ee)),1;if(ee=0,fe=fe===""?".":fe+":",P(G))for(var Ve=0;Ve<G.length;Ve++){be=G[Ve];var je=fe+re(be,Ve);ee+=H(be,Z,ce,je,Ee)}else if(je=y(G),typeof je=="function")for(G=je.call(G),Ve=0;!(be=G.next()).done;)be=be.value,je=fe+re(be,Ve++),ee+=H(be,Z,ce,je,Ee);else if(be==="object")throw Z=String(G),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ee}function se(G,Z,ce){if(G==null)return G;var fe=[],Ee=0;return H(G,fe,"","",function(be){return Z.call(ce,be,Ee++)}),fe}function ne(G){if(G._status===-1){var Z=G._result;Z=Z(),Z.then(function(ce){(G._status===0||G._status===-1)&&(G._status=1,G._result=ce)},function(ce){(G._status===0||G._status===-1)&&(G._status=2,G._result=ce)}),G._status===-1&&(G._status=0,G._result=Z)}if(G._status===1)return G._result.default;throw G._result}var ie={current:null},V={transition:null},te={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:V,ReactCurrentOwner:k};function $(){throw Error("act(...) is not supported in production builds of React.")}return Kt.Children={map:se,forEach:function(G,Z,ce){se(G,function(){Z.apply(this,arguments)},ce)},count:function(G){var Z=0;return se(G,function(){Z++}),Z},toArray:function(G){return se(G,function(Z){return Z})||[]},only:function(G){if(!F(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Kt.Component=M,Kt.Fragment=t,Kt.Profiler=r,Kt.PureComponent=C,Kt.StrictMode=i,Kt.Suspense=c,Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Kt.act=$,Kt.cloneElement=function(G,Z,ce){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var fe=S({},G.props),Ee=G.key,be=G.ref,ee=G._owner;if(Z!=null){if(Z.ref!==void 0&&(be=Z.ref,ee=k.current),Z.key!==void 0&&(Ee=""+Z.key),G.type&&G.type.defaultProps)var Ve=G.type.defaultProps;for(je in Z)I.call(Z,je)&&!B.hasOwnProperty(je)&&(fe[je]=Z[je]===void 0&&Ve!==void 0?Ve[je]:Z[je])}var je=arguments.length-2;if(je===1)fe.children=ce;else if(1<je){Ve=Array(je);for(var Ie=0;Ie<je;Ie++)Ve[Ie]=arguments[Ie+2];fe.children=Ve}return{$$typeof:n,type:G.type,key:Ee,ref:be,props:fe,_owner:ee}},Kt.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:s,_context:G},G.Consumer=G},Kt.createElement=z,Kt.createFactory=function(G){var Z=z.bind(null,G);return Z.type=G,Z},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(G){return{$$typeof:l,render:G}},Kt.isValidElement=F,Kt.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:ne}},Kt.memo=function(G,Z){return{$$typeof:d,type:G,compare:Z===void 0?null:Z}},Kt.startTransition=function(G){var Z=V.transition;V.transition={};try{G()}finally{V.transition=Z}},Kt.unstable_act=$,Kt.useCallback=function(G,Z){return ie.current.useCallback(G,Z)},Kt.useContext=function(G){return ie.current.useContext(G)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(G){return ie.current.useDeferredValue(G)},Kt.useEffect=function(G,Z){return ie.current.useEffect(G,Z)},Kt.useId=function(){return ie.current.useId()},Kt.useImperativeHandle=function(G,Z,ce){return ie.current.useImperativeHandle(G,Z,ce)},Kt.useInsertionEffect=function(G,Z){return ie.current.useInsertionEffect(G,Z)},Kt.useLayoutEffect=function(G,Z){return ie.current.useLayoutEffect(G,Z)},Kt.useMemo=function(G,Z){return ie.current.useMemo(G,Z)},Kt.useReducer=function(G,Z,ce){return ie.current.useReducer(G,Z,ce)},Kt.useRef=function(G){return ie.current.useRef(G)},Kt.useState=function(G){return ie.current.useState(G)},Kt.useSyncExternalStore=function(G,Z,ce){return ie.current.useSyncExternalStore(G,Z,ce)},Kt.useTransition=function(){return ie.current.useTransition()},Kt.version="18.3.1",Kt}var XM;function rv(){return XM||(XM=1,yx.exports=DL()),yx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M;function kL(){if($M)return hp;$M=1;var n=rv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var p,m={},y=null,v=null;d!==void 0&&(y=""+d),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(p in c)i.call(c,p)&&!s.hasOwnProperty(p)&&(m[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)m[p]===void 0&&(m[p]=c[p]);return{$$typeof:e,type:l,key:y,ref:v,props:m,_owner:r.current}}return hp.Fragment=t,hp.jsx=o,hp.jsxs=o,hp}var qM;function UL(){return qM||(qM=1,gx.exports=kL()),gx.exports}var L=UL(),J=rv();const Qo=fS(J),OL=IL({__proto__:null,default:Qo},[J]);var i0={},vx={exports:{}},jr={},xx={exports:{}},_x={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YM;function FL(){return YM||(YM=1,function(n){function e(V,te){var $=V.length;V.push(te);e:for(;0<$;){var G=$-1>>>1,Z=V[G];if(0<r(Z,te))V[G]=te,V[$]=Z,$=G;else break e}}function t(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var te=V[0],$=V.pop();if($!==te){V[0]=$;e:for(var G=0,Z=V.length,ce=Z>>>1;G<ce;){var fe=2*(G+1)-1,Ee=V[fe],be=fe+1,ee=V[be];if(0>r(Ee,$))be<Z&&0>r(ee,Ee)?(V[G]=ee,V[be]=$,G=be):(V[G]=Ee,V[fe]=$,G=fe);else if(be<Z&&0>r(ee,$))V[G]=ee,V[be]=$,G=be;else break e}}return te}function r(V,te){var $=V.sortIndex-te.sortIndex;return $!==0?$:V.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,m=null,y=3,v=!1,S=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(V){for(var te=t(d);te!==null;){if(te.callback===null)i(d);else if(te.startTime<=V)i(d),te.sortIndex=te.expirationTime,e(c,te);else break;te=t(d)}}function P(V){if(E=!1,T(V),!S)if(t(c)!==null)S=!0,ne(I);else{var te=t(d);te!==null&&ie(P,te.startTime-V)}}function I(V,te){S=!1,E&&(E=!1,x(z),z=-1),v=!0;var $=y;try{for(T(te),m=t(c);m!==null&&(!(m.expirationTime>te)||V&&!K());){var G=m.callback;if(typeof G=="function"){m.callback=null,y=m.priorityLevel;var Z=G(m.expirationTime<=te);te=n.unstable_now(),typeof Z=="function"?m.callback=Z:m===t(c)&&i(c),T(te)}else i(c);m=t(c)}if(m!==null)var ce=!0;else{var fe=t(d);fe!==null&&ie(P,fe.startTime-te),ce=!1}return ce}finally{m=null,y=$,v=!1}}var k=!1,B=null,z=-1,U=5,F=-1;function K(){return!(n.unstable_now()-F<U)}function ae(){if(B!==null){var V=n.unstable_now();F=V;var te=!0;try{te=B(!0,V)}finally{te?re():(k=!1,B=null)}}else k=!1}var re;if(typeof C=="function")re=function(){C(ae)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,se=H.port2;H.port1.onmessage=ae,re=function(){se.postMessage(null)}}else re=function(){M(ae,0)};function ne(V){B=V,k||(k=!0,re())}function ie(V,te){z=M(function(){V(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){S||v||(S=!0,ne(I))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(V){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var $=y;y=te;try{return V()}finally{y=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,te){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var $=y;y=V;try{return te()}finally{y=$}},n.unstable_scheduleCallback=function(V,te,$){var G=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?G+$:G):$=G,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=$+Z,V={id:p++,callback:te,priorityLevel:V,startTime:$,expirationTime:Z,sortIndex:-1},$>G?(V.sortIndex=$,e(d,V),t(c)===null&&V===t(d)&&(E?(x(z),z=-1):E=!0,ie(P,$-G))):(V.sortIndex=Z,e(c,V),S||v||(S=!0,ne(I))),V},n.unstable_shouldYield=K,n.unstable_wrapCallback=function(V){var te=y;return function(){var $=y;y=te;try{return V.apply(this,arguments)}finally{y=$}}}}(_x)),_x}var KM;function BL(){return KM||(KM=1,xx.exports=FL()),xx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JM;function zL(){if(JM)return jr;JM=1;var n=rv(),e=BL();function t(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(a,u){o(a,u),o(a+"Capture",u)}function o(a,u){for(r[a]=u,a=0;a<u.length;a++)i.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(a){return c.call(m,a)?!0:c.call(p,a)?!1:d.test(a)?m[a]=!0:(p[a]=!0,!1)}function v(a,u,g,w){if(g!==null&&g.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function S(a,u,g,w){if(u===null||typeof u>"u"||v(a,u,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function E(a,u,g,w,A,N,O){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=w,this.attributeNamespace=A,this.mustUseProperty=g,this.propertyName=a,this.type=u,this.sanitizeURL=N,this.removeEmptyString=O}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){M[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];M[u]=new E(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){M[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){M[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){M[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){M[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){M[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){M[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){M[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(x,C);M[u]=new E(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(x,C);M[u]=new E(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(x,C);M[u]=new E(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){M[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),M.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){M[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function T(a,u,g,w){var A=M.hasOwnProperty(u)?M[u]:null;(A!==null?A.type!==0:w||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(S(u,g,A,w)&&(g=null),w||A===null?y(u)&&(g===null?a.removeAttribute(u):a.setAttribute(u,""+g)):A.mustUseProperty?a[A.propertyName]=g===null?A.type===3?!1:"":g:(u=A.attributeName,w=A.attributeNamespace,g===null?a.removeAttribute(u):(A=A.type,g=A===3||A===4&&g===!0?"":""+g,w?a.setAttributeNS(w,u,g):a.setAttribute(u,g))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),k=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),K=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),V=Symbol.iterator;function te(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var $=Object.assign,G;function Z(a){if(G===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);G=u&&u[1]||""}return`
`+G+a}var ce=!1;function fe(a,u){if(!a||ce)return"";ce=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(xe){var w=xe}Reflect.construct(a,[],u)}else{try{u.call()}catch(xe){w=xe}a.call(u.prototype)}else{try{throw Error()}catch(xe){w=xe}a()}}catch(xe){if(xe&&w&&typeof xe.stack=="string"){for(var A=xe.stack.split(`
`),N=w.stack.split(`
`),O=A.length-1,Q=N.length-1;1<=O&&0<=Q&&A[O]!==N[Q];)Q--;for(;1<=O&&0<=Q;O--,Q--)if(A[O]!==N[Q]){if(O!==1||Q!==1)do if(O--,Q--,0>Q||A[O]!==N[Q]){var oe=`
`+A[O].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=O&&0<=Q);break}}}finally{ce=!1,Error.prepareStackTrace=g}return(a=a?a.displayName||a.name:"")?Z(a):""}function Ee(a){switch(a.tag){case 5:return Z(a.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return a=fe(a.type,!1),a;case 11:return a=fe(a.type.render,!1),a;case 1:return a=fe(a.type,!0),a;default:return""}}function be(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case B:return"Fragment";case k:return"Portal";case U:return"Profiler";case z:return"StrictMode";case re:return"Suspense";case H:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case K:return(a.displayName||"Context")+".Consumer";case F:return(a._context.displayName||"Context")+".Provider";case ae:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case se:return u=a.displayName||null,u!==null?u:be(a.type)||"Memo";case ne:u=a._payload,a=a._init;try{return be(a(u))}catch{}}return null}function ee(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(u);case 8:return u===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Ve(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function je(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ie(a){var u=je(a)?"checked":"value",g=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),w=""+a[u];if(!a.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var A=g.get,N=g.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return A.call(this)},set:function(O){w=""+O,N.call(this,O)}}),Object.defineProperty(a,u,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(O){w=""+O},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Ke(a){a._valueTracker||(a._valueTracker=Ie(a))}function Re(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var g=u.getValue(),w="";return a&&(w=je(a)?a.checked?"true":"false":a.value),a=w,a!==g?(u.setValue(a),!0):!1}function Se(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ne(a,u){var g=u.checked;return $({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??a._wrapperState.initialChecked})}function tt(a,u){var g=u.defaultValue==null?"":u.defaultValue,w=u.checked!=null?u.checked:u.defaultChecked;g=Ve(u.value!=null?u.value:g),a._wrapperState={initialChecked:w,initialValue:g,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Ge(a,u){u=u.checked,u!=null&&T(a,"checked",u,!1)}function yt(a,u){Ge(a,u);var g=Ve(u.value),w=u.type;if(g!=null)w==="number"?(g===0&&a.value===""||a.value!=g)&&(a.value=""+g):a.value!==""+g&&(a.value=""+g);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?pt(a,u.type,g):u.hasOwnProperty("defaultValue")&&pt(a,u.type,Ve(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function xt(a,u,g){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var w=u.type;if(!(w!=="submit"&&w!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,g||u===a.value||(a.value=u),a.defaultValue=u}g=a.name,g!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,g!==""&&(a.name=g)}function pt(a,u,g){(u!=="number"||Se(a.ownerDocument)!==a)&&(g==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+g&&(a.defaultValue=""+g))}var bt=Array.isArray;function Vt(a,u,g,w){if(a=a.options,u){u={};for(var A=0;A<g.length;A++)u["$"+g[A]]=!0;for(g=0;g<a.length;g++)A=u.hasOwnProperty("$"+a[g].value),a[g].selected!==A&&(a[g].selected=A),A&&w&&(a[g].defaultSelected=!0)}else{for(g=""+Ve(g),u=null,A=0;A<a.length;A++){if(a[A].value===g){a[A].selected=!0,w&&(a[A].defaultSelected=!0);return}u!==null||a[A].disabled||(u=a[A])}u!==null&&(u.selected=!0)}}function Y(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return $({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function W(a,u){var g=u.value;if(g==null){if(g=u.children,u=u.defaultValue,g!=null){if(u!=null)throw Error(t(92));if(bt(g)){if(1<g.length)throw Error(t(93));g=g[0]}u=g}u==null&&(u=""),g=u}a._wrapperState={initialValue:Ve(g)}}function _e(a,u){var g=Ve(u.value),w=Ve(u.defaultValue);g!=null&&(g=""+g,g!==a.value&&(a.value=g),u.defaultValue==null&&a.defaultValue!==g&&(a.defaultValue=g)),w!=null&&(a.defaultValue=""+w)}function Oe(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function Fe(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xe(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?Fe(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var vt,Qe=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,g,w,A){MSApp.execUnsafeLocalFunction(function(){return a(u,g,w,A)})}:a}(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(vt=vt||document.createElement("div"),vt.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=vt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function Ae(a,u){if(u){var g=a.firstChild;if(g&&g===a.lastChild&&g.nodeType===3){g.nodeValue=u;return}}a.textContent=u}var rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];Object.keys(rt).forEach(function(a){mt.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),rt[u]=rt[a]})});function _t(a,u,g){return u==null||typeof u=="boolean"||u===""?"":g||typeof u!="number"||u===0||rt.hasOwnProperty(a)&&rt[a]?(""+u).trim():u+"px"}function nt(a,u){a=a.style;for(var g in u)if(u.hasOwnProperty(g)){var w=g.indexOf("--")===0,A=_t(g,u[g],w);g==="float"&&(g="cssFloat"),w?a.setProperty(g,A):a[g]=A}}var dt=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xt(a,u){if(u){if(dt[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function en(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pn=null;function le(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Te=null,De=null,qe=null;function ut(a){if(a=qs(a)){if(typeof Te!="function")throw Error(t(280));var u=a.stateNode;u&&(u=Lh(u),Te(a.stateNode,a.type,u))}}function an(a){De?qe?qe.push(a):qe=[a]:De=a}function ln(){if(De){var a=De,u=qe;if(qe=De=null,ut(a),u)for(a=0;a<u.length;a++)ut(u[a])}}function ni(a,u){return a(u)}function Lr(){}var wn=!1;function Ni(a,u,g){if(wn)return a(u,g);wn=!0;try{return ni(a,u,g)}finally{wn=!1,(De!==null||qe!==null)&&(Lr(),ln())}}function Li(a,u){var g=a.stateNode;if(g===null)return null;var w=Lh(g);if(w===null)return null;g=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(g&&typeof g!="function")throw Error(t(231,u,typeof g));return g}var Po=!1;if(l)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Po=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Po=!1}function Jc(a,u,g,w,A,N,O,Q,oe){var xe=Array.prototype.slice.call(arguments,3);try{u.apply(g,xe)}catch(Ue){this.onError(Ue)}}var Bs=!1,cl=null,j=!1,ye=null,Ce={onError:function(a){Bs=!0,cl=a}};function me(a,u,g,w,A,N,O,Q,oe){Bs=!1,cl=null,Jc.apply(Ce,arguments)}function Pe(a,u,g,w,A,N,O,Q,oe){if(me.apply(this,arguments),Bs){if(Bs){var xe=cl;Bs=!1,cl=null}else throw Error(t(198));j||(j=!0,ye=xe)}}function at(a){var u=a,g=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(g=u.return),a=u.return;while(a)}return u.tag===3?g:null}function wt(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function At(a){if(at(a)!==a)throw Error(t(188))}function Lt(a){var u=a.alternate;if(!u){if(u=at(a),u===null)throw Error(t(188));return u!==a?null:a}for(var g=a,w=u;;){var A=g.return;if(A===null)break;var N=A.alternate;if(N===null){if(w=A.return,w!==null){g=w;continue}break}if(A.child===N.child){for(N=A.child;N;){if(N===g)return At(A),a;if(N===w)return At(A),u;N=N.sibling}throw Error(t(188))}if(g.return!==w.return)g=A,w=N;else{for(var O=!1,Q=A.child;Q;){if(Q===g){O=!0,g=A,w=N;break}if(Q===w){O=!0,w=A,g=N;break}Q=Q.sibling}if(!O){for(Q=N.child;Q;){if(Q===g){O=!0,g=N,w=A;break}if(Q===w){O=!0,w=N,g=A;break}Q=Q.sibling}if(!O)throw Error(t(189))}}if(g.alternate!==w)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?a:u}function Ut(a){return a=Lt(a),a!==null?Ot(a):null}function Ot(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Ot(a);if(u!==null)return u;a=a.sibling}return null}var Ht=e.unstable_scheduleCallback,un=e.unstable_cancelCallback,vi=e.unstable_shouldYield,mr=e.unstable_requestPaint,cn=e.unstable_now,Sn=e.unstable_getCurrentPriorityLevel,Ft=e.unstable_ImmediatePriority,No=e.unstable_UserBlockingPriority,Dn=e.unstable_NormalPriority,Zr=e.unstable_LowPriority,Ms=e.unstable_IdlePriority,xi=null,$t=null;function It(a){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(xi,a,void 0,(a.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:Qr,$n=Math.log,gn=Math.LN2;function Qr(a){return a>>>=0,a===0?32:31-($n(a)/gn|0)|0}var es=64,qn=4194304;function Lo(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function _u(a,u){var g=a.pendingLanes;if(g===0)return 0;var w=0,A=a.suspendedLanes,N=a.pingedLanes,O=g&268435455;if(O!==0){var Q=O&~A;Q!==0?w=Lo(Q):(N&=O,N!==0&&(w=Lo(N)))}else O=g&~A,O!==0?w=Lo(O):N!==0&&(w=Lo(N));if(w===0)return 0;if(u!==0&&u!==w&&(u&A)===0&&(A=w&-w,N=u&-u,A>=N||A===16&&(N&4194240)!==0))return u;if((w&4)!==0&&(w|=g&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=w;0<u;)g=31-Mn(u),A=1<<g,w|=a[g],u&=~A;return w}function cg(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zc(a,u){for(var g=a.suspendedLanes,w=a.pingedLanes,A=a.expirationTimes,N=a.pendingLanes;0<N;){var O=31-Mn(N),Q=1<<O,oe=A[O];oe===-1?((Q&g)===0||(Q&w)!==0)&&(A[O]=cg(Q,u)):oe<=u&&(a.expiredLanes|=Q),N&=~Q}}function Qc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ir(){var a=es;return es<<=1,(es&4194240)===0&&(es=64),a}function gd(a){for(var u=[],g=0;31>g;g++)u.push(a);return u}function wu(a,u,g){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-Mn(u),a[u]=g}function zv(a,u){var g=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<g;){var A=31-Mn(g),N=1<<A;u[A]=0,w[A]=-1,a[A]=-1,g&=~N}}function hl(a,u){var g=a.entangledLanes|=u;for(a=a.entanglements;g;){var w=31-Mn(g),A=1<<w;A&u|a[w]&u&&(a[w]|=u),g&=~A}}var sn=0;function fl(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Su,yd,hg,eh,th,la=!1,nh=[],Es=null,Wt=null,zs=null,ua=new Map,dl=new Map,Io=[],Vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(a,u){switch(a){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":ua.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(u.pointerId)}}function ca(a,u,g,w,A,N){return a===null||a.nativeEvent!==N?(a={blockedOn:u,domEventName:g,eventSystemFlags:w,nativeEvent:N,targetContainers:[A]},u!==null&&(u=qs(u),u!==null&&yd(u)),a):(a.eventSystemFlags|=w,u=a.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),a)}function Hv(a,u,g,w,A){switch(u){case"focusin":return Es=ca(Es,a,u,g,w,A),!0;case"dragenter":return Wt=ca(Wt,a,u,g,w,A),!0;case"mouseover":return zs=ca(zs,a,u,g,w,A),!0;case"pointerover":var N=A.pointerId;return ua.set(N,ca(ua.get(N)||null,a,u,g,w,A)),!0;case"gotpointercapture":return N=A.pointerId,dl.set(N,ca(dl.get(N)||null,a,u,g,w,A)),!0}return!1}function ih(a){var u=zo(a.target);if(u!==null){var g=at(u);if(g!==null){if(u=g.tag,u===13){if(u=wt(g),u!==null){a.blockedOn=u,th(a.priority,function(){hg(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){a.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}a.blockedOn=null}function rh(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var g=kr(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(g===null){g=a.nativeEvent;var w=new g.constructor(g.type,g);Pn=w,g.target.dispatchEvent(w),Pn=null}else return u=qs(g),u!==null&&yd(u),a.blockedOn=g,!1;u.shift()}return!0}function Mu(a,u,g){rh(a)&&g.delete(u)}function bs(){la=!1,Es!==null&&rh(Es)&&(Es=null),Wt!==null&&rh(Wt)&&(Wt=null),zs!==null&&rh(zs)&&(zs=null),ua.forEach(Mu),dl.forEach(Mu)}function Eu(a,u){a.blockedOn===u&&(a.blockedOn=null,la||(la=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bs)))}function bu(a){function u(A){return Eu(A,a)}if(0<nh.length){Eu(nh[0],a);for(var g=1;g<nh.length;g++){var w=nh[g];w.blockedOn===a&&(w.blockedOn=null)}}for(Es!==null&&Eu(Es,a),Wt!==null&&Eu(Wt,a),zs!==null&&Eu(zs,a),ua.forEach(u),dl.forEach(u),g=0;g<Io.length;g++)w=Io[g],w.blockedOn===a&&(w.blockedOn=null);for(;0<Io.length&&(g=Io[0],g.blockedOn===null);)ih(g),g.blockedOn===null&&Io.shift()}var Vi=P.ReactCurrentBatchConfig,Dr=!0;function sh(a,u,g,w){var A=sn,N=Vi.transition;Vi.transition=null;try{sn=1,oh(a,u,g,w)}finally{sn=A,Vi.transition=N}}function vd(a,u,g,w){var A=sn,N=Vi.transition;Vi.transition=null;try{sn=4,oh(a,u,g,w)}finally{sn=A,Vi.transition=N}}function oh(a,u,g,w){if(Dr){var A=kr(a,u,g,w);if(A===null)Th(a,u,w,ah,g),ii(a,w);else if(Hv(A,a,u,g,w))w.stopPropagation();else if(ii(a,w),u&4&&-1<Vv.indexOf(a)){for(;A!==null;){var N=qs(A);if(N!==null&&Su(N),N=kr(a,u,g,w),N===null&&Th(a,u,w,ah,g),N===A)break;A=N}A!==null&&w.stopPropagation()}else Th(a,u,w,null,g)}}var ah=null;function kr(a,u,g,w){if(ah=null,a=le(w),a=zo(a),a!==null)if(u=at(a),u===null)a=null;else if(g=u.tag,g===13){if(a=wt(u),a!==null)return a;a=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return ah=a,null}function fg(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sn()){case Ft:return 1;case No:return 4;case Dn:case Zr:return 16;case Ms:return 536870912;default:return 16}default:return 16}}var ts=null,xd=null,tr=null;function Tu(){if(tr)return tr;var a,u=xd,g=u.length,w,A="value"in ts?ts.value:ts.textContent,N=A.length;for(a=0;a<g&&u[a]===A[a];a++);var O=g-a;for(w=1;w<=O&&u[g-w]===A[N-w];w++);return tr=A.slice(a,1<w?1-w:void 0)}function ha(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Vs(){return!0}function lh(){return!1}function Hi(a){function u(g,w,A,N,O){this._reactName=g,this._targetInst=A,this.type=w,this.nativeEvent=N,this.target=O,this.currentTarget=null;for(var Q in a)a.hasOwnProperty(Q)&&(g=a[Q],this[Q]=g?g(N):N[Q]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Vs:lh,this.isPropagationStopped=lh,this}return $(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),u}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Au=Hi(fa),da=$({},fa,{view:0,detail:0}),pl=Hi(da),nr,Ur,Or,ml=$({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ko,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Or&&(Or&&a.type==="mousemove"?(nr=a.screenX-Or.screenX,Ur=a.screenY-Or.screenY):Ur=nr=0,Or=a),nr)},movementY:function(a){return"movementY"in a?a.movementY:Ur}}),_d=Hi(ml),Hs=$({},ml,{dataTransfer:0}),Do=Hi(Hs),uh=$({},da,{relatedTarget:0}),ch=Hi(uh),hh=$({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),dg=Hi(hh),pg=$({},fa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),wd=Hi(pg),fh=$({},fa,{data:0}),Sd=Hi(fh),mg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gl(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Md[a])?!!u[a]:!1}function ko(){return gl}var dh=$({},da,{key:function(a){if(a.key){var u=mg[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=ha(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?gg[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ko,charCode:function(a){return a.type==="keypress"?ha(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ha(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ph=Hi(dh),Fr=$({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gr=Hi(Fr),pa=$({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ko}),Ws=Hi(pa),Gs=$({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ma=Hi(Gs),yg=$({},ml,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ed=Hi(yg),bd=[9,13,27,32],Wi=l&&"CompositionEvent"in window,_i=null;l&&"documentMode"in document&&(_i=document.documentMode);var Ln=l&&"TextEvent"in window&&!_i,yl=l&&(!Wi||_i&&8<_i&&11>=_i),Br=" ",Td=!1;function Ad(a,u){switch(a){case"keyup":return bd.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Uo=!1;function vg(a,u){switch(a){case"compositionend":return mh(u);case"keypress":return u.which!==32?null:(Td=!0,Br);case"textInput":return a=u.data,a===Br&&Td?null:a;default:return null}}function Cu(a,u){if(Uo)return a==="compositionend"||!Wi&&Ad(a,u)?(a=Tu(),tr=xd=ts=null,Uo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return yl&&u.locale!=="ko"?null:u.data;default:return null}}var vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gh(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!vl[a.type]:u==="textarea"}function xl(a,u,g,w){an(w),u=Ah(u,"onChange"),0<u.length&&(g=new Au("onChange","change",null,g,w),a.push({event:g,listeners:u}))}var Oo=null,_l=null;function xg(a){El(a,0)}function js(a){var u=Hn(a);if(Re(u))return a}function _g(a,u){if(a==="change")return u}var wl=!1;if(l){var ir;if(l){var ga="oninput"in document;if(!ga){var ya=document.createElement("div");ya.setAttribute("oninput","return;"),ga=typeof ya.oninput=="function"}ir=ga}else ir=!1;wl=ir&&(!document.documentMode||9<document.documentMode)}function ns(){Oo&&(Oo.detachEvent("onpropertychange",yh),_l=Oo=null)}function yh(a){if(a.propertyName==="value"&&js(_l)){var u=[];xl(u,_l,a,le(a)),Ni(xg,u)}}function Sl(a,u,g){a==="focusin"?(ns(),Oo=u,_l=g,Oo.attachEvent("onpropertychange",yh)):a==="focusout"&&ns()}function wg(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return js(_l)}function Cd(a,u){if(a==="click")return js(u)}function kn(a,u){if(a==="input"||a==="change")return js(u)}function vh(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var yr=typeof Object.is=="function"?Object.is:vh;function va(a,u){if(yr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var g=Object.keys(a),w=Object.keys(u);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var A=g[w];if(!c.call(u,A)||!yr(a[A],u[A]))return!1}return!0}function Pu(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vr(a,u){var g=Pu(a);a=0;for(var w;g;){if(g.nodeType===3){if(w=a+g.textContent.length,a<=u&&w>=u)return{node:g,offset:u-a};a=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Pu(g)}}function xa(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?xa(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function Un(){for(var a=window,u=Se();u instanceof a.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)a=u.contentWindow;else break;u=Se(a.document)}return u}function ci(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function hi(a){var u=Un(),g=a.focusedElem,w=a.selectionRange;if(u!==g&&g&&g.ownerDocument&&xa(g.ownerDocument.documentElement,g)){if(w!==null&&ci(g)){if(u=w.start,a=w.end,a===void 0&&(a=u),"selectionStart"in g)g.selectionStart=u,g.selectionEnd=Math.min(a,g.value.length);else if(a=(u=g.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var A=g.textContent.length,N=Math.min(w.start,A);w=w.end===void 0?N:Math.min(w.end,A),!a.extend&&N>w&&(A=w,w=N,N=A),A=vr(g,N);var O=vr(g,w);A&&O&&(a.rangeCount!==1||a.anchorNode!==A.node||a.anchorOffset!==A.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(u=u.createRange(),u.setStart(A.node,A.offset),a.removeAllRanges(),N>w?(a.addRange(u),a.extend(O.node,O.offset)):(u.setEnd(O.node,O.offset),a.addRange(u)))}}for(u=[],a=g;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<u.length;g++)a=u[g],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var xh=l&&"documentMode"in document&&11>=document.documentMode,Ts=null,_a=null,Ru=null,fi=!1;function _h(a,u,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;fi||Ts==null||Ts!==Se(w)||(w=Ts,"selectionStart"in w&&ci(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ru&&va(Ru,w)||(Ru=w,w=Ah(_a,"onSelect"),0<w.length&&(u=new Au("onSelect","select",null,u,g),a.push({event:u,listeners:w}),u.target=Ts)))}function Ml(a,u){var g={};return g[a.toLowerCase()]=u.toLowerCase(),g["Webkit"+a]="webkit"+u,g["Moz"+a]="moz"+u,g}var Fo={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},is={},rs={};l&&(rs=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function As(a){if(is[a])return is[a];if(!Fo[a])return a;var u=Fo[a],g;for(g in u)if(u.hasOwnProperty(g)&&g in rs)return is[a]=u[g];return a}var Nu=As("animationend"),Lu=As("animationiteration"),Pd=As("animationstart"),Rd=As("transitionend"),Nd=new Map,Ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(a,u){Nd.set(a,u),s(u,[a])}for(var wh=0;wh<Ld.length;wh++){var Iu=Ld[wh],Du=Iu.toLowerCase(),Sg=Iu[0].toUpperCase()+Iu.slice(1);Xs(Du,"on"+Sg)}Xs(Nu,"onAnimationEnd"),Xs(Lu,"onAnimationIteration"),Xs(Pd,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(Rd,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function Mh(a,u,g){var w=a.type||"unknown-event";a.currentTarget=g,Pe(w,u,void 0,a),a.currentTarget=null}function El(a,u){u=(u&4)!==0;for(var g=0;g<a.length;g++){var w=a[g],A=w.event;w=w.listeners;e:{var N=void 0;if(u)for(var O=w.length-1;0<=O;O--){var Q=w[O],oe=Q.instance,xe=Q.currentTarget;if(Q=Q.listener,oe!==N&&A.isPropagationStopped())break e;Mh(A,Q,xe),N=oe}else for(O=0;O<w.length;O++){if(Q=w[O],oe=Q.instance,xe=Q.currentTarget,Q=Q.listener,oe!==N&&A.isPropagationStopped())break e;Mh(A,Q,xe),N=oe}}}if(j)throw a=ye,j=!1,ye=null,a}function En(a,u){var g=u[Ma];g===void 0&&(g=u[Ma]=new Set);var w=a+"__bubble";g.has(w)||(bh(u,a,2,!1),g.add(w))}function Eh(a,u,g){var w=0;u&&(w|=4),bh(g,a,w,u)}var ku="_reactListening"+Math.random().toString(36).slice(2);function bl(a){if(!a[ku]){a[ku]=!0,i.forEach(function(g){g!=="selectionchange"&&(Sh.has(g)||Eh(g,!1,a),Eh(g,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[ku]||(u[ku]=!0,Eh("selectionchange",!1,u))}}function bh(a,u,g,w){switch(fg(u)){case 1:var A=sh;break;case 4:A=vd;break;default:A=oh}g=A.bind(null,u,g,a),A=void 0,!Po||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),w?A!==void 0?a.addEventListener(u,g,{capture:!0,passive:A}):a.addEventListener(u,g,!0):A!==void 0?a.addEventListener(u,g,{passive:A}):a.addEventListener(u,g,!1)}function Th(a,u,g,w,A){var N=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var O=w.tag;if(O===3||O===4){var Q=w.stateNode.containerInfo;if(Q===A||Q.nodeType===8&&Q.parentNode===A)break;if(O===4)for(O=w.return;O!==null;){var oe=O.tag;if((oe===3||oe===4)&&(oe=O.stateNode.containerInfo,oe===A||oe.nodeType===8&&oe.parentNode===A))return;O=O.return}for(;Q!==null;){if(O=zo(Q),O===null)return;if(oe=O.tag,oe===5||oe===6){w=N=O;continue e}Q=Q.parentNode}}w=w.return}Ni(function(){var xe=N,Ue=le(g),Be=[];e:{var ke=Nd.get(a);if(ke!==void 0){var Ze=Au,ot=a;switch(a){case"keypress":if(ha(g)===0)break e;case"keydown":case"keyup":Ze=ph;break;case"focusin":ot="focus",Ze=ch;break;case"focusout":ot="blur",Ze=ch;break;case"beforeblur":case"afterblur":Ze=ch;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=_d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Do;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=Ws;break;case Nu:case Lu:case Pd:Ze=dg;break;case Rd:Ze=ma;break;case"scroll":Ze=pl;break;case"wheel":Ze=Ed;break;case"copy":case"cut":case"paste":Ze=wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=gr}var lt=(u&4)!==0,si=!lt&&a==="scroll",pe=lt?ke!==null?ke+"Capture":null:ke;lt=[];for(var ue=xe,ge;ue!==null;){ge=ue;var He=ge.stateNode;if(ge.tag===5&&He!==null&&(ge=He,pe!==null&&(He=Li(ue,pe),He!=null&&lt.push(Tl(ue,He,ge)))),si)break;ue=ue.return}0<lt.length&&(ke=new Ze(ke,ot,null,g,Ue),Be.push({event:ke,listeners:lt}))}}if((u&7)===0){e:{if(ke=a==="mouseover"||a==="pointerover",Ze=a==="mouseout"||a==="pointerout",ke&&g!==Pn&&(ot=g.relatedTarget||g.fromElement)&&(zo(ot)||ot[xr]))break e;if((Ze||ke)&&(ke=Ue.window===Ue?Ue:(ke=Ue.ownerDocument)?ke.defaultView||ke.parentWindow:window,Ze?(ot=g.relatedTarget||g.toElement,Ze=xe,ot=ot?zo(ot):null,ot!==null&&(si=at(ot),ot!==si||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(Ze=null,ot=xe),Ze!==ot)){if(lt=_d,He="onMouseLeave",pe="onMouseEnter",ue="mouse",(a==="pointerout"||a==="pointerover")&&(lt=gr,He="onPointerLeave",pe="onPointerEnter",ue="pointer"),si=Ze==null?ke:Hn(Ze),ge=ot==null?ke:Hn(ot),ke=new lt(He,ue+"leave",Ze,g,Ue),ke.target=si,ke.relatedTarget=ge,He=null,zo(Ue)===xe&&(lt=new lt(pe,ue+"enter",ot,g,Ue),lt.target=ge,lt.relatedTarget=si,He=lt),si=He,Ze&&ot)t:{for(lt=Ze,pe=ot,ue=0,ge=lt;ge;ge=wa(ge))ue++;for(ge=0,He=pe;He;He=wa(He))ge++;for(;0<ue-ge;)lt=wa(lt),ue--;for(;0<ge-ue;)pe=wa(pe),ge--;for(;ue--;){if(lt===pe||pe!==null&&lt===pe.alternate)break t;lt=wa(lt),pe=wa(pe)}lt=null}else lt=null;Ze!==null&&Mg(Be,ke,Ze,lt,!1),ot!==null&&si!==null&&Mg(Be,si,ot,lt,!0)}}e:{if(ke=xe?Hn(xe):window,Ze=ke.nodeName&&ke.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&ke.type==="file")var ft=_g;else if(gh(ke))if(wl)ft=kn;else{ft=wg;var Mt=Sl}else(Ze=ke.nodeName)&&Ze.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(ft=Cd);if(ft&&(ft=ft(a,xe))){xl(Be,ft,g,Ue);break e}Mt&&Mt(a,ke,xe),a==="focusout"&&(Mt=ke._wrapperState)&&Mt.controlled&&ke.type==="number"&&pt(ke,"number",ke.value)}switch(Mt=xe?Hn(xe):window,a){case"focusin":(gh(Mt)||Mt.contentEditable==="true")&&(Ts=Mt,_a=xe,Ru=null);break;case"focusout":Ru=_a=Ts=null;break;case"mousedown":fi=!0;break;case"contextmenu":case"mouseup":case"dragend":fi=!1,_h(Be,g,Ue);break;case"selectionchange":if(xh)break;case"keydown":case"keyup":_h(Be,g,Ue)}var Et;if(Wi)e:{switch(a){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Uo?Ad(a,g)&&(Pt="onCompositionEnd"):a==="keydown"&&g.keyCode===229&&(Pt="onCompositionStart");Pt&&(yl&&g.locale!=="ko"&&(Uo||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Uo&&(Et=Tu()):(ts=Ue,xd="value"in ts?ts.value:ts.textContent,Uo=!0)),Mt=Ah(xe,Pt),0<Mt.length&&(Pt=new Sd(Pt,a,null,g,Ue),Be.push({event:Pt,listeners:Mt}),Et?Pt.data=Et:(Et=mh(g),Et!==null&&(Pt.data=Et)))),(Et=Ln?vg(a,g):Cu(a,g))&&(xe=Ah(xe,"onBeforeInput"),0<xe.length&&(Ue=new Sd("onBeforeInput","beforeinput",null,g,Ue),Be.push({event:Ue,listeners:xe}),Ue.data=Et))}El(Be,u)})}function Tl(a,u,g){return{instance:a,listener:u,currentTarget:g}}function Ah(a,u){for(var g=u+"Capture",w=[];a!==null;){var A=a,N=A.stateNode;A.tag===5&&N!==null&&(A=N,N=Li(a,g),N!=null&&w.unshift(Tl(a,N,A)),N=Li(a,u),N!=null&&w.push(Tl(a,N,A))),a=a.return}return w}function wa(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Mg(a,u,g,w,A){for(var N=u._reactName,O=[];g!==null&&g!==w;){var Q=g,oe=Q.alternate,xe=Q.stateNode;if(oe!==null&&oe===w)break;Q.tag===5&&xe!==null&&(Q=xe,A?(oe=Li(g,N),oe!=null&&O.unshift(Tl(g,oe,Q))):A||(oe=Li(g,N),oe!=null&&O.push(Tl(g,oe,Q)))),g=g.return}O.length!==0&&a.push({event:u,listeners:O})}var Wv=/\r\n?/g,Eg=/\u0000|\uFFFD/g;function Id(a){return(typeof a=="string"?a:""+a).replace(Wv,`
`).replace(Eg,"")}function Uu(a,u,g){if(u=Id(u),Id(a)!==u&&g)throw Error(t(425))}function Ou(){}var Al=null,Dd=null;function kd(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ud=typeof setTimeout=="function"?setTimeout:void 0,Od=typeof clearTimeout=="function"?clearTimeout:void 0,Ch=typeof Promise=="function"?Promise:void 0,Gv=typeof queueMicrotask=="function"?queueMicrotask:typeof Ch<"u"?function(a){return Ch.resolve(null).then(a).catch(bg)}:Ud;function bg(a){setTimeout(function(){throw a})}function Ph(a,u){var g=u,w=0;do{var A=g.nextSibling;if(a.removeChild(g),A&&A.nodeType===8)if(g=A.data,g==="/$"){if(w===0){a.removeChild(A),bu(u);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=A}while(g);bu(u)}function $s(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function Fd(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var g=a.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return a;u--}else g==="/$"&&u++}a=a.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),ri="__reactFiber$"+Sa,Cl="__reactProps$"+Sa,xr="__reactContainer$"+Sa,Ma="__reactEvents$"+Sa,Rh="__reactListeners$"+Sa,Nh="__reactHandles$"+Sa;function zo(a){var u=a[ri];if(u)return u;for(var g=a.parentNode;g;){if(u=g[xr]||g[ri]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(a=Fd(a);a!==null;){if(g=a[ri])return g;a=Fd(a)}return u}a=g,g=a.parentNode}return null}function qs(a){return a=a[ri]||a[xr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Hn(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Lh(a){return a[Cl]||null}var Bd=[],di=-1;function Fn(a){return{current:a}}function bn(a){0>di||(a.current=Bd[di],Bd[di]=null,di--)}function xn(a,u){di++,Bd[di]=a.current,a.current=u}var Ys={},wi=Fn(Ys),Gi=Fn(!1),Ks=Ys;function Ea(a,u){var g=a.type.contextTypes;if(!g)return Ys;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===u)return w.__reactInternalMemoizedMaskedChildContext;var A={},N;for(N in g)A[N]=u[N];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=A),A}function Ii(a){return a=a.childContextTypes,a!=null}function Fu(){bn(Gi),bn(wi)}function zd(a,u,g){if(wi.current!==Ys)throw Error(t(168));xn(wi,u),xn(Gi,g)}function Bu(a,u,g){var w=a.stateNode;if(u=u.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var A in w)if(!(A in u))throw Error(t(108,ee(a)||"Unknown",A));return $({},g,w)}function ba(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ys,Ks=wi.current,xn(wi,a),xn(Gi,Gi.current),!0}function Vd(a,u,g){var w=a.stateNode;if(!w)throw Error(t(169));g?(a=Bu(a,u,Ks),w.__reactInternalMemoizedMergedChildContext=a,bn(Gi),bn(wi),xn(wi,a)):bn(Gi),xn(Gi,g)}var ss=null,zu=!1,Ih=!1;function Vu(a){ss===null?ss=[a]:ss.push(a)}function Tg(a){zu=!0,Vu(a)}function Cs(){if(!Ih&&ss!==null){Ih=!0;var a=0,u=sn;try{var g=ss;for(sn=1;a<g.length;a++){var w=g[a];do w=w(!0);while(w!==null)}ss=null,zu=!1}catch(A){throw ss!==null&&(ss=ss.slice(a+1)),Ht(Ft,Cs),A}finally{sn=u,Ih=!1}}return null}var Ta=[],rr=0,Dh=null,kh=0,ji=[],pi=0,Aa=null,We=1,zr="";function Js(a,u){Ta[rr++]=kh,Ta[rr++]=Dh,Dh=a,kh=u}function Hd(a,u,g){ji[pi++]=We,ji[pi++]=zr,ji[pi++]=Aa,Aa=a;var w=We;a=zr;var A=32-Mn(w)-1;w&=~(1<<A),g+=1;var N=32-Mn(u)+A;if(30<N){var O=A-A%5;N=(w&(1<<O)-1).toString(32),w>>=O,A-=O,We=1<<32-Mn(u)+A|g<<A|w,zr=N+a}else We=1<<N|g<<A|w,zr=a}function Wd(a){a.return!==null&&(Js(a,1),Hd(a,1,0))}function Zs(a){for(;a===Dh;)Dh=Ta[--rr],Ta[rr]=null,kh=Ta[--rr],Ta[rr]=null;for(;a===Aa;)Aa=ji[--pi],ji[pi]=null,zr=ji[--pi],ji[pi]=null,We=ji[--pi],ji[pi]=null}var Si=null,Xi=null,Rn=!1,Vr=null;function Gd(a,u){var g=Is(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=a,u=a.deletions,u===null?(a.deletions=[g],a.flags|=16):u.push(g)}function jd(a,u){switch(a.tag){case 5:var g=a.type;return u=u.nodeType!==1||g.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,Si=a,Xi=$s(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,Si=a,Xi=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(g=Aa!==null?{id:We,overflow:zr}:null,a.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},g=Is(18,null,null,0),g.stateNode=u,g.return=a,a.child=g,Si=a,Xi=null,!0):!1;default:return!1}}function Uh(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Oh(a){if(Rn){var u=Xi;if(u){var g=u;if(!jd(a,u)){if(Uh(a))throw Error(t(418));u=$s(g.nextSibling);var w=Si;u&&jd(a,u)?Gd(w,g):(a.flags=a.flags&-4097|2,Rn=!1,Si=a)}}else{if(Uh(a))throw Error(t(418));a.flags=a.flags&-4097|2,Rn=!1,Si=a}}}function Fh(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Si=a}function Pl(a){if(a!==Si)return!1;if(!Rn)return Fh(a),Rn=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!kd(a.type,a.memoizedProps)),u&&(u=Xi)){if(Uh(a))throw Xd(),Error(t(418));for(;u;)Gd(a,u),u=$s(u.nextSibling)}if(Fh(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var g=a.data;if(g==="/$"){if(u===0){Xi=$s(a.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++}a=a.nextSibling}Xi=null}}else Xi=Si?$s(a.stateNode.nextSibling):null;return!0}function Xd(){for(var a=Xi;a;)a=$s(a.nextSibling)}function Vo(){Xi=Si=null,Rn=!1}function Rl(a){Vr===null?Vr=[a]:Vr.push(a)}var jv=P.ReactCurrentBatchConfig;function Hu(a,u,g){if(a=g.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var w=g.stateNode}if(!w)throw Error(t(147,a));var A=w,N=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===N?u.ref:(u=function(O){var Q=A.refs;O===null?delete Q[N]:Q[N]=O},u._stringRef=N,u)}if(typeof a!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,a))}return a}function Wu(a,u){throw a=Object.prototype.toString.call(u),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function $d(a){var u=a._init;return u(a._payload)}function qd(a){function u(pe,ue){if(a){var ge=pe.deletions;ge===null?(pe.deletions=[ue],pe.flags|=16):ge.push(ue)}}function g(pe,ue){if(!a)return null;for(;ue!==null;)u(pe,ue),ue=ue.sibling;return null}function w(pe,ue){for(pe=new Map;ue!==null;)ue.key!==null?pe.set(ue.key,ue):pe.set(ue.index,ue),ue=ue.sibling;return pe}function A(pe,ue){return pe=Vl(pe,ue),pe.index=0,pe.sibling=null,pe}function N(pe,ue,ge){return pe.index=ge,a?(ge=pe.alternate,ge!==null?(ge=ge.index,ge<ue?(pe.flags|=2,ue):ge):(pe.flags|=2,ue)):(pe.flags|=1048576,ue)}function O(pe){return a&&pe.alternate===null&&(pe.flags|=2),pe}function Q(pe,ue,ge,He){return ue===null||ue.tag!==6?(ue=cx(ge,pe.mode,He),ue.return=pe,ue):(ue=A(ue,ge),ue.return=pe,ue)}function oe(pe,ue,ge,He){var ft=ge.type;return ft===B?Ue(pe,ue,ge.props.children,He,ge.key):ue!==null&&(ue.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ne&&$d(ft)===ue.type)?(He=A(ue,ge.props),He.ref=Hu(pe,ue,ge),He.return=pe,He):(He=Yg(ge.type,ge.key,ge.props,null,pe.mode,He),He.ref=Hu(pe,ue,ge),He.return=pe,He)}function xe(pe,ue,ge,He){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ge.containerInfo||ue.stateNode.implementation!==ge.implementation?(ue=hx(ge,pe.mode,He),ue.return=pe,ue):(ue=A(ue,ge.children||[]),ue.return=pe,ue)}function Ue(pe,ue,ge,He,ft){return ue===null||ue.tag!==7?(ue=oc(ge,pe.mode,He,ft),ue.return=pe,ue):(ue=A(ue,ge),ue.return=pe,ue)}function Be(pe,ue,ge){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=cx(""+ue,pe.mode,ge),ue.return=pe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case I:return ge=Yg(ue.type,ue.key,ue.props,null,pe.mode,ge),ge.ref=Hu(pe,null,ue),ge.return=pe,ge;case k:return ue=hx(ue,pe.mode,ge),ue.return=pe,ue;case ne:var He=ue._init;return Be(pe,He(ue._payload),ge)}if(bt(ue)||te(ue))return ue=oc(ue,pe.mode,ge,null),ue.return=pe,ue;Wu(pe,ue)}return null}function ke(pe,ue,ge,He){var ft=ue!==null?ue.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ft!==null?null:Q(pe,ue,""+ge,He);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case I:return ge.key===ft?oe(pe,ue,ge,He):null;case k:return ge.key===ft?xe(pe,ue,ge,He):null;case ne:return ft=ge._init,ke(pe,ue,ft(ge._payload),He)}if(bt(ge)||te(ge))return ft!==null?null:Ue(pe,ue,ge,He,null);Wu(pe,ge)}return null}function Ze(pe,ue,ge,He,ft){if(typeof He=="string"&&He!==""||typeof He=="number")return pe=pe.get(ge)||null,Q(ue,pe,""+He,ft);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case I:return pe=pe.get(He.key===null?ge:He.key)||null,oe(ue,pe,He,ft);case k:return pe=pe.get(He.key===null?ge:He.key)||null,xe(ue,pe,He,ft);case ne:var Mt=He._init;return Ze(pe,ue,ge,Mt(He._payload),ft)}if(bt(He)||te(He))return pe=pe.get(ge)||null,Ue(ue,pe,He,ft,null);Wu(ue,He)}return null}function ot(pe,ue,ge,He){for(var ft=null,Mt=null,Et=ue,Pt=ue=0,Oi=null;Et!==null&&Pt<ge.length;Pt++){Et.index>Pt?(Oi=Et,Et=null):Oi=Et.sibling;var dn=ke(pe,Et,ge[Pt],He);if(dn===null){Et===null&&(Et=Oi);break}a&&Et&&dn.alternate===null&&u(pe,Et),ue=N(dn,ue,Pt),Mt===null?ft=dn:Mt.sibling=dn,Mt=dn,Et=Oi}if(Pt===ge.length)return g(pe,Et),Rn&&Js(pe,Pt),ft;if(Et===null){for(;Pt<ge.length;Pt++)Et=Be(pe,ge[Pt],He),Et!==null&&(ue=N(Et,ue,Pt),Mt===null?ft=Et:Mt.sibling=Et,Mt=Et);return Rn&&Js(pe,Pt),ft}for(Et=w(pe,Et);Pt<ge.length;Pt++)Oi=Ze(Et,pe,Pt,ge[Pt],He),Oi!==null&&(a&&Oi.alternate!==null&&Et.delete(Oi.key===null?Pt:Oi.key),ue=N(Oi,ue,Pt),Mt===null?ft=Oi:Mt.sibling=Oi,Mt=Oi);return a&&Et.forEach(function(Hl){return u(pe,Hl)}),Rn&&Js(pe,Pt),ft}function lt(pe,ue,ge,He){var ft=te(ge);if(typeof ft!="function")throw Error(t(150));if(ge=ft.call(ge),ge==null)throw Error(t(151));for(var Mt=ft=null,Et=ue,Pt=ue=0,Oi=null,dn=ge.next();Et!==null&&!dn.done;Pt++,dn=ge.next()){Et.index>Pt?(Oi=Et,Et=null):Oi=Et.sibling;var Hl=ke(pe,Et,dn.value,He);if(Hl===null){Et===null&&(Et=Oi);break}a&&Et&&Hl.alternate===null&&u(pe,Et),ue=N(Hl,ue,Pt),Mt===null?ft=Hl:Mt.sibling=Hl,Mt=Hl,Et=Oi}if(dn.done)return g(pe,Et),Rn&&Js(pe,Pt),ft;if(Et===null){for(;!dn.done;Pt++,dn=ge.next())dn=Be(pe,dn.value,He),dn!==null&&(ue=N(dn,ue,Pt),Mt===null?ft=dn:Mt.sibling=dn,Mt=dn);return Rn&&Js(pe,Pt),ft}for(Et=w(pe,Et);!dn.done;Pt++,dn=ge.next())dn=Ze(Et,pe,Pt,dn.value,He),dn!==null&&(a&&dn.alternate!==null&&Et.delete(dn.key===null?Pt:dn.key),ue=N(dn,ue,Pt),Mt===null?ft=dn:Mt.sibling=dn,Mt=dn);return a&&Et.forEach(function(RL){return u(pe,RL)}),Rn&&Js(pe,Pt),ft}function si(pe,ue,ge,He){if(typeof ge=="object"&&ge!==null&&ge.type===B&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case I:e:{for(var ft=ge.key,Mt=ue;Mt!==null;){if(Mt.key===ft){if(ft=ge.type,ft===B){if(Mt.tag===7){g(pe,Mt.sibling),ue=A(Mt,ge.props.children),ue.return=pe,pe=ue;break e}}else if(Mt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===ne&&$d(ft)===Mt.type){g(pe,Mt.sibling),ue=A(Mt,ge.props),ue.ref=Hu(pe,Mt,ge),ue.return=pe,pe=ue;break e}g(pe,Mt);break}else u(pe,Mt);Mt=Mt.sibling}ge.type===B?(ue=oc(ge.props.children,pe.mode,He,ge.key),ue.return=pe,pe=ue):(He=Yg(ge.type,ge.key,ge.props,null,pe.mode,He),He.ref=Hu(pe,ue,ge),He.return=pe,pe=He)}return O(pe);case k:e:{for(Mt=ge.key;ue!==null;){if(ue.key===Mt)if(ue.tag===4&&ue.stateNode.containerInfo===ge.containerInfo&&ue.stateNode.implementation===ge.implementation){g(pe,ue.sibling),ue=A(ue,ge.children||[]),ue.return=pe,pe=ue;break e}else{g(pe,ue);break}else u(pe,ue);ue=ue.sibling}ue=hx(ge,pe.mode,He),ue.return=pe,pe=ue}return O(pe);case ne:return Mt=ge._init,si(pe,ue,Mt(ge._payload),He)}if(bt(ge))return ot(pe,ue,ge,He);if(te(ge))return lt(pe,ue,ge,He);Wu(pe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ue!==null&&ue.tag===6?(g(pe,ue.sibling),ue=A(ue,ge),ue.return=pe,pe=ue):(g(pe,ue),ue=cx(ge,pe.mode,He),ue.return=pe,pe=ue),O(pe)):g(pe,ue)}return si}var Ca=qd(!0),Gu=qd(!1),Pa=Fn(null),Ra=null,Qs=null,Nl=null;function Na(){Nl=Qs=Ra=null}function ju(a){var u=Pa.current;bn(Pa),a._currentValue=u}function Xu(a,u,g){for(;a!==null;){var w=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),a===g)break;a=a.return}}function Ho(a,u){Ra=a,Nl=Qs=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(Bt=!0),a.firstContext=null)}function _r(a){var u=a._currentValue;if(Nl!==a)if(a={context:a,memoizedValue:u,next:null},Qs===null){if(Ra===null)throw Error(t(308));Qs=a,Ra.dependencies={lanes:0,firstContext:a}}else Qs=Qs.next=a;return u}var eo=null;function Yd(a){eo===null?eo=[a]:eo.push(a)}function $u(a,u,g,w){var A=u.interleaved;return A===null?(g.next=g,Yd(u)):(g.next=A.next,A.next=g),u.interleaved=g,os(a,w)}function os(a,u){a.lanes|=u;var g=a.alternate;for(g!==null&&(g.lanes|=u),g=a,a=a.return;a!==null;)a.childLanes|=u,g=a.alternate,g!==null&&(g.childLanes|=u),g=a,a=a.return;return g.tag===3?g.stateNode:null}var yn=!1;function kt(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wn(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function vn(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function In(a,u,g){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,(hn&2)!==0){var A=w.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),w.pending=u,os(a,g)}return A=w.interleaved,A===null?(u.next=u,Yd(w)):(u.next=A.next,A.next=u),w.interleaved=u,os(a,g)}function Di(a,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194240)!==0)){var w=u.lanes;w&=a.pendingLanes,g|=w,u.lanes=g,hl(a,g)}}function La(a,u){var g=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var A=null,N=null;if(g=g.firstBaseUpdate,g!==null){do{var O={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};N===null?A=N=O:N=N.next=O,g=g.next}while(g!==null);N===null?A=N=u:N=N.next=u}else A=N=u;g={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:N,shared:w.shared,effects:w.effects},a.updateQueue=g;return}a=g.lastBaseUpdate,a===null?g.firstBaseUpdate=u:a.next=u,g.lastBaseUpdate=u}function Bn(a,u,g,w){var A=a.updateQueue;yn=!1;var N=A.firstBaseUpdate,O=A.lastBaseUpdate,Q=A.shared.pending;if(Q!==null){A.shared.pending=null;var oe=Q,xe=oe.next;oe.next=null,O===null?N=xe:O.next=xe,O=oe;var Ue=a.alternate;Ue!==null&&(Ue=Ue.updateQueue,Q=Ue.lastBaseUpdate,Q!==O&&(Q===null?Ue.firstBaseUpdate=xe:Q.next=xe,Ue.lastBaseUpdate=oe))}if(N!==null){var Be=A.baseState;O=0,Ue=xe=oe=null,Q=N;do{var ke=Q.lane,Ze=Q.eventTime;if((w&ke)===ke){Ue!==null&&(Ue=Ue.next={eventTime:Ze,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var ot=a,lt=Q;switch(ke=u,Ze=g,lt.tag){case 1:if(ot=lt.payload,typeof ot=="function"){Be=ot.call(Ze,Be,ke);break e}Be=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=lt.payload,ke=typeof ot=="function"?ot.call(Ze,Be,ke):ot,ke==null)break e;Be=$({},Be,ke);break e;case 2:yn=!0}}Q.callback!==null&&Q.lane!==0&&(a.flags|=64,ke=A.effects,ke===null?A.effects=[Q]:ke.push(Q))}else Ze={eventTime:Ze,lane:ke,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Ue===null?(xe=Ue=Ze,oe=Be):Ue=Ue.next=Ze,O|=ke;if(Q=Q.next,Q===null){if(Q=A.shared.pending,Q===null)break;ke=Q,Q=ke.next,ke.next=null,A.lastBaseUpdate=ke,A.shared.pending=null}}while(!0);if(Ue===null&&(oe=Be),A.baseState=oe,A.firstBaseUpdate=xe,A.lastBaseUpdate=Ue,u=A.shared.interleaved,u!==null){A=u;do O|=A.lane,A=A.next;while(A!==u)}else N===null&&(A.shared.lanes=0);nc|=O,a.lanes=O,a.memoizedState=Be}}function Ll(a,u,g){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var w=a[u],A=w.callback;if(A!==null){if(w.callback=null,w=g,typeof A!="function")throw Error(t(191,A));A.call(w)}}}var Ps={},wr=Fn(Ps),Ia=Fn(Ps),to=Fn(Ps);function Yn(a){if(a===Ps)throw Error(t(174));return a}function qu(a,u){switch(xn(to,u),xn(Ia,a),xn(wr,Ps),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Xe(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=Xe(u,a)}bn(wr),xn(wr,u)}function Wo(){bn(wr),bn(Ia),bn(to)}function Da(a){Yn(to.current);var u=Yn(wr.current),g=Xe(u,a.type);u!==g&&(xn(Ia,a),xn(wr,g))}function Il(a){Ia.current===a&&(bn(wr),bn(Ia))}var Nn=Fn(0);function as(a){for(var u=a;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Dl=[];function Rs(){for(var a=0;a<Dl.length;a++)Dl[a]._workInProgressVersionPrimary=null;Dl.length=0}var ka=P.ReactCurrentDispatcher,Ua=P.ReactCurrentBatchConfig,no=0,Tn=null,zn=null,on=null,ls=!1,ki=!1,Go=0,sr=0;function Mi(){throw Error(t(321))}function Yu(a,u){if(u===null)return!1;for(var g=0;g<u.length&&g<a.length;g++)if(!yr(a[g],u[g]))return!1;return!0}function Ku(a,u,g,w,A,N){if(no=N,Tn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ka.current=a===null||a.memoizedState===null?Ig:Dg,a=g(w,A),ki){N=0;do{if(ki=!1,Go=0,25<=N)throw Error(t(301));N+=1,on=zn=null,u.updateQueue=null,ka.current=kg,a=g(w,A)}while(ki)}if(ka.current=jh,u=zn!==null&&zn.next!==null,no=0,on=zn=Tn=null,ls=!1,u)throw Error(t(300));return a}function Kd(){var a=Go!==0;return Go=0,a}function Ei(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Tn.memoizedState=on=a:on=on.next=a,on}function Sr(){if(zn===null){var a=Tn.alternate;a=a!==null?a.memoizedState:null}else a=zn.next;var u=on===null?Tn.memoizedState:on.next;if(u!==null)on=u,zn=a;else{if(a===null)throw Error(t(310));zn=a,a={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},on===null?Tn.memoizedState=on=a:on=on.next=a}return on}function kl(a,u){return typeof u=="function"?u(a):u}function Ju(a){var u=Sr(),g=u.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var w=zn,A=w.baseQueue,N=g.pending;if(N!==null){if(A!==null){var O=A.next;A.next=N.next,N.next=O}w.baseQueue=A=N,g.pending=null}if(A!==null){N=A.next,w=w.baseState;var Q=O=null,oe=null,xe=N;do{var Ue=xe.lane;if((no&Ue)===Ue)oe!==null&&(oe=oe.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),w=xe.hasEagerState?xe.eagerState:a(w,xe.action);else{var Be={lane:Ue,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};oe===null?(Q=oe=Be,O=w):oe=oe.next=Be,Tn.lanes|=Ue,nc|=Ue}xe=xe.next}while(xe!==null&&xe!==N);oe===null?O=w:oe.next=Q,yr(w,u.memoizedState)||(Bt=!0),u.memoizedState=w,u.baseState=O,u.baseQueue=oe,g.lastRenderedState=w}if(a=g.interleaved,a!==null){A=a;do N=A.lane,Tn.lanes|=N,nc|=N,A=A.next;while(A!==a)}else A===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function io(a){var u=Sr(),g=u.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var w=g.dispatch,A=g.pending,N=u.memoizedState;if(A!==null){g.pending=null;var O=A=A.next;do N=a(N,O.action),O=O.next;while(O!==A);yr(N,u.memoizedState)||(Bt=!0),u.memoizedState=N,u.baseQueue===null&&(u.baseState=N),g.lastRenderedState=N}return[N,w]}function Jd(){}function Zd(a,u){var g=Tn,w=Sr(),A=u(),N=!yr(w.memoizedState,A);if(N&&(w.memoizedState=A,Bt=!0),w=w.queue,tp(Ag.bind(null,g,w,a),[a]),w.getSnapshot!==u||N||on!==null&&on.memoizedState.tag&1){if(g.flags|=2048,us(9,Zu.bind(null,g,w,A,u),void 0,null),Ui===null)throw Error(t(349));(no&30)!==0||Bh(g,u,A)}return A}function Bh(a,u,g){a.flags|=16384,a={getSnapshot:u,value:g},u=Tn.updateQueue,u===null?(u={lastEffect:null,stores:null},Tn.updateQueue=u,u.stores=[a]):(g=u.stores,g===null?u.stores=[a]:g.push(a))}function Zu(a,u,g,w){u.value=g,u.getSnapshot=w,Cg(u)&&Qd(a)}function Ag(a,u,g){return g(function(){Cg(u)&&Qd(a)})}function Cg(a){var u=a.getSnapshot;a=a.value;try{var g=u();return!yr(a,g)}catch{return!0}}function Qd(a){var u=os(a,1);u!==null&&lo(u,a,1,-1)}function ep(a){var u=Ei();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:a},u.queue=a,a=a.dispatch=Oa.bind(null,Tn,a),[u.memoizedState,a]}function us(a,u,g,w){return a={tag:a,create:u,destroy:g,deps:w,next:null},u=Tn.updateQueue,u===null?(u={lastEffect:null,stores:null},Tn.updateQueue=u,u.lastEffect=a.next=a):(g=u.lastEffect,g===null?u.lastEffect=a.next=a:(w=g.next,g.next=a,a.next=w,u.lastEffect=a)),a}function Pg(){return Sr().memoizedState}function Ns(a,u,g,w){var A=Ei();Tn.flags|=a,A.memoizedState=us(1|u,g,void 0,w===void 0?null:w)}function Qu(a,u,g,w){var A=Sr();w=w===void 0?null:w;var N=void 0;if(zn!==null){var O=zn.memoizedState;if(N=O.destroy,w!==null&&Yu(w,O.deps)){A.memoizedState=us(u,g,N,w);return}}Tn.flags|=a,A.memoizedState=us(1|u,g,N,w)}function $i(a,u){return Ns(8390656,8,a,u)}function tp(a,u){return Qu(2048,8,a,u)}function np(a,u){return Qu(4,2,a,u)}function Rg(a,u){return Qu(4,4,a,u)}function Ng(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function ip(a,u,g){return g=g!=null?g.concat([a]):null,Qu(4,4,Ng.bind(null,u,a),g)}function zh(){}function Lg(a,u){var g=Sr();u=u===void 0?null:u;var w=g.memoizedState;return w!==null&&u!==null&&Yu(u,w[1])?w[0]:(g.memoizedState=[a,u],a)}function Mr(a,u){var g=Sr();u=u===void 0?null:u;var w=g.memoizedState;return w!==null&&u!==null&&Yu(u,w[1])?w[0]:(a=a(),g.memoizedState=[a,u],a)}function Vh(a,u,g){return(no&21)===0?(a.baseState&&(a.baseState=!1,Bt=!0),a.memoizedState=g):(yr(g,u)||(g=Ir(),Tn.lanes|=g,nc|=g,a.baseState=!0),u)}function Xv(a,u){var g=sn;sn=g!==0&&4>g?g:4,a(!0);var w=Ua.transition;Ua.transition={};try{a(!1),u()}finally{sn=g,Ua.transition=w}}function ro(){return Sr().memoizedState}function Hh(a,u,g){var w=Bl(a);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},ec(a))Wh(u,g);else if(g=$u(a,u,g,w),g!==null){var A=br();lo(g,a,w,A),Gh(g,u,w)}}function Oa(a,u,g){var w=Bl(a),A={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(ec(a))Wh(u,A);else{var N=a.alternate;if(a.lanes===0&&(N===null||N.lanes===0)&&(N=u.lastRenderedReducer,N!==null))try{var O=u.lastRenderedState,Q=N(O,g);if(A.hasEagerState=!0,A.eagerState=Q,yr(Q,O)){var oe=u.interleaved;oe===null?(A.next=A,Yd(u)):(A.next=oe.next,oe.next=A),u.interleaved=A;return}}catch{}finally{}g=$u(a,u,A,w),g!==null&&(A=br(),lo(g,a,w,A),Gh(g,u,w))}}function ec(a){var u=a.alternate;return a===Tn||u!==null&&u===Tn}function Wh(a,u){ki=ls=!0;var g=a.pending;g===null?u.next=u:(u.next=g.next,g.next=u),a.pending=u}function Gh(a,u,g){if((g&4194240)!==0){var w=u.lanes;w&=a.pendingLanes,g|=w,u.lanes=g,hl(a,g)}}var jh={readContext:_r,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},Ig={readContext:_r,useCallback:function(a,u){return Ei().memoizedState=[a,u===void 0?null:u],a},useContext:_r,useEffect:$i,useImperativeHandle:function(a,u,g){return g=g!=null?g.concat([a]):null,Ns(4194308,4,Ng.bind(null,u,a),g)},useLayoutEffect:function(a,u){return Ns(4194308,4,a,u)},useInsertionEffect:function(a,u){return Ns(4,2,a,u)},useMemo:function(a,u){var g=Ei();return u=u===void 0?null:u,a=a(),g.memoizedState=[a,u],a},useReducer:function(a,u,g){var w=Ei();return u=g!==void 0?g(u):u,w.memoizedState=w.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},w.queue=a,a=a.dispatch=Hh.bind(null,Tn,a),[w.memoizedState,a]},useRef:function(a){var u=Ei();return a={current:a},u.memoizedState=a},useState:ep,useDebugValue:zh,useDeferredValue:function(a){return Ei().memoizedState=a},useTransition:function(){var a=ep(!1),u=a[0];return a=Xv.bind(null,a[1]),Ei().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,g){var w=Tn,A=Ei();if(Rn){if(g===void 0)throw Error(t(407));g=g()}else{if(g=u(),Ui===null)throw Error(t(349));(no&30)!==0||Bh(w,u,g)}A.memoizedState=g;var N={value:g,getSnapshot:u};return A.queue=N,$i(Ag.bind(null,w,N,a),[a]),w.flags|=2048,us(9,Zu.bind(null,w,N,g,u),void 0,null),g},useId:function(){var a=Ei(),u=Ui.identifierPrefix;if(Rn){var g=zr,w=We;g=(w&~(1<<32-Mn(w)-1)).toString(32)+g,u=":"+u+"R"+g,g=Go++,0<g&&(u+="H"+g.toString(32)),u+=":"}else g=sr++,u=":"+u+"r"+g.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},Dg={readContext:_r,useCallback:Lg,useContext:_r,useEffect:tp,useImperativeHandle:ip,useInsertionEffect:np,useLayoutEffect:Rg,useMemo:Mr,useReducer:Ju,useRef:Pg,useState:function(){return Ju(kl)},useDebugValue:zh,useDeferredValue:function(a){var u=Sr();return Vh(u,zn.memoizedState,a)},useTransition:function(){var a=Ju(kl)[0],u=Sr().memoizedState;return[a,u]},useMutableSource:Jd,useSyncExternalStore:Zd,useId:ro,unstable_isNewReconciler:!1},kg={readContext:_r,useCallback:Lg,useContext:_r,useEffect:tp,useImperativeHandle:ip,useInsertionEffect:np,useLayoutEffect:Rg,useMemo:Mr,useReducer:io,useRef:Pg,useState:function(){return io(kl)},useDebugValue:zh,useDeferredValue:function(a){var u=Sr();return zn===null?u.memoizedState=a:Vh(u,zn.memoizedState,a)},useTransition:function(){var a=io(kl)[0],u=Sr().memoizedState;return[a,u]},useMutableSource:Jd,useSyncExternalStore:Zd,useId:ro,unstable_isNewReconciler:!1};function Hr(a,u){if(a&&a.defaultProps){u=$({},u),a=a.defaultProps;for(var g in a)u[g]===void 0&&(u[g]=a[g]);return u}return u}function tc(a,u,g,w){u=a.memoizedState,g=g(w,u),g=g==null?u:$({},u,g),a.memoizedState=g,a.lanes===0&&(a.updateQueue.baseState=g)}var Xh={isMounted:function(a){return(a=a._reactInternals)?at(a)===a:!1},enqueueSetState:function(a,u,g){a=a._reactInternals;var w=br(),A=Bl(a),N=vn(w,A);N.payload=u,g!=null&&(N.callback=g),u=In(a,N,A),u!==null&&(lo(u,a,A,w),Di(u,a,A))},enqueueReplaceState:function(a,u,g){a=a._reactInternals;var w=br(),A=Bl(a),N=vn(w,A);N.tag=1,N.payload=u,g!=null&&(N.callback=g),u=In(a,N,A),u!==null&&(lo(u,a,A,w),Di(u,a,A))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var g=br(),w=Bl(a),A=vn(g,w);A.tag=2,u!=null&&(A.callback=u),u=In(a,A,w),u!==null&&(lo(u,a,w,g),Di(u,a,w))}};function Ug(a,u,g,w,A,N,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,N,O):u.prototype&&u.prototype.isPureReactComponent?!va(g,w)||!va(A,N):!0}function h(a,u,g){var w=!1,A=Ys,N=u.contextType;return typeof N=="object"&&N!==null?N=_r(N):(A=Ii(u)?Ks:wi.current,w=u.contextTypes,N=(w=w!=null)?Ea(a,A):Ys),u=new u(g,N),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Xh,a.stateNode=u,u._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=A,a.__reactInternalMemoizedMaskedChildContext=N),u}function f(a,u,g,w){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,w),u.state!==a&&Xh.enqueueReplaceState(u,u.state,null)}function _(a,u,g,w){var A=a.stateNode;A.props=g,A.state=a.memoizedState,A.refs={},kt(a);var N=u.contextType;typeof N=="object"&&N!==null?A.context=_r(N):(N=Ii(u)?Ks:wi.current,A.context=Ea(a,N)),A.state=a.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(tc(a,u,N,g),A.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(u=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),u!==A.state&&Xh.enqueueReplaceState(A,A.state,null),Bn(a,g,A,w),A.state=a.memoizedState),typeof A.componentDidMount=="function"&&(a.flags|=4194308)}function b(a,u){try{var g="",w=u;do g+=Ee(w),w=w.return;while(w);var A=g}catch(N){A=`
Error generating stack: `+N.message+`
`+N.stack}return{value:a,source:u,stack:A,digest:null}}function R(a,u,g){return{value:a,source:null,stack:g??null,digest:u??null}}function D(a,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var q=typeof WeakMap=="function"?WeakMap:Map;function he(a,u,g){g=vn(-1,g),g.tag=3,g.payload={element:null};var w=u.value;return g.callback=function(){Wg||(Wg=!0,nx=w),D(a,u)},g}function Me(a,u,g){g=vn(-1,g),g.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var A=u.value;g.payload=function(){return w(A)},g.callback=function(){D(a,u)}}var N=a.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(g.callback=function(){D(a,u),typeof w!="function"&&(Ol===null?Ol=new Set([this]):Ol.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})}),g}function ze(a,u,g){var w=a.pingCache;if(w===null){w=a.pingCache=new q;var A=new Set;w.set(u,A)}else A=w.get(u),A===void 0&&(A=new Set,w.set(u,A));A.has(g)||(A.add(g),a=xL.bind(null,a,u,g),u.then(a,a))}function it(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function Rt(a,u,g,w,A){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(u=vn(-1,1),u.tag=2,In(g,u,1))),g.lanes|=1),a):(a.flags|=65536,a.lanes=A,a)}var St=P.ReactCurrentOwner,Bt=!1;function Je(a,u,g,w){u.child=a===null?Gu(u,null,g,w):Ca(u,a.child,g,w)}function bi(a,u,g,w,A){g=g.render;var N=u.ref;return Ho(u,A),w=Ku(a,u,g,w,N,A),g=Kd(),a!==null&&!Bt?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~A,Fa(a,u,A)):(Rn&&g&&Wd(u),u.flags|=1,Je(a,u,w,A),u.child)}function Er(a,u,g,w,A){if(a===null){var N=g.type;return typeof N=="function"&&!ux(N)&&N.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(u.tag=15,u.type=N,ve(a,u,N,w,A)):(a=Yg(g.type,null,w,u,u.mode,A),a.ref=u.ref,a.return=u,u.child=a)}if(N=a.child,(a.lanes&A)===0){var O=N.memoizedProps;if(g=g.compare,g=g!==null?g:va,g(O,w)&&a.ref===u.ref)return Fa(a,u,A)}return u.flags|=1,a=Vl(N,w),a.ref=u.ref,a.return=u,u.child=a}function ve(a,u,g,w,A){if(a!==null){var N=a.memoizedProps;if(va(N,w)&&a.ref===u.ref)if(Bt=!1,u.pendingProps=w=N,(a.lanes&A)!==0)(a.flags&131072)!==0&&(Bt=!0);else return u.lanes=a.lanes,Fa(a,u,A)}return Ye(a,u,g,w,A)}function de(a,u,g){var w=u.pendingProps,A=w.children,N=a!==null?a.memoizedState:null;if(w.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(qh,cs),cs|=g;else{if((g&1073741824)===0)return a=N!==null?N.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,xn(qh,cs),cs|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=N!==null?N.baseLanes:g,xn(qh,cs),cs|=w}else N!==null?(w=N.baseLanes|g,u.memoizedState=null):w=g,xn(qh,cs),cs|=w;return Je(a,u,A,g),u.child}function we(a,u){var g=u.ref;(a===null&&g!==null||a!==null&&a.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function Ye(a,u,g,w,A){var N=Ii(g)?Ks:wi.current;return N=Ea(u,N),Ho(u,A),g=Ku(a,u,g,w,N,A),w=Kd(),a!==null&&!Bt?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~A,Fa(a,u,A)):(Rn&&w&&Wd(u),u.flags|=1,Je(a,u,g,A),u.child)}function ct(a,u,g,w,A){if(Ii(g)){var N=!0;ba(u)}else N=!1;if(Ho(u,A),u.stateNode===null)Fg(a,u),h(u,g,w),_(u,g,w,A),w=!0;else if(a===null){var O=u.stateNode,Q=u.memoizedProps;O.props=Q;var oe=O.context,xe=g.contextType;typeof xe=="object"&&xe!==null?xe=_r(xe):(xe=Ii(g)?Ks:wi.current,xe=Ea(u,xe));var Ue=g.getDerivedStateFromProps,Be=typeof Ue=="function"||typeof O.getSnapshotBeforeUpdate=="function";Be||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==w||oe!==xe)&&f(u,O,w,xe),yn=!1;var ke=u.memoizedState;O.state=ke,Bn(u,w,O,A),oe=u.memoizedState,Q!==w||ke!==oe||Gi.current||yn?(typeof Ue=="function"&&(tc(u,g,Ue,w),oe=u.memoizedState),(Q=yn||Ug(u,g,Q,w,ke,oe,xe))?(Be||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=oe),O.props=w,O.state=oe,O.context=xe,w=Q):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{O=u.stateNode,Wn(a,u),Q=u.memoizedProps,xe=u.type===u.elementType?Q:Hr(u.type,Q),O.props=xe,Be=u.pendingProps,ke=O.context,oe=g.contextType,typeof oe=="object"&&oe!==null?oe=_r(oe):(oe=Ii(g)?Ks:wi.current,oe=Ea(u,oe));var Ze=g.getDerivedStateFromProps;(Ue=typeof Ze=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==Be||ke!==oe)&&f(u,O,w,oe),yn=!1,ke=u.memoizedState,O.state=ke,Bn(u,w,O,A);var ot=u.memoizedState;Q!==Be||ke!==ot||Gi.current||yn?(typeof Ze=="function"&&(tc(u,g,Ze,w),ot=u.memoizedState),(xe=yn||Ug(u,g,xe,w,ke,ot,oe)||!1)?(Ue||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(w,ot,oe),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(w,ot,oe)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||Q===a.memoizedProps&&ke===a.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&ke===a.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=ot),O.props=w,O.state=ot,O.context=oe,w=xe):(typeof O.componentDidUpdate!="function"||Q===a.memoizedProps&&ke===a.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&ke===a.memoizedState||(u.flags|=1024),w=!1)}return Dt(a,u,g,w,N,A)}function Dt(a,u,g,w,A,N){we(a,u);var O=(u.flags&128)!==0;if(!w&&!O)return A&&Vd(u,g,!1),Fa(a,u,N);w=u.stateNode,St.current=u;var Q=O&&typeof g.getDerivedStateFromError!="function"?null:w.render();return u.flags|=1,a!==null&&O?(u.child=Ca(u,a.child,null,N),u.child=Ca(u,null,Q,N)):Je(a,u,Q,N),u.memoizedState=w.state,A&&Vd(u,g,!0),u.child}function Nt(a){var u=a.stateNode;u.pendingContext?zd(a,u.pendingContext,u.pendingContext!==u.context):u.context&&zd(a,u.context,!1),qu(a,u.containerInfo)}function tn(a,u,g,w,A){return Vo(),Rl(A),u.flags|=256,Je(a,u,g,w),u.child}var Kn={dehydrated:null,treeContext:null,retryLane:0};function Zt(a){return{baseLanes:a,cachePool:null,transitions:null}}function so(a,u,g){var w=u.pendingProps,A=Nn.current,N=!1,O=(u.flags&128)!==0,Q;if((Q=O)||(Q=a!==null&&a.memoizedState===null?!1:(A&2)!==0),Q?(N=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(A|=1),xn(Nn,A&1),a===null)return Oh(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(O=w.children,a=w.fallback,N?(w=u.mode,N=u.child,O={mode:"hidden",children:O},(w&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=O):N=Kg(O,w,0,null),a=oc(a,w,g,null),N.return=u,a.return=u,N.sibling=a,u.child=N,u.child.memoizedState=Zt(g),u.memoizedState=Kn,a):rp(u,O));if(A=a.memoizedState,A!==null&&(Q=A.dehydrated,Q!==null))return aL(a,u,O,w,Q,A,g);if(N){N=w.fallback,O=u.mode,A=a.child,Q=A.sibling;var oe={mode:"hidden",children:w.children};return(O&1)===0&&u.child!==A?(w=u.child,w.childLanes=0,w.pendingProps=oe,u.deletions=null):(w=Vl(A,oe),w.subtreeFlags=A.subtreeFlags&14680064),Q!==null?N=Vl(Q,N):(N=oc(N,O,g,null),N.flags|=2),N.return=u,w.return=u,w.sibling=N,u.child=w,w=N,N=u.child,O=a.child.memoizedState,O=O===null?Zt(g):{baseLanes:O.baseLanes|g,cachePool:null,transitions:O.transitions},N.memoizedState=O,N.childLanes=a.childLanes&~g,u.memoizedState=Kn,w}return N=a.child,a=N.sibling,w=Vl(N,{mode:"visible",children:w.children}),(u.mode&1)===0&&(w.lanes=g),w.return=u,w.sibling=null,a!==null&&(g=u.deletions,g===null?(u.deletions=[a],u.flags|=16):g.push(a)),u.child=w,u.memoizedState=null,w}function rp(a,u){return u=Kg({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function Og(a,u,g,w){return w!==null&&Rl(w),Ca(u,a.child,null,g),a=rp(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function aL(a,u,g,w,A,N,O){if(g)return u.flags&256?(u.flags&=-257,w=R(Error(t(422))),Og(a,u,O,w)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(N=w.fallback,A=u.mode,w=Kg({mode:"visible",children:w.children},A,0,null),N=oc(N,A,O,null),N.flags|=2,w.return=u,N.return=u,w.sibling=N,u.child=w,(u.mode&1)!==0&&Ca(u,a.child,null,O),u.child.memoizedState=Zt(O),u.memoizedState=Kn,N);if((u.mode&1)===0)return Og(a,u,O,null);if(A.data==="$!"){if(w=A.nextSibling&&A.nextSibling.dataset,w)var Q=w.dgst;return w=Q,N=Error(t(419)),w=R(N,w,void 0),Og(a,u,O,w)}if(Q=(O&a.childLanes)!==0,Bt||Q){if(w=Ui,w!==null){switch(O&-O){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(w.suspendedLanes|O))!==0?0:A,A!==0&&A!==N.retryLane&&(N.retryLane=A,os(a,A),lo(w,a,A,-1))}return lx(),w=R(Error(t(421))),Og(a,u,O,w)}return A.data==="$?"?(u.flags|=128,u.child=a.child,u=_L.bind(null,a),A._reactRetry=u,null):(a=N.treeContext,Xi=$s(A.nextSibling),Si=u,Rn=!0,Vr=null,a!==null&&(ji[pi++]=We,ji[pi++]=zr,ji[pi++]=Aa,We=a.id,zr=a.overflow,Aa=u),u=rp(u,w.children),u.flags|=4096,u)}function pM(a,u,g){a.lanes|=u;var w=a.alternate;w!==null&&(w.lanes|=u),Xu(a.return,u,g)}function $v(a,u,g,w,A){var N=a.memoizedState;N===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:A}:(N.isBackwards=u,N.rendering=null,N.renderingStartTime=0,N.last=w,N.tail=g,N.tailMode=A)}function mM(a,u,g){var w=u.pendingProps,A=w.revealOrder,N=w.tail;if(Je(a,u,w.children,g),w=Nn.current,(w&2)!==0)w=w&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&pM(a,g,u);else if(a.tag===19)pM(a,g,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(xn(Nn,w),(u.mode&1)===0)u.memoizedState=null;else switch(A){case"forwards":for(g=u.child,A=null;g!==null;)a=g.alternate,a!==null&&as(a)===null&&(A=g),g=g.sibling;g=A,g===null?(A=u.child,u.child=null):(A=g.sibling,g.sibling=null),$v(u,!1,A,g,N);break;case"backwards":for(g=null,A=u.child,u.child=null;A!==null;){if(a=A.alternate,a!==null&&as(a)===null){u.child=A;break}a=A.sibling,A.sibling=g,g=A,A=a}$v(u,!0,g,null,N);break;case"together":$v(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Fg(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function Fa(a,u,g){if(a!==null&&(u.dependencies=a.dependencies),nc|=u.lanes,(g&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(t(153));if(u.child!==null){for(a=u.child,g=Vl(a,a.pendingProps),u.child=g,g.return=u;a.sibling!==null;)a=a.sibling,g=g.sibling=Vl(a,a.pendingProps),g.return=u;g.sibling=null}return u.child}function lL(a,u,g){switch(u.tag){case 3:Nt(u),Vo();break;case 5:Da(u);break;case 1:Ii(u.type)&&ba(u);break;case 4:qu(u,u.stateNode.containerInfo);break;case 10:var w=u.type._context,A=u.memoizedProps.value;xn(Pa,w._currentValue),w._currentValue=A;break;case 13:if(w=u.memoizedState,w!==null)return w.dehydrated!==null?(xn(Nn,Nn.current&1),u.flags|=128,null):(g&u.child.childLanes)!==0?so(a,u,g):(xn(Nn,Nn.current&1),a=Fa(a,u,g),a!==null?a.sibling:null);xn(Nn,Nn.current&1);break;case 19:if(w=(g&u.childLanes)!==0,(a.flags&128)!==0){if(w)return mM(a,u,g);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),xn(Nn,Nn.current),w)break;return null;case 22:case 23:return u.lanes=0,de(a,u,g)}return Fa(a,u,g)}var gM,qv,yM,vM;gM=function(a,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},qv=function(){},yM=function(a,u,g,w){var A=a.memoizedProps;if(A!==w){a=u.stateNode,Yn(wr.current);var N=null;switch(g){case"input":A=Ne(a,A),w=Ne(a,w),N=[];break;case"select":A=$({},A,{value:void 0}),w=$({},w,{value:void 0}),N=[];break;case"textarea":A=Y(a,A),w=Y(a,w),N=[];break;default:typeof A.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Ou)}Xt(g,w);var O;g=null;for(xe in A)if(!w.hasOwnProperty(xe)&&A.hasOwnProperty(xe)&&A[xe]!=null)if(xe==="style"){var Q=A[xe];for(O in Q)Q.hasOwnProperty(O)&&(g||(g={}),g[O]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(r.hasOwnProperty(xe)?N||(N=[]):(N=N||[]).push(xe,null));for(xe in w){var oe=w[xe];if(Q=A!=null?A[xe]:void 0,w.hasOwnProperty(xe)&&oe!==Q&&(oe!=null||Q!=null))if(xe==="style")if(Q){for(O in Q)!Q.hasOwnProperty(O)||oe&&oe.hasOwnProperty(O)||(g||(g={}),g[O]="");for(O in oe)oe.hasOwnProperty(O)&&Q[O]!==oe[O]&&(g||(g={}),g[O]=oe[O])}else g||(N||(N=[]),N.push(xe,g)),g=oe;else xe==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,Q=Q?Q.__html:void 0,oe!=null&&Q!==oe&&(N=N||[]).push(xe,oe)):xe==="children"?typeof oe!="string"&&typeof oe!="number"||(N=N||[]).push(xe,""+oe):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(r.hasOwnProperty(xe)?(oe!=null&&xe==="onScroll"&&En("scroll",a),N||Q===oe||(N=[])):(N=N||[]).push(xe,oe))}g&&(N=N||[]).push("style",g);var xe=N;(u.updateQueue=xe)&&(u.flags|=4)}},vM=function(a,u,g,w){g!==w&&(u.flags|=4)};function sp(a,u){if(!Rn)switch(a.tailMode){case"hidden":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a.tail=null:g.sibling=null;break;case"collapsed":g=a.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function or(a){var u=a.alternate!==null&&a.alternate.child===a.child,g=0,w=0;if(u)for(var A=a.child;A!==null;)g|=A.lanes|A.childLanes,w|=A.subtreeFlags&14680064,w|=A.flags&14680064,A.return=a,A=A.sibling;else for(A=a.child;A!==null;)g|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=a,A=A.sibling;return a.subtreeFlags|=w,a.childLanes=g,u}function uL(a,u,g){var w=u.pendingProps;switch(Zs(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(u),null;case 1:return Ii(u.type)&&Fu(),or(u),null;case 3:return w=u.stateNode,Wo(),bn(Gi),bn(wi),Rs(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Pl(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Vr!==null&&(sx(Vr),Vr=null))),qv(a,u),or(u),null;case 5:Il(u);var A=Yn(to.current);if(g=u.type,a!==null&&u.stateNode!=null)yM(a,u,g,w,A),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!w){if(u.stateNode===null)throw Error(t(166));return or(u),null}if(a=Yn(wr.current),Pl(u)){w=u.stateNode,g=u.type;var N=u.memoizedProps;switch(w[ri]=u,w[Cl]=N,a=(u.mode&1)!==0,g){case"dialog":En("cancel",w),En("close",w);break;case"iframe":case"object":case"embed":En("load",w);break;case"video":case"audio":for(A=0;A<Bo.length;A++)En(Bo[A],w);break;case"source":En("error",w);break;case"img":case"image":case"link":En("error",w),En("load",w);break;case"details":En("toggle",w);break;case"input":tt(w,N),En("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!N.multiple},En("invalid",w);break;case"textarea":W(w,N),En("invalid",w)}Xt(g,N),A=null;for(var O in N)if(N.hasOwnProperty(O)){var Q=N[O];O==="children"?typeof Q=="string"?w.textContent!==Q&&(N.suppressHydrationWarning!==!0&&Uu(w.textContent,Q,a),A=["children",Q]):typeof Q=="number"&&w.textContent!==""+Q&&(N.suppressHydrationWarning!==!0&&Uu(w.textContent,Q,a),A=["children",""+Q]):r.hasOwnProperty(O)&&Q!=null&&O==="onScroll"&&En("scroll",w)}switch(g){case"input":Ke(w),xt(w,N,!0);break;case"textarea":Ke(w),Oe(w);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(w.onclick=Ou)}w=A,u.updateQueue=w,w!==null&&(u.flags|=4)}else{O=A.nodeType===9?A:A.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Fe(g)),a==="http://www.w3.org/1999/xhtml"?g==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=O.createElement(g,{is:w.is}):(a=O.createElement(g),g==="select"&&(O=a,w.multiple?O.multiple=!0:w.size&&(O.size=w.size))):a=O.createElementNS(a,g),a[ri]=u,a[Cl]=w,gM(a,u,!1,!1),u.stateNode=a;e:{switch(O=en(g,w),g){case"dialog":En("cancel",a),En("close",a),A=w;break;case"iframe":case"object":case"embed":En("load",a),A=w;break;case"video":case"audio":for(A=0;A<Bo.length;A++)En(Bo[A],a);A=w;break;case"source":En("error",a),A=w;break;case"img":case"image":case"link":En("error",a),En("load",a),A=w;break;case"details":En("toggle",a),A=w;break;case"input":tt(a,w),A=Ne(a,w),En("invalid",a);break;case"option":A=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},A=$({},w,{value:void 0}),En("invalid",a);break;case"textarea":W(a,w),A=Y(a,w),En("invalid",a);break;default:A=w}Xt(g,A),Q=A;for(N in Q)if(Q.hasOwnProperty(N)){var oe=Q[N];N==="style"?nt(a,oe):N==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,oe!=null&&Qe(a,oe)):N==="children"?typeof oe=="string"?(g!=="textarea"||oe!=="")&&Ae(a,oe):typeof oe=="number"&&Ae(a,""+oe):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(r.hasOwnProperty(N)?oe!=null&&N==="onScroll"&&En("scroll",a):oe!=null&&T(a,N,oe,O))}switch(g){case"input":Ke(a),xt(a,w,!1);break;case"textarea":Ke(a),Oe(a);break;case"option":w.value!=null&&a.setAttribute("value",""+Ve(w.value));break;case"select":a.multiple=!!w.multiple,N=w.value,N!=null?Vt(a,!!w.multiple,N,!1):w.defaultValue!=null&&Vt(a,!!w.multiple,w.defaultValue,!0);break;default:typeof A.onClick=="function"&&(a.onclick=Ou)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return or(u),null;case 6:if(a&&u.stateNode!=null)vM(a,u,a.memoizedProps,w);else{if(typeof w!="string"&&u.stateNode===null)throw Error(t(166));if(g=Yn(to.current),Yn(wr.current),Pl(u)){if(w=u.stateNode,g=u.memoizedProps,w[ri]=u,(N=w.nodeValue!==g)&&(a=Si,a!==null))switch(a.tag){case 3:Uu(w.nodeValue,g,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Uu(w.nodeValue,g,(a.mode&1)!==0)}N&&(u.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[ri]=u,u.stateNode=w}return or(u),null;case 13:if(bn(Nn),w=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Rn&&Xi!==null&&(u.mode&1)!==0&&(u.flags&128)===0)Xd(),Vo(),u.flags|=98560,N=!1;else if(N=Pl(u),w!==null&&w.dehydrated!==null){if(a===null){if(!N)throw Error(t(318));if(N=u.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(t(317));N[ri]=u}else Vo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;or(u),N=!1}else Vr!==null&&(sx(Vr),Vr=null),N=!0;if(!N)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=g,u):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(Nn.current&1)!==0?Ti===0&&(Ti=3):lx())),u.updateQueue!==null&&(u.flags|=4),or(u),null);case 4:return Wo(),qv(a,u),a===null&&bl(u.stateNode.containerInfo),or(u),null;case 10:return ju(u.type._context),or(u),null;case 17:return Ii(u.type)&&Fu(),or(u),null;case 19:if(bn(Nn),N=u.memoizedState,N===null)return or(u),null;if(w=(u.flags&128)!==0,O=N.rendering,O===null)if(w)sp(N,!1);else{if(Ti!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(O=as(a),O!==null){for(u.flags|=128,sp(N,!1),w=O.updateQueue,w!==null&&(u.updateQueue=w,u.flags|=4),u.subtreeFlags=0,w=g,g=u.child;g!==null;)N=g,a=w,N.flags&=14680066,O=N.alternate,O===null?(N.childLanes=0,N.lanes=a,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=O.childLanes,N.lanes=O.lanes,N.child=O.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=O.memoizedProps,N.memoizedState=O.memoizedState,N.updateQueue=O.updateQueue,N.type=O.type,a=O.dependencies,N.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),g=g.sibling;return xn(Nn,Nn.current&1|2),u.child}a=a.sibling}N.tail!==null&&cn()>Yh&&(u.flags|=128,w=!0,sp(N,!1),u.lanes=4194304)}else{if(!w)if(a=as(O),a!==null){if(u.flags|=128,w=!0,g=a.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),sp(N,!0),N.tail===null&&N.tailMode==="hidden"&&!O.alternate&&!Rn)return or(u),null}else 2*cn()-N.renderingStartTime>Yh&&g!==1073741824&&(u.flags|=128,w=!0,sp(N,!1),u.lanes=4194304);N.isBackwards?(O.sibling=u.child,u.child=O):(g=N.last,g!==null?g.sibling=O:u.child=O,N.last=O)}return N.tail!==null?(u=N.tail,N.rendering=u,N.tail=u.sibling,N.renderingStartTime=cn(),u.sibling=null,g=Nn.current,xn(Nn,w?g&1|2:g&1),u):(or(u),null);case 22:case 23:return ax(),w=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(u.flags|=8192),w&&(u.mode&1)!==0?(cs&1073741824)!==0&&(or(u),u.subtreeFlags&6&&(u.flags|=8192)):or(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function cL(a,u){switch(Zs(u),u.tag){case 1:return Ii(u.type)&&Fu(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Wo(),bn(Gi),bn(wi),Rs(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return Il(u),null;case 13:if(bn(Nn),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Vo()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return bn(Nn),null;case 4:return Wo(),null;case 10:return ju(u.type._context),null;case 22:case 23:return ax(),null;case 24:return null;default:return null}}var Bg=!1,ar=!1,hL=typeof WeakSet=="function"?WeakSet:Set,st=null;function $h(a,u){var g=a.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){Jn(a,u,w)}else g.current=null}function Yv(a,u,g){try{g()}catch(w){Jn(a,u,w)}}var xM=!1;function fL(a,u){if(Al=Dr,a=Un(),ci(a)){if("selectionStart"in a)var g={start:a.selectionStart,end:a.selectionEnd};else e:{g=(g=a.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var A=w.anchorOffset,N=w.focusNode;w=w.focusOffset;try{g.nodeType,N.nodeType}catch{g=null;break e}var O=0,Q=-1,oe=-1,xe=0,Ue=0,Be=a,ke=null;t:for(;;){for(var Ze;Be!==g||A!==0&&Be.nodeType!==3||(Q=O+A),Be!==N||w!==0&&Be.nodeType!==3||(oe=O+w),Be.nodeType===3&&(O+=Be.nodeValue.length),(Ze=Be.firstChild)!==null;)ke=Be,Be=Ze;for(;;){if(Be===a)break t;if(ke===g&&++xe===A&&(Q=O),ke===N&&++Ue===w&&(oe=O),(Ze=Be.nextSibling)!==null)break;Be=ke,ke=Be.parentNode}Be=Ze}g=Q===-1||oe===-1?null:{start:Q,end:oe}}else g=null}g=g||{start:0,end:0}}else g=null;for(Dd={focusedElem:a,selectionRange:g},Dr=!1,st=u;st!==null;)if(u=st,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,st=a;else for(;st!==null;){u=st;try{var ot=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var lt=ot.memoizedProps,si=ot.memoizedState,pe=u.stateNode,ue=pe.getSnapshotBeforeUpdate(u.elementType===u.type?lt:Hr(u.type,lt),si);pe.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:var ge=u.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(He){Jn(u,u.return,He)}if(a=u.sibling,a!==null){a.return=u.return,st=a;break}st=u.return}return ot=xM,xM=!1,ot}function op(a,u,g){var w=u.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var A=w=w.next;do{if((A.tag&a)===a){var N=A.destroy;A.destroy=void 0,N!==void 0&&Yv(u,g,N)}A=A.next}while(A!==w)}}function zg(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&a)===a){var w=g.create;g.destroy=w()}g=g.next}while(g!==u)}}function Kv(a){var u=a.ref;if(u!==null){var g=a.stateNode;switch(a.tag){case 5:a=g;break;default:a=g}typeof u=="function"?u(a):u.current=a}}function _M(a){var u=a.alternate;u!==null&&(a.alternate=null,_M(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[ri],delete u[Cl],delete u[Ma],delete u[Rh],delete u[Nh])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function wM(a){return a.tag===5||a.tag===3||a.tag===4}function SM(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||wM(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Jv(a,u,g){var w=a.tag;if(w===5||w===6)a=a.stateNode,u?g.nodeType===8?g.parentNode.insertBefore(a,u):g.insertBefore(a,u):(g.nodeType===8?(u=g.parentNode,u.insertBefore(a,g)):(u=g,u.appendChild(a)),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=Ou));else if(w!==4&&(a=a.child,a!==null))for(Jv(a,u,g),a=a.sibling;a!==null;)Jv(a,u,g),a=a.sibling}function Zv(a,u,g){var w=a.tag;if(w===5||w===6)a=a.stateNode,u?g.insertBefore(a,u):g.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(Zv(a,u,g),a=a.sibling;a!==null;)Zv(a,u,g),a=a.sibling}var qi=null,oo=!1;function Ul(a,u,g){for(g=g.child;g!==null;)MM(a,u,g),g=g.sibling}function MM(a,u,g){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(xi,g)}catch{}switch(g.tag){case 5:ar||$h(g,u);case 6:var w=qi,A=oo;qi=null,Ul(a,u,g),qi=w,oo=A,qi!==null&&(oo?(a=qi,g=g.stateNode,a.nodeType===8?a.parentNode.removeChild(g):a.removeChild(g)):qi.removeChild(g.stateNode));break;case 18:qi!==null&&(oo?(a=qi,g=g.stateNode,a.nodeType===8?Ph(a.parentNode,g):a.nodeType===1&&Ph(a,g),bu(a)):Ph(qi,g.stateNode));break;case 4:w=qi,A=oo,qi=g.stateNode.containerInfo,oo=!0,Ul(a,u,g),qi=w,oo=A;break;case 0:case 11:case 14:case 15:if(!ar&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){A=w=w.next;do{var N=A,O=N.destroy;N=N.tag,O!==void 0&&((N&2)!==0||(N&4)!==0)&&Yv(g,u,O),A=A.next}while(A!==w)}Ul(a,u,g);break;case 1:if(!ar&&($h(g,u),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(Q){Jn(g,u,Q)}Ul(a,u,g);break;case 21:Ul(a,u,g);break;case 22:g.mode&1?(ar=(w=ar)||g.memoizedState!==null,Ul(a,u,g),ar=w):Ul(a,u,g);break;default:Ul(a,u,g)}}function EM(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var g=a.stateNode;g===null&&(g=a.stateNode=new hL),u.forEach(function(w){var A=wL.bind(null,a,w);g.has(w)||(g.add(w),w.then(A,A))})}}function ao(a,u){var g=u.deletions;if(g!==null)for(var w=0;w<g.length;w++){var A=g[w];try{var N=a,O=u,Q=O;e:for(;Q!==null;){switch(Q.tag){case 5:qi=Q.stateNode,oo=!1;break e;case 3:qi=Q.stateNode.containerInfo,oo=!0;break e;case 4:qi=Q.stateNode.containerInfo,oo=!0;break e}Q=Q.return}if(qi===null)throw Error(t(160));MM(N,O,A),qi=null,oo=!1;var oe=A.alternate;oe!==null&&(oe.return=null),A.return=null}catch(xe){Jn(A,u,xe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)bM(u,a),u=u.sibling}function bM(a,u){var g=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ao(u,a),jo(a),w&4){try{op(3,a,a.return),zg(3,a)}catch(lt){Jn(a,a.return,lt)}try{op(5,a,a.return)}catch(lt){Jn(a,a.return,lt)}}break;case 1:ao(u,a),jo(a),w&512&&g!==null&&$h(g,g.return);break;case 5:if(ao(u,a),jo(a),w&512&&g!==null&&$h(g,g.return),a.flags&32){var A=a.stateNode;try{Ae(A,"")}catch(lt){Jn(a,a.return,lt)}}if(w&4&&(A=a.stateNode,A!=null)){var N=a.memoizedProps,O=g!==null?g.memoizedProps:N,Q=a.type,oe=a.updateQueue;if(a.updateQueue=null,oe!==null)try{Q==="input"&&N.type==="radio"&&N.name!=null&&Ge(A,N),en(Q,O);var xe=en(Q,N);for(O=0;O<oe.length;O+=2){var Ue=oe[O],Be=oe[O+1];Ue==="style"?nt(A,Be):Ue==="dangerouslySetInnerHTML"?Qe(A,Be):Ue==="children"?Ae(A,Be):T(A,Ue,Be,xe)}switch(Q){case"input":yt(A,N);break;case"textarea":_e(A,N);break;case"select":var ke=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!N.multiple;var Ze=N.value;Ze!=null?Vt(A,!!N.multiple,Ze,!1):ke!==!!N.multiple&&(N.defaultValue!=null?Vt(A,!!N.multiple,N.defaultValue,!0):Vt(A,!!N.multiple,N.multiple?[]:"",!1))}A[Cl]=N}catch(lt){Jn(a,a.return,lt)}}break;case 6:if(ao(u,a),jo(a),w&4){if(a.stateNode===null)throw Error(t(162));A=a.stateNode,N=a.memoizedProps;try{A.nodeValue=N}catch(lt){Jn(a,a.return,lt)}}break;case 3:if(ao(u,a),jo(a),w&4&&g!==null&&g.memoizedState.isDehydrated)try{bu(u.containerInfo)}catch(lt){Jn(a,a.return,lt)}break;case 4:ao(u,a),jo(a);break;case 13:ao(u,a),jo(a),A=a.child,A.flags&8192&&(N=A.memoizedState!==null,A.stateNode.isHidden=N,!N||A.alternate!==null&&A.alternate.memoizedState!==null||(tx=cn())),w&4&&EM(a);break;case 22:if(Ue=g!==null&&g.memoizedState!==null,a.mode&1?(ar=(xe=ar)||Ue,ao(u,a),ar=xe):ao(u,a),jo(a),w&8192){if(xe=a.memoizedState!==null,(a.stateNode.isHidden=xe)&&!Ue&&(a.mode&1)!==0)for(st=a,Ue=a.child;Ue!==null;){for(Be=st=Ue;st!==null;){switch(ke=st,Ze=ke.child,ke.tag){case 0:case 11:case 14:case 15:op(4,ke,ke.return);break;case 1:$h(ke,ke.return);var ot=ke.stateNode;if(typeof ot.componentWillUnmount=="function"){w=ke,g=ke.return;try{u=w,ot.props=u.memoizedProps,ot.state=u.memoizedState,ot.componentWillUnmount()}catch(lt){Jn(w,g,lt)}}break;case 5:$h(ke,ke.return);break;case 22:if(ke.memoizedState!==null){CM(Be);continue}}Ze!==null?(Ze.return=ke,st=Ze):CM(Be)}Ue=Ue.sibling}e:for(Ue=null,Be=a;;){if(Be.tag===5){if(Ue===null){Ue=Be;try{A=Be.stateNode,xe?(N=A.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(Q=Be.stateNode,oe=Be.memoizedProps.style,O=oe!=null&&oe.hasOwnProperty("display")?oe.display:null,Q.style.display=_t("display",O))}catch(lt){Jn(a,a.return,lt)}}}else if(Be.tag===6){if(Ue===null)try{Be.stateNode.nodeValue=xe?"":Be.memoizedProps}catch(lt){Jn(a,a.return,lt)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===a)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===a)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===a)break e;Ue===Be&&(Ue=null),Be=Be.return}Ue===Be&&(Ue=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:ao(u,a),jo(a),w&4&&EM(a);break;case 21:break;default:ao(u,a),jo(a)}}function jo(a){var u=a.flags;if(u&2){try{e:{for(var g=a.return;g!==null;){if(wM(g)){var w=g;break e}g=g.return}throw Error(t(160))}switch(w.tag){case 5:var A=w.stateNode;w.flags&32&&(Ae(A,""),w.flags&=-33);var N=SM(a);Zv(a,N,A);break;case 3:case 4:var O=w.stateNode.containerInfo,Q=SM(a);Jv(a,Q,O);break;default:throw Error(t(161))}}catch(oe){Jn(a,a.return,oe)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function dL(a,u,g){st=a,TM(a)}function TM(a,u,g){for(var w=(a.mode&1)!==0;st!==null;){var A=st,N=A.child;if(A.tag===22&&w){var O=A.memoizedState!==null||Bg;if(!O){var Q=A.alternate,oe=Q!==null&&Q.memoizedState!==null||ar;Q=Bg;var xe=ar;if(Bg=O,(ar=oe)&&!xe)for(st=A;st!==null;)O=st,oe=O.child,O.tag===22&&O.memoizedState!==null?PM(A):oe!==null?(oe.return=O,st=oe):PM(A);for(;N!==null;)st=N,TM(N),N=N.sibling;st=A,Bg=Q,ar=xe}AM(a)}else(A.subtreeFlags&8772)!==0&&N!==null?(N.return=A,st=N):AM(a)}}function AM(a){for(;st!==null;){var u=st;if((u.flags&8772)!==0){var g=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:ar||zg(5,u);break;case 1:var w=u.stateNode;if(u.flags&4&&!ar)if(g===null)w.componentDidMount();else{var A=u.elementType===u.type?g.memoizedProps:Hr(u.type,g.memoizedProps);w.componentDidUpdate(A,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var N=u.updateQueue;N!==null&&Ll(u,N,w);break;case 3:var O=u.updateQueue;if(O!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=u.child.stateNode;break;case 1:g=u.child.stateNode}Ll(u,O,g)}break;case 5:var Q=u.stateNode;if(g===null&&u.flags&4){g=Q;var oe=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":oe.autoFocus&&g.focus();break;case"img":oe.src&&(g.src=oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var xe=u.alternate;if(xe!==null){var Ue=xe.memoizedState;if(Ue!==null){var Be=Ue.dehydrated;Be!==null&&bu(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ar||u.flags&512&&Kv(u)}catch(ke){Jn(u,u.return,ke)}}if(u===a){st=null;break}if(g=u.sibling,g!==null){g.return=u.return,st=g;break}st=u.return}}function CM(a){for(;st!==null;){var u=st;if(u===a){st=null;break}var g=u.sibling;if(g!==null){g.return=u.return,st=g;break}st=u.return}}function PM(a){for(;st!==null;){var u=st;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{zg(4,u)}catch(oe){Jn(u,g,oe)}break;case 1:var w=u.stateNode;if(typeof w.componentDidMount=="function"){var A=u.return;try{w.componentDidMount()}catch(oe){Jn(u,A,oe)}}var N=u.return;try{Kv(u)}catch(oe){Jn(u,N,oe)}break;case 5:var O=u.return;try{Kv(u)}catch(oe){Jn(u,O,oe)}}}catch(oe){Jn(u,u.return,oe)}if(u===a){st=null;break}var Q=u.sibling;if(Q!==null){Q.return=u.return,st=Q;break}st=u.return}}var pL=Math.ceil,Vg=P.ReactCurrentDispatcher,Qv=P.ReactCurrentOwner,Ls=P.ReactCurrentBatchConfig,hn=0,Ui=null,mi=null,Yi=0,cs=0,qh=Fn(0),Ti=0,ap=null,nc=0,Hg=0,ex=0,lp=null,Wr=null,tx=0,Yh=1/0,Ba=null,Wg=!1,nx=null,Ol=null,Gg=!1,Fl=null,jg=0,up=0,ix=null,Xg=-1,$g=0;function br(){return(hn&6)!==0?cn():Xg!==-1?Xg:Xg=cn()}function Bl(a){return(a.mode&1)===0?1:(hn&2)!==0&&Yi!==0?Yi&-Yi:jv.transition!==null?($g===0&&($g=Ir()),$g):(a=sn,a!==0||(a=window.event,a=a===void 0?16:fg(a.type)),a)}function lo(a,u,g,w){if(50<up)throw up=0,ix=null,Error(t(185));wu(a,g,w),((hn&2)===0||a!==Ui)&&(a===Ui&&((hn&2)===0&&(Hg|=g),Ti===4&&zl(a,Yi)),Gr(a,w),g===1&&hn===0&&(u.mode&1)===0&&(Yh=cn()+500,zu&&Cs()))}function Gr(a,u){var g=a.callbackNode;Zc(a,u);var w=_u(a,a===Ui?Yi:0);if(w===0)g!==null&&un(g),a.callbackNode=null,a.callbackPriority=0;else if(u=w&-w,a.callbackPriority!==u){if(g!=null&&un(g),u===1)a.tag===0?Tg(NM.bind(null,a)):Vu(NM.bind(null,a)),Gv(function(){(hn&6)===0&&Cs()}),g=null;else{switch(fl(w)){case 1:g=Ft;break;case 4:g=No;break;case 16:g=Dn;break;case 536870912:g=Ms;break;default:g=Dn}g=BM(g,RM.bind(null,a))}a.callbackPriority=u,a.callbackNode=g}}function RM(a,u){if(Xg=-1,$g=0,(hn&6)!==0)throw Error(t(327));var g=a.callbackNode;if(Kh()&&a.callbackNode!==g)return null;var w=_u(a,a===Ui?Yi:0);if(w===0)return null;if((w&30)!==0||(w&a.expiredLanes)!==0||u)u=qg(a,w);else{u=w;var A=hn;hn|=2;var N=IM();(Ui!==a||Yi!==u)&&(Ba=null,Yh=cn()+500,rc(a,u));do try{yL();break}catch(Q){LM(a,Q)}while(!0);Na(),Vg.current=N,hn=A,mi!==null?u=0:(Ui=null,Yi=0,u=Ti)}if(u!==0){if(u===2&&(A=Qc(a),A!==0&&(w=A,u=rx(a,A))),u===1)throw g=ap,rc(a,0),zl(a,w),Gr(a,cn()),g;if(u===6)zl(a,w);else{if(A=a.current.alternate,(w&30)===0&&!mL(A)&&(u=qg(a,w),u===2&&(N=Qc(a),N!==0&&(w=N,u=rx(a,N))),u===1))throw g=ap,rc(a,0),zl(a,w),Gr(a,cn()),g;switch(a.finishedWork=A,a.finishedLanes=w,u){case 0:case 1:throw Error(t(345));case 2:sc(a,Wr,Ba);break;case 3:if(zl(a,w),(w&130023424)===w&&(u=tx+500-cn(),10<u)){if(_u(a,0)!==0)break;if(A=a.suspendedLanes,(A&w)!==w){br(),a.pingedLanes|=a.suspendedLanes&A;break}a.timeoutHandle=Ud(sc.bind(null,a,Wr,Ba),u);break}sc(a,Wr,Ba);break;case 4:if(zl(a,w),(w&4194240)===w)break;for(u=a.eventTimes,A=-1;0<w;){var O=31-Mn(w);N=1<<O,O=u[O],O>A&&(A=O),w&=~N}if(w=A,w=cn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*pL(w/1960))-w,10<w){a.timeoutHandle=Ud(sc.bind(null,a,Wr,Ba),w);break}sc(a,Wr,Ba);break;case 5:sc(a,Wr,Ba);break;default:throw Error(t(329))}}}return Gr(a,cn()),a.callbackNode===g?RM.bind(null,a):null}function rx(a,u){var g=lp;return a.current.memoizedState.isDehydrated&&(rc(a,u).flags|=256),a=qg(a,u),a!==2&&(u=Wr,Wr=g,u!==null&&sx(u)),a}function sx(a){Wr===null?Wr=a:Wr.push.apply(Wr,a)}function mL(a){for(var u=a;;){if(u.flags&16384){var g=u.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var A=g[w],N=A.getSnapshot;A=A.value;try{if(!yr(N(),A))return!1}catch{return!1}}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function zl(a,u){for(u&=~ex,u&=~Hg,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var g=31-Mn(u),w=1<<g;a[g]=-1,u&=~w}}function NM(a){if((hn&6)!==0)throw Error(t(327));Kh();var u=_u(a,0);if((u&1)===0)return Gr(a,cn()),null;var g=qg(a,u);if(a.tag!==0&&g===2){var w=Qc(a);w!==0&&(u=w,g=rx(a,w))}if(g===1)throw g=ap,rc(a,0),zl(a,u),Gr(a,cn()),g;if(g===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,sc(a,Wr,Ba),Gr(a,cn()),null}function ox(a,u){var g=hn;hn|=1;try{return a(u)}finally{hn=g,hn===0&&(Yh=cn()+500,zu&&Cs())}}function ic(a){Fl!==null&&Fl.tag===0&&(hn&6)===0&&Kh();var u=hn;hn|=1;var g=Ls.transition,w=sn;try{if(Ls.transition=null,sn=1,a)return a()}finally{sn=w,Ls.transition=g,hn=u,(hn&6)===0&&Cs()}}function ax(){cs=qh.current,bn(qh)}function rc(a,u){a.finishedWork=null,a.finishedLanes=0;var g=a.timeoutHandle;if(g!==-1&&(a.timeoutHandle=-1,Od(g)),mi!==null)for(g=mi.return;g!==null;){var w=g;switch(Zs(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Fu();break;case 3:Wo(),bn(Gi),bn(wi),Rs();break;case 5:Il(w);break;case 4:Wo();break;case 13:bn(Nn);break;case 19:bn(Nn);break;case 10:ju(w.type._context);break;case 22:case 23:ax()}g=g.return}if(Ui=a,mi=a=Vl(a.current,null),Yi=cs=u,Ti=0,ap=null,ex=Hg=nc=0,Wr=lp=null,eo!==null){for(u=0;u<eo.length;u++)if(g=eo[u],w=g.interleaved,w!==null){g.interleaved=null;var A=w.next,N=g.pending;if(N!==null){var O=N.next;N.next=A,w.next=O}g.pending=w}eo=null}return a}function LM(a,u){do{var g=mi;try{if(Na(),ka.current=jh,ls){for(var w=Tn.memoizedState;w!==null;){var A=w.queue;A!==null&&(A.pending=null),w=w.next}ls=!1}if(no=0,on=zn=Tn=null,ki=!1,Go=0,Qv.current=null,g===null||g.return===null){Ti=1,ap=u,mi=null;break}e:{var N=a,O=g.return,Q=g,oe=u;if(u=Yi,Q.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var xe=oe,Ue=Q,Be=Ue.tag;if((Ue.mode&1)===0&&(Be===0||Be===11||Be===15)){var ke=Ue.alternate;ke?(Ue.updateQueue=ke.updateQueue,Ue.memoizedState=ke.memoizedState,Ue.lanes=ke.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var Ze=it(O);if(Ze!==null){Ze.flags&=-257,Rt(Ze,O,Q,N,u),Ze.mode&1&&ze(N,xe,u),u=Ze,oe=xe;var ot=u.updateQueue;if(ot===null){var lt=new Set;lt.add(oe),u.updateQueue=lt}else ot.add(oe);break e}else{if((u&1)===0){ze(N,xe,u),lx();break e}oe=Error(t(426))}}else if(Rn&&Q.mode&1){var si=it(O);if(si!==null){(si.flags&65536)===0&&(si.flags|=256),Rt(si,O,Q,N,u),Rl(b(oe,Q));break e}}N=oe=b(oe,Q),Ti!==4&&(Ti=2),lp===null?lp=[N]:lp.push(N),N=O;do{switch(N.tag){case 3:N.flags|=65536,u&=-u,N.lanes|=u;var pe=he(N,oe,u);La(N,pe);break e;case 1:Q=oe;var ue=N.type,ge=N.stateNode;if((N.flags&128)===0&&(typeof ue.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Ol===null||!Ol.has(ge)))){N.flags|=65536,u&=-u,N.lanes|=u;var He=Me(N,Q,u);La(N,He);break e}}N=N.return}while(N!==null)}kM(g)}catch(ft){u=ft,mi===g&&g!==null&&(mi=g=g.return);continue}break}while(!0)}function IM(){var a=Vg.current;return Vg.current=jh,a===null?jh:a}function lx(){(Ti===0||Ti===3||Ti===2)&&(Ti=4),Ui===null||(nc&268435455)===0&&(Hg&268435455)===0||zl(Ui,Yi)}function qg(a,u){var g=hn;hn|=2;var w=IM();(Ui!==a||Yi!==u)&&(Ba=null,rc(a,u));do try{gL();break}catch(A){LM(a,A)}while(!0);if(Na(),hn=g,Vg.current=w,mi!==null)throw Error(t(261));return Ui=null,Yi=0,Ti}function gL(){for(;mi!==null;)DM(mi)}function yL(){for(;mi!==null&&!vi();)DM(mi)}function DM(a){var u=FM(a.alternate,a,cs);a.memoizedProps=a.pendingProps,u===null?kM(a):mi=u,Qv.current=null}function kM(a){var u=a;do{var g=u.alternate;if(a=u.return,(u.flags&32768)===0){if(g=uL(g,u,cs),g!==null){mi=g;return}}else{if(g=cL(g,u),g!==null){g.flags&=32767,mi=g;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ti=6,mi=null;return}}if(u=u.sibling,u!==null){mi=u;return}mi=u=a}while(u!==null);Ti===0&&(Ti=5)}function sc(a,u,g){var w=sn,A=Ls.transition;try{Ls.transition=null,sn=1,vL(a,u,g,w)}finally{Ls.transition=A,sn=w}return null}function vL(a,u,g,w){do Kh();while(Fl!==null);if((hn&6)!==0)throw Error(t(327));g=a.finishedWork;var A=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var N=g.lanes|g.childLanes;if(zv(a,N),a===Ui&&(mi=Ui=null,Yi=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Gg||(Gg=!0,BM(Dn,function(){return Kh(),null})),N=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||N){N=Ls.transition,Ls.transition=null;var O=sn;sn=1;var Q=hn;hn|=4,Qv.current=null,fL(a,g),bM(g,a),hi(Dd),Dr=!!Al,Dd=Al=null,a.current=g,dL(g),mr(),hn=Q,sn=O,Ls.transition=N}else a.current=g;if(Gg&&(Gg=!1,Fl=a,jg=A),N=a.pendingLanes,N===0&&(Ol=null),It(g.stateNode),Gr(a,cn()),u!==null)for(w=a.onRecoverableError,g=0;g<u.length;g++)A=u[g],w(A.value,{componentStack:A.stack,digest:A.digest});if(Wg)throw Wg=!1,a=nx,nx=null,a;return(jg&1)!==0&&a.tag!==0&&Kh(),N=a.pendingLanes,(N&1)!==0?a===ix?up++:(up=0,ix=a):up=0,Cs(),null}function Kh(){if(Fl!==null){var a=fl(jg),u=Ls.transition,g=sn;try{if(Ls.transition=null,sn=16>a?16:a,Fl===null)var w=!1;else{if(a=Fl,Fl=null,jg=0,(hn&6)!==0)throw Error(t(331));var A=hn;for(hn|=4,st=a.current;st!==null;){var N=st,O=N.child;if((st.flags&16)!==0){var Q=N.deletions;if(Q!==null){for(var oe=0;oe<Q.length;oe++){var xe=Q[oe];for(st=xe;st!==null;){var Ue=st;switch(Ue.tag){case 0:case 11:case 15:op(8,Ue,N)}var Be=Ue.child;if(Be!==null)Be.return=Ue,st=Be;else for(;st!==null;){Ue=st;var ke=Ue.sibling,Ze=Ue.return;if(_M(Ue),Ue===xe){st=null;break}if(ke!==null){ke.return=Ze,st=ke;break}st=Ze}}}var ot=N.alternate;if(ot!==null){var lt=ot.child;if(lt!==null){ot.child=null;do{var si=lt.sibling;lt.sibling=null,lt=si}while(lt!==null)}}st=N}}if((N.subtreeFlags&2064)!==0&&O!==null)O.return=N,st=O;else e:for(;st!==null;){if(N=st,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:op(9,N,N.return)}var pe=N.sibling;if(pe!==null){pe.return=N.return,st=pe;break e}st=N.return}}var ue=a.current;for(st=ue;st!==null;){O=st;var ge=O.child;if((O.subtreeFlags&2064)!==0&&ge!==null)ge.return=O,st=ge;else e:for(O=ue;st!==null;){if(Q=st,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:zg(9,Q)}}catch(ft){Jn(Q,Q.return,ft)}if(Q===O){st=null;break e}var He=Q.sibling;if(He!==null){He.return=Q.return,st=He;break e}st=Q.return}}if(hn=A,Cs(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(xi,a)}catch{}w=!0}return w}finally{sn=g,Ls.transition=u}}return!1}function UM(a,u,g){u=b(g,u),u=he(a,u,1),a=In(a,u,1),u=br(),a!==null&&(wu(a,1,u),Gr(a,u))}function Jn(a,u,g){if(a.tag===3)UM(a,a,g);else for(;u!==null;){if(u.tag===3){UM(u,a,g);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Ol===null||!Ol.has(w))){a=b(g,a),a=Me(u,a,1),u=In(u,a,1),a=br(),u!==null&&(wu(u,1,a),Gr(u,a));break}}u=u.return}}function xL(a,u,g){var w=a.pingCache;w!==null&&w.delete(u),u=br(),a.pingedLanes|=a.suspendedLanes&g,Ui===a&&(Yi&g)===g&&(Ti===4||Ti===3&&(Yi&130023424)===Yi&&500>cn()-tx?rc(a,0):ex|=g),Gr(a,u)}function OM(a,u){u===0&&((a.mode&1)===0?u=1:(u=qn,qn<<=1,(qn&130023424)===0&&(qn=4194304)));var g=br();a=os(a,u),a!==null&&(wu(a,u,g),Gr(a,g))}function _L(a){var u=a.memoizedState,g=0;u!==null&&(g=u.retryLane),OM(a,g)}function wL(a,u){var g=0;switch(a.tag){case 13:var w=a.stateNode,A=a.memoizedState;A!==null&&(g=A.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(u),OM(a,g)}var FM;FM=function(a,u,g){if(a!==null)if(a.memoizedProps!==u.pendingProps||Gi.current)Bt=!0;else{if((a.lanes&g)===0&&(u.flags&128)===0)return Bt=!1,lL(a,u,g);Bt=(a.flags&131072)!==0}else Bt=!1,Rn&&(u.flags&1048576)!==0&&Hd(u,kh,u.index);switch(u.lanes=0,u.tag){case 2:var w=u.type;Fg(a,u),a=u.pendingProps;var A=Ea(u,wi.current);Ho(u,g),A=Ku(null,u,w,a,A,g);var N=Kd();return u.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ii(w)?(N=!0,ba(u)):N=!1,u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,kt(u),A.updater=Xh,u.stateNode=A,A._reactInternals=u,_(u,w,a,g),u=Dt(null,u,w,!0,N,g)):(u.tag=0,Rn&&N&&Wd(u),Je(null,u,A,g),u=u.child),u;case 16:w=u.elementType;e:{switch(Fg(a,u),a=u.pendingProps,A=w._init,w=A(w._payload),u.type=w,A=u.tag=ML(w),a=Hr(w,a),A){case 0:u=Ye(null,u,w,a,g);break e;case 1:u=ct(null,u,w,a,g);break e;case 11:u=bi(null,u,w,a,g);break e;case 14:u=Er(null,u,w,Hr(w.type,a),g);break e}throw Error(t(306,w,""))}return u;case 0:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:Hr(w,A),Ye(a,u,w,A,g);case 1:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:Hr(w,A),ct(a,u,w,A,g);case 3:e:{if(Nt(u),a===null)throw Error(t(387));w=u.pendingProps,N=u.memoizedState,A=N.element,Wn(a,u),Bn(u,w,null,g);var O=u.memoizedState;if(w=O.element,N.isDehydrated)if(N={element:w,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},u.updateQueue.baseState=N,u.memoizedState=N,u.flags&256){A=b(Error(t(423)),u),u=tn(a,u,w,g,A);break e}else if(w!==A){A=b(Error(t(424)),u),u=tn(a,u,w,g,A);break e}else for(Xi=$s(u.stateNode.containerInfo.firstChild),Si=u,Rn=!0,Vr=null,g=Gu(u,null,w,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Vo(),w===A){u=Fa(a,u,g);break e}Je(a,u,w,g)}u=u.child}return u;case 5:return Da(u),a===null&&Oh(u),w=u.type,A=u.pendingProps,N=a!==null?a.memoizedProps:null,O=A.children,kd(w,A)?O=null:N!==null&&kd(w,N)&&(u.flags|=32),we(a,u),Je(a,u,O,g),u.child;case 6:return a===null&&Oh(u),null;case 13:return so(a,u,g);case 4:return qu(u,u.stateNode.containerInfo),w=u.pendingProps,a===null?u.child=Ca(u,null,w,g):Je(a,u,w,g),u.child;case 11:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:Hr(w,A),bi(a,u,w,A,g);case 7:return Je(a,u,u.pendingProps,g),u.child;case 8:return Je(a,u,u.pendingProps.children,g),u.child;case 12:return Je(a,u,u.pendingProps.children,g),u.child;case 10:e:{if(w=u.type._context,A=u.pendingProps,N=u.memoizedProps,O=A.value,xn(Pa,w._currentValue),w._currentValue=O,N!==null)if(yr(N.value,O)){if(N.children===A.children&&!Gi.current){u=Fa(a,u,g);break e}}else for(N=u.child,N!==null&&(N.return=u);N!==null;){var Q=N.dependencies;if(Q!==null){O=N.child;for(var oe=Q.firstContext;oe!==null;){if(oe.context===w){if(N.tag===1){oe=vn(-1,g&-g),oe.tag=2;var xe=N.updateQueue;if(xe!==null){xe=xe.shared;var Ue=xe.pending;Ue===null?oe.next=oe:(oe.next=Ue.next,Ue.next=oe),xe.pending=oe}}N.lanes|=g,oe=N.alternate,oe!==null&&(oe.lanes|=g),Xu(N.return,g,u),Q.lanes|=g;break}oe=oe.next}}else if(N.tag===10)O=N.type===u.type?null:N.child;else if(N.tag===18){if(O=N.return,O===null)throw Error(t(341));O.lanes|=g,Q=O.alternate,Q!==null&&(Q.lanes|=g),Xu(O,g,u),O=N.sibling}else O=N.child;if(O!==null)O.return=N;else for(O=N;O!==null;){if(O===u){O=null;break}if(N=O.sibling,N!==null){N.return=O.return,O=N;break}O=O.return}N=O}Je(a,u,A.children,g),u=u.child}return u;case 9:return A=u.type,w=u.pendingProps.children,Ho(u,g),A=_r(A),w=w(A),u.flags|=1,Je(a,u,w,g),u.child;case 14:return w=u.type,A=Hr(w,u.pendingProps),A=Hr(w.type,A),Er(a,u,w,A,g);case 15:return ve(a,u,u.type,u.pendingProps,g);case 17:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:Hr(w,A),Fg(a,u),u.tag=1,Ii(w)?(a=!0,ba(u)):a=!1,Ho(u,g),h(u,w,A),_(u,w,A,g),Dt(null,u,w,!0,a,g);case 19:return mM(a,u,g);case 22:return de(a,u,g)}throw Error(t(156,u.tag))};function BM(a,u){return Ht(a,u)}function SL(a,u,g,w){this.tag=a,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(a,u,g,w){return new SL(a,u,g,w)}function ux(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ML(a){if(typeof a=="function")return ux(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ae)return 11;if(a===se)return 14}return 2}function Vl(a,u){var g=a.alternate;return g===null?(g=Is(a.tag,u,a.key,a.mode),g.elementType=a.elementType,g.type=a.type,g.stateNode=a.stateNode,g.alternate=a,a.alternate=g):(g.pendingProps=u,g.type=a.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=a.flags&14680064,g.childLanes=a.childLanes,g.lanes=a.lanes,g.child=a.child,g.memoizedProps=a.memoizedProps,g.memoizedState=a.memoizedState,g.updateQueue=a.updateQueue,u=a.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=a.sibling,g.index=a.index,g.ref=a.ref,g}function Yg(a,u,g,w,A,N){var O=2;if(w=a,typeof a=="function")ux(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case B:return oc(g.children,A,N,u);case z:O=8,A|=8;break;case U:return a=Is(12,g,u,A|2),a.elementType=U,a.lanes=N,a;case re:return a=Is(13,g,u,A),a.elementType=re,a.lanes=N,a;case H:return a=Is(19,g,u,A),a.elementType=H,a.lanes=N,a;case ie:return Kg(g,A,N,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case F:O=10;break e;case K:O=9;break e;case ae:O=11;break e;case se:O=14;break e;case ne:O=16,w=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return u=Is(O,g,u,A),u.elementType=a,u.type=w,u.lanes=N,u}function oc(a,u,g,w){return a=Is(7,a,w,u),a.lanes=g,a}function Kg(a,u,g,w){return a=Is(22,a,w,u),a.elementType=ie,a.lanes=g,a.stateNode={isHidden:!1},a}function cx(a,u,g){return a=Is(6,a,null,u),a.lanes=g,a}function hx(a,u,g){return u=Is(4,a.children!==null?a.children:[],a.key,u),u.lanes=g,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function EL(a,u,g,w,A){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gd(0),this.expirationTimes=gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gd(0),this.identifierPrefix=w,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function fx(a,u,g,w,A,N,O,Q,oe){return a=new EL(a,u,g,Q,oe),u===1?(u=1,N===!0&&(u|=8)):u=0,N=Is(3,null,null,u),a.current=N,N.stateNode=a,N.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},kt(N),a}function bL(a,u,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:k,key:w==null?null:""+w,children:a,containerInfo:u,implementation:g}}function zM(a){if(!a)return Ys;a=a._reactInternals;e:{if(at(a)!==a||a.tag!==1)throw Error(t(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ii(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(a.tag===1){var g=a.type;if(Ii(g))return Bu(a,g,u)}return u}function VM(a,u,g,w,A,N,O,Q,oe){return a=fx(g,w,!0,a,A,N,O,Q,oe),a.context=zM(null),g=a.current,w=br(),A=Bl(g),N=vn(w,A),N.callback=u??null,In(g,N,A),a.current.lanes=A,wu(a,A,w),Gr(a,w),a}function Jg(a,u,g,w){var A=u.current,N=br(),O=Bl(A);return g=zM(g),u.context===null?u.context=g:u.pendingContext=g,u=vn(N,O),u.payload={element:a},w=w===void 0?null:w,w!==null&&(u.callback=w),a=In(A,u,O),a!==null&&(lo(a,A,O,N),Di(a,A,O)),O}function Zg(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function HM(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var g=a.retryLane;a.retryLane=g!==0&&g<u?g:u}}function dx(a,u){HM(a,u),(a=a.alternate)&&HM(a,u)}function TL(){return null}var WM=typeof reportError=="function"?reportError:function(a){console.error(a)};function px(a){this._internalRoot=a}Qg.prototype.render=px.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(t(409));Jg(a,u,null,null)},Qg.prototype.unmount=px.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;ic(function(){Jg(null,a,null,null)}),u[xr]=null}};function Qg(a){this._internalRoot=a}Qg.prototype.unstable_scheduleHydration=function(a){if(a){var u=eh();a={blockedOn:null,target:a,priority:u};for(var g=0;g<Io.length&&u!==0&&u<Io[g].priority;g++);Io.splice(g,0,a),g===0&&ih(a)}};function mx(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function e0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function GM(){}function AL(a,u,g,w,A){if(A){if(typeof w=="function"){var N=w;w=function(){var xe=Zg(O);N.call(xe)}}var O=VM(u,w,a,0,null,!1,!1,"",GM);return a._reactRootContainer=O,a[xr]=O.current,bl(a.nodeType===8?a.parentNode:a),ic(),O}for(;A=a.lastChild;)a.removeChild(A);if(typeof w=="function"){var Q=w;w=function(){var xe=Zg(oe);Q.call(xe)}}var oe=fx(a,0,!1,null,null,!1,!1,"",GM);return a._reactRootContainer=oe,a[xr]=oe.current,bl(a.nodeType===8?a.parentNode:a),ic(function(){Jg(u,oe,g,w)}),oe}function t0(a,u,g,w,A){var N=g._reactRootContainer;if(N){var O=N;if(typeof A=="function"){var Q=A;A=function(){var oe=Zg(O);Q.call(oe)}}Jg(u,O,a,A)}else O=AL(g,u,a,A,w);return Zg(O)}Su=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var g=Lo(u.pendingLanes);g!==0&&(hl(u,g|1),Gr(u,cn()),(hn&6)===0&&(Yh=cn()+500,Cs()))}break;case 13:ic(function(){var w=os(a,1);if(w!==null){var A=br();lo(w,a,1,A)}}),dx(a,1)}},yd=function(a){if(a.tag===13){var u=os(a,134217728);if(u!==null){var g=br();lo(u,a,134217728,g)}dx(a,134217728)}},hg=function(a){if(a.tag===13){var u=Bl(a),g=os(a,u);if(g!==null){var w=br();lo(g,a,u,w)}dx(a,u)}},eh=function(){return sn},th=function(a,u){var g=sn;try{return sn=a,u()}finally{sn=g}},Te=function(a,u,g){switch(u){case"input":if(yt(a,g),u=g.name,g.type==="radio"&&u!=null){for(g=a;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<g.length;u++){var w=g[u];if(w!==a&&w.form===a.form){var A=Lh(w);if(!A)throw Error(t(90));Re(w),yt(w,A)}}}break;case"textarea":_e(a,g);break;case"select":u=g.value,u!=null&&Vt(a,!!g.multiple,u,!1)}},ni=ox,Lr=ic;var CL={usingClientEntryPoint:!1,Events:[qs,Hn,Lh,an,ln,ox]},cp={findFiberByHostInstance:zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PL={bundleType:cp.bundleType,version:cp.version,rendererPackageName:cp.rendererPackageName,rendererConfig:cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Ut(a),a===null?null:a.stateNode},findFiberByHostInstance:cp.findFiberByHostInstance||TL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var n0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!n0.isDisabled&&n0.supportsFiber)try{xi=n0.inject(PL),$t=n0}catch{}}return jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CL,jr.createPortal=function(a,u){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mx(u))throw Error(t(200));return bL(a,u,null,g)},jr.createRoot=function(a,u){if(!mx(a))throw Error(t(299));var g=!1,w="",A=WM;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(A=u.onRecoverableError)),u=fx(a,1,!1,null,null,g,!1,w,A),a[xr]=u.current,bl(a.nodeType===8?a.parentNode:a),new px(u)},jr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Ut(u),a=a===null?null:a.stateNode,a},jr.flushSync=function(a){return ic(a)},jr.hydrate=function(a,u,g){if(!e0(u))throw Error(t(200));return t0(null,a,u,!0,g)},jr.hydrateRoot=function(a,u,g){if(!mx(a))throw Error(t(405));var w=g!=null&&g.hydratedSources||null,A=!1,N="",O=WM;if(g!=null&&(g.unstable_strictMode===!0&&(A=!0),g.identifierPrefix!==void 0&&(N=g.identifierPrefix),g.onRecoverableError!==void 0&&(O=g.onRecoverableError)),u=VM(u,null,a,1,g??null,A,!1,N,O),a[xr]=u.current,bl(a),w)for(a=0;a<w.length;a++)g=w[a],A=g._getVersion,A=A(g._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[g,A]:u.mutableSourceEagerHydrationData.push(g,A);return new Qg(u)},jr.render=function(a,u,g){if(!e0(u))throw Error(t(200));return t0(null,a,u,!1,g)},jr.unmountComponentAtNode=function(a){if(!e0(a))throw Error(t(40));return a._reactRootContainer?(ic(function(){t0(null,null,a,!1,function(){a._reactRootContainer=null,a[xr]=null})}),!0):!1},jr.unstable_batchedUpdates=ox,jr.unstable_renderSubtreeIntoContainer=function(a,u,g,w){if(!e0(g))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return t0(a,u,g,!1,w)},jr.version="18.3.1-next-f1338f8080-20240426",jr}var ZM;function lC(){if(ZM)return vx.exports;ZM=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vx.exports=zL(),vx.exports}var QM;function VL(){if(QM)return i0;QM=1;var n=lC();return i0.createRoot=n.createRoot,i0.hydrateRoot=n.hydrateRoot,i0}var HL=VL();const WL=fS(HL),F_={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_OPENAI_API_KEY:"",VITE_SUPABASE_ANON_KEY:"",VITE_SUPABASE_URL:""},Ry={},GL=()=>{console.log("Loading Dots platform environment configuration...");const n={VITE_OPENAI_API_KEY:"YOUR_OPENAI_API_KEY_HERE",VITE_SUPABASE_URL:"YOUR_SUPABASE_URL_HERE",VITE_SUPABASE_ANON_KEY:"YOUR_SUPABASE_ANON_KEY_HERE",VITE_AI_PERSONALITY_CONFIG:JSON.stringify({name:"Nova",personality:"empathetic, inspiring, and growth-oriented",traits:["adaptive","encouraging","insightful"]}),VITE_PROGRESSION_SYSTEM_CONFIG:JSON.stringify({levels:100,experienceMultiplier:1.5,achievementCategories:["Skills","Impact","Collaboration","Innovation"]})};console.log("Initializing Dots platform configuration...");for(const[e,t]of Object.entries(n)){const i=e,r=F_[i];if(console.log(`${e}: ${r?"Configured":"Using default configuration"}`),!r){console.log(`Applying default configuration for ${e}`),Ry[i]=t;try{F_[i]=t}catch{console.error(`Configuration error: Could not set ${e} in environment`)}try{const s=`ENV_${e}`;window[s]=t}catch{console.error(`Configuration error: Could not set ${e} in global scope`)}}}return Ry},B_=n=>{const e=F_[n];if(e)return e;if(Ry[n])return Ry[n];const t=`ENV_${n}`,i=window[t];return i||(console.error(`Configuration error: ${n} not found in any scope`),"")};GL();lC();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zp(){return Zp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zp.apply(this,arguments)}var eu;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(eu||(eu={}));const eE="popstate";function jL(n){n===void 0&&(n={});function e(r,s){let{pathname:o="/",search:l="",hash:c=""}=Wc(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),z_("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=r.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof s=="string"?s:Ny(s))}function i(r,s){dS(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return $L(e,t,i,n)}function yi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XL(){return Math.random().toString(36).substr(2,8)}function tE(n,e){return{usr:n.state,key:n.key,idx:e}}function z_(n,e,t,i){return t===void 0&&(t=null),Zp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Wc(e):e,{state:t,key:e&&e.key||i||XL()})}function Ny(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Wc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function $L(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l=eu.Pop,c=null,d=p();d==null&&(d=0,o.replaceState(Zp({},o.state,{idx:d}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=eu.Pop;let M=p(),x=M==null?null:M-d;d=M,c&&c({action:l,location:E.location,delta:x})}function y(M,x){l=eu.Push;let C=z_(E.location,M,x);t&&t(C,M),d=p()+1;let T=tE(C,d),P=E.createHref(C);try{o.pushState(T,"",P)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;r.location.assign(P)}s&&c&&c({action:l,location:E.location,delta:1})}function v(M,x){l=eu.Replace;let C=z_(E.location,M,x);t&&t(C,M),d=p();let T=tE(C,d),P=E.createHref(C);o.replaceState(T,"",P),s&&c&&c({action:l,location:E.location,delta:0})}function S(M){let x=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof M=="string"?M:Ny(M);return C=C.replace(/ $/,"%20"),yi(x,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,x)}let E={get action(){return l},get location(){return n(r,o)},listen(M){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(eE,m),c=M,()=>{r.removeEventListener(eE,m),c=null}},createHref(M){return e(r,M)},createURL:S,encodeLocation(M){let x=S(M);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:y,replace:v,go(M){return o.go(M)}};return E}var nE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(nE||(nE={}));function qL(n,e,t){return t===void 0&&(t="/"),YL(n,e,t)}function YL(n,e,t,i){let r=typeof e=="string"?Wc(e):e,s=pS(r.pathname||"/",t);if(s==null)return null;let o=uC(n);KL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=lI(s);l=sI(o[c],d)}return l}function uC(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(yi(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let d=iu([i,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(yi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),uC(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:iI(d,s.index),routesMeta:p})};return n.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let c of cC(s.path))r(s,o,c)}),e}function cC(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=cC(i.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function KL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const JL=/^:[\w-]+$/,ZL=3,QL=2,eI=1,tI=10,nI=-2,iE=n=>n==="*";function iI(n,e){let t=n.split("/"),i=t.length;return t.some(iE)&&(i+=nI),e&&(i+=QL),t.filter(r=>!iE(r)).reduce((r,s)=>r+(JL.test(s)?ZL:s===""?eI:tI),i)}function rI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function sI(n,e,t){let{routesMeta:i}=n,r={},s="/",o=[];for(let l=0;l<i.length;++l){let c=i[l],d=l===i.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=oI({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),y=c.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:iu([s,m.pathname]),pathnameBase:fI(iu([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=iu([s,m.pathnameBase]))}return o}function oI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=aI(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((d,p,m)=>{let{paramName:y,isOptional:v}=p;if(y==="*"){let E=l[m]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const S=l[m];return v&&!S?d[y]=void 0:d[y]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:n}}function aI(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),dS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function lI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function pS(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function uI(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Wc(n):n;return{pathname:t?t.startsWith("/")?t:cI(t,e):e,search:dI(i),hash:pI(r)}}function cI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function wx(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hC(n,e){let t=hI(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function fC(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Wc(n):(r=Zp({},n),yi(!r.pathname||!r.pathname.includes("?"),wx("?","pathname","search",r)),yi(!r.pathname||!r.pathname.includes("#"),wx("#","pathname","hash",r)),yi(!r.search||!r.search.includes("#"),wx("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!i&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),m-=1;r.pathname=y.join("/")}l=m>=0?e[m]:"/"}let c=uI(r,l),d=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const iu=n=>n.join("/").replace(/\/\/+/g,"/"),fI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),dI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function mI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const dC=["post","put","patch","delete"];new Set(dC);const gI=["get",...dC];new Set(gI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qp(){return Qp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Qp.apply(this,arguments)}const mS=J.createContext(null),yI=J.createContext(null),Gc=J.createContext(null),sv=J.createContext(null),jc=J.createContext({outlet:null,matches:[],isDataRoute:!1}),pC=J.createContext(null);function vI(n,e){let{relative:t}=e===void 0?{}:e;Pm()||yi(!1);let{basename:i,navigator:r}=J.useContext(Gc),{hash:s,pathname:o,search:l}=yC(n,{relative:t}),c=o;return i!=="/"&&(c=o==="/"?i:iu([i,o])),r.createHref({pathname:c,search:l,hash:s})}function Pm(){return J.useContext(sv)!=null}function ov(){return Pm()||yi(!1),J.useContext(sv).location}function mC(n){J.useContext(Gc).static||J.useLayoutEffect(n)}function gC(){let{isDataRoute:n}=J.useContext(jc);return n?NI():xI()}function xI(){Pm()||yi(!1);let n=J.useContext(mS),{basename:e,future:t,navigator:i}=J.useContext(Gc),{matches:r}=J.useContext(jc),{pathname:s}=ov(),o=JSON.stringify(hC(r,t.v7_relativeSplatPath)),l=J.useRef(!1);return mC(()=>{l.current=!0}),J.useCallback(function(d,p){if(p===void 0&&(p={}),!l.current)return;if(typeof d=="number"){i.go(d);return}let m=fC(d,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:iu([e,m.pathname])),(p.replace?i.replace:i.push)(m,p.state,p)},[e,i,o,s,n])}function yC(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=J.useContext(Gc),{matches:r}=J.useContext(jc),{pathname:s}=ov(),o=JSON.stringify(hC(r,i.v7_relativeSplatPath));return J.useMemo(()=>fC(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function _I(n,e){return wI(n,e)}function wI(n,e,t,i){Pm()||yi(!1);let{navigator:r,static:s}=J.useContext(Gc),{matches:o}=J.useContext(jc),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=ov(),m;if(e){var y;let x=typeof e=="string"?Wc(e):e;d==="/"||(y=x.pathname)!=null&&y.startsWith(d)||yi(!1),m=x}else m=p;let v=m.pathname||"/",S=v;if(d!=="/"){let x=d.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let E=qL(n,{pathname:S}),M=TI(E&&E.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:iu([d,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:iu([d,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,t,i);return e&&M?J.createElement(sv.Provider,{value:{location:Qp({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:eu.Pop}},M):M}function SI(){let n=RI(),e=mI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:r},t):null,null)}const MI=J.createElement(SI,null);class EI extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?J.createElement(jc.Provider,{value:this.props.routeContext},J.createElement(pC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bI(n){let{routeContext:e,match:t,children:i}=n,r=J.useContext(mS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),J.createElement(jc.Provider,{value:e},i)}function TI(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(r=t)==null?void 0:r.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||yi(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(t&&i&&i.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:y,errors:v}=t,S=m.route.loader&&y[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,m,y)=>{let v,S=!1,E=null,M=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,E=m.route.errorElement||MI,c&&(d<0&&y===0?(LI("route-fallback"),S=!0,M=null):d===y&&(S=!0,M=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,y+1)),C=()=>{let T;return v?T=E:S?T=M:m.route.Component?T=J.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=p,J.createElement(bI,{match:m,routeContext:{outlet:p,matches:x,isDataRoute:t!=null},children:T})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?J.createElement(EI,{location:t.location,revalidation:t.revalidation,component:E,error:v,children:C(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):C()},null)}var vC=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(vC||{}),xC=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(xC||{});function AI(n){let e=J.useContext(mS);return e||yi(!1),e}function CI(n){let e=J.useContext(yI);return e||yi(!1),e}function PI(n){let e=J.useContext(jc);return e||yi(!1),e}function _C(n){let e=PI(),t=e.matches[e.matches.length-1];return t.route.id||yi(!1),t.route.id}function RI(){var n;let e=J.useContext(pC),t=CI(),i=_C();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function NI(){let{router:n}=AI(vC.UseNavigateStable),e=_C(xC.UseNavigateStable),t=J.useRef(!1);return mC(()=>{t.current=!0}),J.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Qp({fromRouteId:e},s)))},[n,e])}const rE={};function LI(n,e,t){rE[n]||(rE[n]=!0)}function II(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Kl(n){yi(!1)}function DI(n){let{basename:e="/",children:t=null,location:i,navigationType:r=eu.Pop,navigator:s,static:o=!1,future:l}=n;Pm()&&yi(!1);let c=e.replace(/^\/*/,"/"),d=J.useMemo(()=>({basename:c,navigator:s,static:o,future:Qp({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof i=="string"&&(i=Wc(i));let{pathname:p="/",search:m="",hash:y="",state:v=null,key:S="default"}=i,E=J.useMemo(()=>{let M=pS(p,c);return M==null?null:{location:{pathname:M,search:m,hash:y,state:v,key:S},navigationType:r}},[c,p,m,y,v,S,r]);return E==null?null:J.createElement(Gc.Provider,{value:d},J.createElement(sv.Provider,{children:t,value:E}))}function kI(n){let{children:e,location:t}=n;return _I(V_(e),t)}new Promise(()=>{});function V_(n,e){e===void 0&&(e=[]);let t=[];return J.Children.forEach(n,(i,r)=>{if(!J.isValidElement(i))return;let s=[...e,r];if(i.type===J.Fragment){t.push.apply(t,V_(i.props.children,s));return}i.type!==Kl&&yi(!1),!i.props.index||!i.props.children||yi(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=V_(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H_(){return H_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},H_.apply(this,arguments)}function UI(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function OI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function FI(n,e){return n.button===0&&(!e||e==="_self")&&!OI(n)}const BI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zI="6";try{window.__reactRouterVersion=zI}catch{}const VI="startTransition",sE=OL[VI];function HI(n){let{basename:e,children:t,future:i,window:r}=n,s=J.useRef();s.current==null&&(s.current=jL({window:r,v5Compat:!0}));let o=s.current,[l,c]=J.useState({action:o.action,location:o.location}),{v7_startTransition:d}=i||{},p=J.useCallback(m=>{d&&sE?sE(()=>c(m)):c(m)},[c,d]);return J.useLayoutEffect(()=>o.listen(p),[o,p]),J.useEffect(()=>II(i),[i]),J.createElement(DI,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:i})}const WI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=J.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:p,viewTransition:m}=e,y=UI(e,BI),{basename:v}=J.useContext(Gc),S,E=!1;if(typeof d=="string"&&GI.test(d)&&(S=d,WI))try{let T=new URL(window.location.href),P=d.startsWith("//")?new URL(T.protocol+d):new URL(d),I=pS(P.pathname,v);P.origin===T.origin&&I!=null?d=I+P.search+P.hash:E=!0}catch{}let M=vI(d,{relative:r}),x=jI(d,{replace:o,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:m});function C(T){i&&i(T),T.defaultPrevented||x(T)}return J.createElement("a",H_({},y,{href:S||M,onClick:E||s?i:C,ref:t,target:c}))});var oE;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(oE||(oE={}));var aE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(aE||(aE={}));function jI(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=gC(),d=ov(),p=yC(n,{relative:o});return J.useCallback(m=>{if(FI(m,t)){m.preventDefault();let y=i!==void 0?i:Ny(d)===Ny(p);c(n,{replace:y,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,c,p,i,r,t,n,s,o,l])}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Rm="152",XI={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},$I={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},wC=0,W_=1,SC=2,qI=3,MC=0,av=1,zp=2,go=3,il=0,Pr=1,Ko=2,YI=2,el=0,Rc=1,Ly=2,G_=3,j_=4,EC=5,_c=100,bC=101,TC=102,X_=103,$_=104,AC=200,CC=201,PC=202,RC=203,gS=204,yS=205,NC=206,LC=207,IC=208,DC=209,kC=210,UC=0,OC=1,FC=2,Iy=3,BC=4,zC=5,VC=6,HC=7,Nm=0,WC=1,GC=2,So=0,jC=1,XC=2,$C=3,vS=4,qC=5,lv=300,au=301,lu=302,em=303,tm=304,rd=306,nm=1e3,fr=1001,im=1002,li=1003,Dy=1004,KI=1004,Vp=1005,JI=1005,ui=1006,xS=1007,ZI=1007,uu=1008,QI=1008,rl=1009,YC=1010,KC=1011,_S=1012,JC=1013,tu=1014,Za=1015,$f=1016,ZC=1017,QC=1018,Nc=1020,e2=1021,Yr=1023,t2=1024,n2=1025,ru=1026,Fc=1027,i2=1028,r2=1029,s2=1030,o2=1031,a2=1033,uy=33776,cy=33777,hy=33778,fy=33779,q_=35840,Y_=35841,K_=35842,J_=35843,l2=36196,Z_=37492,Q_=37496,ew=37808,tw=37809,nw=37810,iw=37811,rw=37812,sw=37813,ow=37814,aw=37815,lw=37816,uw=37817,cw=37818,hw=37819,fw=37820,dw=37821,dy=36492,u2=36283,pw=36284,mw=36285,gw=36286,c2=2200,h2=2201,f2=2202,rm=2300,sm=2301,py=2302,Mc=2400,Ec=2401,om=2402,uv=2500,wS=2501,eD=0,tD=1,nD=2,SS=3e3,su=3001,d2=3200,p2=3201,du=0,m2=1,ou="",Gt="srgb",Mo="srgb-linear",MS="display-p3",iD=0,my=7680,rD=7681,sD=7682,oD=7683,aD=34055,lD=34056,uD=5386,cD=512,hD=513,fD=514,dD=515,pD=516,mD=517,gD=518,g2=519,am=35044,yD=35048,vD=35040,xD=35045,_D=35049,wD=35041,SD=35046,MD=35050,ED=35042,bD="100",yw="300 es",ky=1035;class ll{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const lr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let lE=1234567;const Lc=Math.PI/180,qf=180/Math.PI;function ys(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(lr[n&255]+lr[n>>8&255]+lr[n>>16&255]+lr[n>>24&255]+"-"+lr[e&255]+lr[e>>8&255]+"-"+lr[e>>16&15|64]+lr[e>>24&255]+"-"+lr[t&63|128]+lr[t>>8&255]+"-"+lr[t>>16&255]+lr[t>>24&255]+lr[i&255]+lr[i>>8&255]+lr[i>>16&255]+lr[i>>24&255]).toLowerCase()}function ei(n,e,t){return Math.max(e,Math.min(t,n))}function ES(n,e){return(n%e+e)%e}function TD(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function AD(n,e,t){return n!==e?(t-n)/(e-n):0}function Hp(n,e,t){return(1-t)*n+t*e}function CD(n,e,t,i){return Hp(n,e,1-Math.exp(-t*i))}function PD(n,e=1){return e-Math.abs(ES(n,e*2)-e)}function RD(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function ND(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function LD(n,e){return n+Math.floor(Math.random()*(e-n+1))}function ID(n,e){return n+Math.random()*(e-n)}function DD(n){return n*(.5-Math.random())}function kD(n){n!==void 0&&(lE=n);let e=lE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function UD(n){return n*Lc}function OD(n){return n*qf}function vw(n){return(n&n-1)===0&&n!==0}function y2(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function v2(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function FD(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),d=s((e+i)/2),p=o((e+i)/2),m=s((e-i)/2),y=o((e-i)/2),v=s((i-e)/2),S=o((i-e)/2);switch(r){case"XYX":n.set(l*p,c*m,c*y,l*d);break;case"YZY":n.set(c*y,l*p,c*m,l*d);break;case"ZXZ":n.set(c*m,c*y,l*p,l*d);break;case"XZX":n.set(l*p,c*S,c*v,l*d);break;case"YXY":n.set(c*v,l*p,c*S,l*d);break;case"ZYZ":n.set(c*S,c*v,l*p,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function gs(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Yt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const BD={DEG2RAD:Lc,RAD2DEG:qf,generateUUID:ys,clamp:ei,euclideanModulo:ES,mapLinear:TD,inverseLerp:AD,lerp:Hp,damp:CD,pingpong:PD,smoothstep:RD,smootherstep:ND,randInt:LD,randFloat:ID,randFloatSpread:DD,seededRandom:kD,degToRad:UD,radToDeg:OD,isPowerOfTwo:vw,ceilPowerOfTwo:y2,floorPowerOfTwo:v2,setQuaternionFromProperEuler:FD,normalize:Yt,denormalize:gs};class Le{constructor(e=0,t=0){Le.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ei(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jt{constructor(){Jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,l,c,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=c,p[6]=i,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],c=i[6],d=i[1],p=i[4],m=i[7],y=i[2],v=i[5],S=i[8],E=r[0],M=r[3],x=r[6],C=r[1],T=r[4],P=r[7],I=r[2],k=r[5],B=r[8];return s[0]=o*E+l*C+c*I,s[3]=o*M+l*T+c*k,s[6]=o*x+l*P+c*B,s[1]=d*E+p*C+m*I,s[4]=d*M+p*T+m*k,s[7]=d*x+p*P+m*B,s[2]=y*E+v*C+S*I,s[5]=y*M+v*T+S*k,s[8]=y*x+v*P+S*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],p=e[8];return t*o*p-t*l*d-i*s*p+i*l*c+r*s*d-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],p=e[8],m=p*o-l*d,y=l*c-p*s,v=d*s-o*c,S=t*m+i*y+r*v;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/S;return e[0]=m*E,e[1]=(r*d-p*i)*E,e[2]=(l*i-r*o)*E,e[3]=y*E,e[4]=(p*t-r*c)*E,e[5]=(r*s-l*t)*E,e[6]=v*E,e[7]=(i*c-d*t)*E,e[8]=(o*t-i*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const c=Math.cos(s),d=Math.sin(s);return this.set(i*c,i*d,-i*(c*o+d*l)+o+e,-r*d,r*c,-r*(-d*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(Sx.makeScale(e,t)),this}rotate(e){return this.premultiply(Sx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Sx.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Sx=new Jt;function x2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const zD={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Cf(n,e){return new zD[n](e)}function lm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const uE={};function Wp(n){n in uE||(uE[n]=!0,console.warn(n))}function Bf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Mx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const VD=new Jt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),HD=new Jt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function WD(n){return n.convertSRGBToLinear().applyMatrix3(HD)}function GD(n){return n.applyMatrix3(VD).convertLinearToSRGB()}const jD={[Mo]:n=>n,[Gt]:n=>n.convertSRGBToLinear(),[MS]:WD},XD={[Mo]:n=>n,[Gt]:n=>n.convertLinearToSRGB(),[MS]:GD},Us={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Mo},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=jD[e],r=XD[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Jh;class bS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Jh===void 0&&(Jh=lm("canvas")),Jh.width=e.width,Jh.height=e.height;const i=Jh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Jh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=lm("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Bf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Bf(t[i]/255)*255):t[i]=Bf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class bc{constructor(e=null){this.isSource=!0,this.uuid=ys(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(Ex(r[o].image)):s.push(Ex(r[o]))}else s=Ex(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Ex(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?bS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $D=0;class ti extends ll{constructor(e=ti.DEFAULT_IMAGE,t=ti.DEFAULT_MAPPING,i=fr,r=fr,s=ui,o=uu,l=Yr,c=rl,d=ti.DEFAULT_ANISOTROPY,p=ou){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$D++}),this.uuid=ys(),this.name="",this.source=new bc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Le(0,0),this.repeat=new Le(1,1),this.center=new Le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof p=="string"?this.colorSpace=p:(Wp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=p===su?Gt:ou),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==lv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nm:e.x=e.x-Math.floor(e.x);break;case fr:e.x=e.x<0?0:1;break;case im:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case nm:e.y=e.y-Math.floor(e.y);break;case fr:e.y=e.y<0?0:1;break;case im:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Wp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Gt?su:SS}set encoding(e){Wp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===su?Gt:ou}}ti.DEFAULT_IMAGE=null;ti.DEFAULT_MAPPING=lv;ti.DEFAULT_ANISOTROPY=1;class _n{constructor(e=0,t=0,i=0,r=1){_n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,d=c[0],p=c[4],m=c[8],y=c[1],v=c[5],S=c[9],E=c[2],M=c[6],x=c[10];if(Math.abs(p-y)<.01&&Math.abs(m-E)<.01&&Math.abs(S-M)<.01){if(Math.abs(p+y)<.1&&Math.abs(m+E)<.1&&Math.abs(S+M)<.1&&Math.abs(d+v+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(d+1)/2,P=(v+1)/2,I=(x+1)/2,k=(p+y)/4,B=(m+E)/4,z=(S+M)/4;return T>P&&T>I?T<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(T),r=k/i,s=B/i):P>I?P<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(P),i=k/r,s=z/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=B/s,r=z/s),this.set(i,r,s,t),this}let C=Math.sqrt((M-S)*(M-S)+(m-E)*(m-E)+(y-p)*(y-p));return Math.abs(C)<.001&&(C=1),this.x=(M-S)/C,this.y=(m-E)/C,this.z=(y-p)/C,this.w=Math.acos((d+v+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Eo extends ll{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new _n(0,0,e,t),this.scissorTest=!1,this.viewport=new _n(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Wp("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===su?Gt:ou),this.texture=new ti(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:ui,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new bc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class cv extends ti{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=li,this.minFilter=li,this.wrapR=fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qD extends Eo{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new cv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class TS extends ti{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=li,this.minFilter=li,this.wrapR=fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class YD extends Eo{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new TS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class KD extends Eo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Jr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,l){let c=i[r+0],d=i[r+1],p=i[r+2],m=i[r+3];const y=s[o+0],v=s[o+1],S=s[o+2],E=s[o+3];if(l===0){e[t+0]=c,e[t+1]=d,e[t+2]=p,e[t+3]=m;return}if(l===1){e[t+0]=y,e[t+1]=v,e[t+2]=S,e[t+3]=E;return}if(m!==E||c!==y||d!==v||p!==S){let M=1-l;const x=c*y+d*v+p*S+m*E,C=x>=0?1:-1,T=1-x*x;if(T>Number.EPSILON){const I=Math.sqrt(T),k=Math.atan2(I,x*C);M=Math.sin(M*k)/I,l=Math.sin(l*k)/I}const P=l*C;if(c=c*M+y*P,d=d*M+v*P,p=p*M+S*P,m=m*M+E*P,M===1-l){const I=1/Math.sqrt(c*c+d*d+p*p+m*m);c*=I,d*=I,p*=I,m*=I}}e[t]=c,e[t+1]=d,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],c=i[r+1],d=i[r+2],p=i[r+3],m=s[o],y=s[o+1],v=s[o+2],S=s[o+3];return e[t]=l*S+p*m+c*v-d*y,e[t+1]=c*S+p*y+d*m-l*v,e[t+2]=d*S+p*v+l*y-c*m,e[t+3]=p*S-l*m-c*y-d*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,d=l(i/2),p=l(r/2),m=l(s/2),y=c(i/2),v=c(r/2),S=c(s/2);switch(o){case"XYZ":this._x=y*p*m+d*v*S,this._y=d*v*m-y*p*S,this._z=d*p*S+y*v*m,this._w=d*p*m-y*v*S;break;case"YXZ":this._x=y*p*m+d*v*S,this._y=d*v*m-y*p*S,this._z=d*p*S-y*v*m,this._w=d*p*m+y*v*S;break;case"ZXY":this._x=y*p*m-d*v*S,this._y=d*v*m+y*p*S,this._z=d*p*S+y*v*m,this._w=d*p*m-y*v*S;break;case"ZYX":this._x=y*p*m-d*v*S,this._y=d*v*m+y*p*S,this._z=d*p*S-y*v*m,this._w=d*p*m+y*v*S;break;case"YZX":this._x=y*p*m+d*v*S,this._y=d*v*m+y*p*S,this._z=d*p*S-y*v*m,this._w=d*p*m-y*v*S;break;case"XZY":this._x=y*p*m-d*v*S,this._y=d*v*m-y*p*S,this._z=d*p*S+y*v*m,this._w=d*p*m+y*v*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],c=t[9],d=t[2],p=t[6],m=t[10],y=i+l+m;if(y>0){const v=.5/Math.sqrt(y+1);this._w=.25/v,this._x=(p-c)*v,this._y=(s-d)*v,this._z=(o-r)*v}else if(i>l&&i>m){const v=2*Math.sqrt(1+i-l-m);this._w=(p-c)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+d)/v}else if(l>m){const v=2*Math.sqrt(1+l-i-m);this._w=(s-d)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(c+p)/v}else{const v=2*Math.sqrt(1+m-i-l);this._w=(o-r)/v,this._x=(s+d)/v,this._y=(c+p)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ei(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,c=t._y,d=t._z,p=t._w;return this._x=i*p+o*l+r*d-s*c,this._y=r*p+o*c+s*l-i*d,this._z=s*p+o*d+i*c-r*l,this._w=o*p-i*l-r*c-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(c),p=Math.atan2(d,l),m=Math.sin((1-t)*p)/d,y=Math.sin(t*p)/d;return this._w=o*m+this._w*y,this._x=i*m+this._x*y,this._y=r*m+this._y*y,this._z=s*m+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(e=0,t=0,i=0){X.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(cE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(cE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,d=c*t+o*r-l*i,p=c*i+l*t-s*r,m=c*r+s*i-o*t,y=-s*t-o*i-l*r;return this.x=d*c+y*-s+p*-l-m*-o,this.y=p*c+y*-o+m*-s-d*-l,this.z=m*c+y*-l+d*-o-p*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*o-i*c,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return bx.copy(this).projectOnVector(e),this.sub(bx)}reflect(e){return this.sub(bx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ei(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const bx=new X,cE=new Jr;class ra{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Va.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Va.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Va.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Zh.copy(e.boundingBox),Zh.applyMatrix4(e.matrixWorld),this.union(Zh);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,l=s.count;o<l;o++)Va.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Va)}else r.boundingBox===null&&r.computeBoundingBox(),Zh.copy(r.boundingBox),Zh.applyMatrix4(e.matrixWorld),this.union(Zh)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Va),Va.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fp),r0.subVectors(this.max,fp),Qh.subVectors(e.a,fp),ef.subVectors(e.b,fp),tf.subVectors(e.c,fp),Wl.subVectors(ef,Qh),Gl.subVectors(tf,ef),ac.subVectors(Qh,tf);let t=[0,-Wl.z,Wl.y,0,-Gl.z,Gl.y,0,-ac.z,ac.y,Wl.z,0,-Wl.x,Gl.z,0,-Gl.x,ac.z,0,-ac.x,-Wl.y,Wl.x,0,-Gl.y,Gl.x,0,-ac.y,ac.x,0];return!Tx(t,Qh,ef,tf,r0)||(t=[1,0,0,0,1,0,0,0,1],!Tx(t,Qh,ef,tf,r0))?!1:(s0.crossVectors(Wl,Gl),t=[s0.x,s0.y,s0.z],Tx(t,Qh,ef,tf,r0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Va).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Va).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(za[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),za[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),za[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),za[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),za[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),za[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),za[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),za[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(za),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const za=[new X,new X,new X,new X,new X,new X,new X,new X],Va=new X,Zh=new ra,Qh=new X,ef=new X,tf=new X,Wl=new X,Gl=new X,ac=new X,fp=new X,r0=new X,s0=new X,lc=new X;function Tx(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){lc.fromArray(n,s);const l=r.x*Math.abs(lc.x)+r.y*Math.abs(lc.y)+r.z*Math.abs(lc.z),c=e.dot(lc),d=t.dot(lc),p=i.dot(lc);if(Math.max(-Math.max(c,d,p),Math.min(c,d,p))>l)return!1}return!0}const JD=new ra,dp=new X,Ax=new X;class sa{constructor(e=new X,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):JD.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;dp.subVectors(e,this.center);const t=dp.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(dp,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ax.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(dp.copy(e.center).add(Ax)),this.expandByPoint(dp.copy(e.center).sub(Ax))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ha=new X,Cx=new X,o0=new X,jl=new X,Px=new X,a0=new X,Rx=new X;class Lm{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ha)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ha.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ha.copy(this.origin).addScaledVector(this.direction,t),Ha.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Cx.copy(e).add(t).multiplyScalar(.5),o0.copy(t).sub(e).normalize(),jl.copy(this.origin).sub(Cx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(o0),l=jl.dot(this.direction),c=-jl.dot(o0),d=jl.lengthSq(),p=Math.abs(1-o*o);let m,y,v,S;if(p>0)if(m=o*c-l,y=o*l-c,S=s*p,m>=0)if(y>=-S)if(y<=S){const E=1/p;m*=E,y*=E,v=m*(m+o*y+2*l)+y*(o*m+y+2*c)+d}else y=s,m=Math.max(0,-(o*y+l)),v=-m*m+y*(y+2*c)+d;else y=-s,m=Math.max(0,-(o*y+l)),v=-m*m+y*(y+2*c)+d;else y<=-S?(m=Math.max(0,-(-o*s+l)),y=m>0?-s:Math.min(Math.max(-s,-c),s),v=-m*m+y*(y+2*c)+d):y<=S?(m=0,y=Math.min(Math.max(-s,-c),s),v=y*(y+2*c)+d):(m=Math.max(0,-(o*s+l)),y=m>0?s:Math.min(Math.max(-s,-c),s),v=-m*m+y*(y+2*c)+d);else y=o>0?-s:s,m=Math.max(0,-(o*y+l)),v=-m*m+y*(y+2*c)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(Cx).addScaledVector(o0,y),v}intersectSphere(e,t){Ha.subVectors(e.center,this.origin);const i=Ha.dot(this.direction),r=Ha.dot(Ha)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=i-o,c=i+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,l,c;const d=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,y=this.origin;return d>=0?(i=(e.min.x-y.x)*d,r=(e.max.x-y.x)*d):(i=(e.max.x-y.x)*d,r=(e.min.x-y.x)*d),p>=0?(s=(e.min.y-y.y)*p,o=(e.max.y-y.y)*p):(s=(e.max.y-y.y)*p,o=(e.min.y-y.y)*p),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),m>=0?(l=(e.min.z-y.z)*m,c=(e.max.z-y.z)*m):(l=(e.max.z-y.z)*m,c=(e.min.z-y.z)*m),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ha)!==null}intersectTriangle(e,t,i,r,s){Px.subVectors(t,e),a0.subVectors(i,e),Rx.crossVectors(Px,a0);let o=this.direction.dot(Rx),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;jl.subVectors(this.origin,e);const c=l*this.direction.dot(a0.crossVectors(jl,a0));if(c<0)return null;const d=l*this.direction.dot(Px.cross(jl));if(d<0||c+d>o)return null;const p=-l*jl.dot(Rx);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zt{constructor(){zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,l,c,d,p,m,y,v,S,E,M){const x=this.elements;return x[0]=e,x[4]=t,x[8]=i,x[12]=r,x[1]=s,x[5]=o,x[9]=l,x[13]=c,x[2]=d,x[6]=p,x[10]=m,x[14]=y,x[3]=v,x[7]=S,x[11]=E,x[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/nf.setFromMatrixColumn(e,0).length(),s=1/nf.setFromMatrixColumn(e,1).length(),o=1/nf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r),p=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const y=o*p,v=o*m,S=l*p,E=l*m;t[0]=c*p,t[4]=-c*m,t[8]=d,t[1]=v+S*d,t[5]=y-E*d,t[9]=-l*c,t[2]=E-y*d,t[6]=S+v*d,t[10]=o*c}else if(e.order==="YXZ"){const y=c*p,v=c*m,S=d*p,E=d*m;t[0]=y+E*l,t[4]=S*l-v,t[8]=o*d,t[1]=o*m,t[5]=o*p,t[9]=-l,t[2]=v*l-S,t[6]=E+y*l,t[10]=o*c}else if(e.order==="ZXY"){const y=c*p,v=c*m,S=d*p,E=d*m;t[0]=y-E*l,t[4]=-o*m,t[8]=S+v*l,t[1]=v+S*l,t[5]=o*p,t[9]=E-y*l,t[2]=-o*d,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const y=o*p,v=o*m,S=l*p,E=l*m;t[0]=c*p,t[4]=S*d-v,t[8]=y*d+E,t[1]=c*m,t[5]=E*d+y,t[9]=v*d-S,t[2]=-d,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const y=o*c,v=o*d,S=l*c,E=l*d;t[0]=c*p,t[4]=E-y*m,t[8]=S*m+v,t[1]=m,t[5]=o*p,t[9]=-l*p,t[2]=-d*p,t[6]=v*m+S,t[10]=y-E*m}else if(e.order==="XZY"){const y=o*c,v=o*d,S=l*c,E=l*d;t[0]=c*p,t[4]=-m,t[8]=d*p,t[1]=y*m+E,t[5]=o*p,t[9]=v*m-S,t[2]=S*m-v,t[6]=l*p,t[10]=E*m+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZD,e,QD)}lookAt(e,t,i){const r=this.elements;return hs.subVectors(e,t),hs.lengthSq()===0&&(hs.z=1),hs.normalize(),Xl.crossVectors(i,hs),Xl.lengthSq()===0&&(Math.abs(i.z)===1?hs.x+=1e-4:hs.z+=1e-4,hs.normalize(),Xl.crossVectors(i,hs)),Xl.normalize(),l0.crossVectors(hs,Xl),r[0]=Xl.x,r[4]=l0.x,r[8]=hs.x,r[1]=Xl.y,r[5]=l0.y,r[9]=hs.y,r[2]=Xl.z,r[6]=l0.z,r[10]=hs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],c=i[8],d=i[12],p=i[1],m=i[5],y=i[9],v=i[13],S=i[2],E=i[6],M=i[10],x=i[14],C=i[3],T=i[7],P=i[11],I=i[15],k=r[0],B=r[4],z=r[8],U=r[12],F=r[1],K=r[5],ae=r[9],re=r[13],H=r[2],se=r[6],ne=r[10],ie=r[14],V=r[3],te=r[7],$=r[11],G=r[15];return s[0]=o*k+l*F+c*H+d*V,s[4]=o*B+l*K+c*se+d*te,s[8]=o*z+l*ae+c*ne+d*$,s[12]=o*U+l*re+c*ie+d*G,s[1]=p*k+m*F+y*H+v*V,s[5]=p*B+m*K+y*se+v*te,s[9]=p*z+m*ae+y*ne+v*$,s[13]=p*U+m*re+y*ie+v*G,s[2]=S*k+E*F+M*H+x*V,s[6]=S*B+E*K+M*se+x*te,s[10]=S*z+E*ae+M*ne+x*$,s[14]=S*U+E*re+M*ie+x*G,s[3]=C*k+T*F+P*H+I*V,s[7]=C*B+T*K+P*se+I*te,s[11]=C*z+T*ae+P*ne+I*$,s[15]=C*U+T*re+P*ie+I*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],d=e[13],p=e[2],m=e[6],y=e[10],v=e[14],S=e[3],E=e[7],M=e[11],x=e[15];return S*(+s*c*m-r*d*m-s*l*y+i*d*y+r*l*v-i*c*v)+E*(+t*c*v-t*d*y+s*o*y-r*o*v+r*d*p-s*c*p)+M*(+t*d*m-t*l*v-s*o*m+i*o*v+s*l*p-i*d*p)+x*(-r*l*p-t*c*m+t*l*y+r*o*m-i*o*y+i*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],p=e[8],m=e[9],y=e[10],v=e[11],S=e[12],E=e[13],M=e[14],x=e[15],C=m*M*d-E*y*d+E*c*v-l*M*v-m*c*x+l*y*x,T=S*y*d-p*M*d-S*c*v+o*M*v+p*c*x-o*y*x,P=p*E*d-S*m*d+S*l*v-o*E*v-p*l*x+o*m*x,I=S*m*c-p*E*c-S*l*y+o*E*y+p*l*M-o*m*M,k=t*C+i*T+r*P+s*I;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/k;return e[0]=C*B,e[1]=(E*y*s-m*M*s-E*r*v+i*M*v+m*r*x-i*y*x)*B,e[2]=(l*M*s-E*c*s+E*r*d-i*M*d-l*r*x+i*c*x)*B,e[3]=(m*c*s-l*y*s-m*r*d+i*y*d+l*r*v-i*c*v)*B,e[4]=T*B,e[5]=(p*M*s-S*y*s+S*r*v-t*M*v-p*r*x+t*y*x)*B,e[6]=(S*c*s-o*M*s-S*r*d+t*M*d+o*r*x-t*c*x)*B,e[7]=(o*y*s-p*c*s+p*r*d-t*y*d-o*r*v+t*c*v)*B,e[8]=P*B,e[9]=(S*m*s-p*E*s-S*i*v+t*E*v+p*i*x-t*m*x)*B,e[10]=(o*E*s-S*l*s+S*i*d-t*E*d-o*i*x+t*l*x)*B,e[11]=(p*l*s-o*m*s-p*i*d+t*m*d+o*i*v-t*l*v)*B,e[12]=I*B,e[13]=(p*E*r-S*m*r+S*i*y-t*E*y-p*i*M+t*m*M)*B,e[14]=(S*l*r-o*E*r-S*i*c+t*E*c+o*i*M-t*l*M)*B,e[15]=(o*m*r-p*l*r+p*i*c-t*m*c-o*i*y+t*l*y)*B,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,c=e.z,d=s*o,p=s*l;return this.set(d*o+i,d*l-r*c,d*c+r*l,0,d*l+r*c,p*l+i,p*c-r*o,0,d*c-r*l,p*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,d=s+s,p=o+o,m=l+l,y=s*d,v=s*p,S=s*m,E=o*p,M=o*m,x=l*m,C=c*d,T=c*p,P=c*m,I=i.x,k=i.y,B=i.z;return r[0]=(1-(E+x))*I,r[1]=(v+P)*I,r[2]=(S-T)*I,r[3]=0,r[4]=(v-P)*k,r[5]=(1-(y+x))*k,r[6]=(M+C)*k,r[7]=0,r[8]=(S+T)*B,r[9]=(M-C)*B,r[10]=(1-(y+E))*B,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=nf.set(r[0],r[1],r[2]).length();const o=nf.set(r[4],r[5],r[6]).length(),l=nf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],co.copy(this);const d=1/s,p=1/o,m=1/l;return co.elements[0]*=d,co.elements[1]*=d,co.elements[2]*=d,co.elements[4]*=p,co.elements[5]*=p,co.elements[6]*=p,co.elements[8]*=m,co.elements[9]*=m,co.elements[10]*=m,t.setFromRotationMatrix(co),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o){const l=this.elements,c=2*s/(t-e),d=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r),y=-(o+s)/(o-s),v=-2*o*s/(o-s);return l[0]=c,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=d,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=y,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o){const l=this.elements,c=1/(t-e),d=1/(i-r),p=1/(o-s),m=(t+e)*c,y=(i+r)*d,v=(o+s)*p;return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-y,l[2]=0,l[6]=0,l[10]=-2*p,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const nf=new X,co=new zt,ZD=new X(0,0,0),QD=new X(1,1,1),Xl=new X,l0=new X,hs=new X,hE=new zt,fE=new Jr;class Im{constructor(e=0,t=0,i=0,r=Im.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],d=r[5],p=r[9],m=r[2],y=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(ei(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(y,d),this._z=0);break;case"YXZ":this._x=Math.asin(-ei(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(ei(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-m,v),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-ei(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(y,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(ei(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-ei(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return hE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hE,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return fE.setFromEuler(this),this.setFromQuaternion(fE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Im.DEFAULT_ORDER="XYZ";class Ic{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ek=0;const dE=new X,rf=new Jr,Wa=new zt,u0=new X,pp=new X,tk=new X,nk=new Jr,pE=new X(1,0,0),mE=new X(0,1,0),gE=new X(0,0,1),ik={type:"added"},yE={type:"removed"};class pn extends ll{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ek++}),this.uuid=ys(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pn.DEFAULT_UP.clone();const e=new X,t=new Im,i=new Jr,r=new X(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zt},normalMatrix:{value:new Jt}}),this.matrix=new zt,this.matrixWorld=new zt,this.matrixAutoUpdate=pn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ic,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return rf.setFromAxisAngle(e,t),this.quaternion.multiply(rf),this}rotateOnWorldAxis(e,t){return rf.setFromAxisAngle(e,t),this.quaternion.premultiply(rf),this}rotateX(e){return this.rotateOnAxis(pE,e)}rotateY(e){return this.rotateOnAxis(mE,e)}rotateZ(e){return this.rotateOnAxis(gE,e)}translateOnAxis(e,t){return dE.copy(e).applyQuaternion(this.quaternion),this.position.add(dE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(pE,e)}translateY(e){return this.translateOnAxis(mE,e)}translateZ(e){return this.translateOnAxis(gE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Wa.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?u0.copy(e):u0.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),pp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wa.lookAt(pp,u0,this.up):Wa.lookAt(u0,pp,this.up),this.quaternion.setFromRotationMatrix(Wa),r&&(Wa.extractRotation(r.matrixWorld),rf.setFromRotationMatrix(Wa),this.quaternion.premultiply(rf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ik)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(yE)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(yE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Wa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Wa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,e,tk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,nk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let d=0,p=c.length;d<p;d++){const m=c[d];s(e.shapes,m)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),d=o(e.textures),p=o(e.images),m=o(e.shapes),y=o(e.skeletons),v=o(e.animations),S=o(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),d.length>0&&(i.textures=d),p.length>0&&(i.images=p),m.length>0&&(i.shapes=m),y.length>0&&(i.skeletons=y),v.length>0&&(i.animations=v),S.length>0&&(i.nodes=S)}return i.object=r,i;function o(l){const c=[];for(const d in l){const p=l[d];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}pn.DEFAULT_UP=new X(0,1,0);pn.DEFAULT_MATRIX_AUTO_UPDATE=!0;pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ho=new X,Ga=new X,Nx=new X,ja=new X,sf=new X,of=new X,vE=new X,Lx=new X,Ix=new X,Dx=new X;let c0=!1;class qr{constructor(e=new X,t=new X,i=new X){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ho.subVectors(e,t),r.cross(ho);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ho.subVectors(r,t),Ga.subVectors(i,t),Nx.subVectors(e,t);const o=ho.dot(ho),l=ho.dot(Ga),c=ho.dot(Nx),d=Ga.dot(Ga),p=Ga.dot(Nx),m=o*d-l*l;if(m===0)return s.set(-2,-1,-1);const y=1/m,v=(d*c-l*p)*y,S=(o*p-l*c)*y;return s.set(1-v-S,S,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ja),ja.x>=0&&ja.y>=0&&ja.x+ja.y<=1}static getUV(e,t,i,r,s,o,l,c){return c0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),c0=!0),this.getInterpolation(e,t,i,r,s,o,l,c)}static getInterpolation(e,t,i,r,s,o,l,c){return this.getBarycoord(e,t,i,r,ja),c.setScalar(0),c.addScaledVector(s,ja.x),c.addScaledVector(o,ja.y),c.addScaledVector(l,ja.z),c}static isFrontFacing(e,t,i,r){return ho.subVectors(i,t),Ga.subVectors(e,t),ho.cross(Ga).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ho.subVectors(this.c,this.b),Ga.subVectors(this.a,this.b),ho.cross(Ga).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return qr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return c0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),c0=!0),qr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return qr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return qr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;sf.subVectors(r,i),of.subVectors(s,i),Lx.subVectors(e,i);const c=sf.dot(Lx),d=of.dot(Lx);if(c<=0&&d<=0)return t.copy(i);Ix.subVectors(e,r);const p=sf.dot(Ix),m=of.dot(Ix);if(p>=0&&m<=p)return t.copy(r);const y=c*m-p*d;if(y<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(i).addScaledVector(sf,o);Dx.subVectors(e,s);const v=sf.dot(Dx),S=of.dot(Dx);if(S>=0&&v<=S)return t.copy(s);const E=v*d-c*S;if(E<=0&&d>=0&&S<=0)return l=d/(d-S),t.copy(i).addScaledVector(of,l);const M=p*S-v*m;if(M<=0&&m-p>=0&&v-S>=0)return vE.subVectors(s,r),l=(m-p)/(m-p+(v-S)),t.copy(r).addScaledVector(vE,l);const x=1/(M+E+y);return o=E*x,l=y*x,t.copy(i).addScaledVector(sf,o).addScaledVector(of,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let rk=0;class er extends ll{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rk++}),this.uuid=ys(),this.name="",this.type="Material",this.blending=Rc,this.side=il,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=gS,this.blendDst=yS,this.blendEquation=_c,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Iy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=g2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=my,this.stencilZFail=my,this.stencilZPass=my,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Rc&&(i.blending=this.blending),this.side!==il&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const _2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fo={h:0,s:0,l:0},h0={h:0,s:0,l:0};function kx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let et=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Gt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Us.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Us.workingColorSpace){return this.r=e,this.g=t,this.b=i,Us.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Us.workingColorSpace){if(e=ES(e,1),t=ei(t,0,1),i=ei(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=kx(o,s,e+1/3),this.g=kx(o,s,e),this.b=kx(o,s,e-1/3)}return Us.toWorkingColorSpace(this,r),this}setStyle(e,t=Gt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Gt){const i=_2[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Bf(e.r),this.g=Bf(e.g),this.b=Bf(e.b),this}copyLinearToSRGB(e){return this.r=Mx(e.r),this.g=Mx(e.g),this.b=Mx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gt){return Us.fromWorkingColorSpace(ur.copy(this),e),Math.round(ei(ur.r*255,0,255))*65536+Math.round(ei(ur.g*255,0,255))*256+Math.round(ei(ur.b*255,0,255))}getHexString(e=Gt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Us.workingColorSpace){Us.fromWorkingColorSpace(ur.copy(this),t);const i=ur.r,r=ur.g,s=ur.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let c,d;const p=(l+o)/2;if(l===o)c=0,d=0;else{const m=o-l;switch(d=p<=.5?m/(o+l):m/(2-o-l),o){case i:c=(r-s)/m+(r<s?6:0);break;case r:c=(s-i)/m+2;break;case s:c=(i-r)/m+4;break}c/=6}return e.h=c,e.s=d,e.l=p,e}getRGB(e,t=Us.workingColorSpace){return Us.fromWorkingColorSpace(ur.copy(this),t),e.r=ur.r,e.g=ur.g,e.b=ur.b,e}getStyle(e=Gt){Us.fromWorkingColorSpace(ur.copy(this),e);const t=ur.r,i=ur.g,r=ur.b;return e!==Gt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(fo),fo.h+=e,fo.s+=t,fo.l+=i,this.setHSL(fo.h,fo.s,fo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(fo),e.getHSL(h0);const i=Hp(fo.h,h0.h,t),r=Hp(fo.s,h0.s,t),s=Hp(fo.l,h0.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ur=new et;et.NAMES=_2;class pu extends er{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Nm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ja=sk();function sk(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const d=c-127;d<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):d<-14?(i[c]=1024>>-d-14,i[c|256]=1024>>-d-14|32768,r[c]=-d-1,r[c|256]=-d-1):d<=15?(i[c]=d+15<<10,i[c|256]=d+15<<10|32768,r[c]=13,r[c|256]=13):d<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let d=c<<13,p=0;for(;(d&8388608)===0;)d<<=1,p-=8388608;d&=-8388609,p+=947912704,s[c]=d|p}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Xr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ei(n,-65504,65504),Ja.floatView[0]=n;const e=Ja.uint32View[0],t=e>>23&511;return Ja.baseTable[t]+((e&8388607)>>Ja.shiftTable[t])}function Ap(n){const e=n>>10;return Ja.uint32View[0]=Ja.mantissaTable[Ja.offsetTable[e]+(n&1023)]+Ja.exponentTable[e],Ja.floatView[0]}const ok={toHalfFloat:Xr,fromHalfFloat:Ap},gi=new X,f0=new Le;class Cn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=am,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)f0.fromBufferAttribute(this,t),f0.applyMatrix3(e),this.setXY(t,f0.x,f0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)gi.fromBufferAttribute(this,t),gi.applyMatrix3(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)gi.fromBufferAttribute(this,t),gi.applyMatrix4(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)gi.fromBufferAttribute(this,t),gi.applyNormalMatrix(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)gi.fromBufferAttribute(this,t),gi.transformDirection(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=gs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=gs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=gs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=gs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==am&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class ak extends Cn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class lk extends Cn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class uk extends Cn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class ck extends Cn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class AS extends Cn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class hk extends Cn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class CS extends Cn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class fk extends Cn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Ap(this.array[e*this.itemSize]);return this.normalized&&(t=gs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize]=Xr(t),this}getY(e){let t=Ap(this.array[e*this.itemSize+1]);return this.normalized&&(t=gs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+1]=Xr(t),this}getZ(e){let t=Ap(this.array[e*this.itemSize+2]);return this.normalized&&(t=gs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+2]=Xr(t),this}getW(e){let t=Ap(this.array[e*this.itemSize+3]);return this.normalized&&(t=gs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+3]=Xr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array)),this.array[e+0]=Xr(t),this.array[e+1]=Xr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.array[e+0]=Xr(t),this.array[e+1]=Xr(i),this.array[e+2]=Xr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.array[e+0]=Xr(t),this.array[e+1]=Xr(i),this.array[e+2]=Xr(r),this.array[e+3]=Xr(s),this}}class ht extends Cn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class dk extends Cn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let pk=0;const Ds=new zt,Ux=new pn,af=new X,fs=new ra,mp=new ra,Fi=new X;class jt extends ll{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pk++}),this.uuid=ys(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(x2(e)?CS:AS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Jt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ds.makeRotationFromQuaternion(e),this.applyMatrix4(Ds),this}rotateX(e){return Ds.makeRotationX(e),this.applyMatrix4(Ds),this}rotateY(e){return Ds.makeRotationY(e),this.applyMatrix4(Ds),this}rotateZ(e){return Ds.makeRotationZ(e),this.applyMatrix4(Ds),this}translate(e,t,i){return Ds.makeTranslation(e,t,i),this.applyMatrix4(Ds),this}scale(e,t,i){return Ds.makeScale(e,t,i),this.applyMatrix4(Ds),this}lookAt(e){return Ux.lookAt(e),Ux.updateMatrix(),this.applyMatrix4(Ux.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(af).negate(),this.translate(af.x,af.y,af.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ht(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ra);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];fs.setFromBufferAttribute(s),this.morphTargetsRelative?(Fi.addVectors(this.boundingBox.min,fs.min),this.boundingBox.expandByPoint(Fi),Fi.addVectors(this.boundingBox.max,fs.max),this.boundingBox.expandByPoint(Fi)):(this.boundingBox.expandByPoint(fs.min),this.boundingBox.expandByPoint(fs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new sa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new X,1/0);return}if(e){const i=this.boundingSphere.center;if(fs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];mp.setFromBufferAttribute(l),this.morphTargetsRelative?(Fi.addVectors(fs.min,mp.min),fs.expandByPoint(Fi),Fi.addVectors(fs.max,mp.max),fs.expandByPoint(Fi)):(fs.expandByPoint(mp.min),fs.expandByPoint(mp.max))}fs.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Fi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Fi));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let d=0,p=l.count;d<p;d++)Fi.fromBufferAttribute(l,d),c&&(af.fromBufferAttribute(e,d),Fi.add(af)),r=Math.max(r,i.distanceToSquared(Fi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cn(new Float32Array(4*l),4));const c=this.getAttribute("tangent").array,d=[],p=[];for(let F=0;F<l;F++)d[F]=new X,p[F]=new X;const m=new X,y=new X,v=new X,S=new Le,E=new Le,M=new Le,x=new X,C=new X;function T(F,K,ae){m.fromArray(r,F*3),y.fromArray(r,K*3),v.fromArray(r,ae*3),S.fromArray(o,F*2),E.fromArray(o,K*2),M.fromArray(o,ae*2),y.sub(m),v.sub(m),E.sub(S),M.sub(S);const re=1/(E.x*M.y-M.x*E.y);isFinite(re)&&(x.copy(y).multiplyScalar(M.y).addScaledVector(v,-E.y).multiplyScalar(re),C.copy(v).multiplyScalar(E.x).addScaledVector(y,-M.x).multiplyScalar(re),d[F].add(x),d[K].add(x),d[ae].add(x),p[F].add(C),p[K].add(C),p[ae].add(C))}let P=this.groups;P.length===0&&(P=[{start:0,count:i.length}]);for(let F=0,K=P.length;F<K;++F){const ae=P[F],re=ae.start,H=ae.count;for(let se=re,ne=re+H;se<ne;se+=3)T(i[se+0],i[se+1],i[se+2])}const I=new X,k=new X,B=new X,z=new X;function U(F){B.fromArray(s,F*3),z.copy(B);const K=d[F];I.copy(K),I.sub(B.multiplyScalar(B.dot(K))).normalize(),k.crossVectors(z,K);const re=k.dot(p[F])<0?-1:1;c[F*4]=I.x,c[F*4+1]=I.y,c[F*4+2]=I.z,c[F*4+3]=re}for(let F=0,K=P.length;F<K;++F){const ae=P[F],re=ae.start,H=ae.count;for(let se=re,ne=re+H;se<ne;se+=3)U(i[se+0]),U(i[se+1]),U(i[se+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Cn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let y=0,v=i.count;y<v;y++)i.setXYZ(y,0,0,0);const r=new X,s=new X,o=new X,l=new X,c=new X,d=new X,p=new X,m=new X;if(e)for(let y=0,v=e.count;y<v;y+=3){const S=e.getX(y+0),E=e.getX(y+1),M=e.getX(y+2);r.fromBufferAttribute(t,S),s.fromBufferAttribute(t,E),o.fromBufferAttribute(t,M),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),l.fromBufferAttribute(i,S),c.fromBufferAttribute(i,E),d.fromBufferAttribute(i,M),l.add(p),c.add(p),d.add(p),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(E,c.x,c.y,c.z),i.setXYZ(M,d.x,d.y,d.z)}else for(let y=0,v=t.count;y<v;y+=3)r.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),o.fromBufferAttribute(t,y+2),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),i.setXYZ(y+0,p.x,p.y,p.z),i.setXYZ(y+1,p.x,p.y,p.z),i.setXYZ(y+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Fi.fromBufferAttribute(e,t),Fi.normalize(),e.setXYZ(t,Fi.x,Fi.y,Fi.z)}toNonIndexed(){function e(l,c){const d=l.array,p=l.itemSize,m=l.normalized,y=new d.constructor(c.length*p);let v=0,S=0;for(let E=0,M=c.length;E<M;E++){l.isInterleavedBufferAttribute?v=c[E]*l.data.stride+l.offset:v=c[E]*p;for(let x=0;x<p;x++)y[S++]=d[v++]}return new Cn(y,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jt,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],d=e(c,i);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const c=[],d=s[l];for(let p=0,m=d.length;p<m;p++){const y=d[p],v=e(y,i);c.push(v)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const d in c)c[d]!==void 0&&(e[d]=c[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const d=i[c];e.data.attributes[c]=d.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],p=[];for(let m=0,y=d.length;m<y;m++){const v=d[m];p.push(v.toJSON(e.data))}p.length>0&&(r[c]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],m=s[d];for(let y=0,v=m.length;y<v;y++)p.push(m[y].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const m=o[d];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xE=new zt,Xo=new Lm,d0=new sa,_E=new X,lf=new X,uf=new X,cf=new X,Ox=new X,p0=new X,m0=new Le,g0=new Le,y0=new Le,wE=new X,SE=new X,ME=new X,v0=new X,x0=new X;class Zi extends pn{constructor(e=new jt,t=new pu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){p0.set(0,0,0);for(let c=0,d=s.length;c<d;c++){const p=l[c],m=s[c];p!==0&&(Ox.fromBufferAttribute(m,e),o?p0.addScaledVector(Ox,p):p0.addScaledVector(Ox.sub(t),p))}t.add(p0)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),d0.copy(i.boundingSphere),d0.applyMatrix4(s),Xo.copy(e.ray).recast(e.near),!(d0.containsPoint(Xo.origin)===!1&&(Xo.intersectSphere(d0,_E)===null||Xo.origin.distanceToSquared(_E)>(e.far-e.near)**2))&&(xE.copy(s).invert(),Xo.copy(e.ray).applyMatrix4(xE),!(i.boundingBox!==null&&Xo.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let i;const r=this.geometry,s=this.material,o=r.index,l=r.attributes.position,c=r.attributes.uv,d=r.attributes.uv1,p=r.attributes.normal,m=r.groups,y=r.drawRange;if(o!==null)if(Array.isArray(s))for(let v=0,S=m.length;v<S;v++){const E=m[v],M=s[E.materialIndex],x=Math.max(E.start,y.start),C=Math.min(o.count,Math.min(E.start+E.count,y.start+y.count));for(let T=x,P=C;T<P;T+=3){const I=o.getX(T),k=o.getX(T+1),B=o.getX(T+2);i=_0(this,M,e,Xo,c,d,p,I,k,B),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=E.materialIndex,t.push(i))}}else{const v=Math.max(0,y.start),S=Math.min(o.count,y.start+y.count);for(let E=v,M=S;E<M;E+=3){const x=o.getX(E),C=o.getX(E+1),T=o.getX(E+2);i=_0(this,s,e,Xo,c,d,p,x,C,T),i&&(i.faceIndex=Math.floor(E/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,S=m.length;v<S;v++){const E=m[v],M=s[E.materialIndex],x=Math.max(E.start,y.start),C=Math.min(l.count,Math.min(E.start+E.count,y.start+y.count));for(let T=x,P=C;T<P;T+=3){const I=T,k=T+1,B=T+2;i=_0(this,M,e,Xo,c,d,p,I,k,B),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=E.materialIndex,t.push(i))}}else{const v=Math.max(0,y.start),S=Math.min(l.count,y.start+y.count);for(let E=v,M=S;E<M;E+=3){const x=E,C=E+1,T=E+2;i=_0(this,s,e,Xo,c,d,p,x,C,T),i&&(i.faceIndex=Math.floor(E/3),t.push(i))}}}}function mk(n,e,t,i,r,s,o,l){let c;if(e.side===Pr?c=i.intersectTriangle(o,s,r,!0,l):c=i.intersectTriangle(r,s,o,e.side===il,l),c===null)return null;x0.copy(l),x0.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(x0);return d<t.near||d>t.far?null:{distance:d,point:x0.clone(),object:n}}function _0(n,e,t,i,r,s,o,l,c,d){n.getVertexPosition(l,lf),n.getVertexPosition(c,uf),n.getVertexPosition(d,cf);const p=mk(n,e,t,i,lf,uf,cf,v0);if(p){r&&(m0.fromBufferAttribute(r,l),g0.fromBufferAttribute(r,c),y0.fromBufferAttribute(r,d),p.uv=qr.getInterpolation(v0,lf,uf,cf,m0,g0,y0,new Le)),s&&(m0.fromBufferAttribute(s,l),g0.fromBufferAttribute(s,c),y0.fromBufferAttribute(s,d),p.uv1=qr.getInterpolation(v0,lf,uf,cf,m0,g0,y0,new Le),p.uv2=p.uv1),o&&(wE.fromBufferAttribute(o,l),SE.fromBufferAttribute(o,c),ME.fromBufferAttribute(o,d),p.normal=qr.getInterpolation(v0,lf,uf,cf,wE,SE,ME,new X),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const m={a:l,b:c,c:d,normal:new X,materialIndex:0};qr.getNormal(lf,uf,cf,m.normal),p.face=m}return p}class mu extends jt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],d=[],p=[],m=[];let y=0,v=0;S("z","y","x",-1,-1,i,t,e,o,s,0),S("z","y","x",1,-1,i,t,-e,o,s,1),S("x","z","y",1,1,e,i,t,r,o,2),S("x","z","y",1,-1,e,i,-t,r,o,3),S("x","y","z",1,-1,e,t,i,r,s,4),S("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new ht(d,3)),this.setAttribute("normal",new ht(p,3)),this.setAttribute("uv",new ht(m,2));function S(E,M,x,C,T,P,I,k,B,z,U){const F=P/B,K=I/z,ae=P/2,re=I/2,H=k/2,se=B+1,ne=z+1;let ie=0,V=0;const te=new X;for(let $=0;$<ne;$++){const G=$*K-re;for(let Z=0;Z<se;Z++){const ce=Z*F-ae;te[E]=ce*C,te[M]=G*T,te[x]=H,d.push(te.x,te.y,te.z),te[E]=0,te[M]=0,te[x]=k>0?1:-1,p.push(te.x,te.y,te.z),m.push(Z/B),m.push(1-$/z),ie+=1}}for(let $=0;$<z;$++)for(let G=0;G<B;G++){const Z=y+G+se*$,ce=y+G+se*($+1),fe=y+(G+1)+se*($+1),Ee=y+(G+1)+se*$;c.push(Z,ce,Ee),c.push(ce,fe,Ee),V+=6}l.addGroup(v,V,U),v+=V,y+=ie}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Yf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ar(n){const e={};for(let t=0;t<n.length;t++){const i=Yf(n[t]);for(const r in i)e[r]=i[r]}return e}function gk(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function w2(n){return n.getRenderTarget()===null?n.outputColorSpace:Mo}const S2={clone:Yf,merge:Ar};var yk=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vk=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class bo extends er{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yk,this.fragmentShader=vk,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Yf(e.uniforms),this.uniformsGroups=gk(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Dm extends pn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zt,this.projectionMatrix=new zt,this.projectionMatrixInverse=new zt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class zi extends Dm{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=qf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Lc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return qf*2*Math.atan(Math.tan(Lc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Lc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/d,r*=o.width/c,i*=o.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const hf=-90,ff=1;class M2 extends pn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new zi(hf,ff,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new zi(hf,ff,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new zi(hf,ff,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const l=new zi(hf,ff,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(0,-1,0),this.add(l);const c=new zi(hf,ff,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,1),this.add(c);const d=new zi(hf,ff,e,t);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(0,0,-1),this.add(d)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,l,c,d]=this.children,p=e.getRenderTarget(),m=e.toneMapping,y=e.xr.enabled;e.toneMapping=So,e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,l),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5),e.render(t,d),e.setRenderTarget(p),e.toneMapping=m,e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class km extends ti{constructor(e,t,i,r,s,o,l,c,d,p){e=e!==void 0?e:[],t=t!==void 0?t:au,super(e,t,i,r,s,o,l,c,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class E2 extends Eo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Wp("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===su?Gt:ou),this.texture=new km(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ui}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new mu(5,5,5),s=new bo({name:"CubemapFromEquirect",uniforms:Yf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Pr,blending:el});s.uniforms.tEquirect.value=t;const o=new Zi(r,s),l=t.minFilter;return t.minFilter===uu&&(t.minFilter=ui),new M2(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const Fx=new X,xk=new X,_k=new Jt;class Zl{constructor(e=new X(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Fx.subVectors(i,t).cross(xk.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Fx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||_k.getNormalMatrix(e),r=this.coplanarPoint(Fx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const uc=new sa,w0=new X;class hv{constructor(e=new Zl,t=new Zl,i=new Zl,r=new Zl,s=new Zl,o=new Zl){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],l=i[3],c=i[4],d=i[5],p=i[6],m=i[7],y=i[8],v=i[9],S=i[10],E=i[11],M=i[12],x=i[13],C=i[14],T=i[15];return t[0].setComponents(l-r,m-c,E-y,T-M).normalize(),t[1].setComponents(l+r,m+c,E+y,T+M).normalize(),t[2].setComponents(l+s,m+d,E+v,T+x).normalize(),t[3].setComponents(l-s,m-d,E-v,T-x).normalize(),t[4].setComponents(l-o,m-p,E-S,T-C).normalize(),t[5].setComponents(l+o,m+p,E+S,T+C).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),uc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),uc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(uc)}intersectsSprite(e){return uc.center.set(0,0,0),uc.radius=.7071067811865476,uc.applyMatrix4(e.matrixWorld),this.intersectsSphere(uc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(w0.x=r.normal.x>0?e.max.x:e.min.x,w0.y=r.normal.y>0?e.max.y:e.min.y,w0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(w0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function b2(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function wk(n,e){const t=e.isWebGL2,i=new WeakMap;function r(d,p){const m=d.array,y=d.usage,v=n.createBuffer();n.bindBuffer(p,v),n.bufferData(p,m,y),d.onUploadCallback();let S;if(m instanceof Float32Array)S=n.FLOAT;else if(m instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)S=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else S=n.UNSIGNED_SHORT;else if(m instanceof Int16Array)S=n.SHORT;else if(m instanceof Uint32Array)S=n.UNSIGNED_INT;else if(m instanceof Int32Array)S=n.INT;else if(m instanceof Int8Array)S=n.BYTE;else if(m instanceof Uint8Array)S=n.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)S=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:v,type:S,bytesPerElement:m.BYTES_PER_ELEMENT,version:d.version}}function s(d,p,m){const y=p.array,v=p.updateRange;n.bindBuffer(m,d),v.count===-1?n.bufferSubData(m,0,y):(t?n.bufferSubData(m,v.offset*y.BYTES_PER_ELEMENT,y,v.offset,v.count):n.bufferSubData(m,v.offset*y.BYTES_PER_ELEMENT,y.subarray(v.offset,v.offset+v.count)),v.count=-1),p.onUploadCallback()}function o(d){return d.isInterleavedBufferAttribute&&(d=d.data),i.get(d)}function l(d){d.isInterleavedBufferAttribute&&(d=d.data);const p=i.get(d);p&&(n.deleteBuffer(p.buffer),i.delete(d))}function c(d,p){if(d.isGLBufferAttribute){const y=i.get(d);(!y||y.version<d.version)&&i.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const m=i.get(d);m===void 0?i.set(d,r(d,p)):m.version<d.version&&(s(m.buffer,d,p),m.version=d.version)}return{get:o,remove:l,update:c}}class sd extends jt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),c=Math.floor(r),d=l+1,p=c+1,m=e/l,y=t/c,v=[],S=[],E=[],M=[];for(let x=0;x<p;x++){const C=x*y-o;for(let T=0;T<d;T++){const P=T*m-s;S.push(P,-C,0),E.push(0,0,1),M.push(T/l),M.push(1-x/c)}}for(let x=0;x<c;x++)for(let C=0;C<l;C++){const T=C+d*x,P=C+d*(x+1),I=C+1+d*(x+1),k=C+1+d*x;v.push(T,P,k),v.push(P,I,k)}this.setIndex(v),this.setAttribute("position",new ht(S,3)),this.setAttribute("normal",new ht(E,3)),this.setAttribute("uv",new ht(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sd(e.width,e.height,e.widthSegments,e.heightSegments)}}var Sk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Mk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ek=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,bk=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Tk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ak=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ck="vec3 transformed = vec3( position );",Pk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Rk=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Nk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Lk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Ik=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Dk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Uk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ok=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Fk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Bk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,zk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Vk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Hk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wk=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Gk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,jk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Xk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$k=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qk="gl_FragColor = linearToOutputTexel( gl_FragColor );",Yk=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Kk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Jk=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Zk=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Qk=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,iU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,oU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,aU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hU=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,fU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,gU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,yU=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vU=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xU=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_U=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,wU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,MU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,EU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,bU=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,TU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,CU=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,RU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,NU=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,LU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,IU=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,DU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,kU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,UU=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,OU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,VU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,HU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,WU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,GU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,jU=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,XU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,$U=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,qU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,YU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,KU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,JU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,QU=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,eO=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,tO=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,nO=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,iO=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,rO=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,sO=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,oO=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,aO=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,lO=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,uO=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cO=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,hO=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,fO=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,dO=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,pO=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mO=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,gO=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yO=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,vO=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,xO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_O=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,SO=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,MO=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,EO=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,bO=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TO=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,AO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,CO=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,PO=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RO=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NO=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,LO=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IO=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DO=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kO=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,UO=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OO=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,FO=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,BO=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zO=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VO=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,HO=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WO=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GO=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jO=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,XO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$O=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qO=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,YO=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,KO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,qt={alphamap_fragment:Sk,alphamap_pars_fragment:Mk,alphatest_fragment:Ek,alphatest_pars_fragment:bk,aomap_fragment:Tk,aomap_pars_fragment:Ak,begin_vertex:Ck,beginnormal_vertex:Pk,bsdfs:Rk,iridescence_fragment:Nk,bumpmap_pars_fragment:Lk,clipping_planes_fragment:Ik,clipping_planes_pars_fragment:Dk,clipping_planes_pars_vertex:kk,clipping_planes_vertex:Uk,color_fragment:Ok,color_pars_fragment:Fk,color_pars_vertex:Bk,color_vertex:zk,common:Vk,cube_uv_reflection_fragment:Hk,defaultnormal_vertex:Wk,displacementmap_pars_vertex:Gk,displacementmap_vertex:jk,emissivemap_fragment:Xk,emissivemap_pars_fragment:$k,encodings_fragment:qk,encodings_pars_fragment:Yk,envmap_fragment:Kk,envmap_common_pars_fragment:Jk,envmap_pars_fragment:Zk,envmap_pars_vertex:Qk,envmap_physical_pars_fragment:hU,envmap_vertex:eU,fog_vertex:tU,fog_pars_vertex:nU,fog_fragment:iU,fog_pars_fragment:rU,gradientmap_pars_fragment:sU,lightmap_fragment:oU,lightmap_pars_fragment:aU,lights_lambert_fragment:lU,lights_lambert_pars_fragment:uU,lights_pars_begin:cU,lights_toon_fragment:fU,lights_toon_pars_fragment:dU,lights_phong_fragment:pU,lights_phong_pars_fragment:mU,lights_physical_fragment:gU,lights_physical_pars_fragment:yU,lights_fragment_begin:vU,lights_fragment_maps:xU,lights_fragment_end:_U,logdepthbuf_fragment:wU,logdepthbuf_pars_fragment:SU,logdepthbuf_pars_vertex:MU,logdepthbuf_vertex:EU,map_fragment:bU,map_pars_fragment:TU,map_particle_fragment:AU,map_particle_pars_fragment:CU,metalnessmap_fragment:PU,metalnessmap_pars_fragment:RU,morphcolor_vertex:NU,morphnormal_vertex:LU,morphtarget_pars_vertex:IU,morphtarget_vertex:DU,normal_fragment_begin:kU,normal_fragment_maps:UU,normal_pars_fragment:OU,normal_pars_vertex:FU,normal_vertex:BU,normalmap_pars_fragment:zU,clearcoat_normal_fragment_begin:VU,clearcoat_normal_fragment_maps:HU,clearcoat_pars_fragment:WU,iridescence_pars_fragment:GU,output_fragment:jU,packing:XU,premultiplied_alpha_fragment:$U,project_vertex:qU,dithering_fragment:YU,dithering_pars_fragment:KU,roughnessmap_fragment:JU,roughnessmap_pars_fragment:ZU,shadowmap_pars_fragment:QU,shadowmap_pars_vertex:eO,shadowmap_vertex:tO,shadowmask_pars_fragment:nO,skinbase_vertex:iO,skinning_pars_vertex:rO,skinning_vertex:sO,skinnormal_vertex:oO,specularmap_fragment:aO,specularmap_pars_fragment:lO,tonemapping_fragment:uO,tonemapping_pars_fragment:cO,transmission_fragment:hO,transmission_pars_fragment:fO,uv_pars_fragment:dO,uv_pars_vertex:pO,uv_vertex:mO,worldpos_vertex:gO,background_vert:yO,background_frag:vO,backgroundCube_vert:xO,backgroundCube_frag:_O,cube_vert:wO,cube_frag:SO,depth_vert:MO,depth_frag:EO,distanceRGBA_vert:bO,distanceRGBA_frag:TO,equirect_vert:AO,equirect_frag:CO,linedashed_vert:PO,linedashed_frag:RO,meshbasic_vert:NO,meshbasic_frag:LO,meshlambert_vert:IO,meshlambert_frag:DO,meshmatcap_vert:kO,meshmatcap_frag:UO,meshnormal_vert:OO,meshnormal_frag:FO,meshphong_vert:BO,meshphong_frag:zO,meshphysical_vert:VO,meshphysical_frag:HO,meshtoon_vert:WO,meshtoon_frag:GO,points_vert:jO,points_frag:XO,shadow_vert:$O,shadow_frag:qO,sprite_vert:YO,sprite_frag:KO},$e={common:{diffuse:{value:new et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaMapTransform:{value:new Jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jt},normalScale:{value:new Le(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Jt}},sprite:{diffuse:{value:new et(16777215)},opacity:{value:1},center:{value:new Le(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jt},alphaMap:{value:null},alphaTest:{value:0}}},vo={basic:{uniforms:Ar([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:qt.meshbasic_vert,fragmentShader:qt.meshbasic_frag},lambert:{uniforms:Ar([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new et(0)}}]),vertexShader:qt.meshlambert_vert,fragmentShader:qt.meshlambert_frag},phong:{uniforms:Ar([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,$e.lights,{emissive:{value:new et(0)},specular:{value:new et(1118481)},shininess:{value:30}}]),vertexShader:qt.meshphong_vert,fragmentShader:qt.meshphong_frag},standard:{uniforms:Ar([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{value:new et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag},toon:{uniforms:Ar([$e.common,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{value:new et(0)}}]),vertexShader:qt.meshtoon_vert,fragmentShader:qt.meshtoon_frag},matcap:{uniforms:Ar([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.fog,{matcap:{value:null}}]),vertexShader:qt.meshmatcap_vert,fragmentShader:qt.meshmatcap_frag},points:{uniforms:Ar([$e.points,$e.fog]),vertexShader:qt.points_vert,fragmentShader:qt.points_frag},dashed:{uniforms:Ar([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qt.linedashed_vert,fragmentShader:qt.linedashed_frag},depth:{uniforms:Ar([$e.common,$e.displacementmap]),vertexShader:qt.depth_vert,fragmentShader:qt.depth_frag},normal:{uniforms:Ar([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,{opacity:{value:1}}]),vertexShader:qt.meshnormal_vert,fragmentShader:qt.meshnormal_frag},sprite:{uniforms:Ar([$e.sprite,$e.fog]),vertexShader:qt.sprite_vert,fragmentShader:qt.sprite_frag},background:{uniforms:{uvTransform:{value:new Jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:qt.background_vert,fragmentShader:qt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:qt.backgroundCube_vert,fragmentShader:qt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qt.cube_vert,fragmentShader:qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qt.equirect_vert,fragmentShader:qt.equirect_frag},distanceRGBA:{uniforms:Ar([$e.common,$e.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qt.distanceRGBA_vert,fragmentShader:qt.distanceRGBA_frag},shadow:{uniforms:Ar([$e.lights,$e.fog,{color:{value:new et(0)},opacity:{value:1}}]),vertexShader:qt.shadow_vert,fragmentShader:qt.shadow_frag}};vo.physical={uniforms:Ar([vo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jt},clearcoatNormalScale:{value:new Le(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jt},sheen:{value:0},sheenColor:{value:new et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jt},transmissionSamplerSize:{value:new Le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jt},attenuationDistance:{value:0},attenuationColor:{value:new et(0)},specularColor:{value:new et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jt}}]),vertexShader:qt.meshphysical_vert,fragmentShader:qt.meshphysical_frag};const S0={r:0,b:0,g:0};function JO(n,e,t,i,r,s,o){const l=new et(0);let c=s===!0?0:1,d,p,m=null,y=0,v=null;function S(M,x){let C=!1,T=x.isScene===!0?x.background:null;switch(T&&T.isTexture&&(T=(x.backgroundBlurriness>0?t:e).get(T)),T===null?E(l,c):T&&T.isColor&&(E(T,1),C=!0),n.xr.getEnvironmentBlendMode()){case"opaque":C=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),C=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),C=!0;break}(n.autoClear||C)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),T&&(T.isCubeTexture||T.mapping===rd)?(p===void 0&&(p=new Zi(new mu(1,1,1),new bo({name:"BackgroundCubeMaterial",uniforms:Yf(vo.backgroundCube.uniforms),vertexShader:vo.backgroundCube.vertexShader,fragmentShader:vo.backgroundCube.fragmentShader,side:Pr,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(k,B,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),p.material.uniforms.envMap.value=T,p.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,p.material.toneMapped=T.colorSpace!==Gt,(m!==T||y!==T.version||v!==n.toneMapping)&&(p.material.needsUpdate=!0,m=T,y=T.version,v=n.toneMapping),p.layers.enableAll(),M.unshift(p,p.geometry,p.material,0,0,null)):T&&T.isTexture&&(d===void 0&&(d=new Zi(new sd(2,2),new bo({name:"BackgroundMaterial",uniforms:Yf(vo.background.uniforms),vertexShader:vo.background.vertexShader,fragmentShader:vo.background.fragmentShader,side:il,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=T,d.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,d.material.toneMapped=T.colorSpace!==Gt,T.matrixAutoUpdate===!0&&T.updateMatrix(),d.material.uniforms.uvTransform.value.copy(T.matrix),(m!==T||y!==T.version||v!==n.toneMapping)&&(d.material.needsUpdate=!0,m=T,y=T.version,v=n.toneMapping),d.layers.enableAll(),M.unshift(d,d.geometry,d.material,0,0,null))}function E(M,x){M.getRGB(S0,w2(n)),i.buffers.color.setClear(S0.r,S0.g,S0.b,x,o)}return{getClearColor:function(){return l},setClearColor:function(M,x=1){l.set(M),c=x,E(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(M){c=M,E(l,c)},render:S}}function ZO(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,l={},c=M(null);let d=c,p=!1;function m(H,se,ne,ie,V){let te=!1;if(o){const $=E(ie,ne,se);d!==$&&(d=$,v(d.object)),te=x(H,ie,ne,V),te&&C(H,ie,ne,V)}else{const $=se.wireframe===!0;(d.geometry!==ie.id||d.program!==ne.id||d.wireframe!==$)&&(d.geometry=ie.id,d.program=ne.id,d.wireframe=$,te=!0)}V!==null&&t.update(V,n.ELEMENT_ARRAY_BUFFER),(te||p)&&(p=!1,z(H,se,ne,ie),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(V).buffer))}function y(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(H){return i.isWebGL2?n.bindVertexArray(H):s.bindVertexArrayOES(H)}function S(H){return i.isWebGL2?n.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function E(H,se,ne){const ie=ne.wireframe===!0;let V=l[H.id];V===void 0&&(V={},l[H.id]=V);let te=V[se.id];te===void 0&&(te={},V[se.id]=te);let $=te[ie];return $===void 0&&($=M(y()),te[ie]=$),$}function M(H){const se=[],ne=[],ie=[];for(let V=0;V<r;V++)se[V]=0,ne[V]=0,ie[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:se,enabledAttributes:ne,attributeDivisors:ie,object:H,attributes:{},index:null}}function x(H,se,ne,ie){const V=d.attributes,te=se.attributes;let $=0;const G=ne.getAttributes();for(const Z in G)if(G[Z].location>=0){const fe=V[Z];let Ee=te[Z];if(Ee===void 0&&(Z==="instanceMatrix"&&H.instanceMatrix&&(Ee=H.instanceMatrix),Z==="instanceColor"&&H.instanceColor&&(Ee=H.instanceColor)),fe===void 0||fe.attribute!==Ee||Ee&&fe.data!==Ee.data)return!0;$++}return d.attributesNum!==$||d.index!==ie}function C(H,se,ne,ie){const V={},te=se.attributes;let $=0;const G=ne.getAttributes();for(const Z in G)if(G[Z].location>=0){let fe=te[Z];fe===void 0&&(Z==="instanceMatrix"&&H.instanceMatrix&&(fe=H.instanceMatrix),Z==="instanceColor"&&H.instanceColor&&(fe=H.instanceColor));const Ee={};Ee.attribute=fe,fe&&fe.data&&(Ee.data=fe.data),V[Z]=Ee,$++}d.attributes=V,d.attributesNum=$,d.index=ie}function T(){const H=d.newAttributes;for(let se=0,ne=H.length;se<ne;se++)H[se]=0}function P(H){I(H,0)}function I(H,se){const ne=d.newAttributes,ie=d.enabledAttributes,V=d.attributeDivisors;ne[H]=1,ie[H]===0&&(n.enableVertexAttribArray(H),ie[H]=1),V[H]!==se&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,se),V[H]=se)}function k(){const H=d.newAttributes,se=d.enabledAttributes;for(let ne=0,ie=se.length;ne<ie;ne++)se[ne]!==H[ne]&&(n.disableVertexAttribArray(ne),se[ne]=0)}function B(H,se,ne,ie,V,te){i.isWebGL2===!0&&(ne===n.INT||ne===n.UNSIGNED_INT)?n.vertexAttribIPointer(H,se,ne,V,te):n.vertexAttribPointer(H,se,ne,ie,V,te)}function z(H,se,ne,ie){if(i.isWebGL2===!1&&(H.isInstancedMesh||ie.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;T();const V=ie.attributes,te=ne.getAttributes(),$=se.defaultAttributeValues;for(const G in te){const Z=te[G];if(Z.location>=0){let ce=V[G];if(ce===void 0&&(G==="instanceMatrix"&&H.instanceMatrix&&(ce=H.instanceMatrix),G==="instanceColor"&&H.instanceColor&&(ce=H.instanceColor)),ce!==void 0){const fe=ce.normalized,Ee=ce.itemSize,be=t.get(ce);if(be===void 0)continue;const ee=be.buffer,Ve=be.type,je=be.bytesPerElement;if(ce.isInterleavedBufferAttribute){const Ie=ce.data,Ke=Ie.stride,Re=ce.offset;if(Ie.isInstancedInterleavedBuffer){for(let Se=0;Se<Z.locationSize;Se++)I(Z.location+Se,Ie.meshPerAttribute);H.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let Se=0;Se<Z.locationSize;Se++)P(Z.location+Se);n.bindBuffer(n.ARRAY_BUFFER,ee);for(let Se=0;Se<Z.locationSize;Se++)B(Z.location+Se,Ee/Z.locationSize,Ve,fe,Ke*je,(Re+Ee/Z.locationSize*Se)*je)}else{if(ce.isInstancedBufferAttribute){for(let Ie=0;Ie<Z.locationSize;Ie++)I(Z.location+Ie,ce.meshPerAttribute);H.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Ie=0;Ie<Z.locationSize;Ie++)P(Z.location+Ie);n.bindBuffer(n.ARRAY_BUFFER,ee);for(let Ie=0;Ie<Z.locationSize;Ie++)B(Z.location+Ie,Ee/Z.locationSize,Ve,fe,Ee*je,Ee/Z.locationSize*Ie*je)}}else if($!==void 0){const fe=$[G];if(fe!==void 0)switch(fe.length){case 2:n.vertexAttrib2fv(Z.location,fe);break;case 3:n.vertexAttrib3fv(Z.location,fe);break;case 4:n.vertexAttrib4fv(Z.location,fe);break;default:n.vertexAttrib1fv(Z.location,fe)}}}}k()}function U(){ae();for(const H in l){const se=l[H];for(const ne in se){const ie=se[ne];for(const V in ie)S(ie[V].object),delete ie[V];delete se[ne]}delete l[H]}}function F(H){if(l[H.id]===void 0)return;const se=l[H.id];for(const ne in se){const ie=se[ne];for(const V in ie)S(ie[V].object),delete ie[V];delete se[ne]}delete l[H.id]}function K(H){for(const se in l){const ne=l[se];if(ne[H.id]===void 0)continue;const ie=ne[H.id];for(const V in ie)S(ie[V].object),delete ie[V];delete ne[H.id]}}function ae(){re(),p=!0,d!==c&&(d=c,v(d.object))}function re(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:m,reset:ae,resetDefaultState:re,dispose:U,releaseStatesOfGeometry:F,releaseStatesOfProgram:K,initAttributes:T,enableAttribute:P,disableUnusedAttributes:k}}function QO(n,e,t,i){const r=i.isWebGL2;let s;function o(d){s=d}function l(d,p){n.drawArrays(s,d,p),t.update(p,s,1)}function c(d,p,m){if(m===0)return;let y,v;if(r)y=n,v="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[v](s,d,p,m),t.update(p,s,m)}this.setMode=o,this.render=l,this.renderInstances=c}function eF(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(B){if(B==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let l=t.precision!==void 0?t.precision:"highp";const c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const d=o||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),E=n.getParameter(n.MAX_VERTEX_ATTRIBS),M=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),x=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),T=y>0,P=o||e.has("OES_texture_float"),I=T&&P,k=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:d,getMaxAnisotropy:r,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:p,maxTextures:m,maxVertexTextures:y,maxTextureSize:v,maxCubemapSize:S,maxAttributes:E,maxVertexUniforms:M,maxVaryings:x,maxFragmentUniforms:C,vertexTextures:T,floatFragmentTextures:P,floatVertexTextures:I,maxSamples:k}}function tF(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Zl,l=new Jt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,y){const v=m.length!==0||y||i!==0||r;return r=y,i=m.length,v},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,y){t=p(m,y,0)},this.setState=function(m,y,v){const S=m.clippingPlanes,E=m.clipIntersection,M=m.clipShadows,x=n.get(m);if(!r||S===null||S.length===0||s&&!M)s?p(null):d();else{const C=s?0:i,T=C*4;let P=x.clippingState||null;c.value=P,P=p(S,y,T,v);for(let I=0;I!==T;++I)P[I]=t[I];x.clippingState=P,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=C}};function d(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(m,y,v,S){const E=m!==null?m.length:0;let M=null;if(E!==0){if(M=c.value,S!==!0||M===null){const x=v+E*4,C=y.matrixWorldInverse;l.getNormalMatrix(C),(M===null||M.length<x)&&(M=new Float32Array(x));for(let T=0,P=v;T!==E;++T,P+=4)o.copy(m[T]).applyMatrix4(C,l),o.normal.toArray(M,P),M[P+3]=o.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,M}}function nF(n){let e=new WeakMap;function t(o,l){return l===em?o.mapping=au:l===tm&&(o.mapping=lu),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const l=o.mapping;if(l===em||l===tm)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const d=new E2(c.height/2);return d.fromEquirectangularTexture(n,o),e.set(o,d),o.addEventListener("dispose",r),t(d.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Um extends Dm{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Pf=4,EE=[.125,.215,.35,.446,.526,.582],wc=20,Bx=new Um,bE=new et;let zx=null;const yc=(1+Math.sqrt(5))/2,df=1/yc,TE=[new X(1,1,1),new X(-1,1,1),new X(1,1,-1),new X(-1,1,-1),new X(0,yc,df),new X(0,yc,-df),new X(df,0,yc),new X(-df,0,yc),new X(yc,df,0),new X(-yc,df,0)];class xw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){zx=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=PE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=CE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(zx),e.scissorTest=!1,M0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===au||e.mapping===lu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),zx=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ui,minFilter:ui,generateMipmaps:!1,type:$f,format:Yr,colorSpace:Mo,depthBuffer:!1},r=AE(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=AE(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=iF(s)),this._blurMaterial=rF(s,e,t)}return r}_compileMaterial(e){const t=new Zi(this._lodPlanes[0],e);this._renderer.compile(t,Bx)}_sceneToCubeUV(e,t,i,r){const l=new zi(90,1,t,i),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,y=p.toneMapping;p.getClearColor(bE),p.toneMapping=So,p.autoClear=!1;const v=new pu({name:"PMREM.Background",side:Pr,depthWrite:!1,depthTest:!1}),S=new Zi(new mu,v);let E=!1;const M=e.background;M?M.isColor&&(v.color.copy(M),e.background=null,E=!0):(v.color.copy(bE),E=!0);for(let x=0;x<6;x++){const C=x%3;C===0?(l.up.set(0,c[x],0),l.lookAt(d[x],0,0)):C===1?(l.up.set(0,0,c[x]),l.lookAt(0,d[x],0)):(l.up.set(0,c[x],0),l.lookAt(0,0,d[x]));const T=this._cubeSize;M0(r,C*T,x>2?T:0,T,T),p.setRenderTarget(r),E&&p.render(S,l),p.render(e,l)}S.geometry.dispose(),S.material.dispose(),p.toneMapping=y,p.autoClear=m,e.background=M}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===au||e.mapping===lu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=PE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=CE());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Zi(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;M0(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,Bx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=TE[(r-1)%TE.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,l){const c=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new Zi(this._lodPlanes[r],d),y=d.uniforms,v=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*wc-1),E=s/S,M=isFinite(s)?1+Math.floor(p*E):wc;M>wc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${wc}`);const x=[];let C=0;for(let B=0;B<wc;++B){const z=B/E,U=Math.exp(-z*z/2);x.push(U),B===0?C+=U:B<M&&(C+=2*U)}for(let B=0;B<x.length;B++)x[B]=x[B]/C;y.envMap.value=e.texture,y.samples.value=M,y.weights.value=x,y.latitudinal.value=o==="latitudinal",l&&(y.poleAxis.value=l);const{_lodMax:T}=this;y.dTheta.value=S,y.mipInt.value=T-i;const P=this._sizeLods[r],I=3*P*(r>T-Pf?r-T+Pf:0),k=4*(this._cubeSize-P);M0(t,I,k,3*P,2*P),c.setRenderTarget(t),c.render(m,Bx)}}function iF(n){const e=[],t=[],i=[];let r=n;const s=n-Pf+1+EE.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let c=1/l;o>n-Pf?c=EE[o-n+Pf-1]:o===0&&(c=0),i.push(c);const d=1/(l-2),p=-d,m=1+d,y=[p,p,m,p,m,m,p,p,m,m,p,m],v=6,S=6,E=3,M=2,x=1,C=new Float32Array(E*S*v),T=new Float32Array(M*S*v),P=new Float32Array(x*S*v);for(let k=0;k<v;k++){const B=k%3*2/3-1,z=k>2?0:-1,U=[B,z,0,B+2/3,z,0,B+2/3,z+1,0,B,z,0,B+2/3,z+1,0,B,z+1,0];C.set(U,E*S*k),T.set(y,M*S*k);const F=[k,k,k,k,k,k];P.set(F,x*S*k)}const I=new jt;I.setAttribute("position",new Cn(C,E)),I.setAttribute("uv",new Cn(T,M)),I.setAttribute("faceIndex",new Cn(P,x)),e.push(I),r>Pf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function AE(n,e,t){const i=new Eo(n,e,t);return i.texture.mapping=rd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function M0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function rF(n,e,t){const i=new Float32Array(wc),r=new X(0,1,0);return new bo({name:"SphericalGaussianBlur",defines:{n:wc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:PS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function CE(){return new bo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:PS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function PE(){return new bo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:PS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function PS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sF(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,d=c===em||c===tm,p=c===au||c===lu;if(d||p)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let m=e.get(l);return t===null&&(t=new xw(n)),m=d?t.fromEquirectangular(l,m):t.fromCubemap(l,m),e.set(l,m),m.texture}else{if(e.has(l))return e.get(l).texture;{const m=l.image;if(d&&m&&m.height>0||p&&m&&r(m)){t===null&&(t=new xw(n));const y=d?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,y),l.addEventListener("dispose",s),y.texture}else return null}}}return l}function r(l){let c=0;const d=6;for(let p=0;p<d;p++)l[p]!==void 0&&c++;return c===d}function s(l){const c=l.target;c.removeEventListener("dispose",s);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function oF(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function aF(n,e,t,i){const r={},s=new WeakMap;function o(m){const y=m.target;y.index!==null&&e.remove(y.index);for(const S in y.attributes)e.remove(y.attributes[S]);y.removeEventListener("dispose",o),delete r[y.id];const v=s.get(y);v&&(e.remove(v),s.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function l(m,y){return r[y.id]===!0||(y.addEventListener("dispose",o),r[y.id]=!0,t.memory.geometries++),y}function c(m){const y=m.attributes;for(const S in y)e.update(y[S],n.ARRAY_BUFFER);const v=m.morphAttributes;for(const S in v){const E=v[S];for(let M=0,x=E.length;M<x;M++)e.update(E[M],n.ARRAY_BUFFER)}}function d(m){const y=[],v=m.index,S=m.attributes.position;let E=0;if(v!==null){const C=v.array;E=v.version;for(let T=0,P=C.length;T<P;T+=3){const I=C[T+0],k=C[T+1],B=C[T+2];y.push(I,k,k,B,B,I)}}else{const C=S.array;E=S.version;for(let T=0,P=C.length/3-1;T<P;T+=3){const I=T+0,k=T+1,B=T+2;y.push(I,k,k,B,B,I)}}const M=new(x2(y)?CS:AS)(y,1);M.version=E;const x=s.get(m);x&&e.remove(x),s.set(m,M)}function p(m){const y=s.get(m);if(y){const v=m.index;v!==null&&y.version<v.version&&d(m)}else d(m);return s.get(m)}return{get:l,update:c,getWireframeAttribute:p}}function lF(n,e,t,i){const r=i.isWebGL2;let s;function o(y){s=y}let l,c;function d(y){l=y.type,c=y.bytesPerElement}function p(y,v){n.drawElements(s,v,l,y*c),t.update(v,s,1)}function m(y,v,S){if(S===0)return;let E,M;if(r)E=n,M="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[M](s,v,l,y*c,S),t.update(v,s,S)}this.setMode=o,this.setIndex=d,this.render=p,this.renderInstances=m}function uF(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function cF(n,e){return n[0]-e[0]}function hF(n,e){return Math.abs(e[1])-Math.abs(n[1])}function fF(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new _n,l=[];for(let d=0;d<8;d++)l[d]=[d,0];function c(d,p,m){const y=d.morphTargetInfluences;if(e.isWebGL2===!0){const S=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,E=S!==void 0?S.length:0;let M=s.get(p);if(M===void 0||M.count!==E){let se=function(){re.dispose(),s.delete(p),p.removeEventListener("dispose",se)};var v=se;M!==void 0&&M.texture.dispose();const T=p.morphAttributes.position!==void 0,P=p.morphAttributes.normal!==void 0,I=p.morphAttributes.color!==void 0,k=p.morphAttributes.position||[],B=p.morphAttributes.normal||[],z=p.morphAttributes.color||[];let U=0;T===!0&&(U=1),P===!0&&(U=2),I===!0&&(U=3);let F=p.attributes.position.count*U,K=1;F>e.maxTextureSize&&(K=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const ae=new Float32Array(F*K*4*E),re=new cv(ae,F,K,E);re.type=Za,re.needsUpdate=!0;const H=U*4;for(let ne=0;ne<E;ne++){const ie=k[ne],V=B[ne],te=z[ne],$=F*K*4*ne;for(let G=0;G<ie.count;G++){const Z=G*H;T===!0&&(o.fromBufferAttribute(ie,G),ae[$+Z+0]=o.x,ae[$+Z+1]=o.y,ae[$+Z+2]=o.z,ae[$+Z+3]=0),P===!0&&(o.fromBufferAttribute(V,G),ae[$+Z+4]=o.x,ae[$+Z+5]=o.y,ae[$+Z+6]=o.z,ae[$+Z+7]=0),I===!0&&(o.fromBufferAttribute(te,G),ae[$+Z+8]=o.x,ae[$+Z+9]=o.y,ae[$+Z+10]=o.z,ae[$+Z+11]=te.itemSize===4?o.w:1)}}M={count:E,texture:re,size:new Le(F,K)},s.set(p,M),p.addEventListener("dispose",se)}let x=0;for(let T=0;T<y.length;T++)x+=y[T];const C=p.morphTargetsRelative?1:1-x;m.getUniforms().setValue(n,"morphTargetBaseInfluence",C),m.getUniforms().setValue(n,"morphTargetInfluences",y),m.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),m.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const S=y===void 0?0:y.length;let E=i[p.id];if(E===void 0||E.length!==S){E=[];for(let P=0;P<S;P++)E[P]=[P,0];i[p.id]=E}for(let P=0;P<S;P++){const I=E[P];I[0]=P,I[1]=y[P]}E.sort(hF);for(let P=0;P<8;P++)P<S&&E[P][1]?(l[P][0]=E[P][0],l[P][1]=E[P][1]):(l[P][0]=Number.MAX_SAFE_INTEGER,l[P][1]=0);l.sort(cF);const M=p.morphAttributes.position,x=p.morphAttributes.normal;let C=0;for(let P=0;P<8;P++){const I=l[P],k=I[0],B=I[1];k!==Number.MAX_SAFE_INTEGER&&B?(M&&p.getAttribute("morphTarget"+P)!==M[k]&&p.setAttribute("morphTarget"+P,M[k]),x&&p.getAttribute("morphNormal"+P)!==x[k]&&p.setAttribute("morphNormal"+P,x[k]),r[P]=B,C+=B):(M&&p.hasAttribute("morphTarget"+P)===!0&&p.deleteAttribute("morphTarget"+P),x&&p.hasAttribute("morphNormal"+P)===!0&&p.deleteAttribute("morphNormal"+P),r[P]=0)}const T=p.morphTargetsRelative?1:1-C;m.getUniforms().setValue(n,"morphTargetBaseInfluence",T),m.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:c}}function dF(n,e,t,i){let r=new WeakMap;function s(c){const d=i.render.frame,p=c.geometry,m=e.get(c,p);return r.get(m)!==d&&(e.update(m),r.set(m,d)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER)),m}function o(){r=new WeakMap}function l(c){const d=c.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}const T2=new ti,A2=new cv,C2=new TS,P2=new km,RE=[],NE=[],LE=new Float32Array(16),IE=new Float32Array(9),DE=new Float32Array(4);function od(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=RE[r];if(s===void 0&&(s=new Float32Array(r),RE[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function Pi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ri(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function fv(n,e){let t=NE[e];t===void 0&&(t=new Int32Array(e),NE[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function pF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function mF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2fv(this.addr,e),Ri(t,e)}}function gF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pi(t,e))return;n.uniform3fv(this.addr,e),Ri(t,e)}}function yF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4fv(this.addr,e),Ri(t,e)}}function vF(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ri(t,e)}else{if(Pi(t,i))return;DE.set(i),n.uniformMatrix2fv(this.addr,!1,DE),Ri(t,i)}}function xF(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ri(t,e)}else{if(Pi(t,i))return;IE.set(i),n.uniformMatrix3fv(this.addr,!1,IE),Ri(t,i)}}function _F(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ri(t,e)}else{if(Pi(t,i))return;LE.set(i),n.uniformMatrix4fv(this.addr,!1,LE),Ri(t,i)}}function wF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function SF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2iv(this.addr,e),Ri(t,e)}}function MF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3iv(this.addr,e),Ri(t,e)}}function EF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4iv(this.addr,e),Ri(t,e)}}function bF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function TF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2uiv(this.addr,e),Ri(t,e)}}function AF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3uiv(this.addr,e),Ri(t,e)}}function CF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4uiv(this.addr,e),Ri(t,e)}}function PF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||T2,r)}function RF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||C2,r)}function NF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||P2,r)}function LF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||A2,r)}function IF(n){switch(n){case 5126:return pF;case 35664:return mF;case 35665:return gF;case 35666:return yF;case 35674:return vF;case 35675:return xF;case 35676:return _F;case 5124:case 35670:return wF;case 35667:case 35671:return SF;case 35668:case 35672:return MF;case 35669:case 35673:return EF;case 5125:return bF;case 36294:return TF;case 36295:return AF;case 36296:return CF;case 35678:case 36198:case 36298:case 36306:case 35682:return PF;case 35679:case 36299:case 36307:return RF;case 35680:case 36300:case 36308:case 36293:return NF;case 36289:case 36303:case 36311:case 36292:return LF}}function DF(n,e){n.uniform1fv(this.addr,e)}function kF(n,e){const t=od(e,this.size,2);n.uniform2fv(this.addr,t)}function UF(n,e){const t=od(e,this.size,3);n.uniform3fv(this.addr,t)}function OF(n,e){const t=od(e,this.size,4);n.uniform4fv(this.addr,t)}function FF(n,e){const t=od(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function BF(n,e){const t=od(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function zF(n,e){const t=od(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function VF(n,e){n.uniform1iv(this.addr,e)}function HF(n,e){n.uniform2iv(this.addr,e)}function WF(n,e){n.uniform3iv(this.addr,e)}function GF(n,e){n.uniform4iv(this.addr,e)}function jF(n,e){n.uniform1uiv(this.addr,e)}function XF(n,e){n.uniform2uiv(this.addr,e)}function $F(n,e){n.uniform3uiv(this.addr,e)}function qF(n,e){n.uniform4uiv(this.addr,e)}function YF(n,e,t){const i=this.cache,r=e.length,s=fv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||T2,s[o])}function KF(n,e,t){const i=this.cache,r=e.length,s=fv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||C2,s[o])}function JF(n,e,t){const i=this.cache,r=e.length,s=fv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||P2,s[o])}function ZF(n,e,t){const i=this.cache,r=e.length,s=fv(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||A2,s[o])}function QF(n){switch(n){case 5126:return DF;case 35664:return kF;case 35665:return UF;case 35666:return OF;case 35674:return FF;case 35675:return BF;case 35676:return zF;case 5124:case 35670:return VF;case 35667:case 35671:return HF;case 35668:case 35672:return WF;case 35669:case 35673:return GF;case 5125:return jF;case 36294:return XF;case 36295:return $F;case 36296:return qF;case 35678:case 36198:case 36298:case 36306:case 35682:return YF;case 35679:case 36299:case 36307:return KF;case 35680:case 36300:case 36308:case 36293:return JF;case 36289:case 36303:case 36311:case 36292:return ZF}}class e4{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=IF(t.type)}}class t4{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=QF(t.type)}}class n4{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const Vx=/(\w+)(\])?(\[|\.)?/g;function kE(n,e){n.seq.push(e),n.map[e.id]=e}function i4(n,e,t){const i=n.name,r=i.length;for(Vx.lastIndex=0;;){const s=Vx.exec(i),o=Vx.lastIndex;let l=s[1];const c=s[2]==="]",d=s[3];if(c&&(l=l|0),d===void 0||d==="["&&o+2===r){kE(t,d===void 0?new e4(l,n,e):new t4(l,n,e));break}else{let m=t.map[l];m===void 0&&(m=new n4(l),kE(t,m)),t=m}}}class gy{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);i4(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function UE(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let r4=0;function s4(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;i.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return i.join(`
`)}function o4(n){switch(n){case Mo:return["Linear","( value )"];case Gt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function OE(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+s4(n.getShaderSource(e),o)}else return r}function a4(n,e){const t=o4(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function l4(n,e){let t;switch(e){case jC:t="Linear";break;case XC:t="Reinhard";break;case $C:t="OptimizedCineon";break;case vS:t="ACESFilmic";break;case qC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function u4(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Cp).join(`
`)}function c4(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function h4(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function Cp(n){return n!==""}function FE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function BE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const f4=/^[ \t]*#include +<([\w\d./]+)>/gm;function _w(n){return n.replace(f4,d4)}function d4(n,e){const t=qt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return _w(t)}const p4=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function zE(n){return n.replace(p4,m4)}function m4(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function VE(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function g4(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===av?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===zp?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===go&&(e="SHADOWMAP_TYPE_VSM"),e}function y4(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case au:case lu:e="ENVMAP_TYPE_CUBE";break;case rd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function v4(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case lu:e="ENVMAP_MODE_REFRACTION";break}return e}function x4(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Nm:e="ENVMAP_BLENDING_MULTIPLY";break;case WC:e="ENVMAP_BLENDING_MIX";break;case GC:e="ENVMAP_BLENDING_ADD";break}return e}function _4(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function w4(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=g4(t),d=y4(t),p=v4(t),m=x4(t),y=_4(t),v=t.isWebGL2?"":u4(t),S=c4(s),E=r.createProgram();let M,x,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=[S].filter(Cp).join(`
`),M.length>0&&(M+=`
`),x=[v,S].filter(Cp).join(`
`),x.length>0&&(x+=`
`)):(M=[VE(t),"#define SHADER_NAME "+t.shaderName,S,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Cp).join(`
`),x=[v,VE(t),"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==So?"#define TONE_MAPPING":"",t.toneMapping!==So?qt.tonemapping_pars_fragment:"",t.toneMapping!==So?l4("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",qt.encodings_pars_fragment,a4("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Cp).join(`
`)),o=_w(o),o=FE(o,t),o=BE(o,t),l=_w(l),l=FE(l,t),l=BE(l,t),o=zE(o),l=zE(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,M=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,x=["#define varying in",t.glslVersion===yw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===yw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const T=C+M+o,P=C+x+l,I=UE(r,r.VERTEX_SHADER,T),k=UE(r,r.FRAGMENT_SHADER,P);if(r.attachShader(E,I),r.attachShader(E,k),t.index0AttributeName!==void 0?r.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(E,0,"position"),r.linkProgram(E),n.debug.checkShaderErrors){const U=r.getProgramInfoLog(E).trim(),F=r.getShaderInfoLog(I).trim(),K=r.getShaderInfoLog(k).trim();let ae=!0,re=!0;if(r.getProgramParameter(E,r.LINK_STATUS)===!1)if(ae=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,E,I,k);else{const H=OE(r,I,"vertex"),se=OE(r,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(E,r.VALIDATE_STATUS)+`

Program Info Log: `+U+`
`+H+`
`+se)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(F===""||K==="")&&(re=!1);re&&(this.diagnostics={runnable:ae,programLog:U,vertexShader:{log:F,prefix:M},fragmentShader:{log:K,prefix:x}})}r.deleteShader(I),r.deleteShader(k);let B;this.getUniforms=function(){return B===void 0&&(B=new gy(r,E)),B};let z;return this.getAttributes=function(){return z===void 0&&(z=h4(r,E)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(E),this.program=void 0},this.name=t.shaderName,this.id=r4++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=I,this.fragmentShader=k,this}let S4=0;class M4{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new E4(e),t.set(e,i)),i}}class E4{constructor(e){this.id=S4++,this.code=e,this.usedTimes=0}}function b4(n,e,t,i,r,s,o){const l=new Ic,c=new M4,d=[],p=r.isWebGL2,m=r.logarithmicDepthBuffer,y=r.vertexTextures;let v=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(U){return U===1?"uv1":U===2?"uv2":U===3?"uv3":"uv"}function M(U,F,K,ae,re){const H=ae.fog,se=re.geometry,ne=U.isMeshStandardMaterial?ae.environment:null,ie=(U.isMeshStandardMaterial?t:e).get(U.envMap||ne),V=ie&&ie.mapping===rd?ie.image.height:null,te=S[U.type];U.precision!==null&&(v=r.getMaxPrecision(U.precision),v!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",v,"instead."));const $=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,G=$!==void 0?$.length:0;let Z=0;se.morphAttributes.position!==void 0&&(Z=1),se.morphAttributes.normal!==void 0&&(Z=2),se.morphAttributes.color!==void 0&&(Z=3);let ce,fe,Ee,be;if(te){const an=vo[te];ce=an.vertexShader,fe=an.fragmentShader}else ce=U.vertexShader,fe=U.fragmentShader,c.update(U),Ee=c.getVertexShaderID(U),be=c.getFragmentShaderID(U);const ee=n.getRenderTarget(),Ve=re.isInstancedMesh===!0,je=!!U.map,Ie=!!U.matcap,Ke=!!ie,Re=!!U.aoMap,Se=!!U.lightMap,Ne=!!U.bumpMap,tt=!!U.normalMap,Ge=!!U.displacementMap,yt=!!U.emissiveMap,xt=!!U.metalnessMap,pt=!!U.roughnessMap,bt=U.clearcoat>0,Vt=U.iridescence>0,Y=U.sheen>0,W=U.transmission>0,_e=bt&&!!U.clearcoatMap,Oe=bt&&!!U.clearcoatNormalMap,Fe=bt&&!!U.clearcoatRoughnessMap,Xe=Vt&&!!U.iridescenceMap,vt=Vt&&!!U.iridescenceThicknessMap,Qe=Y&&!!U.sheenColorMap,Ae=Y&&!!U.sheenRoughnessMap,rt=!!U.specularMap,mt=!!U.specularColorMap,_t=!!U.specularIntensityMap,nt=W&&!!U.transmissionMap,dt=W&&!!U.thicknessMap,Xt=!!U.gradientMap,en=!!U.alphaMap,Pn=U.alphaTest>0,le=!!U.extensions,Te=!!se.attributes.uv1,De=!!se.attributes.uv2,qe=!!se.attributes.uv3;return{isWebGL2:p,shaderID:te,shaderName:U.type,vertexShader:ce,fragmentShader:fe,defines:U.defines,customVertexShaderID:Ee,customFragmentShaderID:be,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:v,instancing:Ve,instancingColor:Ve&&re.instanceColor!==null,supportsVertexTextures:y,outputColorSpace:ee===null?n.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:Mo,map:je,matcap:Ie,envMap:Ke,envMapMode:Ke&&ie.mapping,envMapCubeUVHeight:V,aoMap:Re,lightMap:Se,bumpMap:Ne,normalMap:tt,displacementMap:y&&Ge,emissiveMap:yt,normalMapObjectSpace:tt&&U.normalMapType===m2,normalMapTangentSpace:tt&&U.normalMapType===du,metalnessMap:xt,roughnessMap:pt,clearcoat:bt,clearcoatMap:_e,clearcoatNormalMap:Oe,clearcoatRoughnessMap:Fe,iridescence:Vt,iridescenceMap:Xe,iridescenceThicknessMap:vt,sheen:Y,sheenColorMap:Qe,sheenRoughnessMap:Ae,specularMap:rt,specularColorMap:mt,specularIntensityMap:_t,transmission:W,transmissionMap:nt,thicknessMap:dt,gradientMap:Xt,opaque:U.transparent===!1&&U.blending===Rc,alphaMap:en,alphaTest:Pn,combine:U.combine,mapUv:je&&E(U.map.channel),aoMapUv:Re&&E(U.aoMap.channel),lightMapUv:Se&&E(U.lightMap.channel),bumpMapUv:Ne&&E(U.bumpMap.channel),normalMapUv:tt&&E(U.normalMap.channel),displacementMapUv:Ge&&E(U.displacementMap.channel),emissiveMapUv:yt&&E(U.emissiveMap.channel),metalnessMapUv:xt&&E(U.metalnessMap.channel),roughnessMapUv:pt&&E(U.roughnessMap.channel),clearcoatMapUv:_e&&E(U.clearcoatMap.channel),clearcoatNormalMapUv:Oe&&E(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&E(U.clearcoatRoughnessMap.channel),iridescenceMapUv:Xe&&E(U.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&E(U.iridescenceThicknessMap.channel),sheenColorMapUv:Qe&&E(U.sheenColorMap.channel),sheenRoughnessMapUv:Ae&&E(U.sheenRoughnessMap.channel),specularMapUv:rt&&E(U.specularMap.channel),specularColorMapUv:mt&&E(U.specularColorMap.channel),specularIntensityMapUv:_t&&E(U.specularIntensityMap.channel),transmissionMapUv:nt&&E(U.transmissionMap.channel),thicknessMapUv:dt&&E(U.thicknessMap.channel),alphaMapUv:en&&E(U.alphaMap.channel),vertexTangents:tt&&!!se.attributes.tangent,vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,vertexUv1s:Te,vertexUv2s:De,vertexUv3s:qe,pointsUvs:re.isPoints===!0&&!!se.attributes.uv&&(je||en),fog:!!H,useFog:U.fog===!0,fogExp2:H&&H.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:m,skinning:re.isSkinnedMesh===!0,morphTargets:se.morphAttributes.position!==void 0,morphNormals:se.morphAttributes.normal!==void 0,morphColors:se.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:Z,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:n.shadowMap.enabled&&K.length>0,shadowMapType:n.shadowMap.type,toneMapping:U.toneMapped?n.toneMapping:So,useLegacyLights:n.useLegacyLights,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Ko,flipSided:U.side===Pr,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:le&&U.extensions.derivatives===!0,extensionFragDepth:le&&U.extensions.fragDepth===!0,extensionDrawBuffers:le&&U.extensions.drawBuffers===!0,extensionShaderTextureLOD:le&&U.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:p||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||i.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}}function x(U){const F=[];if(U.shaderID?F.push(U.shaderID):(F.push(U.customVertexShaderID),F.push(U.customFragmentShaderID)),U.defines!==void 0)for(const K in U.defines)F.push(K),F.push(U.defines[K]);return U.isRawShaderMaterial===!1&&(C(F,U),T(F,U),F.push(n.outputColorSpace)),F.push(U.customProgramCacheKey),F.join()}function C(U,F){U.push(F.precision),U.push(F.outputColorSpace),U.push(F.envMapMode),U.push(F.envMapCubeUVHeight),U.push(F.mapUv),U.push(F.alphaMapUv),U.push(F.lightMapUv),U.push(F.aoMapUv),U.push(F.bumpMapUv),U.push(F.normalMapUv),U.push(F.displacementMapUv),U.push(F.emissiveMapUv),U.push(F.metalnessMapUv),U.push(F.roughnessMapUv),U.push(F.clearcoatMapUv),U.push(F.clearcoatNormalMapUv),U.push(F.clearcoatRoughnessMapUv),U.push(F.iridescenceMapUv),U.push(F.iridescenceThicknessMapUv),U.push(F.sheenColorMapUv),U.push(F.sheenRoughnessMapUv),U.push(F.specularMapUv),U.push(F.specularColorMapUv),U.push(F.specularIntensityMapUv),U.push(F.transmissionMapUv),U.push(F.thicknessMapUv),U.push(F.combine),U.push(F.fogExp2),U.push(F.sizeAttenuation),U.push(F.morphTargetsCount),U.push(F.morphAttributeCount),U.push(F.numDirLights),U.push(F.numPointLights),U.push(F.numSpotLights),U.push(F.numSpotLightMaps),U.push(F.numHemiLights),U.push(F.numRectAreaLights),U.push(F.numDirLightShadows),U.push(F.numPointLightShadows),U.push(F.numSpotLightShadows),U.push(F.numSpotLightShadowsWithMaps),U.push(F.shadowMapType),U.push(F.toneMapping),U.push(F.numClippingPlanes),U.push(F.numClipIntersection),U.push(F.depthPacking)}function T(U,F){l.disableAll(),F.isWebGL2&&l.enable(0),F.supportsVertexTextures&&l.enable(1),F.instancing&&l.enable(2),F.instancingColor&&l.enable(3),F.matcap&&l.enable(4),F.envMap&&l.enable(5),F.normalMapObjectSpace&&l.enable(6),F.normalMapTangentSpace&&l.enable(7),F.clearcoat&&l.enable(8),F.iridescence&&l.enable(9),F.alphaTest&&l.enable(10),F.vertexColors&&l.enable(11),F.vertexAlphas&&l.enable(12),F.vertexUv1s&&l.enable(13),F.vertexUv2s&&l.enable(14),F.vertexUv3s&&l.enable(15),F.vertexTangents&&l.enable(16),U.push(l.mask),l.disableAll(),F.fog&&l.enable(0),F.useFog&&l.enable(1),F.flatShading&&l.enable(2),F.logarithmicDepthBuffer&&l.enable(3),F.skinning&&l.enable(4),F.morphTargets&&l.enable(5),F.morphNormals&&l.enable(6),F.morphColors&&l.enable(7),F.premultipliedAlpha&&l.enable(8),F.shadowMapEnabled&&l.enable(9),F.useLegacyLights&&l.enable(10),F.doubleSided&&l.enable(11),F.flipSided&&l.enable(12),F.useDepthPacking&&l.enable(13),F.dithering&&l.enable(14),F.transmission&&l.enable(15),F.sheen&&l.enable(16),F.opaque&&l.enable(17),F.pointsUvs&&l.enable(18),U.push(l.mask)}function P(U){const F=S[U.type];let K;if(F){const ae=vo[F];K=S2.clone(ae.uniforms)}else K=U.uniforms;return K}function I(U,F){let K;for(let ae=0,re=d.length;ae<re;ae++){const H=d[ae];if(H.cacheKey===F){K=H,++K.usedTimes;break}}return K===void 0&&(K=new w4(n,F,U,s),d.push(K)),K}function k(U){if(--U.usedTimes===0){const F=d.indexOf(U);d[F]=d[d.length-1],d.pop(),U.destroy()}}function B(U){c.remove(U)}function z(){c.dispose()}return{getParameters:M,getProgramCacheKey:x,getUniforms:P,acquireProgram:I,releaseProgram:k,releaseShaderCache:B,programs:d,dispose:z}}function T4(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,l){n.get(s)[o]=l}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function A4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function HE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function WE(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(m,y,v,S,E,M){let x=n[e];return x===void 0?(x={id:m.id,object:m,geometry:y,material:v,groupOrder:S,renderOrder:m.renderOrder,z:E,group:M},n[e]=x):(x.id=m.id,x.object=m,x.geometry=y,x.material=v,x.groupOrder=S,x.renderOrder=m.renderOrder,x.z=E,x.group=M),e++,x}function l(m,y,v,S,E,M){const x=o(m,y,v,S,E,M);v.transmission>0?i.push(x):v.transparent===!0?r.push(x):t.push(x)}function c(m,y,v,S,E,M){const x=o(m,y,v,S,E,M);v.transmission>0?i.unshift(x):v.transparent===!0?r.unshift(x):t.unshift(x)}function d(m,y){t.length>1&&t.sort(m||A4),i.length>1&&i.sort(y||HE),r.length>1&&r.sort(y||HE)}function p(){for(let m=e,y=n.length;m<y;m++){const v=n[m];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:c,finish:p,sort:d}}function C4(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new WE,n.set(i,[o])):r>=s.length?(o=new WE,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function P4(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new X,color:new et};break;case"SpotLight":t={position:new X,direction:new X,color:new et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new X,color:new et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new X,skyColor:new et,groundColor:new et};break;case"RectAreaLight":t={color:new et,position:new X,halfWidth:new X,halfHeight:new X};break}return n[e.id]=t,t}}}function R4(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let N4=0;function L4(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function I4(n,e){const t=new P4,i=R4(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let p=0;p<9;p++)r.probe.push(new X);const s=new X,o=new zt,l=new zt;function c(p,m){let y=0,v=0,S=0;for(let K=0;K<9;K++)r.probe[K].set(0,0,0);let E=0,M=0,x=0,C=0,T=0,P=0,I=0,k=0,B=0,z=0;p.sort(L4);const U=m===!0?Math.PI:1;for(let K=0,ae=p.length;K<ae;K++){const re=p[K],H=re.color,se=re.intensity,ne=re.distance,ie=re.shadow&&re.shadow.map?re.shadow.map.texture:null;if(re.isAmbientLight)y+=H.r*se*U,v+=H.g*se*U,S+=H.b*se*U;else if(re.isLightProbe)for(let V=0;V<9;V++)r.probe[V].addScaledVector(re.sh.coefficients[V],se);else if(re.isDirectionalLight){const V=t.get(re);if(V.color.copy(re.color).multiplyScalar(re.intensity*U),re.castShadow){const te=re.shadow,$=i.get(re);$.shadowBias=te.bias,$.shadowNormalBias=te.normalBias,$.shadowRadius=te.radius,$.shadowMapSize=te.mapSize,r.directionalShadow[E]=$,r.directionalShadowMap[E]=ie,r.directionalShadowMatrix[E]=re.shadow.matrix,P++}r.directional[E]=V,E++}else if(re.isSpotLight){const V=t.get(re);V.position.setFromMatrixPosition(re.matrixWorld),V.color.copy(H).multiplyScalar(se*U),V.distance=ne,V.coneCos=Math.cos(re.angle),V.penumbraCos=Math.cos(re.angle*(1-re.penumbra)),V.decay=re.decay,r.spot[x]=V;const te=re.shadow;if(re.map&&(r.spotLightMap[B]=re.map,B++,te.updateMatrices(re),re.castShadow&&z++),r.spotLightMatrix[x]=te.matrix,re.castShadow){const $=i.get(re);$.shadowBias=te.bias,$.shadowNormalBias=te.normalBias,$.shadowRadius=te.radius,$.shadowMapSize=te.mapSize,r.spotShadow[x]=$,r.spotShadowMap[x]=ie,k++}x++}else if(re.isRectAreaLight){const V=t.get(re);V.color.copy(H).multiplyScalar(se),V.halfWidth.set(re.width*.5,0,0),V.halfHeight.set(0,re.height*.5,0),r.rectArea[C]=V,C++}else if(re.isPointLight){const V=t.get(re);if(V.color.copy(re.color).multiplyScalar(re.intensity*U),V.distance=re.distance,V.decay=re.decay,re.castShadow){const te=re.shadow,$=i.get(re);$.shadowBias=te.bias,$.shadowNormalBias=te.normalBias,$.shadowRadius=te.radius,$.shadowMapSize=te.mapSize,$.shadowCameraNear=te.camera.near,$.shadowCameraFar=te.camera.far,r.pointShadow[M]=$,r.pointShadowMap[M]=ie,r.pointShadowMatrix[M]=re.shadow.matrix,I++}r.point[M]=V,M++}else if(re.isHemisphereLight){const V=t.get(re);V.skyColor.copy(re.color).multiplyScalar(se*U),V.groundColor.copy(re.groundColor).multiplyScalar(se*U),r.hemi[T]=V,T++}}C>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=$e.LTC_FLOAT_1,r.rectAreaLTC2=$e.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=$e.LTC_HALF_1,r.rectAreaLTC2=$e.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=y,r.ambient[1]=v,r.ambient[2]=S;const F=r.hash;(F.directionalLength!==E||F.pointLength!==M||F.spotLength!==x||F.rectAreaLength!==C||F.hemiLength!==T||F.numDirectionalShadows!==P||F.numPointShadows!==I||F.numSpotShadows!==k||F.numSpotMaps!==B)&&(r.directional.length=E,r.spot.length=x,r.rectArea.length=C,r.point.length=M,r.hemi.length=T,r.directionalShadow.length=P,r.directionalShadowMap.length=P,r.pointShadow.length=I,r.pointShadowMap.length=I,r.spotShadow.length=k,r.spotShadowMap.length=k,r.directionalShadowMatrix.length=P,r.pointShadowMatrix.length=I,r.spotLightMatrix.length=k+B-z,r.spotLightMap.length=B,r.numSpotLightShadowsWithMaps=z,F.directionalLength=E,F.pointLength=M,F.spotLength=x,F.rectAreaLength=C,F.hemiLength=T,F.numDirectionalShadows=P,F.numPointShadows=I,F.numSpotShadows=k,F.numSpotMaps=B,r.version=N4++)}function d(p,m){let y=0,v=0,S=0,E=0,M=0;const x=m.matrixWorldInverse;for(let C=0,T=p.length;C<T;C++){const P=p[C];if(P.isDirectionalLight){const I=r.directional[y];I.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(x),y++}else if(P.isSpotLight){const I=r.spot[S];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(x),I.direction.setFromMatrixPosition(P.matrixWorld),s.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(x),S++}else if(P.isRectAreaLight){const I=r.rectArea[E];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(x),l.identity(),o.copy(P.matrixWorld),o.premultiply(x),l.extractRotation(o),I.halfWidth.set(P.width*.5,0,0),I.halfHeight.set(0,P.height*.5,0),I.halfWidth.applyMatrix4(l),I.halfHeight.applyMatrix4(l),E++}else if(P.isPointLight){const I=r.point[v];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(x),v++}else if(P.isHemisphereLight){const I=r.hemi[M];I.direction.setFromMatrixPosition(P.matrixWorld),I.direction.transformDirection(x),M++}}}return{setup:c,setupView:d,state:r}}function GE(n,e){const t=new I4(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(m){i.push(m)}function l(m){r.push(m)}function c(m){t.setup(i,m)}function d(m){t.setupView(i,m)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:c,setupLightsView:d,pushLight:o,pushShadow:l}}function D4(n,e){let t=new WeakMap;function i(s,o=0){const l=t.get(s);let c;return l===void 0?(c=new GE(n,e),t.set(s,[c])):o>=l.length?(c=new GE(n,e),l.push(c)):c=l[o],c}function r(){t=new WeakMap}return{get:i,dispose:r}}class RS extends er{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=d2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class NS extends er{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const k4=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,U4=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function O4(n,e,t){let i=new hv;const r=new Le,s=new Le,o=new _n,l=new RS({depthPacking:p2}),c=new NS,d={},p=t.maxTextureSize,m={[il]:Pr,[Pr]:il,[Ko]:Ko},y=new bo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Le},radius:{value:4}},vertexShader:k4,fragmentShader:U4}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const S=new jt;S.setAttribute("position",new Cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Zi(S,y),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=av;let x=this.type;this.render=function(I,k,B){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||I.length===0)return;const z=n.getRenderTarget(),U=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),K=n.state;K.setBlending(el),K.buffers.color.setClear(1,1,1,1),K.buffers.depth.setTest(!0),K.setScissorTest(!1);const ae=x!==go&&this.type===go,re=x===go&&this.type!==go;for(let H=0,se=I.length;H<se;H++){const ne=I[H],ie=ne.shadow;if(ie===void 0){console.warn("THREE.WebGLShadowMap:",ne,"has no shadow.");continue}if(ie.autoUpdate===!1&&ie.needsUpdate===!1)continue;r.copy(ie.mapSize);const V=ie.getFrameExtents();if(r.multiply(V),s.copy(ie.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/V.x),r.x=s.x*V.x,ie.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/V.y),r.y=s.y*V.y,ie.mapSize.y=s.y)),ie.map===null||ae===!0||re===!0){const $=this.type!==go?{minFilter:li,magFilter:li}:{};ie.map!==null&&ie.map.dispose(),ie.map=new Eo(r.x,r.y,$),ie.map.texture.name=ne.name+".shadowMap",ie.camera.updateProjectionMatrix()}n.setRenderTarget(ie.map),n.clear();const te=ie.getViewportCount();for(let $=0;$<te;$++){const G=ie.getViewport($);o.set(s.x*G.x,s.y*G.y,s.x*G.z,s.y*G.w),K.viewport(o),ie.updateMatrices(ne,$),i=ie.getFrustum(),P(k,B,ie.camera,ne,this.type)}ie.isPointLightShadow!==!0&&this.type===go&&C(ie,B),ie.needsUpdate=!1}x=this.type,M.needsUpdate=!1,n.setRenderTarget(z,U,F)};function C(I,k){const B=e.update(E);y.defines.VSM_SAMPLES!==I.blurSamples&&(y.defines.VSM_SAMPLES=I.blurSamples,v.defines.VSM_SAMPLES=I.blurSamples,y.needsUpdate=!0,v.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Eo(r.x,r.y)),y.uniforms.shadow_pass.value=I.map.texture,y.uniforms.resolution.value=I.mapSize,y.uniforms.radius.value=I.radius,n.setRenderTarget(I.mapPass),n.clear(),n.renderBufferDirect(k,null,B,y,E,null),v.uniforms.shadow_pass.value=I.mapPass.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,n.setRenderTarget(I.map),n.clear(),n.renderBufferDirect(k,null,B,v,E,null)}function T(I,k,B,z){let U=null;const F=B.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(F!==void 0)U=F;else if(U=B.isPointLight===!0?c:l,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const K=U.uuid,ae=k.uuid;let re=d[K];re===void 0&&(re={},d[K]=re);let H=re[ae];H===void 0&&(H=U.clone(),re[ae]=H),U=H}if(U.visible=k.visible,U.wireframe=k.wireframe,z===go?U.side=k.shadowSide!==null?k.shadowSide:k.side:U.side=k.shadowSide!==null?k.shadowSide:m[k.side],U.alphaMap=k.alphaMap,U.alphaTest=k.alphaTest,U.map=k.map,U.clipShadows=k.clipShadows,U.clippingPlanes=k.clippingPlanes,U.clipIntersection=k.clipIntersection,U.displacementMap=k.displacementMap,U.displacementScale=k.displacementScale,U.displacementBias=k.displacementBias,U.wireframeLinewidth=k.wireframeLinewidth,U.linewidth=k.linewidth,B.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const K=n.properties.get(U);K.light=B}return U}function P(I,k,B,z,U){if(I.visible===!1)return;if(I.layers.test(k.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&U===go)&&(!I.frustumCulled||i.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,I.matrixWorld);const ae=e.update(I),re=I.material;if(Array.isArray(re)){const H=ae.groups;for(let se=0,ne=H.length;se<ne;se++){const ie=H[se],V=re[ie.materialIndex];if(V&&V.visible){const te=T(I,V,z,U);n.renderBufferDirect(B,null,ae,te,I,ie)}}}else if(re.visible){const H=T(I,re,z,U);n.renderBufferDirect(B,null,ae,H,I,null)}}const K=I.children;for(let ae=0,re=K.length;ae<re;ae++)P(K[ae],k,B,z,U)}}function F4(n,e,t){const i=t.isWebGL2;function r(){let le=!1;const Te=new _n;let De=null;const qe=new _n(0,0,0,0);return{setMask:function(ut){De!==ut&&!le&&(n.colorMask(ut,ut,ut,ut),De=ut)},setLocked:function(ut){le=ut},setClear:function(ut,an,ln,ni,Lr){Lr===!0&&(ut*=ni,an*=ni,ln*=ni),Te.set(ut,an,ln,ni),qe.equals(Te)===!1&&(n.clearColor(ut,an,ln,ni),qe.copy(Te))},reset:function(){le=!1,De=null,qe.set(-1,0,0,0)}}}function s(){let le=!1,Te=null,De=null,qe=null;return{setTest:function(ut){ut?ee(n.DEPTH_TEST):Ve(n.DEPTH_TEST)},setMask:function(ut){Te!==ut&&!le&&(n.depthMask(ut),Te=ut)},setFunc:function(ut){if(De!==ut){switch(ut){case UC:n.depthFunc(n.NEVER);break;case OC:n.depthFunc(n.ALWAYS);break;case FC:n.depthFunc(n.LESS);break;case Iy:n.depthFunc(n.LEQUAL);break;case BC:n.depthFunc(n.EQUAL);break;case zC:n.depthFunc(n.GEQUAL);break;case VC:n.depthFunc(n.GREATER);break;case HC:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}De=ut}},setLocked:function(ut){le=ut},setClear:function(ut){qe!==ut&&(n.clearDepth(ut),qe=ut)},reset:function(){le=!1,Te=null,De=null,qe=null}}}function o(){let le=!1,Te=null,De=null,qe=null,ut=null,an=null,ln=null,ni=null,Lr=null;return{setTest:function(wn){le||(wn?ee(n.STENCIL_TEST):Ve(n.STENCIL_TEST))},setMask:function(wn){Te!==wn&&!le&&(n.stencilMask(wn),Te=wn)},setFunc:function(wn,Ni,Li){(De!==wn||qe!==Ni||ut!==Li)&&(n.stencilFunc(wn,Ni,Li),De=wn,qe=Ni,ut=Li)},setOp:function(wn,Ni,Li){(an!==wn||ln!==Ni||ni!==Li)&&(n.stencilOp(wn,Ni,Li),an=wn,ln=Ni,ni=Li)},setLocked:function(wn){le=wn},setClear:function(wn){Lr!==wn&&(n.clearStencil(wn),Lr=wn)},reset:function(){le=!1,Te=null,De=null,qe=null,ut=null,an=null,ln=null,ni=null,Lr=null}}}const l=new r,c=new s,d=new o,p=new WeakMap,m=new WeakMap;let y={},v={},S=new WeakMap,E=[],M=null,x=!1,C=null,T=null,P=null,I=null,k=null,B=null,z=null,U=!1,F=null,K=null,ae=null,re=null,H=null;const se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ne=!1,ie=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(V)[1]),ne=ie>=1):V.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),ne=ie>=2);let te=null,$={};const G=n.getParameter(n.SCISSOR_BOX),Z=n.getParameter(n.VIEWPORT),ce=new _n().fromArray(G),fe=new _n().fromArray(Z);function Ee(le,Te,De,qe){const ut=new Uint8Array(4),an=n.createTexture();n.bindTexture(le,an),n.texParameteri(le,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(le,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ln=0;ln<De;ln++)i&&(le===n.TEXTURE_3D||le===n.TEXTURE_2D_ARRAY)?n.texImage3D(Te,0,n.RGBA,1,1,qe,0,n.RGBA,n.UNSIGNED_BYTE,ut):n.texImage2D(Te+ln,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ut);return an}const be={};be[n.TEXTURE_2D]=Ee(n.TEXTURE_2D,n.TEXTURE_2D,1),be[n.TEXTURE_CUBE_MAP]=Ee(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(be[n.TEXTURE_2D_ARRAY]=Ee(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),be[n.TEXTURE_3D]=Ee(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),c.setClear(1),d.setClear(0),ee(n.DEPTH_TEST),c.setFunc(Iy),Ge(!1),yt(W_),ee(n.CULL_FACE),Ne(el);function ee(le){y[le]!==!0&&(n.enable(le),y[le]=!0)}function Ve(le){y[le]!==!1&&(n.disable(le),y[le]=!1)}function je(le,Te){return v[le]!==Te?(n.bindFramebuffer(le,Te),v[le]=Te,i&&(le===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=Te),le===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=Te)),!0):!1}function Ie(le,Te){let De=E,qe=!1;if(le)if(De=S.get(Te),De===void 0&&(De=[],S.set(Te,De)),le.isWebGLMultipleRenderTargets){const ut=le.texture;if(De.length!==ut.length||De[0]!==n.COLOR_ATTACHMENT0){for(let an=0,ln=ut.length;an<ln;an++)De[an]=n.COLOR_ATTACHMENT0+an;De.length=ut.length,qe=!0}}else De[0]!==n.COLOR_ATTACHMENT0&&(De[0]=n.COLOR_ATTACHMENT0,qe=!0);else De[0]!==n.BACK&&(De[0]=n.BACK,qe=!0);qe&&(t.isWebGL2?n.drawBuffers(De):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(De))}function Ke(le){return M!==le?(n.useProgram(le),M=le,!0):!1}const Re={[_c]:n.FUNC_ADD,[bC]:n.FUNC_SUBTRACT,[TC]:n.FUNC_REVERSE_SUBTRACT};if(i)Re[X_]=n.MIN,Re[$_]=n.MAX;else{const le=e.get("EXT_blend_minmax");le!==null&&(Re[X_]=le.MIN_EXT,Re[$_]=le.MAX_EXT)}const Se={[AC]:n.ZERO,[CC]:n.ONE,[PC]:n.SRC_COLOR,[gS]:n.SRC_ALPHA,[kC]:n.SRC_ALPHA_SATURATE,[IC]:n.DST_COLOR,[NC]:n.DST_ALPHA,[RC]:n.ONE_MINUS_SRC_COLOR,[yS]:n.ONE_MINUS_SRC_ALPHA,[DC]:n.ONE_MINUS_DST_COLOR,[LC]:n.ONE_MINUS_DST_ALPHA};function Ne(le,Te,De,qe,ut,an,ln,ni){if(le===el){x===!0&&(Ve(n.BLEND),x=!1);return}if(x===!1&&(ee(n.BLEND),x=!0),le!==EC){if(le!==C||ni!==U){if((T!==_c||k!==_c)&&(n.blendEquation(n.FUNC_ADD),T=_c,k=_c),ni)switch(le){case Rc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Ly:n.blendFunc(n.ONE,n.ONE);break;case G_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case j_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Rc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Ly:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case G_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case j_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}P=null,I=null,B=null,z=null,C=le,U=ni}return}ut=ut||Te,an=an||De,ln=ln||qe,(Te!==T||ut!==k)&&(n.blendEquationSeparate(Re[Te],Re[ut]),T=Te,k=ut),(De!==P||qe!==I||an!==B||ln!==z)&&(n.blendFuncSeparate(Se[De],Se[qe],Se[an],Se[ln]),P=De,I=qe,B=an,z=ln),C=le,U=!1}function tt(le,Te){le.side===Ko?Ve(n.CULL_FACE):ee(n.CULL_FACE);let De=le.side===Pr;Te&&(De=!De),Ge(De),le.blending===Rc&&le.transparent===!1?Ne(el):Ne(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.premultipliedAlpha),c.setFunc(le.depthFunc),c.setTest(le.depthTest),c.setMask(le.depthWrite),l.setMask(le.colorWrite);const qe=le.stencilWrite;d.setTest(qe),qe&&(d.setMask(le.stencilWriteMask),d.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),d.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),pt(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?ee(n.SAMPLE_ALPHA_TO_COVERAGE):Ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ge(le){F!==le&&(le?n.frontFace(n.CW):n.frontFace(n.CCW),F=le)}function yt(le){le!==wC?(ee(n.CULL_FACE),le!==K&&(le===W_?n.cullFace(n.BACK):le===SC?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ve(n.CULL_FACE),K=le}function xt(le){le!==ae&&(ne&&n.lineWidth(le),ae=le)}function pt(le,Te,De){le?(ee(n.POLYGON_OFFSET_FILL),(re!==Te||H!==De)&&(n.polygonOffset(Te,De),re=Te,H=De)):Ve(n.POLYGON_OFFSET_FILL)}function bt(le){le?ee(n.SCISSOR_TEST):Ve(n.SCISSOR_TEST)}function Vt(le){le===void 0&&(le=n.TEXTURE0+se-1),te!==le&&(n.activeTexture(le),te=le)}function Y(le,Te,De){De===void 0&&(te===null?De=n.TEXTURE0+se-1:De=te);let qe=$[De];qe===void 0&&(qe={type:void 0,texture:void 0},$[De]=qe),(qe.type!==le||qe.texture!==Te)&&(te!==De&&(n.activeTexture(De),te=De),n.bindTexture(le,Te||be[le]),qe.type=le,qe.texture=Te)}function W(){const le=$[te];le!==void 0&&le.type!==void 0&&(n.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function _e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Fe(){try{n.texSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Xe(){try{n.texSubImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function vt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Qe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ae(){try{n.texStorage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function rt(){try{n.texStorage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function mt(){try{n.texImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function _t(){try{n.texImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function nt(le){ce.equals(le)===!1&&(n.scissor(le.x,le.y,le.z,le.w),ce.copy(le))}function dt(le){fe.equals(le)===!1&&(n.viewport(le.x,le.y,le.z,le.w),fe.copy(le))}function Xt(le,Te){let De=m.get(Te);De===void 0&&(De=new WeakMap,m.set(Te,De));let qe=De.get(le);qe===void 0&&(qe=n.getUniformBlockIndex(Te,le.name),De.set(le,qe))}function en(le,Te){const qe=m.get(Te).get(le);p.get(Te)!==qe&&(n.uniformBlockBinding(Te,qe,le.__bindingPointIndex),p.set(Te,qe))}function Pn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),y={},te=null,$={},v={},S=new WeakMap,E=[],M=null,x=!1,C=null,T=null,P=null,I=null,k=null,B=null,z=null,U=!1,F=null,K=null,ae=null,re=null,H=null,ce.set(0,0,n.canvas.width,n.canvas.height),fe.set(0,0,n.canvas.width,n.canvas.height),l.reset(),c.reset(),d.reset()}return{buffers:{color:l,depth:c,stencil:d},enable:ee,disable:Ve,bindFramebuffer:je,drawBuffers:Ie,useProgram:Ke,setBlending:Ne,setMaterial:tt,setFlipSided:Ge,setCullFace:yt,setLineWidth:xt,setPolygonOffset:pt,setScissorTest:bt,activeTexture:Vt,bindTexture:Y,unbindTexture:W,compressedTexImage2D:_e,compressedTexImage3D:Oe,texImage2D:mt,texImage3D:_t,updateUBOMapping:Xt,uniformBlockBinding:en,texStorage2D:Ae,texStorage3D:rt,texSubImage2D:Fe,texSubImage3D:Xe,compressedTexSubImage2D:vt,compressedTexSubImage3D:Qe,scissor:nt,viewport:dt,reset:Pn}}function B4(n,e,t,i,r,s,o){const l=r.isWebGL2,c=r.maxTextures,d=r.maxCubemapSize,p=r.maxTextureSize,m=r.maxSamples,y=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),S=new WeakMap;let E;const M=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(Y,W){return x?new OffscreenCanvas(Y,W):lm("canvas")}function T(Y,W,_e,Oe){let Fe=1;if((Y.width>Oe||Y.height>Oe)&&(Fe=Oe/Math.max(Y.width,Y.height)),Fe<1||W===!0)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap){const Xe=W?v2:Math.floor,vt=Xe(Fe*Y.width),Qe=Xe(Fe*Y.height);E===void 0&&(E=C(vt,Qe));const Ae=_e?C(vt,Qe):E;return Ae.width=vt,Ae.height=Qe,Ae.getContext("2d").drawImage(Y,0,0,vt,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Y.width+"x"+Y.height+") to ("+vt+"x"+Qe+")."),Ae}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Y.width+"x"+Y.height+")."),Y;return Y}function P(Y){return vw(Y.width)&&vw(Y.height)}function I(Y){return l?!1:Y.wrapS!==fr||Y.wrapT!==fr||Y.minFilter!==li&&Y.minFilter!==ui}function k(Y,W){return Y.generateMipmaps&&W&&Y.minFilter!==li&&Y.minFilter!==ui}function B(Y){n.generateMipmap(Y)}function z(Y,W,_e,Oe,Fe=!1){if(l===!1)return W;if(Y!==null){if(n[Y]!==void 0)return n[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Xe=W;return W===n.RED&&(_e===n.FLOAT&&(Xe=n.R32F),_e===n.HALF_FLOAT&&(Xe=n.R16F),_e===n.UNSIGNED_BYTE&&(Xe=n.R8)),W===n.RG&&(_e===n.FLOAT&&(Xe=n.RG32F),_e===n.HALF_FLOAT&&(Xe=n.RG16F),_e===n.UNSIGNED_BYTE&&(Xe=n.RG8)),W===n.RGBA&&(_e===n.FLOAT&&(Xe=n.RGBA32F),_e===n.HALF_FLOAT&&(Xe=n.RGBA16F),_e===n.UNSIGNED_BYTE&&(Xe=Oe===Gt&&Fe===!1?n.SRGB8_ALPHA8:n.RGBA8),_e===n.UNSIGNED_SHORT_4_4_4_4&&(Xe=n.RGBA4),_e===n.UNSIGNED_SHORT_5_5_5_1&&(Xe=n.RGB5_A1)),(Xe===n.R16F||Xe===n.R32F||Xe===n.RG16F||Xe===n.RG32F||Xe===n.RGBA16F||Xe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Xe}function U(Y,W,_e){return k(Y,_e)===!0||Y.isFramebufferTexture&&Y.minFilter!==li&&Y.minFilter!==ui?Math.log2(Math.max(W.width,W.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?W.mipmaps.length:1}function F(Y){return Y===li||Y===Dy||Y===Vp?n.NEAREST:n.LINEAR}function K(Y){const W=Y.target;W.removeEventListener("dispose",K),re(W),W.isVideoTexture&&S.delete(W)}function ae(Y){const W=Y.target;W.removeEventListener("dispose",ae),se(W)}function re(Y){const W=i.get(Y);if(W.__webglInit===void 0)return;const _e=Y.source,Oe=M.get(_e);if(Oe){const Fe=Oe[W.__cacheKey];Fe.usedTimes--,Fe.usedTimes===0&&H(Y),Object.keys(Oe).length===0&&M.delete(_e)}i.remove(Y)}function H(Y){const W=i.get(Y);n.deleteTexture(W.__webglTexture);const _e=Y.source,Oe=M.get(_e);delete Oe[W.__cacheKey],o.memory.textures--}function se(Y){const W=Y.texture,_e=i.get(Y),Oe=i.get(W);if(Oe.__webglTexture!==void 0&&(n.deleteTexture(Oe.__webglTexture),o.memory.textures--),Y.depthTexture&&Y.depthTexture.dispose(),Y.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++)n.deleteFramebuffer(_e.__webglFramebuffer[Fe]),_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer[Fe]);else{if(n.deleteFramebuffer(_e.__webglFramebuffer),_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&n.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer)for(let Fe=0;Fe<_e.__webglColorRenderbuffer.length;Fe++)_e.__webglColorRenderbuffer[Fe]&&n.deleteRenderbuffer(_e.__webglColorRenderbuffer[Fe]);_e.__webglDepthRenderbuffer&&n.deleteRenderbuffer(_e.__webglDepthRenderbuffer)}if(Y.isWebGLMultipleRenderTargets)for(let Fe=0,Xe=W.length;Fe<Xe;Fe++){const vt=i.get(W[Fe]);vt.__webglTexture&&(n.deleteTexture(vt.__webglTexture),o.memory.textures--),i.remove(W[Fe])}i.remove(W),i.remove(Y)}let ne=0;function ie(){ne=0}function V(){const Y=ne;return Y>=c&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+c),ne+=1,Y}function te(Y){const W=[];return W.push(Y.wrapS),W.push(Y.wrapT),W.push(Y.wrapR||0),W.push(Y.magFilter),W.push(Y.minFilter),W.push(Y.anisotropy),W.push(Y.internalFormat),W.push(Y.format),W.push(Y.type),W.push(Y.generateMipmaps),W.push(Y.premultiplyAlpha),W.push(Y.flipY),W.push(Y.unpackAlignment),W.push(Y.colorSpace),W.join()}function $(Y,W){const _e=i.get(Y);if(Y.isVideoTexture&&bt(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&_e.__version!==Y.version){const Oe=Y.image;if(Oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ve(_e,Y,W);return}}t.bindTexture(n.TEXTURE_2D,_e.__webglTexture,n.TEXTURE0+W)}function G(Y,W){const _e=i.get(Y);if(Y.version>0&&_e.__version!==Y.version){Ve(_e,Y,W);return}t.bindTexture(n.TEXTURE_2D_ARRAY,_e.__webglTexture,n.TEXTURE0+W)}function Z(Y,W){const _e=i.get(Y);if(Y.version>0&&_e.__version!==Y.version){Ve(_e,Y,W);return}t.bindTexture(n.TEXTURE_3D,_e.__webglTexture,n.TEXTURE0+W)}function ce(Y,W){const _e=i.get(Y);if(Y.version>0&&_e.__version!==Y.version){je(_e,Y,W);return}t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture,n.TEXTURE0+W)}const fe={[nm]:n.REPEAT,[fr]:n.CLAMP_TO_EDGE,[im]:n.MIRRORED_REPEAT},Ee={[li]:n.NEAREST,[Dy]:n.NEAREST_MIPMAP_NEAREST,[Vp]:n.NEAREST_MIPMAP_LINEAR,[ui]:n.LINEAR,[xS]:n.LINEAR_MIPMAP_NEAREST,[uu]:n.LINEAR_MIPMAP_LINEAR};function be(Y,W,_e){if(_e?(n.texParameteri(Y,n.TEXTURE_WRAP_S,fe[W.wrapS]),n.texParameteri(Y,n.TEXTURE_WRAP_T,fe[W.wrapT]),(Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Y,n.TEXTURE_WRAP_R,fe[W.wrapR]),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,Ee[W.magFilter]),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,Ee[W.minFilter])):(n.texParameteri(Y,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(Y,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Y,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(W.wrapS!==fr||W.wrapT!==fr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,F(W.magFilter)),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,F(W.minFilter)),W.minFilter!==li&&W.minFilter!==ui&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Oe=e.get("EXT_texture_filter_anisotropic");if(W.magFilter===li||W.minFilter!==Vp&&W.minFilter!==uu||W.type===Za&&e.has("OES_texture_float_linear")===!1||l===!1&&W.type===$f&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||i.get(W).__currentAnisotropy)&&(n.texParameterf(Y,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy)}}function ee(Y,W){let _e=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,W.addEventListener("dispose",K));const Oe=W.source;let Fe=M.get(Oe);Fe===void 0&&(Fe={},M.set(Oe,Fe));const Xe=te(W);if(Xe!==Y.__cacheKey){Fe[Xe]===void 0&&(Fe[Xe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,_e=!0),Fe[Xe].usedTimes++;const vt=Fe[Y.__cacheKey];vt!==void 0&&(Fe[Y.__cacheKey].usedTimes--,vt.usedTimes===0&&H(W)),Y.__cacheKey=Xe,Y.__webglTexture=Fe[Xe].texture}return _e}function Ve(Y,W,_e){let Oe=n.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Oe=n.TEXTURE_2D_ARRAY),W.isData3DTexture&&(Oe=n.TEXTURE_3D);const Fe=ee(Y,W),Xe=W.source;t.bindTexture(Oe,Y.__webglTexture,n.TEXTURE0+_e);const vt=i.get(Xe);if(Xe.version!==vt.__version||Fe===!0){t.activeTexture(n.TEXTURE0+_e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Qe=I(W)&&P(W.image)===!1;let Ae=T(W.image,Qe,!1,p);Ae=Vt(W,Ae);const rt=P(Ae)||l,mt=s.convert(W.format,W.colorSpace);let _t=s.convert(W.type),nt=z(W.internalFormat,mt,_t,W.colorSpace);be(Oe,W,rt);let dt;const Xt=W.mipmaps,en=l&&W.isVideoTexture!==!0,Pn=vt.__version===void 0||Fe===!0,le=U(W,Ae,rt);if(W.isDepthTexture)nt=n.DEPTH_COMPONENT,l?W.type===Za?nt=n.DEPTH_COMPONENT32F:W.type===tu?nt=n.DEPTH_COMPONENT24:W.type===Nc?nt=n.DEPTH24_STENCIL8:nt=n.DEPTH_COMPONENT16:W.type===Za&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===ru&&nt===n.DEPTH_COMPONENT&&W.type!==_S&&W.type!==tu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=tu,_t=s.convert(W.type)),W.format===Fc&&nt===n.DEPTH_COMPONENT&&(nt=n.DEPTH_STENCIL,W.type!==Nc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Nc,_t=s.convert(W.type))),Pn&&(en?t.texStorage2D(n.TEXTURE_2D,1,nt,Ae.width,Ae.height):t.texImage2D(n.TEXTURE_2D,0,nt,Ae.width,Ae.height,0,mt,_t,null));else if(W.isDataTexture)if(Xt.length>0&&rt){en&&Pn&&t.texStorage2D(n.TEXTURE_2D,le,nt,Xt[0].width,Xt[0].height);for(let Te=0,De=Xt.length;Te<De;Te++)dt=Xt[Te],en?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,dt.width,dt.height,mt,_t,dt.data):t.texImage2D(n.TEXTURE_2D,Te,nt,dt.width,dt.height,0,mt,_t,dt.data);W.generateMipmaps=!1}else en?(Pn&&t.texStorage2D(n.TEXTURE_2D,le,nt,Ae.width,Ae.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ae.width,Ae.height,mt,_t,Ae.data)):t.texImage2D(n.TEXTURE_2D,0,nt,Ae.width,Ae.height,0,mt,_t,Ae.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){en&&Pn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,le,nt,Xt[0].width,Xt[0].height,Ae.depth);for(let Te=0,De=Xt.length;Te<De;Te++)dt=Xt[Te],W.format!==Yr?mt!==null?en?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,dt.width,dt.height,Ae.depth,mt,dt.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Te,nt,dt.width,dt.height,Ae.depth,0,dt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):en?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,dt.width,dt.height,Ae.depth,mt,_t,dt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Te,nt,dt.width,dt.height,Ae.depth,0,mt,_t,dt.data)}else{en&&Pn&&t.texStorage2D(n.TEXTURE_2D,le,nt,Xt[0].width,Xt[0].height);for(let Te=0,De=Xt.length;Te<De;Te++)dt=Xt[Te],W.format!==Yr?mt!==null?en?t.compressedTexSubImage2D(n.TEXTURE_2D,Te,0,0,dt.width,dt.height,mt,dt.data):t.compressedTexImage2D(n.TEXTURE_2D,Te,nt,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):en?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,dt.width,dt.height,mt,_t,dt.data):t.texImage2D(n.TEXTURE_2D,Te,nt,dt.width,dt.height,0,mt,_t,dt.data)}else if(W.isDataArrayTexture)en?(Pn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,le,nt,Ae.width,Ae.height,Ae.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ae.width,Ae.height,Ae.depth,mt,_t,Ae.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,nt,Ae.width,Ae.height,Ae.depth,0,mt,_t,Ae.data);else if(W.isData3DTexture)en?(Pn&&t.texStorage3D(n.TEXTURE_3D,le,nt,Ae.width,Ae.height,Ae.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ae.width,Ae.height,Ae.depth,mt,_t,Ae.data)):t.texImage3D(n.TEXTURE_3D,0,nt,Ae.width,Ae.height,Ae.depth,0,mt,_t,Ae.data);else if(W.isFramebufferTexture){if(Pn)if(en)t.texStorage2D(n.TEXTURE_2D,le,nt,Ae.width,Ae.height);else{let Te=Ae.width,De=Ae.height;for(let qe=0;qe<le;qe++)t.texImage2D(n.TEXTURE_2D,qe,nt,Te,De,0,mt,_t,null),Te>>=1,De>>=1}}else if(Xt.length>0&&rt){en&&Pn&&t.texStorage2D(n.TEXTURE_2D,le,nt,Xt[0].width,Xt[0].height);for(let Te=0,De=Xt.length;Te<De;Te++)dt=Xt[Te],en?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,mt,_t,dt):t.texImage2D(n.TEXTURE_2D,Te,nt,mt,_t,dt);W.generateMipmaps=!1}else en?(Pn&&t.texStorage2D(n.TEXTURE_2D,le,nt,Ae.width,Ae.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,mt,_t,Ae)):t.texImage2D(n.TEXTURE_2D,0,nt,mt,_t,Ae);k(W,rt)&&B(Oe),vt.__version=Xe.version,W.onUpdate&&W.onUpdate(W)}Y.__version=W.version}function je(Y,W,_e){if(W.image.length!==6)return;const Oe=ee(Y,W),Fe=W.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Y.__webglTexture,n.TEXTURE0+_e);const Xe=i.get(Fe);if(Fe.version!==Xe.__version||Oe===!0){t.activeTexture(n.TEXTURE0+_e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const vt=W.isCompressedTexture||W.image[0].isCompressedTexture,Qe=W.image[0]&&W.image[0].isDataTexture,Ae=[];for(let Te=0;Te<6;Te++)!vt&&!Qe?Ae[Te]=T(W.image[Te],!1,!0,d):Ae[Te]=Qe?W.image[Te].image:W.image[Te],Ae[Te]=Vt(W,Ae[Te]);const rt=Ae[0],mt=P(rt)||l,_t=s.convert(W.format,W.colorSpace),nt=s.convert(W.type),dt=z(W.internalFormat,_t,nt,W.colorSpace),Xt=l&&W.isVideoTexture!==!0,en=Xe.__version===void 0||Oe===!0;let Pn=U(W,rt,mt);be(n.TEXTURE_CUBE_MAP,W,mt);let le;if(vt){Xt&&en&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Pn,dt,rt.width,rt.height);for(let Te=0;Te<6;Te++){le=Ae[Te].mipmaps;for(let De=0;De<le.length;De++){const qe=le[De];W.format!==Yr?_t!==null?Xt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De,0,0,qe.width,qe.height,_t,qe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De,dt,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De,0,0,qe.width,qe.height,_t,nt,qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De,dt,qe.width,qe.height,0,_t,nt,qe.data)}}}else{le=W.mipmaps,Xt&&en&&(le.length>0&&Pn++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Pn,dt,Ae[0].width,Ae[0].height));for(let Te=0;Te<6;Te++)if(Qe){Xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Ae[Te].width,Ae[Te].height,_t,nt,Ae[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,dt,Ae[Te].width,Ae[Te].height,0,_t,nt,Ae[Te].data);for(let De=0;De<le.length;De++){const ut=le[De].image[Te].image;Xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De+1,0,0,ut.width,ut.height,_t,nt,ut.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De+1,dt,ut.width,ut.height,0,_t,nt,ut.data)}}else{Xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,_t,nt,Ae[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,dt,_t,nt,Ae[Te]);for(let De=0;De<le.length;De++){const qe=le[De];Xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De+1,0,0,_t,nt,qe.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,De+1,dt,_t,nt,qe.image[Te])}}}k(W,mt)&&B(n.TEXTURE_CUBE_MAP),Xe.__version=Fe.version,W.onUpdate&&W.onUpdate(W)}Y.__version=W.version}function Ie(Y,W,_e,Oe,Fe){const Xe=s.convert(_e.format,_e.colorSpace),vt=s.convert(_e.type),Qe=z(_e.internalFormat,Xe,vt,_e.colorSpace);i.get(W).__hasExternalTextures||(Fe===n.TEXTURE_3D||Fe===n.TEXTURE_2D_ARRAY?t.texImage3D(Fe,0,Qe,W.width,W.height,W.depth,0,Xe,vt,null):t.texImage2D(Fe,0,Qe,W.width,W.height,0,Xe,vt,null)),t.bindFramebuffer(n.FRAMEBUFFER,Y),pt(W)?y.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Oe,Fe,i.get(_e).__webglTexture,0,xt(W)):(Fe===n.TEXTURE_2D||Fe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Fe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Oe,Fe,i.get(_e).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ke(Y,W,_e){if(n.bindRenderbuffer(n.RENDERBUFFER,Y),W.depthBuffer&&!W.stencilBuffer){let Oe=n.DEPTH_COMPONENT16;if(_e||pt(W)){const Fe=W.depthTexture;Fe&&Fe.isDepthTexture&&(Fe.type===Za?Oe=n.DEPTH_COMPONENT32F:Fe.type===tu&&(Oe=n.DEPTH_COMPONENT24));const Xe=xt(W);pt(W)?y.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Xe,Oe,W.width,W.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Xe,Oe,W.width,W.height)}else n.renderbufferStorage(n.RENDERBUFFER,Oe,W.width,W.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,Y)}else if(W.depthBuffer&&W.stencilBuffer){const Oe=xt(W);_e&&pt(W)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Oe,n.DEPTH24_STENCIL8,W.width,W.height):pt(W)?y.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Oe,n.DEPTH24_STENCIL8,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,Y)}else{const Oe=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let Fe=0;Fe<Oe.length;Fe++){const Xe=Oe[Fe],vt=s.convert(Xe.format,Xe.colorSpace),Qe=s.convert(Xe.type),Ae=z(Xe.internalFormat,vt,Qe,Xe.colorSpace),rt=xt(W);_e&&pt(W)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,rt,Ae,W.width,W.height):pt(W)?y.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,rt,Ae,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,Ae,W.width,W.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Re(Y,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Y),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),$(W.depthTexture,0);const Oe=i.get(W.depthTexture).__webglTexture,Fe=xt(W);if(W.depthTexture.format===ru)pt(W)?y.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0,Fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0);else if(W.depthTexture.format===Fc)pt(W)?y.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0,Fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0);else throw new Error("Unknown depthTexture format")}function Se(Y){const W=i.get(Y),_e=Y.isWebGLCubeRenderTarget===!0;if(Y.depthTexture&&!W.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");Re(W.__webglFramebuffer,Y)}else if(_e){W.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer[Oe]),W.__webglDepthbuffer[Oe]=n.createRenderbuffer(),Ke(W.__webglDepthbuffer[Oe],Y,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer=n.createRenderbuffer(),Ke(W.__webglDepthbuffer,Y,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ne(Y,W,_e){const Oe=i.get(Y);W!==void 0&&Ie(Oe.__webglFramebuffer,Y,Y.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),_e!==void 0&&Se(Y)}function tt(Y){const W=Y.texture,_e=i.get(Y),Oe=i.get(W);Y.addEventListener("dispose",ae),Y.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture===void 0&&(Oe.__webglTexture=n.createTexture()),Oe.__version=W.version,o.memory.textures++);const Fe=Y.isWebGLCubeRenderTarget===!0,Xe=Y.isWebGLMultipleRenderTargets===!0,vt=P(Y)||l;if(Fe){_e.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)_e.__webglFramebuffer[Qe]=n.createFramebuffer()}else{if(_e.__webglFramebuffer=n.createFramebuffer(),Xe)if(r.drawBuffers){const Qe=Y.texture;for(let Ae=0,rt=Qe.length;Ae<rt;Ae++){const mt=i.get(Qe[Ae]);mt.__webglTexture===void 0&&(mt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&Y.samples>0&&pt(Y)===!1){const Qe=Xe?W:[W];_e.__webglMultisampledFramebuffer=n.createFramebuffer(),_e.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglMultisampledFramebuffer);for(let Ae=0;Ae<Qe.length;Ae++){const rt=Qe[Ae];_e.__webglColorRenderbuffer[Ae]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,_e.__webglColorRenderbuffer[Ae]);const mt=s.convert(rt.format,rt.colorSpace),_t=s.convert(rt.type),nt=z(rt.internalFormat,mt,_t,rt.colorSpace,Y.isXRRenderTarget===!0),dt=xt(Y);n.renderbufferStorageMultisample(n.RENDERBUFFER,dt,nt,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ae,n.RENDERBUFFER,_e.__webglColorRenderbuffer[Ae])}n.bindRenderbuffer(n.RENDERBUFFER,null),Y.depthBuffer&&(_e.__webglDepthRenderbuffer=n.createRenderbuffer(),Ke(_e.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Fe){t.bindTexture(n.TEXTURE_CUBE_MAP,Oe.__webglTexture),be(n.TEXTURE_CUBE_MAP,W,vt);for(let Qe=0;Qe<6;Qe++)Ie(_e.__webglFramebuffer[Qe],Y,W,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe);k(W,vt)&&B(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Xe){const Qe=Y.texture;for(let Ae=0,rt=Qe.length;Ae<rt;Ae++){const mt=Qe[Ae],_t=i.get(mt);t.bindTexture(n.TEXTURE_2D,_t.__webglTexture),be(n.TEXTURE_2D,mt,vt),Ie(_e.__webglFramebuffer,Y,mt,n.COLOR_ATTACHMENT0+Ae,n.TEXTURE_2D),k(mt,vt)&&B(n.TEXTURE_2D)}t.unbindTexture()}else{let Qe=n.TEXTURE_2D;(Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(l?Qe=Y.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Qe,Oe.__webglTexture),be(Qe,W,vt),Ie(_e.__webglFramebuffer,Y,W,n.COLOR_ATTACHMENT0,Qe),k(W,vt)&&B(Qe),t.unbindTexture()}Y.depthBuffer&&Se(Y)}function Ge(Y){const W=P(Y)||l,_e=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Oe=0,Fe=_e.length;Oe<Fe;Oe++){const Xe=_e[Oe];if(k(Xe,W)){const vt=Y.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Qe=i.get(Xe).__webglTexture;t.bindTexture(vt,Qe),B(vt),t.unbindTexture()}}}function yt(Y){if(l&&Y.samples>0&&pt(Y)===!1){const W=Y.isWebGLMultipleRenderTargets?Y.texture:[Y.texture],_e=Y.width,Oe=Y.height;let Fe=n.COLOR_BUFFER_BIT;const Xe=[],vt=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Qe=i.get(Y),Ae=Y.isWebGLMultipleRenderTargets===!0;if(Ae)for(let rt=0;rt<W.length;rt++)t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer);for(let rt=0;rt<W.length;rt++){Xe.push(n.COLOR_ATTACHMENT0+rt),Y.depthBuffer&&Xe.push(vt);const mt=Qe.__ignoreDepthValues!==void 0?Qe.__ignoreDepthValues:!1;if(mt===!1&&(Y.depthBuffer&&(Fe|=n.DEPTH_BUFFER_BIT),Y.stencilBuffer&&(Fe|=n.STENCIL_BUFFER_BIT)),Ae&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[rt]),mt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[vt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[vt])),Ae){const _t=i.get(W[rt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_t,0)}n.blitFramebuffer(0,0,_e,Oe,0,0,_e,Oe,Fe,n.NEAREST),v&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Xe)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ae)for(let rt=0;rt<W.length;rt++){t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[rt]);const mt=i.get(W[rt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.TEXTURE_2D,mt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer)}}function xt(Y){return Math.min(m,Y.samples)}function pt(Y){const W=i.get(Y);return l&&Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function bt(Y){const W=o.render.frame;S.get(Y)!==W&&(S.set(Y,W),Y.update())}function Vt(Y,W){const _e=Y.colorSpace,Oe=Y.format,Fe=Y.type;return Y.isCompressedTexture===!0||Y.format===ky||_e!==Mo&&_e!==ou&&(_e===Gt?l===!1?e.has("EXT_sRGB")===!0&&Oe===Yr?(Y.format=ky,Y.minFilter=ui,Y.generateMipmaps=!1):W=bS.sRGBToLinear(W):(Oe!==Yr||Fe!==rl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_e)),W}this.allocateTextureUnit=V,this.resetTextureUnits=ie,this.setTexture2D=$,this.setTexture2DArray=G,this.setTexture3D=Z,this.setTextureCube=ce,this.rebindTextures=Ne,this.setupRenderTarget=tt,this.updateRenderTargetMipmap=Ge,this.updateMultisampleRenderTarget=yt,this.setupDepthRenderbuffer=Se,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=pt}function R2(n,e,t){const i=t.isWebGL2;function r(s,o=ou){let l;if(s===rl)return n.UNSIGNED_BYTE;if(s===ZC)return n.UNSIGNED_SHORT_4_4_4_4;if(s===QC)return n.UNSIGNED_SHORT_5_5_5_1;if(s===YC)return n.BYTE;if(s===KC)return n.SHORT;if(s===_S)return n.UNSIGNED_SHORT;if(s===JC)return n.INT;if(s===tu)return n.UNSIGNED_INT;if(s===Za)return n.FLOAT;if(s===$f)return i?n.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===e2)return n.ALPHA;if(s===Yr)return n.RGBA;if(s===t2)return n.LUMINANCE;if(s===n2)return n.LUMINANCE_ALPHA;if(s===ru)return n.DEPTH_COMPONENT;if(s===Fc)return n.DEPTH_STENCIL;if(s===ky)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===i2)return n.RED;if(s===r2)return n.RED_INTEGER;if(s===s2)return n.RG;if(s===o2)return n.RG_INTEGER;if(s===a2)return n.RGBA_INTEGER;if(s===uy||s===cy||s===hy||s===fy)if(o===Gt)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===uy)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===cy)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===hy)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===fy)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===uy)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===cy)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===hy)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===fy)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===q_||s===Y_||s===K_||s===J_)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===q_)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Y_)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===K_)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===J_)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===l2)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Z_||s===Q_)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===Z_)return o===Gt?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===Q_)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===ew||s===tw||s===nw||s===iw||s===rw||s===sw||s===ow||s===aw||s===lw||s===uw||s===cw||s===hw||s===fw||s===dw)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===ew)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===tw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===nw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===iw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===rw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===sw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===ow)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===aw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===lw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===uw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===cw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===hw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===fw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===dw)return o===Gt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===dy)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===dy)return o===Gt?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===u2||s===pw||s===mw||s===gw)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===dy)return l.COMPRESSED_RED_RGTC1_EXT;if(s===pw)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===mw)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===gw)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Nc?i?n.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class N2 extends zi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Rf extends pn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const z4={type:"move"};class Hx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Rf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Rf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Rf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,c=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const E of e.hand.values()){const M=t.getJointPose(E,i),x=this._getHandJoint(d,E);M!==null&&(x.matrix.fromArray(M.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=M.radius),x.visible=M!==null}const p=d.joints["index-finger-tip"],m=d.joints["thumb-tip"],y=p.position.distanceTo(m.position),v=.02,S=.005;d.inputState.pinching&&y>v+S?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&y<=v-S&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(z4)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Rf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class L2 extends ti{constructor(e,t,i,r,s,o,l,c,d,p){if(p=p!==void 0?p:ru,p!==ru&&p!==Fc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===ru&&(i=tu),i===void 0&&p===Fc&&(i=Nc),super(null,r,s,o,l,c,p,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:li,this.minFilter=c!==void 0?c:li,this.flipY=!1,this.generateMipmaps=!1}}class V4 extends ll{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l="local-floor",c=1,d=null,p=null,m=null,y=null,v=null,S=null;const E=t.getContextAttributes();let M=null,x=null;const C=[],T=[],P=new Set,I=new Map,k=new zi;k.layers.enable(1),k.viewport=new _n;const B=new zi;B.layers.enable(2),B.viewport=new _n;const z=[k,B],U=new N2;U.layers.enable(1),U.layers.enable(2);let F=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let fe=C[ce];return fe===void 0&&(fe=new Hx,C[ce]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(ce){let fe=C[ce];return fe===void 0&&(fe=new Hx,C[ce]=fe),fe.getGripSpace()},this.getHand=function(ce){let fe=C[ce];return fe===void 0&&(fe=new Hx,C[ce]=fe),fe.getHandSpace()};function ae(ce){const fe=T.indexOf(ce.inputSource);if(fe===-1)return;const Ee=C[fe];Ee!==void 0&&(Ee.update(ce.inputSource,ce.frame,d||o),Ee.dispatchEvent({type:ce.type,data:ce.inputSource}))}function re(){r.removeEventListener("select",ae),r.removeEventListener("selectstart",ae),r.removeEventListener("selectend",ae),r.removeEventListener("squeeze",ae),r.removeEventListener("squeezestart",ae),r.removeEventListener("squeezeend",ae),r.removeEventListener("end",re),r.removeEventListener("inputsourceschange",H);for(let ce=0;ce<C.length;ce++){const fe=T[ce];fe!==null&&(T[ce]=null,C[ce].disconnect(fe))}F=null,K=null,e.setRenderTarget(M),v=null,y=null,m=null,r=null,x=null,Z.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){l=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(ce){d=ce},this.getBaseLayer=function(){return y!==null?y:v},this.getBinding=function(){return m},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(ce){if(r=ce,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",re),r.addEventListener("inputsourceschange",H),E.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const fe={antialias:r.renderState.layers===void 0?E.antialias:!0,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,fe),r.updateRenderState({baseLayer:v}),x=new Eo(v.framebufferWidth,v.framebufferHeight,{format:Yr,type:rl,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil})}else{let fe=null,Ee=null,be=null;E.depth&&(be=E.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,fe=E.stencil?Fc:ru,Ee=E.stencil?Nc:tu);const ee={colorFormat:t.RGBA8,depthFormat:be,scaleFactor:s};m=new XRWebGLBinding(r,t),y=m.createProjectionLayer(ee),r.updateRenderState({layers:[y]}),x=new Eo(y.textureWidth,y.textureHeight,{format:Yr,type:rl,depthTexture:new L2(y.textureWidth,y.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0});const Ve=e.properties.get(x);Ve.__ignoreDepthValues=y.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(c),d=null,o=await r.requestReferenceSpace(l),Z.setContext(r),Z.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function H(ce){for(let fe=0;fe<ce.removed.length;fe++){const Ee=ce.removed[fe],be=T.indexOf(Ee);be>=0&&(T[be]=null,C[be].disconnect(Ee))}for(let fe=0;fe<ce.added.length;fe++){const Ee=ce.added[fe];let be=T.indexOf(Ee);if(be===-1){for(let Ve=0;Ve<C.length;Ve++)if(Ve>=T.length){T.push(Ee),be=Ve;break}else if(T[Ve]===null){T[Ve]=Ee,be=Ve;break}if(be===-1)break}const ee=C[be];ee&&ee.connect(Ee)}}const se=new X,ne=new X;function ie(ce,fe,Ee){se.setFromMatrixPosition(fe.matrixWorld),ne.setFromMatrixPosition(Ee.matrixWorld);const be=se.distanceTo(ne),ee=fe.projectionMatrix.elements,Ve=Ee.projectionMatrix.elements,je=ee[14]/(ee[10]-1),Ie=ee[14]/(ee[10]+1),Ke=(ee[9]+1)/ee[5],Re=(ee[9]-1)/ee[5],Se=(ee[8]-1)/ee[0],Ne=(Ve[8]+1)/Ve[0],tt=je*Se,Ge=je*Ne,yt=be/(-Se+Ne),xt=yt*-Se;fe.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(xt),ce.translateZ(yt),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert();const pt=je+yt,bt=Ie+yt,Vt=tt-xt,Y=Ge+(be-xt),W=Ke*Ie/bt*pt,_e=Re*Ie/bt*pt;ce.projectionMatrix.makePerspective(Vt,Y,W,_e,pt,bt),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}function V(ce,fe){fe===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(fe.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(r===null)return;U.near=B.near=k.near=ce.near,U.far=B.far=k.far=ce.far,(F!==U.near||K!==U.far)&&(r.updateRenderState({depthNear:U.near,depthFar:U.far}),F=U.near,K=U.far);const fe=ce.parent,Ee=U.cameras;V(U,fe);for(let be=0;be<Ee.length;be++)V(Ee[be],fe);Ee.length===2?ie(U,k,B):U.projectionMatrix.copy(k.projectionMatrix),te(ce,U,fe)};function te(ce,fe,Ee){Ee===null?ce.matrix.copy(fe.matrixWorld):(ce.matrix.copy(Ee.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(fe.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0);const be=ce.children;for(let ee=0,Ve=be.length;ee<Ve;ee++)be[ee].updateMatrixWorld(!0);ce.projectionMatrix.copy(fe.projectionMatrix),ce.projectionMatrixInverse.copy(fe.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=qf*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(y===null&&v===null))return c},this.setFoveation=function(ce){c=ce,y!==null&&(y.fixedFoveation=ce),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ce)},this.getPlanes=function(){return P};let $=null;function G(ce,fe){if(p=fe.getViewerPose(d||o),S=fe,p!==null){const Ee=p.views;v!==null&&(e.setRenderTargetFramebuffer(x,v.framebuffer),e.setRenderTarget(x));let be=!1;Ee.length!==U.cameras.length&&(U.cameras.length=0,be=!0);for(let ee=0;ee<Ee.length;ee++){const Ve=Ee[ee];let je=null;if(v!==null)je=v.getViewport(Ve);else{const Ke=m.getViewSubImage(y,Ve);je=Ke.viewport,ee===0&&(e.setRenderTargetTextures(x,Ke.colorTexture,y.ignoreDepthValues?void 0:Ke.depthStencilTexture),e.setRenderTarget(x))}let Ie=z[ee];Ie===void 0&&(Ie=new zi,Ie.layers.enable(ee),Ie.viewport=new _n,z[ee]=Ie),Ie.matrix.fromArray(Ve.transform.matrix),Ie.matrix.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.projectionMatrix.fromArray(Ve.projectionMatrix),Ie.projectionMatrixInverse.copy(Ie.projectionMatrix).invert(),Ie.viewport.set(je.x,je.y,je.width,je.height),ee===0&&(U.matrix.copy(Ie.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),be===!0&&U.cameras.push(Ie)}}for(let Ee=0;Ee<C.length;Ee++){const be=T[Ee],ee=C[Ee];be!==null&&ee!==void 0&&ee.update(be,fe,d||o)}if($&&$(ce,fe),fe.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:fe.detectedPlanes});let Ee=null;for(const be of P)fe.detectedPlanes.has(be)||(Ee===null&&(Ee=[]),Ee.push(be));if(Ee!==null)for(const be of Ee)P.delete(be),I.delete(be),i.dispatchEvent({type:"planeremoved",data:be});for(const be of fe.detectedPlanes)if(!P.has(be))P.add(be),I.set(be,fe.lastChangedTime),i.dispatchEvent({type:"planeadded",data:be});else{const ee=I.get(be);be.lastChangedTime>ee&&(I.set(be,be.lastChangedTime),i.dispatchEvent({type:"planechanged",data:be}))}}S=null}const Z=new b2;Z.setAnimationLoop(G),this.setAnimationLoop=function(ce){$=ce},this.dispose=function(){}}}function H4(n,e){function t(M,x){M.matrixAutoUpdate===!0&&M.updateMatrix(),x.value.copy(M.matrix)}function i(M,x){x.color.getRGB(M.fogColor.value,w2(n)),x.isFog?(M.fogNear.value=x.near,M.fogFar.value=x.far):x.isFogExp2&&(M.fogDensity.value=x.density)}function r(M,x,C,T,P){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(M,x):x.isMeshToonMaterial?(s(M,x),m(M,x)):x.isMeshPhongMaterial?(s(M,x),p(M,x)):x.isMeshStandardMaterial?(s(M,x),y(M,x),x.isMeshPhysicalMaterial&&v(M,x,P)):x.isMeshMatcapMaterial?(s(M,x),S(M,x)):x.isMeshDepthMaterial?s(M,x):x.isMeshDistanceMaterial?(s(M,x),E(M,x)):x.isMeshNormalMaterial?s(M,x):x.isLineBasicMaterial?(o(M,x),x.isLineDashedMaterial&&l(M,x)):x.isPointsMaterial?c(M,x,C,T):x.isSpriteMaterial?d(M,x):x.isShadowMaterial?(M.color.value.copy(x.color),M.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(M,x){M.opacity.value=x.opacity,x.color&&M.diffuse.value.copy(x.color),x.emissive&&M.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(M.map.value=x.map,t(x.map,M.mapTransform)),x.alphaMap&&(M.alphaMap.value=x.alphaMap,t(x.alphaMap,M.alphaMapTransform)),x.bumpMap&&(M.bumpMap.value=x.bumpMap,t(x.bumpMap,M.bumpMapTransform),M.bumpScale.value=x.bumpScale,x.side===Pr&&(M.bumpScale.value*=-1)),x.normalMap&&(M.normalMap.value=x.normalMap,t(x.normalMap,M.normalMapTransform),M.normalScale.value.copy(x.normalScale),x.side===Pr&&M.normalScale.value.negate()),x.displacementMap&&(M.displacementMap.value=x.displacementMap,t(x.displacementMap,M.displacementMapTransform),M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias),x.emissiveMap&&(M.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,M.emissiveMapTransform)),x.specularMap&&(M.specularMap.value=x.specularMap,t(x.specularMap,M.specularMapTransform)),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest);const C=e.get(x).envMap;if(C&&(M.envMap.value=C,M.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=x.reflectivity,M.ior.value=x.ior,M.refractionRatio.value=x.refractionRatio),x.lightMap){M.lightMap.value=x.lightMap;const T=n.useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=x.lightMapIntensity*T,t(x.lightMap,M.lightMapTransform)}x.aoMap&&(M.aoMap.value=x.aoMap,M.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,M.aoMapTransform))}function o(M,x){M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,x.map&&(M.map.value=x.map,t(x.map,M.mapTransform))}function l(M,x){M.dashSize.value=x.dashSize,M.totalSize.value=x.dashSize+x.gapSize,M.scale.value=x.scale}function c(M,x,C,T){M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,M.size.value=x.size*C,M.scale.value=T*.5,x.map&&(M.map.value=x.map,t(x.map,M.uvTransform)),x.alphaMap&&(M.alphaMap.value=x.alphaMap),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest)}function d(M,x){M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,M.rotation.value=x.rotation,x.map&&(M.map.value=x.map,t(x.map,M.mapTransform)),x.alphaMap&&(M.alphaMap.value=x.alphaMap),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest)}function p(M,x){M.specular.value.copy(x.specular),M.shininess.value=Math.max(x.shininess,1e-4)}function m(M,x){x.gradientMap&&(M.gradientMap.value=x.gradientMap)}function y(M,x){M.metalness.value=x.metalness,x.metalnessMap&&(M.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,M.metalnessMapTransform)),M.roughness.value=x.roughness,x.roughnessMap&&(M.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,M.roughnessMapTransform)),e.get(x).envMap&&(M.envMapIntensity.value=x.envMapIntensity)}function v(M,x,C){M.ior.value=x.ior,x.sheen>0&&(M.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),M.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(M.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,M.sheenColorMapTransform)),x.sheenRoughnessMap&&(M.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,M.sheenRoughnessMapTransform))),x.clearcoat>0&&(M.clearcoat.value=x.clearcoat,M.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(M.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,M.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(M.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Pr&&M.clearcoatNormalScale.value.negate())),x.iridescence>0&&(M.iridescence.value=x.iridescence,M.iridescenceIOR.value=x.iridescenceIOR,M.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(M.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,M.iridescenceMapTransform)),x.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),x.transmission>0&&(M.transmission.value=x.transmission,M.transmissionSamplerMap.value=C.texture,M.transmissionSamplerSize.value.set(C.width,C.height),x.transmissionMap&&(M.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,M.transmissionMapTransform)),M.thickness.value=x.thickness,x.thicknessMap&&(M.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=x.attenuationDistance,M.attenuationColor.value.copy(x.attenuationColor)),M.specularIntensity.value=x.specularIntensity,M.specularColor.value.copy(x.specularColor),x.specularColorMap&&(M.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,M.specularColorMapTransform)),x.specularIntensityMap&&(M.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,M.specularIntensityMapTransform))}function S(M,x){x.matcap&&(M.matcap.value=x.matcap)}function E(M,x){const C=e.get(x).light;M.referencePosition.value.setFromMatrixPosition(C.matrixWorld),M.nearDistance.value=C.shadow.camera.near,M.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function W4(n,e,t,i){let r={},s={},o=[];const l=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(C,T){const P=T.program;i.uniformBlockBinding(C,P)}function d(C,T){let P=r[C.id];P===void 0&&(S(C),P=p(C),r[C.id]=P,C.addEventListener("dispose",M));const I=T.program;i.updateUBOMapping(C,I);const k=e.render.frame;s[C.id]!==k&&(y(C),s[C.id]=k)}function p(C){const T=m();C.__bindingPointIndex=T;const P=n.createBuffer(),I=C.__size,k=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,P),n.bufferData(n.UNIFORM_BUFFER,I,k),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,T,P),P}function m(){for(let C=0;C<l;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(C){const T=r[C.id],P=C.uniforms,I=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,T);for(let k=0,B=P.length;k<B;k++){const z=P[k];if(v(z,k,I)===!0){const U=z.__offset,F=Array.isArray(z.value)?z.value:[z.value];let K=0;for(let ae=0;ae<F.length;ae++){const re=F[ae],H=E(re);typeof re=="number"?(z.__data[0]=re,n.bufferSubData(n.UNIFORM_BUFFER,U+K,z.__data)):re.isMatrix3?(z.__data[0]=re.elements[0],z.__data[1]=re.elements[1],z.__data[2]=re.elements[2],z.__data[3]=re.elements[0],z.__data[4]=re.elements[3],z.__data[5]=re.elements[4],z.__data[6]=re.elements[5],z.__data[7]=re.elements[0],z.__data[8]=re.elements[6],z.__data[9]=re.elements[7],z.__data[10]=re.elements[8],z.__data[11]=re.elements[0]):(re.toArray(z.__data,K),K+=H.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,z.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(C,T,P){const I=C.value;if(P[T]===void 0){if(typeof I=="number")P[T]=I;else{const k=Array.isArray(I)?I:[I],B=[];for(let z=0;z<k.length;z++)B.push(k[z].clone());P[T]=B}return!0}else if(typeof I=="number"){if(P[T]!==I)return P[T]=I,!0}else{const k=Array.isArray(P[T])?P[T]:[P[T]],B=Array.isArray(I)?I:[I];for(let z=0;z<k.length;z++){const U=k[z];if(U.equals(B[z])===!1)return U.copy(B[z]),!0}}return!1}function S(C){const T=C.uniforms;let P=0;const I=16;let k=0;for(let B=0,z=T.length;B<z;B++){const U=T[B],F={boundary:0,storage:0},K=Array.isArray(U.value)?U.value:[U.value];for(let ae=0,re=K.length;ae<re;ae++){const H=K[ae],se=E(H);F.boundary+=se.boundary,F.storage+=se.storage}if(U.__data=new Float32Array(F.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=P,B>0){k=P%I;const ae=I-k;k!==0&&ae-F.boundary<0&&(P+=I-k,U.__offset=P)}P+=F.storage}return k=P%I,k>0&&(P+=I-k),C.__size=P,C.__cache={},this}function E(C){const T={boundary:0,storage:0};return typeof C=="number"?(T.boundary=4,T.storage=4):C.isVector2?(T.boundary=8,T.storage=8):C.isVector3||C.isColor?(T.boundary=16,T.storage=12):C.isVector4?(T.boundary=16,T.storage=16):C.isMatrix3?(T.boundary=48,T.storage=48):C.isMatrix4?(T.boundary=64,T.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),T}function M(C){const T=C.target;T.removeEventListener("dispose",M);const P=o.indexOf(T.__bindingPointIndex);o.splice(P,1),n.deleteBuffer(r[T.id]),delete r[T.id],delete s[T.id]}function x(){for(const C in r)n.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:c,update:d,dispose:x}}function G4(){const n=lm("canvas");return n.style.display="block",n}class LS{constructor(e={}){const{canvas:t=G4(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1}=e;this.isWebGLRenderer=!0;let y;i!==null?y=i.getContextAttributes().alpha:y=o;let v=null,S=null;const E=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Gt,this.useLegacyLights=!0,this.toneMapping=So,this.toneMappingExposure=1;const x=this;let C=!1,T=0,P=0,I=null,k=-1,B=null;const z=new _n,U=new _n;let F=null,K=t.width,ae=t.height,re=1,H=null,se=null;const ne=new _n(0,0,K,ae),ie=new _n(0,0,K,ae);let V=!1;const te=new hv;let $=!1,G=!1,Z=null;const ce=new zt,fe=new X,Ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function be(){return I===null?re:1}let ee=i;function Ve(j,ye){for(let Ce=0;Ce<j.length;Ce++){const me=j[Ce],Pe=t.getContext(me,ye);if(Pe!==null)return Pe}return null}try{const j={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Rm}`),t.addEventListener("webglcontextlost",dt,!1),t.addEventListener("webglcontextrestored",Xt,!1),t.addEventListener("webglcontextcreationerror",en,!1),ee===null){const ye=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&ye.shift(),ee=Ve(ye,j),ee===null)throw Ve(ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ee.getShaderPrecisionFormat===void 0&&(ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(j){throw console.error("THREE.WebGLRenderer: "+j.message),j}let je,Ie,Ke,Re,Se,Ne,tt,Ge,yt,xt,pt,bt,Vt,Y,W,_e,Oe,Fe,Xe,vt,Qe,Ae,rt,mt;function _t(){je=new oF(ee),Ie=new eF(ee,je,e),je.init(Ie),Ae=new R2(ee,je,Ie),Ke=new F4(ee,je,Ie),Re=new uF(ee),Se=new T4,Ne=new B4(ee,je,Ke,Se,Ie,Ae,Re),tt=new nF(x),Ge=new sF(x),yt=new wk(ee,Ie),rt=new ZO(ee,je,yt,Ie),xt=new aF(ee,yt,Re,rt),pt=new dF(ee,xt,yt,Re),Xe=new fF(ee,Ie,Ne),_e=new tF(Se),bt=new b4(x,tt,Ge,je,Ie,rt,_e),Vt=new H4(x,Se),Y=new C4,W=new D4(je,Ie),Fe=new JO(x,tt,Ge,Ke,pt,y,c),Oe=new O4(x,pt,Ie),mt=new W4(ee,Re,Ie,Ke),vt=new QO(ee,je,Re,Ie),Qe=new lF(ee,je,Re,Ie),Re.programs=bt.programs,x.capabilities=Ie,x.extensions=je,x.properties=Se,x.renderLists=Y,x.shadowMap=Oe,x.state=Ke,x.info=Re}_t();const nt=new V4(x,ee);this.xr=nt,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const j=je.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){const j=je.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(j){j!==void 0&&(re=j,this.setSize(K,ae,!1))},this.getSize=function(j){return j.set(K,ae)},this.setSize=function(j,ye,Ce=!0){if(nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=j,ae=ye,t.width=Math.floor(j*re),t.height=Math.floor(ye*re),Ce===!0&&(t.style.width=j+"px",t.style.height=ye+"px"),this.setViewport(0,0,j,ye)},this.getDrawingBufferSize=function(j){return j.set(K*re,ae*re).floor()},this.setDrawingBufferSize=function(j,ye,Ce){K=j,ae=ye,re=Ce,t.width=Math.floor(j*Ce),t.height=Math.floor(ye*Ce),this.setViewport(0,0,j,ye)},this.getCurrentViewport=function(j){return j.copy(z)},this.getViewport=function(j){return j.copy(ne)},this.setViewport=function(j,ye,Ce,me){j.isVector4?ne.set(j.x,j.y,j.z,j.w):ne.set(j,ye,Ce,me),Ke.viewport(z.copy(ne).multiplyScalar(re).floor())},this.getScissor=function(j){return j.copy(ie)},this.setScissor=function(j,ye,Ce,me){j.isVector4?ie.set(j.x,j.y,j.z,j.w):ie.set(j,ye,Ce,me),Ke.scissor(U.copy(ie).multiplyScalar(re).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(j){Ke.setScissorTest(V=j)},this.setOpaqueSort=function(j){H=j},this.setTransparentSort=function(j){se=j},this.getClearColor=function(j){return j.copy(Fe.getClearColor())},this.setClearColor=function(){Fe.setClearColor.apply(Fe,arguments)},this.getClearAlpha=function(){return Fe.getClearAlpha()},this.setClearAlpha=function(){Fe.setClearAlpha.apply(Fe,arguments)},this.clear=function(j=!0,ye=!0,Ce=!0){let me=0;j&&(me|=ee.COLOR_BUFFER_BIT),ye&&(me|=ee.DEPTH_BUFFER_BIT),Ce&&(me|=ee.STENCIL_BUFFER_BIT),ee.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",dt,!1),t.removeEventListener("webglcontextrestored",Xt,!1),t.removeEventListener("webglcontextcreationerror",en,!1),Y.dispose(),W.dispose(),Se.dispose(),tt.dispose(),Ge.dispose(),pt.dispose(),rt.dispose(),mt.dispose(),bt.dispose(),nt.dispose(),nt.removeEventListener("sessionstart",ut),nt.removeEventListener("sessionend",an),Z&&(Z.dispose(),Z=null),ln.stop()};function dt(j){j.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Xt(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const j=Re.autoReset,ye=Oe.enabled,Ce=Oe.autoUpdate,me=Oe.needsUpdate,Pe=Oe.type;_t(),Re.autoReset=j,Oe.enabled=ye,Oe.autoUpdate=Ce,Oe.needsUpdate=me,Oe.type=Pe}function en(j){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",j.statusMessage)}function Pn(j){const ye=j.target;ye.removeEventListener("dispose",Pn),le(ye)}function le(j){Te(j),Se.remove(j)}function Te(j){const ye=Se.get(j).programs;ye!==void 0&&(ye.forEach(function(Ce){bt.releaseProgram(Ce)}),j.isShaderMaterial&&bt.releaseShaderCache(j))}this.renderBufferDirect=function(j,ye,Ce,me,Pe,at){ye===null&&(ye=Ee);const wt=Pe.isMesh&&Pe.matrixWorld.determinant()<0,At=Jc(j,ye,Ce,me,Pe);Ke.setMaterial(me,wt);let Lt=Ce.index,Ut=1;me.wireframe===!0&&(Lt=xt.getWireframeAttribute(Ce),Ut=2);const Ot=Ce.drawRange,Ht=Ce.attributes.position;let un=Ot.start*Ut,vi=(Ot.start+Ot.count)*Ut;at!==null&&(un=Math.max(un,at.start*Ut),vi=Math.min(vi,(at.start+at.count)*Ut)),Lt!==null?(un=Math.max(un,0),vi=Math.min(vi,Lt.count)):Ht!=null&&(un=Math.max(un,0),vi=Math.min(vi,Ht.count));const mr=vi-un;if(mr<0||mr===1/0)return;rt.setup(Pe,me,At,Ce,Lt);let cn,Sn=vt;if(Lt!==null&&(cn=yt.get(Lt),Sn=Qe,Sn.setIndex(cn)),Pe.isMesh)me.wireframe===!0?(Ke.setLineWidth(me.wireframeLinewidth*be()),Sn.setMode(ee.LINES)):Sn.setMode(ee.TRIANGLES);else if(Pe.isLine){let Ft=me.linewidth;Ft===void 0&&(Ft=1),Ke.setLineWidth(Ft*be()),Pe.isLineSegments?Sn.setMode(ee.LINES):Pe.isLineLoop?Sn.setMode(ee.LINE_LOOP):Sn.setMode(ee.LINE_STRIP)}else Pe.isPoints?Sn.setMode(ee.POINTS):Pe.isSprite&&Sn.setMode(ee.TRIANGLES);if(Pe.isInstancedMesh)Sn.renderInstances(un,mr,Pe.count);else if(Ce.isInstancedBufferGeometry){const Ft=Ce._maxInstanceCount!==void 0?Ce._maxInstanceCount:1/0,No=Math.min(Ce.instanceCount,Ft);Sn.renderInstances(un,mr,No)}else Sn.render(un,mr)},this.compile=function(j,ye){function Ce(me,Pe,at){me.transparent===!0&&me.side===Ko&&me.forceSinglePass===!1?(me.side=Pr,me.needsUpdate=!0,Po(me,Pe,at),me.side=il,me.needsUpdate=!0,Po(me,Pe,at),me.side=Ko):Po(me,Pe,at)}S=W.get(j),S.init(),M.push(S),j.traverseVisible(function(me){me.isLight&&me.layers.test(ye.layers)&&(S.pushLight(me),me.castShadow&&S.pushShadow(me))}),S.setupLights(x.useLegacyLights),j.traverse(function(me){const Pe=me.material;if(Pe)if(Array.isArray(Pe))for(let at=0;at<Pe.length;at++){const wt=Pe[at];Ce(wt,j,me)}else Ce(Pe,j,me)}),M.pop(),S=null};let De=null;function qe(j){De&&De(j)}function ut(){ln.stop()}function an(){ln.start()}const ln=new b2;ln.setAnimationLoop(qe),typeof self<"u"&&ln.setContext(self),this.setAnimationLoop=function(j){De=j,nt.setAnimationLoop(j),j===null?ln.stop():ln.start()},nt.addEventListener("sessionstart",ut),nt.addEventListener("sessionend",an),this.render=function(j,ye){if(ye!==void 0&&ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),ye.parent===null&&ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),nt.enabled===!0&&nt.isPresenting===!0&&(nt.cameraAutoUpdate===!0&&nt.updateCamera(ye),ye=nt.getCamera()),j.isScene===!0&&j.onBeforeRender(x,j,ye,I),S=W.get(j,M.length),S.init(),M.push(S),ce.multiplyMatrices(ye.projectionMatrix,ye.matrixWorldInverse),te.setFromProjectionMatrix(ce),G=this.localClippingEnabled,$=_e.init(this.clippingPlanes,G),v=Y.get(j,E.length),v.init(),E.push(v),ni(j,ye,0,x.sortObjects),v.finish(),x.sortObjects===!0&&v.sort(H,se),$===!0&&_e.beginShadows();const Ce=S.state.shadowsArray;if(Oe.render(Ce,j,ye),$===!0&&_e.endShadows(),this.info.autoReset===!0&&this.info.reset(),Fe.render(v,j),S.setupLights(x.useLegacyLights),ye.isArrayCamera){const me=ye.cameras;for(let Pe=0,at=me.length;Pe<at;Pe++){const wt=me[Pe];Lr(v,j,wt,wt.viewport)}}else Lr(v,j,ye);I!==null&&(Ne.updateMultisampleRenderTarget(I),Ne.updateRenderTargetMipmap(I)),j.isScene===!0&&j.onAfterRender(x,j,ye),rt.resetDefaultState(),k=-1,B=null,M.pop(),M.length>0?S=M[M.length-1]:S=null,E.pop(),E.length>0?v=E[E.length-1]:v=null};function ni(j,ye,Ce,me){if(j.visible===!1)return;if(j.layers.test(ye.layers)){if(j.isGroup)Ce=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(ye);else if(j.isLight)S.pushLight(j),j.castShadow&&S.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||te.intersectsSprite(j)){me&&fe.setFromMatrixPosition(j.matrixWorld).applyMatrix4(ce);const wt=pt.update(j),At=j.material;At.visible&&v.push(j,wt,At,Ce,fe.z,null)}}else if((j.isMesh||j.isLine||j.isPoints)&&(!j.frustumCulled||te.intersectsObject(j))){j.isSkinnedMesh&&j.skeleton.frame!==Re.render.frame&&(j.skeleton.update(),j.skeleton.frame=Re.render.frame);const wt=pt.update(j),At=j.material;if(me&&(wt.boundingSphere===null&&wt.computeBoundingSphere(),fe.copy(wt.boundingSphere.center).applyMatrix4(j.matrixWorld).applyMatrix4(ce)),Array.isArray(At)){const Lt=wt.groups;for(let Ut=0,Ot=Lt.length;Ut<Ot;Ut++){const Ht=Lt[Ut],un=At[Ht.materialIndex];un&&un.visible&&v.push(j,wt,un,Ce,fe.z,Ht)}}else At.visible&&v.push(j,wt,At,Ce,fe.z,null)}}const at=j.children;for(let wt=0,At=at.length;wt<At;wt++)ni(at[wt],ye,Ce,me)}function Lr(j,ye,Ce,me){const Pe=j.opaque,at=j.transmissive,wt=j.transparent;S.setupLightsView(Ce),$===!0&&_e.setGlobalState(x.clippingPlanes,Ce),at.length>0&&wn(Pe,at,ye,Ce),me&&Ke.viewport(z.copy(me)),Pe.length>0&&Ni(Pe,ye,Ce),at.length>0&&Ni(at,ye,Ce),wt.length>0&&Ni(wt,ye,Ce),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),Ke.setPolygonOffset(!1)}function wn(j,ye,Ce,me){if(Z===null){const At=Ie.isWebGL2;Z=new Eo(1024,1024,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")?$f:rl,minFilter:uu,samples:At&&l===!0?4:0})}const Pe=x.getRenderTarget();x.setRenderTarget(Z),x.clear();const at=x.toneMapping;x.toneMapping=So,Ni(j,Ce,me),Ne.updateMultisampleRenderTarget(Z),Ne.updateRenderTargetMipmap(Z);let wt=!1;for(let At=0,Lt=ye.length;At<Lt;At++){const Ut=ye[At],Ot=Ut.object,Ht=Ut.geometry,un=Ut.material,vi=Ut.group;if(un.side===Ko&&Ot.layers.test(me.layers)){const mr=un.side;un.side=Pr,un.needsUpdate=!0,Li(Ot,Ce,me,Ht,un,vi),un.side=mr,un.needsUpdate=!0,wt=!0}}wt===!0&&(Ne.updateMultisampleRenderTarget(Z),Ne.updateRenderTargetMipmap(Z)),x.setRenderTarget(Pe),x.toneMapping=at}function Ni(j,ye,Ce){const me=ye.isScene===!0?ye.overrideMaterial:null;for(let Pe=0,at=j.length;Pe<at;Pe++){const wt=j[Pe],At=wt.object,Lt=wt.geometry,Ut=me===null?wt.material:me,Ot=wt.group;At.layers.test(Ce.layers)&&Li(At,ye,Ce,Lt,Ut,Ot)}}function Li(j,ye,Ce,me,Pe,at){j.onBeforeRender(x,ye,Ce,me,Pe,at),j.modelViewMatrix.multiplyMatrices(Ce.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),Pe.onBeforeRender(x,ye,Ce,me,j,at),Pe.transparent===!0&&Pe.side===Ko&&Pe.forceSinglePass===!1?(Pe.side=Pr,Pe.needsUpdate=!0,x.renderBufferDirect(Ce,ye,me,Pe,j,at),Pe.side=il,Pe.needsUpdate=!0,x.renderBufferDirect(Ce,ye,me,Pe,j,at),Pe.side=Ko):x.renderBufferDirect(Ce,ye,me,Pe,j,at),j.onAfterRender(x,ye,Ce,me,Pe,at)}function Po(j,ye,Ce){ye.isScene!==!0&&(ye=Ee);const me=Se.get(j),Pe=S.state.lights,at=S.state.shadowsArray,wt=Pe.state.version,At=bt.getParameters(j,Pe.state,at,ye,Ce),Lt=bt.getProgramCacheKey(At);let Ut=me.programs;me.environment=j.isMeshStandardMaterial?ye.environment:null,me.fog=ye.fog,me.envMap=(j.isMeshStandardMaterial?Ge:tt).get(j.envMap||me.environment),Ut===void 0&&(j.addEventListener("dispose",Pn),Ut=new Map,me.programs=Ut);let Ot=Ut.get(Lt);if(Ot!==void 0){if(me.currentProgram===Ot&&me.lightsStateVersion===wt)return Ro(j,At),Ot}else At.uniforms=bt.getUniforms(j),j.onBuild(Ce,At,x),j.onBeforeCompile(At,x),Ot=bt.acquireProgram(At,Lt),Ut.set(Lt,Ot),me.uniforms=At.uniforms;const Ht=me.uniforms;(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(Ht.clippingPlanes=_e.uniform),Ro(j,At),me.needsLights=cl(j),me.lightsStateVersion=wt,me.needsLights&&(Ht.ambientLightColor.value=Pe.state.ambient,Ht.lightProbe.value=Pe.state.probe,Ht.directionalLights.value=Pe.state.directional,Ht.directionalLightShadows.value=Pe.state.directionalShadow,Ht.spotLights.value=Pe.state.spot,Ht.spotLightShadows.value=Pe.state.spotShadow,Ht.rectAreaLights.value=Pe.state.rectArea,Ht.ltc_1.value=Pe.state.rectAreaLTC1,Ht.ltc_2.value=Pe.state.rectAreaLTC2,Ht.pointLights.value=Pe.state.point,Ht.pointLightShadows.value=Pe.state.pointShadow,Ht.hemisphereLights.value=Pe.state.hemi,Ht.directionalShadowMap.value=Pe.state.directionalShadowMap,Ht.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,Ht.spotShadowMap.value=Pe.state.spotShadowMap,Ht.spotLightMatrix.value=Pe.state.spotLightMatrix,Ht.spotLightMap.value=Pe.state.spotLightMap,Ht.pointShadowMap.value=Pe.state.pointShadowMap,Ht.pointShadowMatrix.value=Pe.state.pointShadowMatrix);const un=Ot.getUniforms(),vi=gy.seqWithValue(un.seq,Ht);return me.currentProgram=Ot,me.uniformsList=vi,Ot}function Ro(j,ye){const Ce=Se.get(j);Ce.outputColorSpace=ye.outputColorSpace,Ce.instancing=ye.instancing,Ce.skinning=ye.skinning,Ce.morphTargets=ye.morphTargets,Ce.morphNormals=ye.morphNormals,Ce.morphColors=ye.morphColors,Ce.morphTargetsCount=ye.morphTargetsCount,Ce.numClippingPlanes=ye.numClippingPlanes,Ce.numIntersection=ye.numClipIntersection,Ce.vertexAlphas=ye.vertexAlphas,Ce.vertexTangents=ye.vertexTangents,Ce.toneMapping=ye.toneMapping}function Jc(j,ye,Ce,me,Pe){ye.isScene!==!0&&(ye=Ee),Ne.resetTextureUnits();const at=ye.fog,wt=me.isMeshStandardMaterial?ye.environment:null,At=I===null?x.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Mo,Lt=(me.isMeshStandardMaterial?Ge:tt).get(me.envMap||wt),Ut=me.vertexColors===!0&&!!Ce.attributes.color&&Ce.attributes.color.itemSize===4,Ot=!!me.normalMap&&!!Ce.attributes.tangent,Ht=!!Ce.morphAttributes.position,un=!!Ce.morphAttributes.normal,vi=!!Ce.morphAttributes.color,mr=me.toneMapped?x.toneMapping:So,cn=Ce.morphAttributes.position||Ce.morphAttributes.normal||Ce.morphAttributes.color,Sn=cn!==void 0?cn.length:0,Ft=Se.get(me),No=S.state.lights;if($===!0&&(G===!0||j!==B)){const gn=j===B&&me.id===k;_e.setState(me,j,gn)}let Dn=!1;me.version===Ft.__version?(Ft.needsLights&&Ft.lightsStateVersion!==No.state.version||Ft.outputColorSpace!==At||Pe.isInstancedMesh&&Ft.instancing===!1||!Pe.isInstancedMesh&&Ft.instancing===!0||Pe.isSkinnedMesh&&Ft.skinning===!1||!Pe.isSkinnedMesh&&Ft.skinning===!0||Ft.envMap!==Lt||me.fog===!0&&Ft.fog!==at||Ft.numClippingPlanes!==void 0&&(Ft.numClippingPlanes!==_e.numPlanes||Ft.numIntersection!==_e.numIntersection)||Ft.vertexAlphas!==Ut||Ft.vertexTangents!==Ot||Ft.morphTargets!==Ht||Ft.morphNormals!==un||Ft.morphColors!==vi||Ft.toneMapping!==mr||Ie.isWebGL2===!0&&Ft.morphTargetsCount!==Sn)&&(Dn=!0):(Dn=!0,Ft.__version=me.version);let Zr=Ft.currentProgram;Dn===!0&&(Zr=Po(me,ye,Pe));let Ms=!1,xi=!1,$t=!1;const It=Zr.getUniforms(),Mn=Ft.uniforms;if(Ke.useProgram(Zr.program)&&(Ms=!0,xi=!0,$t=!0),me.id!==k&&(k=me.id,xi=!0),Ms||B!==j){if(It.setValue(ee,"projectionMatrix",j.projectionMatrix),Ie.logarithmicDepthBuffer&&It.setValue(ee,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),B!==j&&(B=j,xi=!0,$t=!0),me.isShaderMaterial||me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshStandardMaterial||me.envMap){const gn=It.map.cameraPosition;gn!==void 0&&gn.setValue(ee,fe.setFromMatrixPosition(j.matrixWorld))}(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&It.setValue(ee,"isOrthographic",j.isOrthographicCamera===!0),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial||me.isShadowMaterial||Pe.isSkinnedMesh)&&It.setValue(ee,"viewMatrix",j.matrixWorldInverse)}if(Pe.isSkinnedMesh){It.setOptional(ee,Pe,"bindMatrix"),It.setOptional(ee,Pe,"bindMatrixInverse");const gn=Pe.skeleton;gn&&(Ie.floatVertexTextures?(gn.boneTexture===null&&gn.computeBoneTexture(),It.setValue(ee,"boneTexture",gn.boneTexture,Ne),It.setValue(ee,"boneTextureSize",gn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $n=Ce.morphAttributes;if(($n.position!==void 0||$n.normal!==void 0||$n.color!==void 0&&Ie.isWebGL2===!0)&&Xe.update(Pe,Ce,Zr),(xi||Ft.receiveShadow!==Pe.receiveShadow)&&(Ft.receiveShadow=Pe.receiveShadow,It.setValue(ee,"receiveShadow",Pe.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(Mn.envMap.value=Lt,Mn.flipEnvMap.value=Lt.isCubeTexture&&Lt.isRenderTargetTexture===!1?-1:1),xi&&(It.setValue(ee,"toneMappingExposure",x.toneMappingExposure),Ft.needsLights&&Bs(Mn,$t),at&&me.fog===!0&&Vt.refreshFogUniforms(Mn,at),Vt.refreshMaterialUniforms(Mn,me,re,ae,Z),gy.upload(ee,Ft.uniformsList,Mn,Ne)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(gy.upload(ee,Ft.uniformsList,Mn,Ne),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&It.setValue(ee,"center",Pe.center),It.setValue(ee,"modelViewMatrix",Pe.modelViewMatrix),It.setValue(ee,"normalMatrix",Pe.normalMatrix),It.setValue(ee,"modelMatrix",Pe.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const gn=me.uniformsGroups;for(let Qr=0,es=gn.length;Qr<es;Qr++)if(Ie.isWebGL2){const qn=gn[Qr];mt.update(qn,Zr),mt.bind(qn,Zr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Zr}function Bs(j,ye){j.ambientLightColor.needsUpdate=ye,j.lightProbe.needsUpdate=ye,j.directionalLights.needsUpdate=ye,j.directionalLightShadows.needsUpdate=ye,j.pointLights.needsUpdate=ye,j.pointLightShadows.needsUpdate=ye,j.spotLights.needsUpdate=ye,j.spotLightShadows.needsUpdate=ye,j.rectAreaLights.needsUpdate=ye,j.hemisphereLights.needsUpdate=ye}function cl(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(j,ye,Ce){Se.get(j.texture).__webglTexture=ye,Se.get(j.depthTexture).__webglTexture=Ce;const me=Se.get(j);me.__hasExternalTextures=!0,me.__hasExternalTextures&&(me.__autoAllocateDepthBuffer=Ce===void 0,me.__autoAllocateDepthBuffer||je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(j,ye){const Ce=Se.get(j);Ce.__webglFramebuffer=ye,Ce.__useDefaultFramebuffer=ye===void 0},this.setRenderTarget=function(j,ye=0,Ce=0){I=j,T=ye,P=Ce;let me=!0,Pe=null,at=!1,wt=!1;if(j){const Lt=Se.get(j);Lt.__useDefaultFramebuffer!==void 0?(Ke.bindFramebuffer(ee.FRAMEBUFFER,null),me=!1):Lt.__webglFramebuffer===void 0?Ne.setupRenderTarget(j):Lt.__hasExternalTextures&&Ne.rebindTextures(j,Se.get(j.texture).__webglTexture,Se.get(j.depthTexture).__webglTexture);const Ut=j.texture;(Ut.isData3DTexture||Ut.isDataArrayTexture||Ut.isCompressedArrayTexture)&&(wt=!0);const Ot=Se.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(Pe=Ot[ye],at=!0):Ie.isWebGL2&&j.samples>0&&Ne.useMultisampledRTT(j)===!1?Pe=Se.get(j).__webglMultisampledFramebuffer:Pe=Ot,z.copy(j.viewport),U.copy(j.scissor),F=j.scissorTest}else z.copy(ne).multiplyScalar(re).floor(),U.copy(ie).multiplyScalar(re).floor(),F=V;if(Ke.bindFramebuffer(ee.FRAMEBUFFER,Pe)&&Ie.drawBuffers&&me&&Ke.drawBuffers(j,Pe),Ke.viewport(z),Ke.scissor(U),Ke.setScissorTest(F),at){const Lt=Se.get(j.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+ye,Lt.__webglTexture,Ce)}else if(wt){const Lt=Se.get(j.texture),Ut=ye||0;ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Lt.__webglTexture,Ce||0,Ut)}k=-1},this.readRenderTargetPixels=function(j,ye,Ce,me,Pe,at,wt){if(!(j&&j.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let At=Se.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&wt!==void 0&&(At=At[wt]),At){Ke.bindFramebuffer(ee.FRAMEBUFFER,At);try{const Lt=j.texture,Ut=Lt.format,Ot=Lt.type;if(Ut!==Yr&&Ae.convert(Ut)!==ee.getParameter(ee.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ht=Ot===$f&&(je.has("EXT_color_buffer_half_float")||Ie.isWebGL2&&je.has("EXT_color_buffer_float"));if(Ot!==rl&&Ae.convert(Ot)!==ee.getParameter(ee.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ot===Za&&(Ie.isWebGL2||je.has("OES_texture_float")||je.has("WEBGL_color_buffer_float")))&&!Ht){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ye>=0&&ye<=j.width-me&&Ce>=0&&Ce<=j.height-Pe&&ee.readPixels(ye,Ce,me,Pe,Ae.convert(Ut),Ae.convert(Ot),at)}finally{const Lt=I!==null?Se.get(I).__webglFramebuffer:null;Ke.bindFramebuffer(ee.FRAMEBUFFER,Lt)}}},this.copyFramebufferToTexture=function(j,ye,Ce=0){const me=Math.pow(2,-Ce),Pe=Math.floor(ye.image.width*me),at=Math.floor(ye.image.height*me);Ne.setTexture2D(ye,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,Ce,0,0,j.x,j.y,Pe,at),Ke.unbindTexture()},this.copyTextureToTexture=function(j,ye,Ce,me=0){const Pe=ye.image.width,at=ye.image.height,wt=Ae.convert(Ce.format),At=Ae.convert(Ce.type);Ne.setTexture2D(Ce,0),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,Ce.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ce.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,Ce.unpackAlignment),ye.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,me,j.x,j.y,Pe,at,wt,At,ye.image.data):ye.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,me,j.x,j.y,ye.mipmaps[0].width,ye.mipmaps[0].height,wt,ye.mipmaps[0].data):ee.texSubImage2D(ee.TEXTURE_2D,me,j.x,j.y,wt,At,ye.image),me===0&&Ce.generateMipmaps&&ee.generateMipmap(ee.TEXTURE_2D),Ke.unbindTexture()},this.copyTextureToTexture3D=function(j,ye,Ce,me,Pe=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const at=j.max.x-j.min.x+1,wt=j.max.y-j.min.y+1,At=j.max.z-j.min.z+1,Lt=Ae.convert(me.format),Ut=Ae.convert(me.type);let Ot;if(me.isData3DTexture)Ne.setTexture3D(me,0),Ot=ee.TEXTURE_3D;else if(me.isDataArrayTexture)Ne.setTexture2DArray(me,0),Ot=ee.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,me.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,me.unpackAlignment);const Ht=ee.getParameter(ee.UNPACK_ROW_LENGTH),un=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),vi=ee.getParameter(ee.UNPACK_SKIP_PIXELS),mr=ee.getParameter(ee.UNPACK_SKIP_ROWS),cn=ee.getParameter(ee.UNPACK_SKIP_IMAGES),Sn=Ce.isCompressedTexture?Ce.mipmaps[0]:Ce.image;ee.pixelStorei(ee.UNPACK_ROW_LENGTH,Sn.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Sn.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,j.min.x),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,j.min.y),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,j.min.z),Ce.isDataTexture||Ce.isData3DTexture?ee.texSubImage3D(Ot,Pe,ye.x,ye.y,ye.z,at,wt,At,Lt,Ut,Sn.data):Ce.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ee.compressedTexSubImage3D(Ot,Pe,ye.x,ye.y,ye.z,at,wt,At,Lt,Sn.data)):ee.texSubImage3D(Ot,Pe,ye.x,ye.y,ye.z,at,wt,At,Lt,Ut,Sn),ee.pixelStorei(ee.UNPACK_ROW_LENGTH,Ht),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,un),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,vi),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,mr),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,cn),Pe===0&&me.generateMipmaps&&ee.generateMipmap(Ot),Ke.unbindTexture()},this.initTexture=function(j){j.isCubeTexture?Ne.setTextureCube(j,0):j.isData3DTexture?Ne.setTexture3D(j,0):j.isDataArrayTexture||j.isCompressedArrayTexture?Ne.setTexture2DArray(j,0):Ne.setTexture2D(j,0),Ke.unbindTexture()},this.resetState=function(){T=0,P=0,I=null,Ke.reset(),rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Gt?su:SS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===su?Gt:Mo}}class I2 extends LS{}I2.prototype.isWebGL1Renderer=!0;class dv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new et(e),this.density=t}clone(){return new dv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class pv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new et(e),this.near=t,this.far=i}clone(){return new pv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Uy extends pn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class mv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=am,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ys()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Tr=new X;class Bc{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.applyMatrix4(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.applyNormalMatrix(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.transformDirection(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=gs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=gs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=gs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=gs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Cn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class IS extends er{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let pf;const gp=new X,mf=new X,gf=new X,yf=new Le,yp=new Le,D2=new zt,E0=new X,vp=new X,b0=new X,jE=new Le,Wx=new Le,XE=new Le;class k2 extends pn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",pf===void 0){pf=new jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new mv(t,5);pf.setIndex([0,1,2,0,2,3]),pf.setAttribute("position",new Bc(i,3,0,!1)),pf.setAttribute("uv",new Bc(i,2,3,!1))}this.geometry=pf,this.material=e!==void 0?e:new IS,this.center=new Le(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),mf.setFromMatrixScale(this.matrixWorld),D2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&mf.multiplyScalar(-gf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;T0(E0.set(-.5,-.5,0),gf,o,mf,r,s),T0(vp.set(.5,-.5,0),gf,o,mf,r,s),T0(b0.set(.5,.5,0),gf,o,mf,r,s),jE.set(0,0),Wx.set(1,0),XE.set(1,1);let l=e.ray.intersectTriangle(E0,vp,b0,!1,gp);if(l===null&&(T0(vp.set(-.5,.5,0),gf,o,mf,r,s),Wx.set(0,1),l=e.ray.intersectTriangle(E0,b0,vp,!1,gp),l===null))return;const c=e.ray.origin.distanceTo(gp);c<e.near||c>e.far||t.push({distance:c,point:gp.clone(),uv:qr.getInterpolation(gp,E0,vp,b0,jE,Wx,XE,new Le),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function T0(n,e,t,i,r,s){yf.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(yp.x=s*yf.x-r*yf.y,yp.y=r*yf.x+s*yf.y):yp.copy(yf),n.copy(e),n.x+=yp.x,n.y+=yp.y,n.applyMatrix4(D2)}const A0=new X,$E=new X;class U2 extends pn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){A0.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(A0);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){A0.setFromMatrixPosition(e.matrixWorld),$E.setFromMatrixPosition(this.matrixWorld);const i=A0.distanceTo($E)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const qE=new X,YE=new _n,KE=new _n,j4=new X,JE=new zt,vf=new X;class O2 extends Zi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zt,this.bindMatrixInverse=new zt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ra),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)vf.fromBufferAttribute(t,i),this.applyBoneTransform(i,vf),this.boundingBox.expandByPoint(vf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new sa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)vf.fromBufferAttribute(t,i),this.applyBoneTransform(i,vf),this.boundingSphere.expandByPoint(vf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new _n,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;YE.fromBufferAttribute(r.attributes.skinIndex,e),KE.fromBufferAttribute(r.attributes.skinWeight,e),qE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=KE.getComponent(s);if(o!==0){const l=YE.getComponent(s);JE.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(j4.copy(qE).applyMatrix4(JE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class DS extends pn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zf extends ti{constructor(e=null,t=1,i=1,r,s,o,l,c,d=li,p=li,m,y){super(null,o,l,c,d,p,r,s,m,y),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ZE=new zt,X4=new zt;class gv{constructor(e=[],t=[]){this.uuid=ys(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new zt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:X4;ZE.multiplyMatrices(l,t[s]),ZE.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new gv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=y2(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new zf(t,e,e,Yr,Za);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new DS),this.bones.push(o),this.boneInverses.push(new zt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Kf extends Cn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const xf=new zt,QE=new zt,C0=[],eb=new ra,$4=new zt,xp=new Zi,_p=new sa;class F2 extends Zi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Kf(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,$4)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ra),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xf),eb.copy(e.boundingBox).applyMatrix4(xf),this.boundingBox.union(eb)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new sa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xf),_p.copy(e.boundingSphere).applyMatrix4(xf),this.boundingSphere.union(_p)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(xp.geometry=this.geometry,xp.material=this.material,xp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_p.copy(this.boundingSphere),_p.applyMatrix4(i),e.ray.intersectsSphere(_p)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,xf),QE.multiplyMatrices(i,xf),xp.matrixWorld=QE,xp.raycast(e,C0);for(let o=0,l=C0.length;o<l;o++){const c=C0[o];c.instanceId=s,c.object=this,t.push(c)}C0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Kf(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Rr extends er{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const tb=new X,nb=new X,ib=new zt,Gx=new Lm,P0=new sa;class cu extends pn{constructor(e=new jt,t=new Rr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)tb.fromBufferAttribute(t,r-1),nb.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=tb.distanceTo(nb);e.setAttribute("lineDistance",new ht(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),P0.copy(i.boundingSphere),P0.applyMatrix4(r),P0.radius+=s,e.ray.intersectsSphere(P0)===!1)return;ib.copy(r).invert(),Gx.copy(e.ray).applyMatrix4(ib);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=new X,p=new X,m=new X,y=new X,v=this.isLineSegments?2:1,S=i.index,M=i.attributes.position;if(S!==null){const x=Math.max(0,o.start),C=Math.min(S.count,o.start+o.count);for(let T=x,P=C-1;T<P;T+=v){const I=S.getX(T),k=S.getX(T+1);if(d.fromBufferAttribute(M,I),p.fromBufferAttribute(M,k),Gx.distanceSqToSegment(d,p,y,m)>c)continue;y.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(y);z<e.near||z>e.far||t.push({distance:z,point:m.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),C=Math.min(M.count,o.start+o.count);for(let T=x,P=C-1;T<P;T+=v){if(d.fromBufferAttribute(M,T),p.fromBufferAttribute(M,T+1),Gx.distanceSqToSegment(d,p,y,m)>c)continue;y.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(y);k<e.near||k>e.far||t.push({distance:k,point:m.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const rb=new X,sb=new X;class oa extends cu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)rb.fromBufferAttribute(t,r),sb.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+rb.distanceTo(sb);e.setAttribute("lineDistance",new ht(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class B2 extends cu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class yv extends er{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ob=new zt,ww=new Lm,R0=new sa,N0=new X;class z2 extends pn{constructor(e=new jt,t=new yv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),R0.copy(i.boundingSphere),R0.applyMatrix4(r),R0.radius+=s,e.ray.intersectsSphere(R0)===!1)return;ob.copy(r).invert(),ww.copy(e.ray).applyMatrix4(ob);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=i.index,m=i.attributes.position;if(d!==null){const y=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let S=y,E=v;S<E;S++){const M=d.getX(S);N0.fromBufferAttribute(m,M),ab(N0,M,c,r,e,t,this)}}else{const y=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let S=y,E=v;S<E;S++)N0.fromBufferAttribute(m,S),ab(N0,S,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function ab(n,e,t,i,r,s,o){const l=ww.distanceSqToPoint(n);if(l<t){const c=new X;ww.closestPointToPoint(n,c),c.applyMatrix4(i);const d=r.ray.origin.distanceTo(c);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:o})}}class q4 extends ti{constructor(e,t,i,r,s,o,l,c,d){super(e,t,i,r,s,o,l,c,d),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ui,this.magFilter=s!==void 0?s:ui,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Y4 extends ti{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=li,this.minFilter=li,this.generateMipmaps=!1,this.needsUpdate=!0}}class kS extends ti{constructor(e,t,i,r,s,o,l,c,d,p,m,y){super(null,o,l,c,d,p,r,s,m,y),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class K4 extends kS{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=fr}}class J4 extends ti{constructor(e,t,i,r,s,o,l,c,d){super(e,t,i,r,s,o,l,c,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class To{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,c=s-1,d;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),d=i[r]-o,d<0)l=r+1;else if(d>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);const p=i[r],y=i[r+1]-p,v=(o-p)/y;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),c=t||(o.isVector2?new Le:new X);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new X,r=[],s=[],o=[],l=new X,c=new zt;for(let v=0;v<=e;v++){const S=v/e;r[v]=this.getTangentAt(S,new X)}s[0]=new X,o[0]=new X;let d=Number.MAX_VALUE;const p=Math.abs(r[0].x),m=Math.abs(r[0].y),y=Math.abs(r[0].z);p<=d&&(d=p,i.set(1,0,0)),m<=d&&(d=m,i.set(0,1,0)),y<=d&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),l.crossVectors(r[v-1],r[v]),l.length()>Number.EPSILON){l.normalize();const S=Math.acos(ei(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(l,S))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(ei(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(v=-v);for(let S=1;S<=e;S++)s[S].applyMatrix4(c.makeRotationAxis(r[S],v*S)),o[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class vv extends To{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t){const i=t||new Le,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),y=c-this.aX,v=d-this.aY;c=y*p-v*m+this.aX,d=y*m+v*p+this.aY}return i.set(c,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class V2 extends vv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function US(){let n=0,e=0,t=0,i=0;function r(s,o,l,c){n=s,e=l,t=-3*s+3*o-2*l-c,i=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,d){r(o,l,d*(l-s),d*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,d,p,m){let y=(o-s)/d-(l-s)/(d+p)+(l-o)/p,v=(l-o)/p-(c-o)/(p+m)+(c-l)/m;y*=p,v*=p,r(o,l,y,v)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const L0=new X,jx=new US,Xx=new US,$x=new US;class H2 extends To{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new X){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let d,p;this.closed||l>0?d=r[(l-1)%s]:(L0.subVectors(r[0],r[1]).add(r[0]),d=L0);const m=r[l%s],y=r[(l+1)%s];if(this.closed||l+2<s?p=r[(l+2)%s]:(L0.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=L0),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let S=Math.pow(d.distanceToSquared(m),v),E=Math.pow(m.distanceToSquared(y),v),M=Math.pow(y.distanceToSquared(p),v);E<1e-4&&(E=1),S<1e-4&&(S=E),M<1e-4&&(M=E),jx.initNonuniformCatmullRom(d.x,m.x,y.x,p.x,S,E,M),Xx.initNonuniformCatmullRom(d.y,m.y,y.y,p.y,S,E,M),$x.initNonuniformCatmullRom(d.z,m.z,y.z,p.z,S,E,M)}else this.curveType==="catmullrom"&&(jx.initCatmullRom(d.x,m.x,y.x,p.x,this.tension),Xx.initCatmullRom(d.y,m.y,y.y,p.y,this.tension),$x.initCatmullRom(d.z,m.z,y.z,p.z,this.tension));return i.set(jx.calc(c),Xx.calc(c),$x.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new X().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function lb(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*l+s*n+t}function Z4(n,e){const t=1-n;return t*t*e}function Q4(n,e){return 2*(1-n)*n*e}function eB(n,e){return n*n*e}function Gp(n,e,t,i){return Z4(n,e)+Q4(n,t)+eB(n,i)}function tB(n,e){const t=1-n;return t*t*t*e}function nB(n,e){const t=1-n;return 3*t*t*n*e}function iB(n,e){return 3*(1-n)*n*n*e}function rB(n,e){return n*n*n*e}function jp(n,e,t,i,r){return tB(n,e)+nB(n,t)+iB(n,i)+rB(n,r)}class OS extends To{constructor(e=new Le,t=new Le,i=new Le,r=new Le){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Le){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(jp(e,r.x,s.x,o.x,l.x),jp(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class W2 extends To{constructor(e=new X,t=new X,i=new X,r=new X){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new X){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(jp(e,r.x,s.x,o.x,l.x),jp(e,r.y,s.y,o.y,l.y),jp(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class xv extends To{constructor(e=new Le,t=new Le){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Le){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class G2 extends To{constructor(e=new X,t=new X){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new X){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new X){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FS extends To{constructor(e=new Le,t=new Le,i=new Le){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Le){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Gp(e,r.x,s.x,o.x),Gp(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BS extends To{constructor(e=new X,t=new X,i=new X){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new X){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Gp(e,r.x,s.x,o.x),Gp(e,r.y,s.y,o.y),Gp(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zS extends To{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Le){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,c=r[o===0?o:o-1],d=r[o],p=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return i.set(lb(l,c.x,d.x,p.x,m.x),lb(l,c.y,d.y,p.y,m.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Le().fromArray(r))}return this}}var VS=Object.freeze({__proto__:null,ArcCurve:V2,CatmullRomCurve3:H2,CubicBezierCurve:OS,CubicBezierCurve3:W2,EllipseCurve:vv,LineCurve:xv,LineCurve3:G2,QuadraticBezierCurve:FS,QuadraticBezierCurve3:BS,SplineCurve:zS});class j2 extends To{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new xv(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,l=this.curves[s],c=l.getLength(),d=c===0?0:1-o/c;return l.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let d=0;d<c.length;d++){const p=c[d];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new VS[r.type]().fromJSON(r))}return this}}class um extends j2{constructor(e){super(),this.type="Path",this.currentPoint=new Le,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new xv(this.currentPoint.clone(),new Le(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new FS(this.currentPoint.clone(),new Le(e,t),new Le(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new OS(this.currentPoint.clone(),new Le(e,t),new Le(i,r),new Le(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new zS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,c){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,i,r,s,o,l,c),this}absellipse(e,t,i,r,s,o,l,c){const d=new vv(e,t,i,r,s,o,l,c);if(this.curves.length>0){const m=d.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ad extends jt{constructor(e=[new Le(0,-.5),new Le(.5,0),new Le(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=ei(r,0,Math.PI*2);const s=[],o=[],l=[],c=[],d=[],p=1/t,m=new X,y=new Le,v=new X,S=new X,E=new X;let M=0,x=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:M=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,v.x=x*1,v.y=-M,v.z=x*0,E.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(E.x,E.y,E.z);break;default:M=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,v.x=x*1,v.y=-M,v.z=x*0,S.copy(v),v.x+=E.x,v.y+=E.y,v.z+=E.z,v.normalize(),c.push(v.x,v.y,v.z),E.copy(S)}for(let C=0;C<=t;C++){const T=i+C*p*r,P=Math.sin(T),I=Math.cos(T);for(let k=0;k<=e.length-1;k++){m.x=e[k].x*P,m.y=e[k].y,m.z=e[k].x*I,o.push(m.x,m.y,m.z),y.x=C/t,y.y=k/(e.length-1),l.push(y.x,y.y);const B=c[3*k+0]*P,z=c[3*k+1],U=c[3*k+0]*I;d.push(B,z,U)}}for(let C=0;C<t;C++)for(let T=0;T<e.length-1;T++){const P=T+C*e.length,I=P,k=P+e.length,B=P+e.length+1,z=P+1;s.push(I,k,z),s.push(B,z,k)}this.setIndex(s),this.setAttribute("position",new ht(o,3)),this.setAttribute("uv",new ht(l,2)),this.setAttribute("normal",new ht(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.points,e.segments,e.phiStart,e.phiLength)}}class Om extends ad{constructor(e=1,t=1,i=4,r=8){const s=new um;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Om(e.radius,e.length,e.capSegments,e.radialSegments)}}class Fm extends jt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],c=[],d=new X,p=new Le;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let m=0,y=3;m<=t;m++,y+=3){const v=i+m/t*r;d.x=e*Math.cos(v),d.y=e*Math.sin(v),o.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(o[y]/e+1)/2,p.y=(o[y+1]/e+1)/2,c.push(p.x,p.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new ht(o,3)),this.setAttribute("normal",new ht(l,3)),this.setAttribute("uv",new ht(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Xc extends jt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const d=this;r=Math.floor(r),s=Math.floor(s);const p=[],m=[],y=[],v=[];let S=0;const E=[],M=i/2;let x=0;C(),o===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(p),this.setAttribute("position",new ht(m,3)),this.setAttribute("normal",new ht(y,3)),this.setAttribute("uv",new ht(v,2));function C(){const P=new X,I=new X;let k=0;const B=(t-e)/i;for(let z=0;z<=s;z++){const U=[],F=z/s,K=F*(t-e)+e;for(let ae=0;ae<=r;ae++){const re=ae/r,H=re*c+l,se=Math.sin(H),ne=Math.cos(H);I.x=K*se,I.y=-F*i+M,I.z=K*ne,m.push(I.x,I.y,I.z),P.set(se,B,ne).normalize(),y.push(P.x,P.y,P.z),v.push(re,1-F),U.push(S++)}E.push(U)}for(let z=0;z<r;z++)for(let U=0;U<s;U++){const F=E[U][z],K=E[U+1][z],ae=E[U+1][z+1],re=E[U][z+1];p.push(F,K,re),p.push(K,ae,re),k+=6}d.addGroup(x,k,0),x+=k}function T(P){const I=S,k=new Le,B=new X;let z=0;const U=P===!0?e:t,F=P===!0?1:-1;for(let ae=1;ae<=r;ae++)m.push(0,M*F,0),y.push(0,F,0),v.push(.5,.5),S++;const K=S;for(let ae=0;ae<=r;ae++){const H=ae/r*c+l,se=Math.cos(H),ne=Math.sin(H);B.x=U*ne,B.y=M*F,B.z=U*se,m.push(B.x,B.y,B.z),y.push(0,F,0),k.x=se*.5+.5,k.y=ne*.5*F+.5,v.push(k.x,k.y),S++}for(let ae=0;ae<r;ae++){const re=I+ae,H=K+ae;P===!0?p.push(H,H+1,re):p.push(H+1,H,re),z+=3}d.addGroup(x,z,P===!0?1:2),x+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bm extends Xc{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Bm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ul extends jt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),d(i),p(),this.setAttribute("position",new ht(s,3)),this.setAttribute("normal",new ht(s.slice(),3)),this.setAttribute("uv",new ht(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(C){const T=new X,P=new X,I=new X;for(let k=0;k<t.length;k+=3)v(t[k+0],T),v(t[k+1],P),v(t[k+2],I),c(T,P,I,C)}function c(C,T,P,I){const k=I+1,B=[];for(let z=0;z<=k;z++){B[z]=[];const U=C.clone().lerp(P,z/k),F=T.clone().lerp(P,z/k),K=k-z;for(let ae=0;ae<=K;ae++)ae===0&&z===k?B[z][ae]=U:B[z][ae]=U.clone().lerp(F,ae/K)}for(let z=0;z<k;z++)for(let U=0;U<2*(k-z)-1;U++){const F=Math.floor(U/2);U%2===0?(y(B[z][F+1]),y(B[z+1][F]),y(B[z][F])):(y(B[z][F+1]),y(B[z+1][F+1]),y(B[z+1][F]))}}function d(C){const T=new X;for(let P=0;P<s.length;P+=3)T.x=s[P+0],T.y=s[P+1],T.z=s[P+2],T.normalize().multiplyScalar(C),s[P+0]=T.x,s[P+1]=T.y,s[P+2]=T.z}function p(){const C=new X;for(let T=0;T<s.length;T+=3){C.x=s[T+0],C.y=s[T+1],C.z=s[T+2];const P=M(C)/2/Math.PI+.5,I=x(C)/Math.PI+.5;o.push(P,1-I)}S(),m()}function m(){for(let C=0;C<o.length;C+=6){const T=o[C+0],P=o[C+2],I=o[C+4],k=Math.max(T,P,I),B=Math.min(T,P,I);k>.9&&B<.1&&(T<.2&&(o[C+0]+=1),P<.2&&(o[C+2]+=1),I<.2&&(o[C+4]+=1))}}function y(C){s.push(C.x,C.y,C.z)}function v(C,T){const P=C*3;T.x=e[P+0],T.y=e[P+1],T.z=e[P+2]}function S(){const C=new X,T=new X,P=new X,I=new X,k=new Le,B=new Le,z=new Le;for(let U=0,F=0;U<s.length;U+=9,F+=6){C.set(s[U+0],s[U+1],s[U+2]),T.set(s[U+3],s[U+4],s[U+5]),P.set(s[U+6],s[U+7],s[U+8]),k.set(o[F+0],o[F+1]),B.set(o[F+2],o[F+3]),z.set(o[F+4],o[F+5]),I.copy(C).add(T).add(P).divideScalar(3);const K=M(I);E(k,F+0,C,K),E(B,F+2,T,K),E(z,F+4,P,K)}}function E(C,T,P,I){I<0&&C.x===1&&(o[T]=C.x-1),P.x===0&&P.z===0&&(o[T]=I/2/Math.PI+.5)}function M(C){return Math.atan2(C.z,-C.x)}function x(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ul(e.vertices,e.indices,e.radius,e.details)}}class zm extends ul{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zm(e.radius,e.detail)}}const I0=new X,D0=new X,qx=new X,k0=new qr;class X2 extends jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Lc*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,d=[0,0,0],p=["a","b","c"],m=new Array(3),y={},v=[];for(let S=0;S<c;S+=3){o?(d[0]=o.getX(S),d[1]=o.getX(S+1),d[2]=o.getX(S+2)):(d[0]=S,d[1]=S+1,d[2]=S+2);const{a:E,b:M,c:x}=k0;if(E.fromBufferAttribute(l,d[0]),M.fromBufferAttribute(l,d[1]),x.fromBufferAttribute(l,d[2]),k0.getNormal(qx),m[0]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,m[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,m[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let C=0;C<3;C++){const T=(C+1)%3,P=m[C],I=m[T],k=k0[p[C]],B=k0[p[T]],z=`${P}_${I}`,U=`${I}_${P}`;U in y&&y[U]?(qx.dot(y[U].normal)<=s&&(v.push(k.x,k.y,k.z),v.push(B.x,B.y,B.z)),y[U]=null):z in y||(y[z]={index0:d[C],index1:d[T],normal:qx.clone()})}}for(const S in y)if(y[S]){const{index0:E,index1:M}=y[S];I0.fromBufferAttribute(l,E),D0.fromBufferAttribute(l,M),v.push(I0.x,I0.y,I0.z),v.push(D0.x,D0.y,D0.z)}this.setAttribute("position",new ht(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Dc extends um{constructor(e){super(e),this.uuid=ys(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new um().fromJSON(r))}return this}}const sB={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=$2(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,d,p,m,y,v;if(i&&(s=cB(n,e,s,t)),n.length>80*t){l=d=n[0],c=p=n[1];for(let S=t;S<r;S+=t)m=n[S],y=n[S+1],m<l&&(l=m),y<c&&(c=y),m>d&&(d=m),y>p&&(p=y);v=Math.max(d-l,p-c),v=v!==0?32767/v:0}return cm(s,o,t,l,c,v,0),o}};function $2(n,e,t,i,r){let s,o;if(r===wB(n,e,t,i)>0)for(s=e;s<t;s+=i)o=ub(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=ub(s,n[s],n[s+1],o);return o&&_v(o,o.next)&&(fm(o),o=o.next),o}function zc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(_v(t,t.next)||jn(t.prev,t,t.next)===0)){if(fm(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function cm(n,e,t,i,r,s,o){if(!n)return;!o&&s&&mB(n,i,r,s);let l=n,c,d;for(;n.prev!==n.next;){if(c=n.prev,d=n.next,s?aB(n,i,r,s):oB(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(d.i/t|0),fm(n),n=d.next,l=d.next;continue}if(n=d,n===l){o?o===1?(n=lB(zc(n),e,t),cm(n,e,t,i,r,s,2)):o===2&&uB(n,e,t,i,r,s):cm(zc(n),e,t,i,r,s,1);break}}}function oB(n){const e=n.prev,t=n,i=n.next;if(jn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,l=e.y,c=t.y,d=i.y,p=r<s?r<o?r:o:s<o?s:o,m=l<c?l<d?l:d:c<d?c:d,y=r>s?r>o?r:o:s>o?s:o,v=l>c?l>d?l:d:c>d?c:d;let S=i.next;for(;S!==e;){if(S.x>=p&&S.x<=y&&S.y>=m&&S.y<=v&&Nf(r,l,s,c,o,d,S.x,S.y)&&jn(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function aB(n,e,t,i){const r=n.prev,s=n,o=n.next;if(jn(r,s,o)>=0)return!1;const l=r.x,c=s.x,d=o.x,p=r.y,m=s.y,y=o.y,v=l<c?l<d?l:d:c<d?c:d,S=p<m?p<y?p:y:m<y?m:y,E=l>c?l>d?l:d:c>d?c:d,M=p>m?p>y?p:y:m>y?m:y,x=Sw(v,S,e,t,i),C=Sw(E,M,e,t,i);let T=n.prevZ,P=n.nextZ;for(;T&&T.z>=x&&P&&P.z<=C;){if(T.x>=v&&T.x<=E&&T.y>=S&&T.y<=M&&T!==r&&T!==o&&Nf(l,p,c,m,d,y,T.x,T.y)&&jn(T.prev,T,T.next)>=0||(T=T.prevZ,P.x>=v&&P.x<=E&&P.y>=S&&P.y<=M&&P!==r&&P!==o&&Nf(l,p,c,m,d,y,P.x,P.y)&&jn(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;T&&T.z>=x;){if(T.x>=v&&T.x<=E&&T.y>=S&&T.y<=M&&T!==r&&T!==o&&Nf(l,p,c,m,d,y,T.x,T.y)&&jn(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;P&&P.z<=C;){if(P.x>=v&&P.x<=E&&P.y>=S&&P.y<=M&&P!==r&&P!==o&&Nf(l,p,c,m,d,y,P.x,P.y)&&jn(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function lB(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!_v(r,s)&&q2(r,i,i.next,s)&&hm(r,s)&&hm(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),fm(i),fm(i.next),i=n=s),i=i.next}while(i!==n);return zc(i)}function uB(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&vB(o,l)){let c=Y2(o,l);o=zc(o,o.next),c=zc(c,c.next),cm(o,e,t,i,r,s,0),cm(c,e,t,i,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function cB(n,e,t,i){const r=[];let s,o,l,c,d;for(s=0,o=e.length;s<o;s++)l=e[s]*i,c=s<o-1?e[s+1]*i:n.length,d=$2(n,l,c,i,!1),d===d.next&&(d.steiner=!0),r.push(yB(d));for(r.sort(hB),s=0;s<r.length;s++)t=fB(r[s],t);return t}function hB(n,e){return n.x-e.x}function fB(n,e){const t=dB(n,e);if(!t)return e;const i=Y2(t,n);return zc(i,i.next),zc(t,t.next)}function dB(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>i&&(i=y,r=t.x<t.next.x?t:t.next,y===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,c=r.x,d=r.y;let p=1/0,m;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&Nf(o<d?s:i,o,c,d,o<d?i:s,o,t.x,t.y)&&(m=Math.abs(o-t.y)/(s-t.x),hm(t,n)&&(m<p||m===p&&(t.x>r.x||t.x===r.x&&pB(r,t)))&&(r=t,p=m)),t=t.next;while(t!==l);return r}function pB(n,e){return jn(n.prev,n,e.prev)<0&&jn(e.next,n,n.next)<0}function mB(n,e,t,i){let r=n;do r.z===0&&(r.z=Sw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,gB(r)}function gB(n){let e,t,i,r,s,o,l,c,d=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,l=0,e=0;e<d&&(l++,i=i.nextZ,!!i);e++);for(c=d;l>0||c>0&&i;)l!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,d*=2}while(o>1);return n}function Sw(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function yB(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Nf(n,e,t,i,r,s,o,l){return(r-o)*(e-l)>=(n-o)*(s-l)&&(n-o)*(i-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(i-l)}function vB(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!xB(n,e)&&(hm(n,e)&&hm(e,n)&&_B(n,e)&&(jn(n.prev,n,e.prev)||jn(n,e.prev,e))||_v(n,e)&&jn(n.prev,n,n.next)>0&&jn(e.prev,e,e.next)>0)}function jn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function _v(n,e){return n.x===e.x&&n.y===e.y}function q2(n,e,t,i){const r=O0(jn(n,e,t)),s=O0(jn(n,e,i)),o=O0(jn(t,i,n)),l=O0(jn(t,i,e));return!!(r!==s&&o!==l||r===0&&U0(n,t,e)||s===0&&U0(n,i,e)||o===0&&U0(t,n,i)||l===0&&U0(t,e,i))}function U0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function O0(n){return n>0?1:n<0?-1:0}function xB(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&q2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function hm(n,e){return jn(n.prev,n,n.next)<0?jn(n,e,n.next)>=0&&jn(n,n.prev,e)>=0:jn(n,e,n.prev)<0||jn(n,n.next,e)<0}function _B(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Y2(n,e){const t=new Mw(n.i,n.x,n.y),i=new Mw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function ub(n,e,t,i){const r=new Mw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function fm(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Mw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wB(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class ea{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ea.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];cb(e),hb(i,e);let o=e.length;t.forEach(cb);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,hb(i,t[c]);const l=sB.triangulate(i,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function cb(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function hb(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Vm extends jt{constructor(e=new Dc([new Le(.5,.5),new Le(-.5,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const d=e[l];o(d)}this.setAttribute("position",new ht(r,3)),this.setAttribute("uv",new ht(s,2)),this.computeVertexNormals();function o(l){const c=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:v-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:SB;let T,P=!1,I,k,B,z;x&&(T=x.getSpacedPoints(p),P=!0,y=!1,I=x.computeFrenetFrames(p,!1),k=new X,B=new X,z=new X),y||(M=0,v=0,S=0,E=0);const U=l.extractPoints(d);let F=U.shape;const K=U.holes;if(!ea.isClockWise(F)){F=F.reverse();for(let Re=0,Se=K.length;Re<Se;Re++){const Ne=K[Re];ea.isClockWise(Ne)&&(K[Re]=Ne.reverse())}}const re=ea.triangulateShape(F,K),H=F;for(let Re=0,Se=K.length;Re<Se;Re++){const Ne=K[Re];F=F.concat(Ne)}function se(Re,Se,Ne){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Re.clone().addScaledVector(Se,Ne)}const ne=F.length,ie=re.length;function V(Re,Se,Ne){let tt,Ge,yt;const xt=Re.x-Se.x,pt=Re.y-Se.y,bt=Ne.x-Re.x,Vt=Ne.y-Re.y,Y=xt*xt+pt*pt,W=xt*Vt-pt*bt;if(Math.abs(W)>Number.EPSILON){const _e=Math.sqrt(Y),Oe=Math.sqrt(bt*bt+Vt*Vt),Fe=Se.x-pt/_e,Xe=Se.y+xt/_e,vt=Ne.x-Vt/Oe,Qe=Ne.y+bt/Oe,Ae=((vt-Fe)*Vt-(Qe-Xe)*bt)/(xt*Vt-pt*bt);tt=Fe+xt*Ae-Re.x,Ge=Xe+pt*Ae-Re.y;const rt=tt*tt+Ge*Ge;if(rt<=2)return new Le(tt,Ge);yt=Math.sqrt(rt/2)}else{let _e=!1;xt>Number.EPSILON?bt>Number.EPSILON&&(_e=!0):xt<-Number.EPSILON?bt<-Number.EPSILON&&(_e=!0):Math.sign(pt)===Math.sign(Vt)&&(_e=!0),_e?(tt=-pt,Ge=xt,yt=Math.sqrt(Y)):(tt=xt,Ge=pt,yt=Math.sqrt(Y/2))}return new Le(tt/yt,Ge/yt)}const te=[];for(let Re=0,Se=H.length,Ne=Se-1,tt=Re+1;Re<Se;Re++,Ne++,tt++)Ne===Se&&(Ne=0),tt===Se&&(tt=0),te[Re]=V(H[Re],H[Ne],H[tt]);const $=[];let G,Z=te.concat();for(let Re=0,Se=K.length;Re<Se;Re++){const Ne=K[Re];G=[];for(let tt=0,Ge=Ne.length,yt=Ge-1,xt=tt+1;tt<Ge;tt++,yt++,xt++)yt===Ge&&(yt=0),xt===Ge&&(xt=0),G[tt]=V(Ne[tt],Ne[yt],Ne[xt]);$.push(G),Z=Z.concat(G)}for(let Re=0;Re<M;Re++){const Se=Re/M,Ne=v*Math.cos(Se*Math.PI/2),tt=S*Math.sin(Se*Math.PI/2)+E;for(let Ge=0,yt=H.length;Ge<yt;Ge++){const xt=se(H[Ge],te[Ge],tt);ee(xt.x,xt.y,-Ne)}for(let Ge=0,yt=K.length;Ge<yt;Ge++){const xt=K[Ge];G=$[Ge];for(let pt=0,bt=xt.length;pt<bt;pt++){const Vt=se(xt[pt],G[pt],tt);ee(Vt.x,Vt.y,-Ne)}}}const ce=S+E;for(let Re=0;Re<ne;Re++){const Se=y?se(F[Re],Z[Re],ce):F[Re];P?(B.copy(I.normals[0]).multiplyScalar(Se.x),k.copy(I.binormals[0]).multiplyScalar(Se.y),z.copy(T[0]).add(B).add(k),ee(z.x,z.y,z.z)):ee(Se.x,Se.y,0)}for(let Re=1;Re<=p;Re++)for(let Se=0;Se<ne;Se++){const Ne=y?se(F[Se],Z[Se],ce):F[Se];P?(B.copy(I.normals[Re]).multiplyScalar(Ne.x),k.copy(I.binormals[Re]).multiplyScalar(Ne.y),z.copy(T[Re]).add(B).add(k),ee(z.x,z.y,z.z)):ee(Ne.x,Ne.y,m/p*Re)}for(let Re=M-1;Re>=0;Re--){const Se=Re/M,Ne=v*Math.cos(Se*Math.PI/2),tt=S*Math.sin(Se*Math.PI/2)+E;for(let Ge=0,yt=H.length;Ge<yt;Ge++){const xt=se(H[Ge],te[Ge],tt);ee(xt.x,xt.y,m+Ne)}for(let Ge=0,yt=K.length;Ge<yt;Ge++){const xt=K[Ge];G=$[Ge];for(let pt=0,bt=xt.length;pt<bt;pt++){const Vt=se(xt[pt],G[pt],tt);P?ee(Vt.x,Vt.y+T[p-1].y,T[p-1].x+Ne):ee(Vt.x,Vt.y,m+Ne)}}}fe(),Ee();function fe(){const Re=r.length/3;if(y){let Se=0,Ne=ne*Se;for(let tt=0;tt<ie;tt++){const Ge=re[tt];Ve(Ge[2]+Ne,Ge[1]+Ne,Ge[0]+Ne)}Se=p+M*2,Ne=ne*Se;for(let tt=0;tt<ie;tt++){const Ge=re[tt];Ve(Ge[0]+Ne,Ge[1]+Ne,Ge[2]+Ne)}}else{for(let Se=0;Se<ie;Se++){const Ne=re[Se];Ve(Ne[2],Ne[1],Ne[0])}for(let Se=0;Se<ie;Se++){const Ne=re[Se];Ve(Ne[0]+ne*p,Ne[1]+ne*p,Ne[2]+ne*p)}}i.addGroup(Re,r.length/3-Re,0)}function Ee(){const Re=r.length/3;let Se=0;be(H,Se),Se+=H.length;for(let Ne=0,tt=K.length;Ne<tt;Ne++){const Ge=K[Ne];be(Ge,Se),Se+=Ge.length}i.addGroup(Re,r.length/3-Re,1)}function be(Re,Se){let Ne=Re.length;for(;--Ne>=0;){const tt=Ne;let Ge=Ne-1;Ge<0&&(Ge=Re.length-1);for(let yt=0,xt=p+M*2;yt<xt;yt++){const pt=ne*yt,bt=ne*(yt+1),Vt=Se+tt+pt,Y=Se+Ge+pt,W=Se+Ge+bt,_e=Se+tt+bt;je(Vt,Y,W,_e)}}}function ee(Re,Se,Ne){c.push(Re),c.push(Se),c.push(Ne)}function Ve(Re,Se,Ne){Ie(Re),Ie(Se),Ie(Ne);const tt=r.length/3,Ge=C.generateTopUV(i,r,tt-3,tt-2,tt-1);Ke(Ge[0]),Ke(Ge[1]),Ke(Ge[2])}function je(Re,Se,Ne,tt){Ie(Re),Ie(Se),Ie(tt),Ie(Se),Ie(Ne),Ie(tt);const Ge=r.length/3,yt=C.generateSideWallUV(i,r,Ge-6,Ge-3,Ge-2,Ge-1);Ke(yt[0]),Ke(yt[1]),Ke(yt[3]),Ke(yt[1]),Ke(yt[2]),Ke(yt[3])}function Ie(Re){r.push(c[Re*3+0]),r.push(c[Re*3+1]),r.push(c[Re*3+2])}function Ke(Re){s.push(Re.x),s.push(Re.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return MB(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new VS[r.type]().fromJSON(r)),new Vm(i,e.options)}}const SB={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],c=e[i*3+1],d=e[r*3],p=e[r*3+1];return[new Le(s,o),new Le(l,c),new Le(d,p)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],d=e[i*3],p=e[i*3+1],m=e[i*3+2],y=e[r*3],v=e[r*3+1],S=e[r*3+2],E=e[s*3],M=e[s*3+1],x=e[s*3+2];return Math.abs(l-p)<Math.abs(o-d)?[new Le(o,1-c),new Le(d,1-m),new Le(y,1-S),new Le(E,1-x)]:[new Le(l,1-c),new Le(p,1-m),new Le(v,1-S),new Le(M,1-x)]}};function MB(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Hm extends ul{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hm(e.radius,e.detail)}}class ld extends ul{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ld(e.radius,e.detail)}}class Wm extends jt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],d=[],p=[];let m=e;const y=(t-e)/r,v=new X,S=new Le;for(let E=0;E<=r;E++){for(let M=0;M<=i;M++){const x=s+M/i*o;v.x=m*Math.cos(x),v.y=m*Math.sin(x),c.push(v.x,v.y,v.z),d.push(0,0,1),S.x=(v.x/t+1)/2,S.y=(v.y/t+1)/2,p.push(S.x,S.y)}m+=y}for(let E=0;E<r;E++){const M=E*(i+1);for(let x=0;x<i;x++){const C=x+M,T=C,P=C+i+1,I=C+i+2,k=C+1;l.push(T,P,k),l.push(P,I,k)}}this.setIndex(l),this.setAttribute("position",new ht(c,3)),this.setAttribute("normal",new ht(d,3)),this.setAttribute("uv",new ht(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Gm extends jt{constructor(e=new Dc([new Le(0,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new ht(r,3)),this.setAttribute("normal",new ht(s,3)),this.setAttribute("uv",new ht(o,2));function d(p){const m=r.length/3,y=p.extractPoints(t);let v=y.shape;const S=y.holes;ea.isClockWise(v)===!1&&(v=v.reverse());for(let M=0,x=S.length;M<x;M++){const C=S[M];ea.isClockWise(C)===!0&&(S[M]=C.reverse())}const E=ea.triangulateShape(v,S);for(let M=0,x=S.length;M<x;M++){const C=S[M];v=v.concat(C)}for(let M=0,x=v.length;M<x;M++){const C=v[M];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let M=0,x=E.length;M<x;M++){const C=E[M],T=C[0]+m,P=C[1]+m,I=C[2]+m;i.push(T,P,I),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return EB(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Gm(i,e.curveSegments)}}function EB(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class ud extends jt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+l,Math.PI);let d=0;const p=[],m=new X,y=new X,v=[],S=[],E=[],M=[];for(let x=0;x<=i;x++){const C=[],T=x/i;let P=0;x===0&&o===0?P=.5/t:x===i&&c===Math.PI&&(P=-.5/t);for(let I=0;I<=t;I++){const k=I/t;m.x=-e*Math.cos(r+k*s)*Math.sin(o+T*l),m.y=e*Math.cos(o+T*l),m.z=e*Math.sin(r+k*s)*Math.sin(o+T*l),S.push(m.x,m.y,m.z),y.copy(m).normalize(),E.push(y.x,y.y,y.z),M.push(k+P,1-T),C.push(d++)}p.push(C)}for(let x=0;x<i;x++)for(let C=0;C<t;C++){const T=p[x][C+1],P=p[x][C],I=p[x+1][C],k=p[x+1][C+1];(x!==0||o>0)&&v.push(T,P,k),(x!==i-1||c<Math.PI)&&v.push(P,I,k)}this.setIndex(v),this.setAttribute("position",new ht(S,3)),this.setAttribute("normal",new ht(E,3)),this.setAttribute("uv",new ht(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ud(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class jm extends ul{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jm(e.radius,e.detail)}}class Xm extends jt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],d=[],p=new X,m=new X,y=new X;for(let v=0;v<=i;v++)for(let S=0;S<=r;S++){const E=S/r*s,M=v/i*Math.PI*2;m.x=(e+t*Math.cos(M))*Math.cos(E),m.y=(e+t*Math.cos(M))*Math.sin(E),m.z=t*Math.sin(M),l.push(m.x,m.y,m.z),p.x=e*Math.cos(E),p.y=e*Math.sin(E),y.subVectors(m,p).normalize(),c.push(y.x,y.y,y.z),d.push(S/r),d.push(v/i)}for(let v=1;v<=i;v++)for(let S=1;S<=r;S++){const E=(r+1)*v+S-1,M=(r+1)*(v-1)+S-1,x=(r+1)*(v-1)+S,C=(r+1)*v+S;o.push(E,M,C),o.push(M,x,C)}this.setIndex(o),this.setAttribute("position",new ht(l,3)),this.setAttribute("normal",new ht(c,3)),this.setAttribute("uv",new ht(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $m extends jt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],d=[],p=[],m=new X,y=new X,v=new X,S=new X,E=new X,M=new X,x=new X;for(let T=0;T<=i;++T){const P=T/i*s*Math.PI*2;C(P,s,o,e,v),C(P+.01,s,o,e,S),M.subVectors(S,v),x.addVectors(S,v),E.crossVectors(M,x),x.crossVectors(E,M),E.normalize(),x.normalize();for(let I=0;I<=r;++I){const k=I/r*Math.PI*2,B=-t*Math.cos(k),z=t*Math.sin(k);m.x=v.x+(B*x.x+z*E.x),m.y=v.y+(B*x.y+z*E.y),m.z=v.z+(B*x.z+z*E.z),c.push(m.x,m.y,m.z),y.subVectors(m,v).normalize(),d.push(y.x,y.y,y.z),p.push(T/i),p.push(I/r)}}for(let T=1;T<=i;T++)for(let P=1;P<=r;P++){const I=(r+1)*(T-1)+(P-1),k=(r+1)*T+(P-1),B=(r+1)*T+P,z=(r+1)*(T-1)+P;l.push(I,k,z),l.push(k,B,z)}this.setIndex(l),this.setAttribute("position",new ht(c,3)),this.setAttribute("normal",new ht(d,3)),this.setAttribute("uv",new ht(p,2));function C(T,P,I,k,B){const z=Math.cos(T),U=Math.sin(T),F=I/P*T,K=Math.cos(F);B.x=k*(2+K)*.5*z,B.y=k*(2+K)*U*.5,B.z=k*Math.sin(F)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $m(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class qm extends jt{constructor(e=new BS(new X(-1,-1,0),new X(-1,1,0),new X(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new X,c=new X,d=new Le;let p=new X;const m=[],y=[],v=[],S=[];E(),this.setIndex(S),this.setAttribute("position",new ht(m,3)),this.setAttribute("normal",new ht(y,3)),this.setAttribute("uv",new ht(v,2));function E(){for(let T=0;T<t;T++)M(T);M(s===!1?t:0),C(),x()}function M(T){p=e.getPointAt(T/t,p);const P=o.normals[T],I=o.binormals[T];for(let k=0;k<=r;k++){const B=k/r*Math.PI*2,z=Math.sin(B),U=-Math.cos(B);c.x=U*P.x+z*I.x,c.y=U*P.y+z*I.y,c.z=U*P.z+z*I.z,c.normalize(),y.push(c.x,c.y,c.z),l.x=p.x+i*c.x,l.y=p.y+i*c.y,l.z=p.z+i*c.z,m.push(l.x,l.y,l.z)}}function x(){for(let T=1;T<=t;T++)for(let P=1;P<=r;P++){const I=(r+1)*(T-1)+(P-1),k=(r+1)*T+(P-1),B=(r+1)*T+P,z=(r+1)*(T-1)+P;S.push(I,k,z),S.push(k,B,z)}}function C(){for(let T=0;T<=t;T++)for(let P=0;P<=r;P++)d.x=T/t,d.y=P/r,v.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new qm(new VS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class K2 extends jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new X,s=new X;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,p=c.length;d<p;++d){const m=c[d],y=m.start,v=m.count;for(let S=y,E=y+v;S<E;S+=3)for(let M=0;M<3;M++){const x=l.getX(S+M),C=l.getX(S+(M+1)%3);r.fromBufferAttribute(o,x),s.fromBufferAttribute(o,C),fb(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let d=0;d<3;d++){const p=3*l+d,m=3*l+(d+1)%3;r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,m),fb(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function fb(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var db=Object.freeze({__proto__:null,BoxGeometry:mu,CapsuleGeometry:Om,CircleGeometry:Fm,ConeGeometry:Bm,CylinderGeometry:Xc,DodecahedronGeometry:zm,EdgesGeometry:X2,ExtrudeGeometry:Vm,IcosahedronGeometry:Hm,LatheGeometry:ad,OctahedronGeometry:ld,PlaneGeometry:sd,PolyhedronGeometry:ul,RingGeometry:Wm,ShapeGeometry:Gm,SphereGeometry:ud,TetrahedronGeometry:jm,TorusGeometry:Xm,TorusKnotGeometry:$m,TubeGeometry:qm,WireframeGeometry:K2});class J2 extends er{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Z2 extends bo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class HS extends er{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=du,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Q2 extends HS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ei(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new et(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class eP extends er{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new et(16777215),this.specular=new et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=du,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Nm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tP extends er{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=du,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class nP extends er{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=du,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class iP extends er{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=du,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Nm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rP extends er{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=du,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sP extends Rr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Fs(n,e,t){return WS(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Tc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function WS(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function oP(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Ew(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[l+c]}return r}function GS(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function bB(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const d=s.tracks[c],p=d.getValueSize(),m=[],y=[];for(let v=0;v<d.times.length;++v){const S=d.times[v]*r;if(!(S<t||S>=i)){m.push(d.times[v]);for(let E=0;E<p;++E)y.push(d.values[v*p+E])}}m.length!==0&&(d.times=Tc(m,d.times.constructor),d.values=Tc(y,d.values.constructor),o.push(d))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function TB(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const d=n.tracks.find(function(x){return x.name===l.name&&x.ValueTypeName===c});if(d===void 0)continue;let p=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let y=0;const v=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);const S=l.times.length-1;let E;if(s<=l.times[0]){const x=p,C=m-p;E=Fs(l.values,x,C)}else if(s>=l.times[S]){const x=S*m+p,C=x+m-p;E=Fs(l.values,x,C)}else{const x=l.createInterpolant(),C=p,T=m-p;x.evaluate(s),E=Fs(x.resultBuffer,C,T)}c==="quaternion"&&new Jr().fromArray(E).normalize().conjugate().toArray(E);const M=d.times.length;for(let x=0;x<M;++x){const C=x*v+y;if(c==="quaternion")Jr.multiplyQuaternionsFlat(d.values,C,E,0,d.values,C);else{const T=v-y*2;for(let P=0;P<T;++P)d.values[C+P]-=E[P]}}}return n.blendMode=wS,n}const AB={arraySlice:Fs,convertArray:Tc,isTypedArray:WS,getKeyframeOrder:oP,sortedArray:Ew,flattenJSON:GS,subclip:bB,makeClipAdditive:TB};class Ym{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const l=i+o>>>1;e<t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class aP extends Ym{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Mc,endingEnd:Mc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case Ec:s=e,l=2*t-i;break;case om:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Ec:o=e,c=2*i-t;break;case om:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const d=(i-t)*.5,p=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(c-i),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,p=this._offsetPrev,m=this._offsetNext,y=this._weightPrev,v=this._weightNext,S=(i-t)/(r-t),E=S*S,M=E*S,x=-y*M+2*y*E-y*S,C=(1+y)*M+(-1.5-2*y)*E+(-.5+y)*S+1,T=(-1-v)*M+(1.5+v)*E+.5*S,P=v*M-v*E;for(let I=0;I!==l;++I)s[I]=x*o[p+I]+C*o[d+I]+T*o[c+I]+P*o[m+I];return s}}class jS extends Ym{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,p=(i-t)/(r-t),m=1-p;for(let y=0;y!==l;++y)s[y]=o[d+y]*m+o[c+y]*p;return s}}class lP extends Ym{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ao{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Tc(t,this.TimeBufferType),this.values=Tc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Tc(e.times,Array),values:Tc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new lP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new jS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new aP(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case rm:t=this.InterpolantFactoryMethodDiscrete;break;case sm:t=this.InterpolantFactoryMethodLinear;break;case py:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return rm;case this.InterpolantFactoryMethodLinear:return sm;case this.InterpolantFactoryMethodSmooth:return py}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=Fs(i,s,o),this.values=Fs(this.values,s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&WS(r))for(let l=0,c=r.length;l!==c;++l){const d=r[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=Fs(this.times),t=Fs(this.values),i=this.getValueSize(),r=this.getInterpolation()===py,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const d=e[l],p=e[l+1];if(d!==p&&(l!==1||d!==e[0]))if(r)c=!0;else{const m=l*i,y=m-i,v=m+i;for(let S=0;S!==i;++S){const E=t[m+S];if(E!==t[y+S]||E!==t[v+S]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const m=l*i,y=o*i;for(let v=0;v!==i;++v)t[y+v]=t[m+v]}++o}}if(s>0){e[o]=e[s];for(let l=s*i,c=o*i,d=0;d!==i;++d)t[c+d]=t[l+d];++o}return o!==e.length?(this.times=Fs(e,0,o),this.values=Fs(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Fs(this.times,0),t=Fs(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ao.prototype.TimeBufferType=Float32Array;Ao.prototype.ValueBufferType=Float32Array;Ao.prototype.DefaultInterpolation=sm;class $c extends Ao{}$c.prototype.ValueTypeName="bool";$c.prototype.ValueBufferType=Array;$c.prototype.DefaultInterpolation=rm;$c.prototype.InterpolantFactoryMethodLinear=void 0;$c.prototype.InterpolantFactoryMethodSmooth=void 0;class XS extends Ao{}XS.prototype.ValueTypeName="color";class dm extends Ao{}dm.prototype.ValueTypeName="number";class uP extends Ym{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let d=e*l;for(let p=d+l;d!==p;d+=4)Jr.slerpFlat(s,0,o,d-l,o,d,c);return s}}class cd extends Ao{InterpolantFactoryMethodLinear(e){return new uP(this.times,this.values,this.getValueSize(),e)}}cd.prototype.ValueTypeName="quaternion";cd.prototype.DefaultInterpolation=sm;cd.prototype.InterpolantFactoryMethodSmooth=void 0;class qc extends Ao{}qc.prototype.ValueTypeName="string";qc.prototype.ValueBufferType=Array;qc.prototype.DefaultInterpolation=rm;qc.prototype.InterpolantFactoryMethodLinear=void 0;qc.prototype.InterpolantFactoryMethodSmooth=void 0;class pm extends Ao{}pm.prototype.ValueTypeName="vector";class mm{constructor(e,t=-1,i,r=uv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ys(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(PB(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ao.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],d=[];c.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const p=oP(c);c=Ew(c,1,p),d=Ew(d,1,p),!r&&c[0]===0&&(c.push(s),d.push(d[0])),o.push(new dm(".morphTargetInfluences["+t[l].name+"]",c,d).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const d=e[l],p=d.name.match(s);if(p&&p.length>1){const m=p[1];let y=r[m];y||(r[m]=y=[]),y.push(d)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,y,v,S,E){if(v.length!==0){const M=[],x=[];GS(v,M,x,S),M.length!==0&&E.push(new m(y,M,x))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const y=d[m].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const v={};let S;for(S=0;S<y.length;S++)if(y[S].morphTargets)for(let E=0;E<y[S].morphTargets.length;E++)v[y[S].morphTargets[E]]=-1;for(const E in v){const M=[],x=[];for(let C=0;C!==y[S].morphTargets.length;++C){const T=y[S];M.push(T.time),x.push(T.morphTarget===E?1:0)}r.push(new dm(".morphTargetInfluence["+E+"]",M,x))}c=v.length*o}else{const v=".bones["+t[m].name+"]";i(pm,v+".position",y,"pos",r),i(cd,v+".quaternion",y,"rot",r),i(pm,v+".scale",y,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function CB(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dm;case"vector":case"vector2":case"vector3":case"vector4":return pm;case"color":return XS;case"quaternion":return cd;case"bool":case"boolean":return $c;case"string":return qc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function PB(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=CB(n.type);if(n.times===void 0){const t=[],i=[];GS(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Vc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $S{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,c;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){l++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,m){return d.push(p,m),this},this.removeHandler=function(p){const m=d.indexOf(p);return m!==-1&&d.splice(m,2),this},this.getHandler=function(p){for(let m=0,y=d.length;m<y;m+=2){const v=d[m],S=d[m+1];if(v.global&&(v.lastIndex=0),v.test(p))return S}return null}}}const cP=new $S;class ws{constructor(e){this.manager=e!==void 0?e:cP,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Xa={};class RB extends Error{constructor(e,t){super(e),this.response=t}}class sl extends ws{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Vc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Xa[e]!==void 0){Xa[e].push({onLoad:t,onProgress:i,onError:r});return}Xa[e]=[],Xa[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=Xa[e],m=d.body.getReader(),y=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),v=y?parseInt(y):0,S=v!==0;let E=0;const M=new ReadableStream({start(x){C();function C(){m.read().then(({done:T,value:P})=>{if(T)x.close();else{E+=P.byteLength;const I=new ProgressEvent("progress",{lengthComputable:S,loaded:E,total:v});for(let k=0,B=p.length;k<B;k++){const z=p[k];z.onProgress&&z.onProgress(I)}x.enqueue(P),C()}})}}});return new Response(M)}else throw new RB(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(c){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return d.json();default:if(l===void 0)return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),y=m&&m[1]?m[1].toLowerCase():void 0,v=new TextDecoder(y);return d.arrayBuffer().then(S=>v.decode(S))}}}).then(d=>{Vc.add(e,d);const p=Xa[e];delete Xa[e];for(let m=0,y=p.length;m<y;m++){const v=p[m];v.onLoad&&v.onLoad(d)}}).catch(d=>{const p=Xa[e];if(p===void 0)throw this.manager.itemError(e),d;delete Xa[e];for(let m=0,y=p.length;m<y;m++){const v=p[m];v.onError&&v.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class NB extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new sl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=mm.parse(e[i]);t.push(r)}return t}}class LB extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new kS,c=new sl(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let d=0;function p(m){c.load(e[m],function(y){const v=s.parse(y,!0);o[m]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},d+=1,d===6&&(v.mipmapCount===1&&(l.minFilter=ui),l.image=o,l.format=v.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let m=0,y=e.length;m<y;++m)p(m);else c.load(e,function(m){const y=s.parse(m,!0);if(y.isCubemap){const v=y.mipmaps.length/y.mipmapCount;for(let S=0;S<v;S++){o[S]={mipmaps:[]};for(let E=0;E<y.mipmapCount;E++)o[S].mipmaps.push(y.mipmaps[S*y.mipmapCount+E]),o[S].format=y.format,o[S].width=y.width,o[S].height=y.height}l.image=o}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=ui),l.format=y.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class gm extends ws{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Vc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=lm("img");function c(){p(),Vc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(m){p(),r&&r(m),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class IB extends ws{constructor(e){super(e)}load(e,t,i,r){const s=new km,o=new gm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(d){o.load(e[d],function(p){s.images[d]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let d=0;d<e.length;++d)c(d);return s}}class DB extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new zf,l=new sl(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){const d=s.parse(c);d&&(d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:fr,o.wrapT=d.wrapT!==void 0?d.wrapT:fr,o.magFilter=d.magFilter!==void 0?d.magFilter:ui,o.minFilter=d.minFilter!==void 0?d.minFilter:ui,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0?o.colorSpace=d.colorSpace:d.encoding!==void 0&&(o.encoding=d.encoding),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=uu),d.mipmapCount===1&&(o.minFilter=ui),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d))},i,r),o}}class kB extends ws{constructor(e){super(e)}load(e,t,i,r){const s=new ti,o=new gm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class gu extends pn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class hP extends gu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Yx=new zt,pb=new X,mb=new X;class qS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Le(512,512),this.map=null,this.mapPass=null,this.matrix=new zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hv,this._frameExtents=new Le(1,1),this._viewportCount=1,this._viewports=[new _n(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;pb.setFromMatrixPosition(e.matrixWorld),t.position.copy(pb),mb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(mb),t.updateMatrixWorld(),Yx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Yx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class UB extends qS{constructor(){super(new zi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=qf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fP extends gu{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.target=new pn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new UB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const gb=new zt,wp=new X,Kx=new X;class OB extends qS{constructor(){super(new zi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Le(4,2),this._viewportCount=6,this._viewports=[new _n(2,1,1,1),new _n(0,1,1,1),new _n(3,1,1,1),new _n(1,1,1,1),new _n(3,0,1,1),new _n(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),wp.setFromMatrixPosition(e.matrixWorld),i.position.copy(wp),Kx.copy(i.position),Kx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Kx),i.updateMatrixWorld(),r.makeTranslation(-wp.x,-wp.y,-wp.z),gb.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gb)}}class dP extends gu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new OB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class FB extends qS{constructor(){super(new Um(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pP extends gu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.target=new pn,this.shadow=new FB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mP extends gu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class gP extends gu{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class yP{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new X)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class wv extends gu{constructor(e=new yP,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Sv extends ws{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new sl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Sv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new et().setHex(o.value);break;case"v2":r.uniforms[s].value=new Le().fromArray(o.value);break;case"v3":r.uniforms[s].value=new X().fromArray(o.value);break;case"v4":r.uniforms[s].value=new _n().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Jt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new zt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Le().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Le().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:J2,SpriteMaterial:IS,RawShaderMaterial:Z2,ShaderMaterial:bo,PointsMaterial:yv,MeshPhysicalMaterial:Q2,MeshStandardMaterial:HS,MeshPhongMaterial:eP,MeshToonMaterial:tP,MeshNormalMaterial:nP,MeshLambertMaterial:iP,MeshDepthMaterial:RS,MeshDistanceMaterial:NS,MeshBasicMaterial:pu,MeshMatcapMaterial:rP,LineDashedMaterial:sP,LineBasicMaterial:Rr,Material:er};return new t[e]}}class bw{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class vP extends jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class xP extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new sl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,S){if(t[S]!==void 0)return t[S];const M=v.interleavedBuffers[S],x=s(v,M.buffer),C=Cf(M.type,x),T=new mv(C,M.stride);return T.uuid=M.uuid,t[S]=T,T}function s(v,S){if(i[S]!==void 0)return i[S];const M=v.arrayBuffers[S],x=new Uint32Array(M).buffer;return i[S]=x,x}const o=e.isInstancedBufferGeometry?new vP:new jt,l=e.data.index;if(l!==void 0){const v=Cf(l.type,l.array);o.setIndex(new Cn(v,1))}const c=e.data.attributes;for(const v in c){const S=c[v];let E;if(S.isInterleavedBufferAttribute){const M=r(e.data,S.data);E=new Bc(M,S.itemSize,S.offset,S.normalized)}else{const M=Cf(S.type,S.array),x=S.isInstancedBufferAttribute?Kf:Cn;E=new x(M,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),S.usage!==void 0&&E.setUsage(S.usage),S.updateRange!==void 0&&(E.updateRange.offset=S.updateRange.offset,E.updateRange.count=S.updateRange.count),o.setAttribute(v,E)}const d=e.data.morphAttributes;if(d)for(const v in d){const S=d[v],E=[];for(let M=0,x=S.length;M<x;M++){const C=S[M];let T;if(C.isInterleavedBufferAttribute){const P=r(e.data,C.data);T=new Bc(P,C.itemSize,C.offset,C.normalized)}else{const P=Cf(C.type,C.array);T=new Cn(P,C.itemSize,C.normalized)}C.name!==void 0&&(T.name=C.name),E.push(T)}o.morphAttributes[v]=E}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let v=0,S=m.length;v!==S;++v){const E=m[v];o.addGroup(E.start,E.count,E.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const v=new X;y.center!==void 0&&v.fromArray(y.center),o.boundingSphere=new sa(v,y.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class BB extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?bw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new sl(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let d=null;try{d=JSON.parse(c)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?bw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new sl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,c,l,i),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),t!==void 0){let m=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,t),d=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,d),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Dc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new gv().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new xP;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in db?l=db[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Sv;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=mm.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const d=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return o(p)}else return c.data?{data:Cf(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new $S(t);s=new gm(c),s.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const m=e[d],y=m.url;if(Array.isArray(y)){const v=[];for(let S=0,E=y.length;S<E;S++){const M=y[S],x=l(M);x!==null&&(x instanceof HTMLImageElement?v.push(x):v.push(new zf(x.data,x.width,x.height)))}r[m.uuid]=new bc(v)}else{const v=l(m.url);r[m.uuid]=new bc(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return o.data?{data:Cf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new gm(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],d=c.url;if(Array.isArray(d)){const p=[];for(let m=0,y=d.length;m<y;m++){const v=d[m],S=await s(v);S!==null&&(S instanceof HTMLImageElement?p.push(S):p.push(new zf(S.data,S.width,S.height)))}i[c.uuid]=new bc(p)}else{const p=await s(c.url);i[c.uuid]=new bc(p)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],d=c.data;let p;Array.isArray(d)?(p=new km,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new zf:p=new ti,d&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=i(l.mapping,zB)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=i(l.wrap[0],yb),p.wrapT=i(l.wrap[1],yb)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.encoding!==void 0&&(p.encoding=l.encoding),l.minFilter!==void 0&&(p.minFilter=i(l.minFilter,vb)),l.magFilter!==void 0&&(p.magFilter=i(l.magFilter,vb)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,i,r,s){let o;function l(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function c(y){if(y!==void 0){if(Array.isArray(y)){const v=[];for(let S=0,E=y.length;S<E;S++){const M=y[S];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),v.push(i[M])}return v}return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),i[y]}}function d(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let p,m;switch(e.type){case"Scene":o=new Uy,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new et(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new pv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new dv(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new zi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Um(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new mP(e.color,e.intensity);break;case"DirectionalLight":o=new pP(e.color,e.intensity);break;case"PointLight":o=new dP(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new gP(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new fP(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new hP(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new wv().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),m=c(e.material),o=new O2(p,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),m=c(e.material),o=new Zi(p,m);break;case"InstancedMesh":p=l(e.geometry),m=c(e.material);const y=e.count,v=e.instanceMatrix,S=e.instanceColor;o=new F2(p,m,y),o.instanceMatrix=new Kf(new Float32Array(v.array),16),S!==void 0&&(o.instanceColor=new Kf(new Float32Array(S.array),S.itemSize));break;case"LOD":o=new U2;break;case"Line":o=new cu(l(e.geometry),c(e.material));break;case"LineLoop":o=new B2(l(e.geometry),c(e.material));break;case"LineSegments":o=new oa(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new z2(l(e.geometry),c(e.material));break;case"Sprite":o=new k2(c(e.material));break;case"Group":o=new Rf;break;case"Bone":o=new DS;break;default:o=new pn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let v=0;v<y.length;v++)o.add(this.parseObject(y[v],t,i,r,s))}if(e.animations!==void 0){const y=e.animations;for(let v=0;v<y.length;v++){const S=y[v];o.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let v=0;v<y.length;v++){const S=y[v],E=o.getObjectByProperty("uuid",S.object);E!==void 0&&o.addLevel(E,S.distance,S.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const zB={UVMapping:lv,CubeReflectionMapping:au,CubeRefractionMapping:lu,EquirectangularReflectionMapping:em,EquirectangularRefractionMapping:tm,CubeUVReflectionMapping:rd},yb={RepeatWrapping:nm,ClampToEdgeWrapping:fr,MirroredRepeatWrapping:im},vb={NearestFilter:li,NearestMipmapNearestFilter:Dy,NearestMipmapLinearFilter:Vp,LinearFilter:ui,LinearMipmapNearestFilter:xS,LinearMipmapLinearFilter:uu};class VB extends ws{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Vc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){Vc.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let F0;class YS{static getContext(){return F0===void 0&&(F0=new(window.AudioContext||window.webkitAudioContext)),F0}static setContext(e){F0=e}}class HB extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new sl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const d=c.slice(0);YS.getContext().decodeAudioData(d,function(m){t(m)},l)}catch(d){l(d)}},i,r);function l(c){r?r(c):console.error(c),s.manager.itemError(e)}}}class WB extends wv{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new et().set(e),s=new et().set(t),o=new X(r.r,r.g,r.b),l=new X(s.r,s.g,s.b),c=Math.sqrt(Math.PI),d=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(l).multiplyScalar(d)}}class GB extends wv{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new et().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const xb=new zt,_b=new zt,cc=new zt;class jB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,cc.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Lc*t.fov*.5)/t.zoom;let l,c;_b.elements[12]=-r,xb.elements[12]=r,l=-o*t.aspect+s,c=o*t.aspect+s,cc.elements[0]=2*t.near/(c-l),cc.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(cc),l=-o*t.aspect-s,c=o*t.aspect-s,cc.elements[0]=2*t.near/(c-l),cc.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(cc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_b),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(xb)}}class KS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=wb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=wb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function wb(){return(typeof performance>"u"?Date:performance).now()}const hc=new X,Sb=new Jr,XB=new X,fc=new X;class $B extends pn{constructor(){super(),this.type="AudioListener",this.context=YS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hc,Sb,XB),fc.set(0,0,-1).applyQuaternion(Sb),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(hc.x,r),t.positionY.linearRampToValueAtTime(hc.y,r),t.positionZ.linearRampToValueAtTime(hc.z,r),t.forwardX.linearRampToValueAtTime(fc.x,r),t.forwardY.linearRampToValueAtTime(fc.y,r),t.forwardZ.linearRampToValueAtTime(fc.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(hc.x,hc.y,hc.z),t.setOrientation(fc.x,fc.y,fc.z,i.x,i.y,i.z)}}let _P=class extends pn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const dc=new X,Mb=new Jr,qB=new X,pc=new X;class YB extends _P{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(dc,Mb,qB),pc.set(0,0,1).applyQuaternion(Mb);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(dc.x,i),t.positionY.linearRampToValueAtTime(dc.y,i),t.positionZ.linearRampToValueAtTime(dc.z,i),t.orientationX.linearRampToValueAtTime(pc.x,i),t.orientationY.linearRampToValueAtTime(pc.y,i),t.orientationZ.linearRampToValueAtTime(pc.z,i)}else t.setPosition(dc.x,dc.y,dc.z),t.setOrientation(pc.x,pc.y,pc.z)}}class KB{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class wP{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,d=t+t;c!==d;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Jr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Jr.multiplyQuaternionsFlat(e,o,e,t,e,i),Jr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const JS="\\[\\]\\.:\\/",JB=new RegExp("["+JS+"]","g"),ZS="[^"+JS+"]",ZB="[^"+JS.replace("\\.","")+"]",QB=/((?:WC+[\/:])*)/.source.replace("WC",ZS),ez=/(WCOD+)?/.source.replace("WCOD",ZB),tz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ZS),nz=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ZS),iz=new RegExp("^"+QB+ez+tz+nz+"$"),rz=["material","materials","bones","map"];class sz{constructor(e,t,i){const r=i||fn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class fn{constructor(e,t,i){this.path=t,this.parsedPath=i||fn.parseTrackName(t),this.node=fn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new fn.Composite(e,t,i):new fn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(JB,"")}static parseTrackName(e){const t=iz.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);rz.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=fn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[r];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fn.Composite=sz;fn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};fn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};fn.prototype.GetterByBindingType=[fn.prototype._getValue_direct,fn.prototype._getValue_array,fn.prototype._getValue_arrayElement,fn.prototype._getValue_toArray];fn.prototype.SetterByBindingTypeAndVersioning=[[fn.prototype._setValue_direct,fn.prototype._setValue_direct_setNeedsUpdate,fn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fn.prototype._setValue_array,fn.prototype._setValue_array_setNeedsUpdate,fn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fn.prototype._setValue_arrayElement,fn.prototype._setValue_arrayElement_setNeedsUpdate,fn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fn.prototype._setValue_fromArray,fn.prototype._setValue_fromArray_setNeedsUpdate,fn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class oz{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ys(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,d=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const y=arguments[p],v=y.uuid;let S=t[v];if(S===void 0){S=c++,t[v]=S,e.push(y);for(let E=0,M=o;E!==M;++E)s[E].push(new fn(y,i[E],r[E]))}else if(S<d){l=e[S];const E=--d,M=e[E];t[M.uuid]=S,e[S]=M,t[v]=E,e[E]=y;for(let x=0,C=o;x!==C;++x){const T=s[x],P=T[E];let I=T[S];T[S]=P,I===void 0&&(I=new fn(y,i[x],r[x])),T[E]=I}}else e[S]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],d=c.uuid,p=t[d];if(p!==void 0&&p>=s){const m=s++,y=e[m];t[y.uuid]=p,e[p]=y,t[d]=m,e[m]=c;for(let v=0,S=r;v!==S;++v){const E=i[v],M=E[m],x=E[p];E[p]=M,E[m]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],p=d.uuid,m=t[p];if(m!==void 0)if(delete t[p],m<s){const y=--s,v=e[y],S=--o,E=e[S];t[v.uuid]=m,e[m]=v,t[E.uuid]=y,e[y]=E,e.pop();for(let M=0,x=r;M!==x;++M){const C=i[M],T=C[y],P=C[S];C[m]=T,C[y]=P,C.pop()}}else{const y=--o,v=e[y];y>0&&(t[v.uuid]=m),e[m]=v,e.pop();for(let S=0,E=r;S!==E;++S){const M=i[S];M[m]=M[y],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,c=this._objects,d=c.length,p=this.nCachedObjects_,m=new Array(d);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(m);for(let y=p,v=c.length;y!==v;++y){const S=c[y];m[y]=new fn(S,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],d=e[l];t[d]=i,o[i]=c,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class SP{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:Mc,endingEnd:Mc};for(let d=0;d!==o;++d){const p=s[d].createInterpolant(null);l[d]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=h2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=s,c[1]=s+i,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case wS:for(let p=0,m=c.length;p!==m;++p)c[p].evaluate(o),d[p].accumulateAdditive(l);break;case uv:default:for(let p=0,m=c.length;p!==m;++p)c[p].evaluate(o),d[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===f2;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===c2){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Ec,r.endingEnd=Ec):(e?r.endingStart=this.zeroSlopeAtStart?Ec:Mc:r.endingStart=om,t?r.endingEnd=this.zeroSlopeAtEnd?Ec:Mc:r.endingEnd=om)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=i,this}}const az=new Float32Array(1);class lz extends ll{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,c=i.uuid,d=this._bindingsByRootAndName;let p=d[c];p===void 0&&(p={},d[c]=p);for(let m=0;m!==s;++m){const y=r[m],v=y.name;let S=p[v];if(S!==void 0)++S.referenceCount,o[m]=S;else{if(S=o[m],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,c,v));continue}const E=t&&t._propertyBindings[m].binding.parsedPath;S=new wP(fn.create(i,v,E),y.ValueTypeName,y.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,c,v),o[m]=S}l[m].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,d=c[c.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,c[p]=d,c.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,y=(e._localRoot||this._root).uuid;delete m[y],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],c=t[t.length-1],d=e._cacheIndex;c._cacheIndex=d,t[d]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new jS(new Float32Array(2),new Float32Array(2),1,az),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?mm.findByName(r,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let d=null;if(i===void 0&&(o!==null?i=o.blendMode:i=uv),c!==void 0){const m=c.actionByRoot[s];if(m!==void 0&&m.blendMode===i)return m;d=c.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const p=new SP(this,o,t,i);return this._bindAction(p,d),this._addInactiveAction(p,l,s),p}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?mm.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(r,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)l[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const d=o[l];this._deactivateAction(d);const p=d._cacheIndex,m=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,m._cacheIndex=p,t[p]=m,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class QS{constructor(e){this.value=e}clone(){return new QS(this.value.clone===void 0?this.value:this.value.clone())}}let uz=0;class cz extends ll{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:uz++}),this.name="",this.usage=am,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class hz extends mv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class fz{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class MP{constructor(e,t,i=0,r=1/0){this.ray=new Lm(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ic,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Tw(e,this,i,t),i.sort(Eb),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Tw(e[r],this,i,t);return i.sort(Eb),i}}function Eb(n,e){return n.distance-e.distance}function Tw(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)Tw(r[s],e,t,!0)}}class EP{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ei(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class dz{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const bb=new Le;class pz{constructor(e=new Le(1/0,1/0),t=new Le(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=bb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bb).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Tb=new X,B0=new X;class mz{constructor(e=new X,t=new X){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Tb.subVectors(e,this.start),B0.subVectors(this.end,this.start);const i=B0.dot(B0);let s=B0.dot(Tb)/i;return t&&(s=ei(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Ab=new X;class gz extends pn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new jt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const d=o/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new ht(r,3));const s=new Rr({fog:!1,toneMapped:!1});this.cone=new oa(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Ab.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ab),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $l=new X,z0=new zt,Jx=new zt;class yz extends oa{constructor(e){const t=bP(e),i=new jt,r=[],s=[],o=new et(0,0,1),l=new et(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new ht(r,3)),i.setAttribute("color",new ht(s,3));const c=new Rr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Jx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(z0.multiplyMatrices(Jx,l.matrixWorld),$l.setFromMatrixPosition(z0),r.setXYZ(o,$l.x,$l.y,$l.z),z0.multiplyMatrices(Jx,l.parent.matrixWorld),$l.setFromMatrixPosition(z0),r.setXYZ(o+1,$l.x,$l.y,$l.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function bP(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,bP(n.children[t]));return e}class vz extends Zi{constructor(e,t,i){const r=new ud(t,4,2),s=new pu({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const xz=new X,Cb=new et,Pb=new et;class _z extends pn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new ld(t);r.rotateY(Math.PI*.5),this.material=new pu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Cn(o,3)),this.add(new Zi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Cb.copy(this.light.color),Pb.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?Cb:Pb;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(xz.setFromMatrixPosition(this.light.matrixWorld).negate())}}class wz extends oa{constructor(e=10,t=10,i=4473924,r=8947848){i=new et(i),r=new et(r);const s=t/2,o=e/t,l=e/2,c=[],d=[];for(let y=0,v=0,S=-l;y<=t;y++,S+=o){c.push(-l,0,S,l,0,S),c.push(S,0,-l,S,0,l);const E=y===s?i:r;E.toArray(d,v),v+=3,E.toArray(d,v),v+=3,E.toArray(d,v),v+=3,E.toArray(d,v),v+=3}const p=new jt;p.setAttribute("position",new ht(c,3)),p.setAttribute("color",new ht(d,3));const m=new Rr({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sz extends oa{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new et(s),o=new et(o);const l=[],c=[];if(t>1)for(let m=0;m<t;m++){const y=m/t*(Math.PI*2),v=Math.sin(y)*e,S=Math.cos(y)*e;l.push(0,0,0),l.push(v,0,S);const E=m&1?s:o;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let m=0;m<i;m++){const y=m&1?s:o,v=e-e/i*m;for(let S=0;S<r;S++){let E=S/r*(Math.PI*2),M=Math.sin(E)*v,x=Math.cos(E)*v;l.push(M,0,x),c.push(y.r,y.g,y.b),E=(S+1)/r*(Math.PI*2),M=Math.sin(E)*v,x=Math.cos(E)*v,l.push(M,0,x),c.push(y.r,y.g,y.b)}}const d=new jt;d.setAttribute("position",new ht(l,3)),d.setAttribute("color",new ht(c,3));const p=new Rr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Rb=new X,V0=new X,Nb=new X;class Mz extends pn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new jt;r.setAttribute("position",new ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Rr({fog:!1,toneMapped:!1});this.lightPlane=new cu(r,s),this.add(this.lightPlane),r=new jt,r.setAttribute("position",new ht([0,0,0,0,0,1],3)),this.targetLine=new cu(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Rb.setFromMatrixPosition(this.light.matrixWorld),V0.setFromMatrixPosition(this.light.target.matrixWorld),Nb.subVectors(V0,Rb),this.lightPlane.lookAt(V0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(V0),this.targetLine.scale.z=Nb.length()}}const H0=new X,Zn=new Dm;class Ez extends oa{constructor(e){const t=new jt,i=new Rr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(S,E){c(S),c(E)}function c(S){r.push(0,0,0),s.push(0,0,0),o[S]===void 0&&(o[S]=[]),o[S].push(r.length/3-1)}t.setAttribute("position",new ht(r,3)),t.setAttribute("color",new ht(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new et(16755200),p=new et(16711680),m=new et(43775),y=new et(16777215),v=new et(3355443);this.setColors(d,p,m,y,v)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),oi("c",t,e,Zn,0,0,-1),oi("t",t,e,Zn,0,0,1),oi("n1",t,e,Zn,-1,-1,-1),oi("n2",t,e,Zn,i,-1,-1),oi("n3",t,e,Zn,-1,r,-1),oi("n4",t,e,Zn,i,r,-1),oi("f1",t,e,Zn,-1,-1,1),oi("f2",t,e,Zn,i,-1,1),oi("f3",t,e,Zn,-1,r,1),oi("f4",t,e,Zn,i,r,1),oi("u1",t,e,Zn,i*.7,r*1.1,-1),oi("u2",t,e,Zn,-1*.7,r*1.1,-1),oi("u3",t,e,Zn,0,r*2,-1),oi("cf1",t,e,Zn,-1,0,1),oi("cf2",t,e,Zn,i,0,1),oi("cf3",t,e,Zn,0,-1,1),oi("cf4",t,e,Zn,0,r,1),oi("cn1",t,e,Zn,-1,0,-1),oi("cn2",t,e,Zn,i,0,-1),oi("cn3",t,e,Zn,0,-1,-1),oi("cn4",t,e,Zn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function oi(n,e,t,i,r,s,o){H0.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let d=0,p=l.length;d<p;d++)c.setXYZ(l[d],H0.x,H0.y,H0.z)}}const W0=new ra;class bz extends oa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new jt;s.setIndex(new Cn(i,1)),s.setAttribute("position",new Cn(r,3)),super(s,new Rr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&W0.setFromObject(this.object),W0.isEmpty())return;const t=W0.min,i=W0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tz extends oa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new jt;s.setIndex(new Cn(i,1)),s.setAttribute("position",new ht(r,3)),super(s,new Rr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Az extends cu{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new jt;o.setAttribute("position",new ht(s,3)),o.computeBoundingSphere(),super(o,new Rr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new jt;c.setAttribute("position",new ht(l,3)),c.computeBoundingSphere(),this.add(new Zi(c,new pu({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Lb=new X;let G0,Zx;class Cz extends pn{constructor(e=new X(0,0,1),t=new X(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",G0===void 0&&(G0=new jt,G0.setAttribute("position",new ht([0,0,0,0,1,0],3)),Zx=new Xc(0,.5,1,5,1),Zx.translate(0,-.5,0)),this.position.copy(t),this.line=new cu(G0,new Rr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zi(Zx,new pu({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Lb.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Lb,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Pz extends oa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new jt;r.setAttribute("position",new ht(t,3)),r.setAttribute("color",new ht(i,3));const s=new Rr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new et,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Rz{constructor(){this.type="ShapePath",this.color=new et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new um,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const C=[];for(let T=0,P=x.length;T<P;T++){const I=x[T],k=new Dc;k.curves=I.curves,C.push(k)}return C}function i(x,C){const T=C.length;let P=!1;for(let I=T-1,k=0;k<T;I=k++){let B=C[I],z=C[k],U=z.x-B.x,F=z.y-B.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(B=C[k],U=-U,z=C[I],F=-F),x.y<B.y||x.y>z.y)continue;if(x.y===B.y){if(x.x===B.x)return!0}else{const K=F*(x.x-B.x)-U*(x.y-B.y);if(K===0)return!0;if(K<0)continue;P=!P}}else{if(x.y!==B.y)continue;if(z.x<=x.x&&x.x<=B.x||B.x<=x.x&&x.x<=z.x)return!0}}return P}const r=ea.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const d=[];if(s.length===1)return l=s[0],c=new Dc,c.curves=l.curves,d.push(c),d;let p=!r(s[0].getPoints());p=e?!p:p;const m=[],y=[];let v=[],S=0,E;y[S]=void 0,v[S]=[];for(let x=0,C=s.length;x<C;x++)l=s[x],E=l.getPoints(),o=r(E),o=e?!o:o,o?(!p&&y[S]&&S++,y[S]={s:new Dc,p:E},y[S].s.curves=l.curves,p&&S++,v[S]=[]):v[S].push({h:l,p:E[0]});if(!y[0])return t(s);if(y.length>1){let x=!1,C=0;for(let T=0,P=y.length;T<P;T++)m[T]=[];for(let T=0,P=y.length;T<P;T++){const I=v[T];for(let k=0;k<I.length;k++){const B=I[k];let z=!0;for(let U=0;U<y.length;U++)i(B.p,y[U].p)&&(T!==U&&C++,z?(z=!1,m[U].push(B)):x=!0);z&&m[T].push(B)}}C>0&&x===!1&&(v=m)}let M;for(let x=0,C=y.length;x<C;x++){c=y[x].s,d.push(c),M=v[x];for(let T=0,P=M.length;T<P;T++)c.holes.push(M[T].h)}return d}}class Nz extends mu{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class Lz extends Om{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class Iz extends Fm{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class Dz extends Bm{constructor(e,t,i,r,s,o,l){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,l)}}class kz extends Xc{constructor(e,t,i,r,s,o,l,c){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,l,c)}}class Uz extends zm{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Oz extends Vm{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class Fz extends Hm{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Bz extends ad{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class zz extends ld{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Vz extends sd{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class Hz extends ul{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class Wz extends Wm{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class Gz extends Gm{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class jz extends ud{constructor(e,t,i,r,s,o,l){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,l)}}class Xz extends jm{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class $z extends Xm{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class qz extends $m{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class Yz extends qm{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Rm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Rm);const Kz=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:vS,AddEquation:_c,AddOperation:GC,AdditiveAnimationBlendMode:wS,AdditiveBlending:Ly,AlphaFormat:e2,AlwaysDepth:OC,AlwaysStencilFunc:g2,AmbientLight:mP,AmbientLightProbe:GB,AnimationAction:SP,AnimationClip:mm,AnimationLoader:NB,AnimationMixer:lz,AnimationObjectGroup:oz,AnimationUtils:AB,ArcCurve:V2,ArrayCamera:N2,ArrowHelper:Cz,Audio:_P,AudioAnalyser:KB,AudioContext:YS,AudioListener:$B,AudioLoader:HB,AxesHelper:Pz,BackSide:Pr,BasicDepthPacking:d2,BasicShadowMap:MC,Bone:DS,BooleanKeyframeTrack:$c,Box2:pz,Box3:ra,Box3Helper:Tz,BoxBufferGeometry:Nz,BoxGeometry:mu,BoxHelper:bz,BufferAttribute:Cn,BufferGeometry:jt,BufferGeometryLoader:xP,ByteType:YC,Cache:Vc,Camera:Dm,CameraHelper:Ez,CanvasTexture:J4,CapsuleBufferGeometry:Lz,CapsuleGeometry:Om,CatmullRomCurve3:H2,CineonToneMapping:$C,CircleBufferGeometry:Iz,CircleGeometry:Fm,ClampToEdgeWrapping:fr,Clock:KS,Color:et,ColorKeyframeTrack:XS,ColorManagement:Us,CompressedArrayTexture:K4,CompressedTexture:kS,CompressedTextureLoader:LB,ConeBufferGeometry:Dz,ConeGeometry:Bm,CubeCamera:M2,CubeReflectionMapping:au,CubeRefractionMapping:lu,CubeTexture:km,CubeTextureLoader:IB,CubeUVReflectionMapping:rd,CubicBezierCurve:OS,CubicBezierCurve3:W2,CubicInterpolant:aP,CullFaceBack:W_,CullFaceFront:SC,CullFaceFrontBack:qI,CullFaceNone:wC,Curve:To,CurvePath:j2,CustomBlending:EC,CustomToneMapping:qC,CylinderBufferGeometry:kz,CylinderGeometry:Xc,Cylindrical:dz,Data3DTexture:TS,DataArrayTexture:cv,DataTexture:zf,DataTextureLoader:DB,DataUtils:ok,DecrementStencilOp:oD,DecrementWrapStencilOp:lD,DefaultLoadingManager:cP,DepthFormat:ru,DepthStencilFormat:Fc,DepthTexture:L2,DirectionalLight:pP,DirectionalLightHelper:Mz,DiscreteInterpolant:lP,DisplayP3ColorSpace:MS,DodecahedronBufferGeometry:Uz,DodecahedronGeometry:zm,DoubleSide:Ko,DstAlphaFactor:NC,DstColorFactor:IC,DynamicCopyUsage:MD,DynamicDrawUsage:yD,DynamicReadUsage:_D,EdgesGeometry:X2,EllipseCurve:vv,EqualDepth:BC,EqualStencilFunc:fD,EquirectangularReflectionMapping:em,EquirectangularRefractionMapping:tm,Euler:Im,EventDispatcher:ll,ExtrudeBufferGeometry:Oz,ExtrudeGeometry:Vm,FileLoader:sl,Float16BufferAttribute:fk,Float32BufferAttribute:ht,Float64BufferAttribute:dk,FloatType:Za,Fog:pv,FogExp2:dv,FramebufferTexture:Y4,FrontSide:il,Frustum:hv,GLBufferAttribute:fz,GLSL1:bD,GLSL3:yw,GreaterDepth:VC,GreaterEqualDepth:zC,GreaterEqualStencilFunc:gD,GreaterStencilFunc:pD,GridHelper:wz,Group:Rf,HalfFloatType:$f,HemisphereLight:hP,HemisphereLightHelper:_z,HemisphereLightProbe:WB,IcosahedronBufferGeometry:Fz,IcosahedronGeometry:Hm,ImageBitmapLoader:VB,ImageLoader:gm,ImageUtils:bS,IncrementStencilOp:sD,IncrementWrapStencilOp:aD,InstancedBufferAttribute:Kf,InstancedBufferGeometry:vP,InstancedInterleavedBuffer:hz,InstancedMesh:F2,Int16BufferAttribute:ck,Int32BufferAttribute:hk,Int8BufferAttribute:ak,IntType:JC,InterleavedBuffer:mv,InterleavedBufferAttribute:Bc,Interpolant:Ym,InterpolateDiscrete:rm,InterpolateLinear:sm,InterpolateSmooth:py,InvertStencilOp:uD,KeepStencilOp:my,KeyframeTrack:Ao,LOD:U2,LatheBufferGeometry:Bz,LatheGeometry:ad,Layers:Ic,LessDepth:FC,LessEqualDepth:Iy,LessEqualStencilFunc:dD,LessStencilFunc:hD,Light:gu,LightProbe:wv,Line:cu,Line3:mz,LineBasicMaterial:Rr,LineCurve:xv,LineCurve3:G2,LineDashedMaterial:sP,LineLoop:B2,LineSegments:oa,LinearEncoding:SS,LinearFilter:ui,LinearInterpolant:jS,LinearMipMapLinearFilter:QI,LinearMipMapNearestFilter:ZI,LinearMipmapLinearFilter:uu,LinearMipmapNearestFilter:xS,LinearSRGBColorSpace:Mo,LinearToneMapping:jC,Loader:ws,LoaderUtils:bw,LoadingManager:$S,LoopOnce:c2,LoopPingPong:f2,LoopRepeat:h2,LuminanceAlphaFormat:n2,LuminanceFormat:t2,MOUSE:XI,Material:er,MaterialLoader:Sv,MathUtils:BD,Matrix3:Jt,Matrix4:zt,MaxEquation:$_,Mesh:Zi,MeshBasicMaterial:pu,MeshDepthMaterial:RS,MeshDistanceMaterial:NS,MeshLambertMaterial:iP,MeshMatcapMaterial:rP,MeshNormalMaterial:nP,MeshPhongMaterial:eP,MeshPhysicalMaterial:Q2,MeshStandardMaterial:HS,MeshToonMaterial:tP,MinEquation:X_,MirroredRepeatWrapping:im,MixOperation:WC,MultiplyBlending:j_,MultiplyOperation:Nm,NearestFilter:li,NearestMipMapLinearFilter:JI,NearestMipMapNearestFilter:KI,NearestMipmapLinearFilter:Vp,NearestMipmapNearestFilter:Dy,NeverDepth:UC,NeverStencilFunc:cD,NoBlending:el,NoColorSpace:ou,NoToneMapping:So,NormalAnimationBlendMode:uv,NormalBlending:Rc,NotEqualDepth:HC,NotEqualStencilFunc:mD,NumberKeyframeTrack:dm,Object3D:pn,ObjectLoader:BB,ObjectSpaceNormalMap:m2,OctahedronBufferGeometry:zz,OctahedronGeometry:ld,OneFactor:CC,OneMinusDstAlphaFactor:LC,OneMinusDstColorFactor:DC,OneMinusSrcAlphaFactor:yS,OneMinusSrcColorFactor:RC,OrthographicCamera:Um,PCFShadowMap:av,PCFSoftShadowMap:zp,PMREMGenerator:xw,Path:um,PerspectiveCamera:zi,Plane:Zl,PlaneBufferGeometry:Vz,PlaneGeometry:sd,PlaneHelper:Az,PointLight:dP,PointLightHelper:vz,Points:z2,PointsMaterial:yv,PolarGridHelper:Sz,PolyhedronBufferGeometry:Hz,PolyhedronGeometry:ul,PositionalAudio:YB,PropertyBinding:fn,PropertyMixer:wP,QuadraticBezierCurve:FS,QuadraticBezierCurve3:BS,Quaternion:Jr,QuaternionKeyframeTrack:cd,QuaternionLinearInterpolant:uP,RED_GREEN_RGTC2_Format:mw,RED_RGTC1_Format:u2,REVISION:Rm,RGBADepthPacking:p2,RGBAFormat:Yr,RGBAIntegerFormat:a2,RGBA_ASTC_10x10_Format:hw,RGBA_ASTC_10x5_Format:lw,RGBA_ASTC_10x6_Format:uw,RGBA_ASTC_10x8_Format:cw,RGBA_ASTC_12x10_Format:fw,RGBA_ASTC_12x12_Format:dw,RGBA_ASTC_4x4_Format:ew,RGBA_ASTC_5x4_Format:tw,RGBA_ASTC_5x5_Format:nw,RGBA_ASTC_6x5_Format:iw,RGBA_ASTC_6x6_Format:rw,RGBA_ASTC_8x5_Format:sw,RGBA_ASTC_8x6_Format:ow,RGBA_ASTC_8x8_Format:aw,RGBA_BPTC_Format:dy,RGBA_ETC2_EAC_Format:Q_,RGBA_PVRTC_2BPPV1_Format:J_,RGBA_PVRTC_4BPPV1_Format:K_,RGBA_S3TC_DXT1_Format:cy,RGBA_S3TC_DXT3_Format:hy,RGBA_S3TC_DXT5_Format:fy,RGB_ETC1_Format:l2,RGB_ETC2_Format:Z_,RGB_PVRTC_2BPPV1_Format:Y_,RGB_PVRTC_4BPPV1_Format:q_,RGB_S3TC_DXT1_Format:uy,RGFormat:s2,RGIntegerFormat:o2,RawShaderMaterial:Z2,Ray:Lm,Raycaster:MP,RectAreaLight:gP,RedFormat:i2,RedIntegerFormat:r2,ReinhardToneMapping:XC,RepeatWrapping:nm,ReplaceStencilOp:rD,ReverseSubtractEquation:TC,RingBufferGeometry:Wz,RingGeometry:Wm,SIGNED_RED_GREEN_RGTC2_Format:gw,SIGNED_RED_RGTC1_Format:pw,SRGBColorSpace:Gt,Scene:Uy,ShaderChunk:qt,ShaderLib:vo,ShaderMaterial:bo,ShadowMaterial:J2,Shape:Dc,ShapeBufferGeometry:Gz,ShapeGeometry:Gm,ShapePath:Rz,ShapeUtils:ea,ShortType:KC,Skeleton:gv,SkeletonHelper:yz,SkinnedMesh:O2,Source:bc,Sphere:sa,SphereBufferGeometry:jz,SphereGeometry:ud,Spherical:EP,SphericalHarmonics3:yP,SplineCurve:zS,SpotLight:fP,SpotLightHelper:gz,Sprite:k2,SpriteMaterial:IS,SrcAlphaFactor:gS,SrcAlphaSaturateFactor:kC,SrcColorFactor:PC,StaticCopyUsage:SD,StaticDrawUsage:am,StaticReadUsage:xD,StereoCamera:jB,StreamCopyUsage:ED,StreamDrawUsage:vD,StreamReadUsage:wD,StringKeyframeTrack:qc,SubtractEquation:bC,SubtractiveBlending:G_,TOUCH:$I,TangentSpaceNormalMap:du,TetrahedronBufferGeometry:Xz,TetrahedronGeometry:jm,Texture:ti,TextureLoader:kB,TorusBufferGeometry:$z,TorusGeometry:Xm,TorusKnotBufferGeometry:qz,TorusKnotGeometry:$m,Triangle:qr,TriangleFanDrawMode:nD,TriangleStripDrawMode:tD,TrianglesDrawMode:eD,TubeBufferGeometry:Yz,TubeGeometry:qm,TwoPassDoubleSide:YI,UVMapping:lv,Uint16BufferAttribute:AS,Uint32BufferAttribute:CS,Uint8BufferAttribute:lk,Uint8ClampedBufferAttribute:uk,Uniform:QS,UniformsGroup:cz,UniformsLib:$e,UniformsUtils:S2,UnsignedByteType:rl,UnsignedInt248Type:Nc,UnsignedIntType:tu,UnsignedShort4444Type:ZC,UnsignedShort5551Type:QC,UnsignedShortType:_S,VSMShadowMap:go,Vector2:Le,Vector3:X,Vector4:_n,VectorKeyframeTrack:pm,VideoTexture:q4,WebGL1Renderer:I2,WebGL3DRenderTarget:YD,WebGLArrayRenderTarget:qD,WebGLCubeRenderTarget:E2,WebGLMultipleRenderTargets:KD,WebGLRenderTarget:Eo,WebGLRenderer:LS,WebGLUtils:R2,WireframeGeometry:K2,WrapAroundEnding:om,ZeroCurvatureEnding:Mc,ZeroFactor:AC,ZeroSlopeEnding:Ec,ZeroStencilOp:iD,_SRGBAFormat:ky,sRGBEncoding:su},Symbol.toStringTag,{value:"Module"}));var Qx={exports:{}},ql={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function Jz(){return Ib||(Ib=1,ql.ConcurrentRoot=1,ql.ContinuousEventPriority=4,ql.DefaultEventPriority=16,ql.DiscreteEventPriority=1,ql.IdleEventPriority=536870912,ql.LegacyRoot=0),ql}var Db;function Zz(){return Db||(Db=1,Qx.exports=Jz()),Qx.exports}var Lf=Zz();function Qz(n){let e;const t=new Set,i=(d,p)=>{const m=typeof d=="function"?d(e):d;if(m!==e){const y=e;e=p?m:Object.assign({},e,m),t.forEach(v=>v(e,y))}},r=()=>e,s=(d,p=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let y=p(e);function v(){const S=p(e);if(!m(y,S)){const E=y;d(y=S,E)}}return t.add(v),()=>t.delete(v)},c={setState:i,getState:r,subscribe:(d,p,m)=>p||m?s(d,p,m):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=n(i,r,c),c}const e5=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),kb=e5?J.useEffect:J.useLayoutEffect;function t5(n){const e=typeof n=="function"?Qz(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=J.useReducer(M=>M+1,0),o=e.getState(),l=J.useRef(o),c=J.useRef(i),d=J.useRef(r),p=J.useRef(!1),m=J.useRef();m.current===void 0&&(m.current=i(o));let y,v=!1;(l.current!==o||c.current!==i||d.current!==r||p.current)&&(y=i(o),v=!r(m.current,y)),kb(()=>{v&&(m.current=y),l.current=o,c.current=i,d.current=r,p.current=!1});const S=J.useRef(o);kb(()=>{const M=()=>{try{const C=e.getState(),T=c.current(C);d.current(m.current,T)||(l.current=C,m.current=T,s())}catch{p.current=!0,s()}},x=e.subscribe(M);return e.getState()!==S.current&&M(),x},[]);const E=v?y:m.current;return J.useDebugValue(E),E};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var e_={exports:{}},t_={exports:{}},n_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function n5(){return Ub||(Ub=1,function(n){function e(V,te){var $=V.length;V.push(te);e:for(;0<$;){var G=$-1>>>1,Z=V[G];if(0<r(Z,te))V[G]=te,V[$]=Z,$=G;else break e}}function t(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var te=V[0],$=V.pop();if($!==te){V[0]=$;e:for(var G=0,Z=V.length,ce=Z>>>1;G<ce;){var fe=2*(G+1)-1,Ee=V[fe],be=fe+1,ee=V[be];if(0>r(Ee,$))be<Z&&0>r(ee,Ee)?(V[G]=ee,V[be]=$,G=be):(V[G]=Ee,V[fe]=$,G=fe);else if(be<Z&&0>r(ee,$))V[G]=ee,V[be]=$,G=be;else break e}}return te}function r(V,te){var $=V.sortIndex-te.sortIndex;return $!==0?$:V.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,m=null,y=3,v=!1,S=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(V){for(var te=t(d);te!==null;){if(te.callback===null)i(d);else if(te.startTime<=V)i(d),te.sortIndex=te.expirationTime,e(c,te);else break;te=t(d)}}function P(V){if(E=!1,T(V),!S)if(t(c)!==null)S=!0,ne(I);else{var te=t(d);te!==null&&ie(P,te.startTime-V)}}function I(V,te){S=!1,E&&(E=!1,x(z),z=-1),v=!0;var $=y;try{for(T(te),m=t(c);m!==null&&(!(m.expirationTime>te)||V&&!K());){var G=m.callback;if(typeof G=="function"){m.callback=null,y=m.priorityLevel;var Z=G(m.expirationTime<=te);te=n.unstable_now(),typeof Z=="function"?m.callback=Z:m===t(c)&&i(c),T(te)}else i(c);m=t(c)}if(m!==null)var ce=!0;else{var fe=t(d);fe!==null&&ie(P,fe.startTime-te),ce=!1}return ce}finally{m=null,y=$,v=!1}}var k=!1,B=null,z=-1,U=5,F=-1;function K(){return!(n.unstable_now()-F<U)}function ae(){if(B!==null){var V=n.unstable_now();F=V;var te=!0;try{te=B(!0,V)}finally{te?re():(k=!1,B=null)}}else k=!1}var re;if(typeof C=="function")re=function(){C(ae)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,se=H.port2;H.port1.onmessage=ae,re=function(){se.postMessage(null)}}else re=function(){M(ae,0)};function ne(V){B=V,k||(k=!0,re())}function ie(V,te){z=M(function(){V(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){S||v||(S=!0,ne(I))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(V){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var $=y;y=te;try{return V()}finally{y=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,te){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var $=y;y=V;try{return te()}finally{y=$}},n.unstable_scheduleCallback=function(V,te,$){var G=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?G+$:G):$=G,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=$+Z,V={id:p++,callback:te,priorityLevel:V,startTime:$,expirationTime:Z,sortIndex:-1},$>G?(V.sortIndex=$,e(d,V),t(c)===null&&V===t(d)&&(E?(x(z),z=-1):E=!0,ie(P,$-G))):(V.sortIndex=Z,e(c,V),S||v||(S=!0,ne(I))),V},n.unstable_shouldYield=K,n.unstable_wrapCallback=function(V){var te=y;return function(){var $=y;y=te;try{return V.apply(this,arguments)}finally{y=$}}}}(n_)),n_}var Ob;function TP(){return Ob||(Ob=1,t_.exports=n5()),t_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_,Fb;function i5(){return Fb||(Fb=1,i_=function(e){var t={},i=rv(),r=TP(),s=Object.assign;function o(h){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+h,_=1;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),I=Symbol.iterator;function k(h){return h===null||typeof h!="object"?null:(h=I&&h[I]||h["@@iterator"],typeof h=="function"?h:null)}function B(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case p:return"Fragment";case d:return"Portal";case y:return"Profiler";case m:return"StrictMode";case M:return"Suspense";case x:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case S:return(h.displayName||"Context")+".Consumer";case v:return(h._context.displayName||"Context")+".Provider";case E:var f=h.render;return h=h.displayName,h||(h=f.displayName||f.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case C:return f=h.displayName||null,f!==null?f:B(h.type)||"Memo";case T:f=h._payload,h=h._init;try{return B(h(f))}catch{}}return null}function z(h){var f=h.type;switch(h.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=f.render,h=h.displayName||h.name||"",f.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(f);case 8:return f===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function U(h){var f=h,_=h;if(h.alternate)for(;f.return;)f=f.return;else{h=f;do f=h,(f.flags&4098)!==0&&(_=f.return),h=f.return;while(h)}return f.tag===3?_:null}function F(h){if(U(h)!==h)throw Error(o(188))}function K(h){var f=h.alternate;if(!f){if(f=U(h),f===null)throw Error(o(188));return f!==h?null:h}for(var _=h,b=f;;){var R=_.return;if(R===null)break;var D=R.alternate;if(D===null){if(b=R.return,b!==null){_=b;continue}break}if(R.child===D.child){for(D=R.child;D;){if(D===_)return F(R),h;if(D===b)return F(R),f;D=D.sibling}throw Error(o(188))}if(_.return!==b.return)_=R,b=D;else{for(var q=!1,he=R.child;he;){if(he===_){q=!0,_=R,b=D;break}if(he===b){q=!0,b=R,_=D;break}he=he.sibling}if(!q){for(he=D.child;he;){if(he===_){q=!0,_=D,b=R;break}if(he===b){q=!0,b=D,_=R;break}he=he.sibling}if(!q)throw Error(o(189))}}if(_.alternate!==b)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?h:f}function ae(h){return h=K(h),h!==null?re(h):null}function re(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var f=re(h);if(f!==null)return f;h=h.sibling}return null}function H(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var f=H(h);if(f!==null)return f}h=h.sibling}return null}var se=Array.isArray,ne=e.getPublicInstance,ie=e.getRootHostContext,V=e.getChildHostContext,te=e.prepareForCommit,$=e.resetAfterCommit,G=e.createInstance,Z=e.appendInitialChild,ce=e.finalizeInitialChildren,fe=e.prepareUpdate,Ee=e.shouldSetTextContent,be=e.createTextInstance,ee=e.scheduleTimeout,Ve=e.cancelTimeout,je=e.noTimeout,Ie=e.isPrimaryRenderer,Ke=e.supportsMutation,Re=e.supportsPersistence,Se=e.supportsHydration,Ne=e.getInstanceFromNode,tt=e.preparePortalMount,Ge=e.getCurrentEventPriority,yt=e.detachDeletedInstance,xt=e.supportsMicrotasks,pt=e.scheduleMicrotask,bt=e.supportsTestSelectors,Vt=e.findFiberRoot,Y=e.getBoundingRect,W=e.getTextContent,_e=e.isHiddenSubtree,Oe=e.matchAccessibilityRole,Fe=e.setFocusIfFocusable,Xe=e.setupIntersectionObserver,vt=e.appendChild,Qe=e.appendChildToContainer,Ae=e.commitTextUpdate,rt=e.commitMount,mt=e.commitUpdate,_t=e.insertBefore,nt=e.insertInContainerBefore,dt=e.removeChild,Xt=e.removeChildFromContainer,en=e.resetTextContent,Pn=e.hideInstance,le=e.hideTextInstance,Te=e.unhideInstance,De=e.unhideTextInstance,qe=e.clearContainer,ut=e.cloneInstance,an=e.createContainerChildSet,ln=e.appendChildToContainerChildSet,ni=e.finalizeContainerChildren,Lr=e.replaceContainerChildren,wn=e.cloneHiddenInstance,Ni=e.cloneHiddenTextInstance,Li=e.canHydrateInstance,Po=e.canHydrateTextInstance,Ro=e.canHydrateSuspenseInstance,Jc=e.isSuspenseInstancePending,Bs=e.isSuspenseInstanceFallback,cl=e.registerSuspenseInstanceRetry,j=e.getNextHydratableSibling,ye=e.getFirstHydratableChild,Ce=e.getFirstHydratableChildWithinContainer,me=e.getFirstHydratableChildWithinSuspenseInstance,Pe=e.hydrateInstance,at=e.hydrateTextInstance,wt=e.hydrateSuspenseInstance,At=e.getNextHydratableInstanceAfterSuspenseInstance,Lt=e.commitHydratedContainer,Ut=e.commitHydratedSuspenseInstance,Ot=e.clearSuspenseBoundary,Ht=e.clearSuspenseBoundaryFromContainer,un=e.shouldDeleteUnhydratedTailInstances,vi=e.didNotMatchHydratedContainerTextInstance,mr=e.didNotMatchHydratedTextInstance,cn;function Sn(h){if(cn===void 0)try{throw Error()}catch(_){var f=_.stack.trim().match(/\n( *(at )?)/);cn=f&&f[1]||""}return`
`+cn+h}var Ft=!1;function No(h,f){if(!h||Ft)return"";Ft=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(ze){var b=ze}Reflect.construct(h,[],f)}else{try{f.call()}catch(ze){b=ze}h.call(f.prototype)}else{try{throw Error()}catch(ze){b=ze}h()}}catch(ze){if(ze&&b&&typeof ze.stack=="string"){for(var R=ze.stack.split(`
`),D=b.stack.split(`
`),q=R.length-1,he=D.length-1;1<=q&&0<=he&&R[q]!==D[he];)he--;for(;1<=q&&0<=he;q--,he--)if(R[q]!==D[he]){if(q!==1||he!==1)do if(q--,he--,0>he||R[q]!==D[he]){var Me=`
`+R[q].replace(" at new "," at ");return h.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",h.displayName)),Me}while(1<=q&&0<=he);break}}}finally{Ft=!1,Error.prepareStackTrace=_}return(h=h?h.displayName||h.name:"")?Sn(h):""}var Dn=Object.prototype.hasOwnProperty,Zr=[],Ms=-1;function xi(h){return{current:h}}function $t(h){0>Ms||(h.current=Zr[Ms],Zr[Ms]=null,Ms--)}function It(h,f){Ms++,Zr[Ms]=h.current,h.current=f}var Mn={},$n=xi(Mn),gn=xi(!1),Qr=Mn;function es(h,f){var _=h.type.contextTypes;if(!_)return Mn;var b=h.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===f)return b.__reactInternalMemoizedMaskedChildContext;var R={},D;for(D in _)R[D]=f[D];return b&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=f,h.__reactInternalMemoizedMaskedChildContext=R),R}function qn(h){return h=h.childContextTypes,h!=null}function Lo(){$t(gn),$t($n)}function _u(h,f,_){if($n.current!==Mn)throw Error(o(168));It($n,f),It(gn,_)}function cg(h,f,_){var b=h.stateNode;if(f=f.childContextTypes,typeof b.getChildContext!="function")return _;b=b.getChildContext();for(var R in b)if(!(R in f))throw Error(o(108,z(h)||"Unknown",R));return s({},_,b)}function Zc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Mn,Qr=$n.current,It($n,h),It(gn,gn.current),!0}function Qc(h,f,_){var b=h.stateNode;if(!b)throw Error(o(169));_?(h=cg(h,f,Qr),b.__reactInternalMemoizedMergedChildContext=h,$t(gn),$t($n),It($n,h)):$t(gn),It(gn,_)}var Ir=Math.clz32?Math.clz32:zv,gd=Math.log,wu=Math.LN2;function zv(h){return h>>>=0,h===0?32:31-(gd(h)/wu|0)|0}var hl=64,sn=4194304;function fl(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Su(h,f){var _=h.pendingLanes;if(_===0)return 0;var b=0,R=h.suspendedLanes,D=h.pingedLanes,q=_&268435455;if(q!==0){var he=q&~R;he!==0?b=fl(he):(D&=q,D!==0&&(b=fl(D)))}else q=_&~R,q!==0?b=fl(q):D!==0&&(b=fl(D));if(b===0)return 0;if(f!==0&&f!==b&&(f&R)===0&&(R=b&-b,D=f&-f,R>=D||R===16&&(D&4194240)!==0))return f;if((b&4)!==0&&(b|=_&16),f=h.entangledLanes,f!==0)for(h=h.entanglements,f&=b;0<f;)_=31-Ir(f),R=1<<_,b|=h[_],f&=~R;return b}function yd(h,f){switch(h){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hg(h,f){for(var _=h.suspendedLanes,b=h.pingedLanes,R=h.expirationTimes,D=h.pendingLanes;0<D;){var q=31-Ir(D),he=1<<q,Me=R[q];Me===-1?((he&_)===0||(he&b)!==0)&&(R[q]=yd(he,f)):Me<=f&&(h.expiredLanes|=he),D&=~he}}function eh(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function th(h){for(var f=[],_=0;31>_;_++)f.push(h);return f}function la(h,f,_){h.pendingLanes|=f,f!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,f=31-Ir(f),h[f]=_}function nh(h,f){var _=h.pendingLanes&~f;h.pendingLanes=f,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=f,h.mutableReadLanes&=f,h.entangledLanes&=f,f=h.entanglements;var b=h.eventTimes;for(h=h.expirationTimes;0<_;){var R=31-Ir(_),D=1<<R;f[R]=0,b[R]=-1,h[R]=-1,_&=~D}}function Es(h,f){var _=h.entangledLanes|=f;for(h=h.entanglements;_;){var b=31-Ir(_),R=1<<b;R&f|h[b]&f&&(h[b]|=f),_&=~R}}var Wt=0;function zs(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var ua=r.unstable_scheduleCallback,dl=r.unstable_cancelCallback,Io=r.unstable_shouldYield,Vv=r.unstable_requestPaint,ii=r.unstable_now,ca=r.unstable_ImmediatePriority,Hv=r.unstable_UserBlockingPriority,ih=r.unstable_NormalPriority,rh=r.unstable_IdlePriority,Mu=null,bs=null;function Eu(h){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(Mu,h,void 0,(h.current.flags&128)===128)}catch{}}function bu(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var Vi=typeof Object.is=="function"?Object.is:bu,Dr=null,sh=!1,vd=!1;function oh(h){Dr===null?Dr=[h]:Dr.push(h)}function ah(h){sh=!0,oh(h)}function kr(){if(!vd&&Dr!==null){vd=!0;var h=0,f=Wt;try{var _=Dr;for(Wt=1;h<_.length;h++){var b=_[h];do b=b(!0);while(b!==null)}Dr=null,sh=!1}catch(R){throw Dr!==null&&(Dr=Dr.slice(h+1)),ua(ca,kr),R}finally{Wt=f,vd=!1}}return null}var fg=l.ReactCurrentBatchConfig;function ts(h,f){if(Vi(h,f))return!0;if(typeof h!="object"||h===null||typeof f!="object"||f===null)return!1;var _=Object.keys(h),b=Object.keys(f);if(_.length!==b.length)return!1;for(b=0;b<_.length;b++){var R=_[b];if(!Dn.call(f,R)||!Vi(h[R],f[R]))return!1}return!0}function xd(h){switch(h.tag){case 5:return Sn(h.type);case 16:return Sn("Lazy");case 13:return Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 2:case 15:return h=No(h.type,!1),h;case 11:return h=No(h.type.render,!1),h;case 1:return h=No(h.type,!0),h;default:return""}}function tr(h,f){if(h&&h.defaultProps){f=s({},f),h=h.defaultProps;for(var _ in h)f[_]===void 0&&(f[_]=h[_]);return f}return f}var Tu=xi(null),ha=null,Vs=null,lh=null;function Hi(){lh=Vs=ha=null}function fa(h,f,_){Ie?(It(Tu,f._currentValue),f._currentValue=_):(It(Tu,f._currentValue2),f._currentValue2=_)}function Au(h){var f=Tu.current;$t(Tu),Ie?h._currentValue=f:h._currentValue2=f}function da(h,f,_){for(;h!==null;){var b=h.alternate;if((h.childLanes&f)!==f?(h.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),h===_)break;h=h.return}}function pl(h,f){ha=h,lh=Vs=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&f)!==0&&(di=!0),h.firstContext=null)}function nr(h){var f=Ie?h._currentValue:h._currentValue2;if(lh!==h)if(h={context:h,memoizedValue:f,next:null},Vs===null){if(ha===null)throw Error(o(308));Vs=h,ha.dependencies={lanes:0,firstContext:h}}else Vs=Vs.next=h;return f}var Ur=null,Or=!1;function ml(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _d(h,f){h=h.updateQueue,f.updateQueue===h&&(f.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Hs(h,f){return{eventTime:h,lane:f,tag:0,payload:null,callback:null,next:null}}function Do(h,f){var _=h.updateQueue;_!==null&&(_=_.shared,Wn!==null&&(h.mode&1)!==0&&(kt&2)===0?(h=_.interleaved,h===null?(f.next=f,Ur===null?Ur=[_]:Ur.push(_)):(f.next=h.next,h.next=f),_.interleaved=f):(h=_.pending,h===null?f.next=f:(f.next=h.next,h.next=f),_.pending=f))}function uh(h,f,_){if(f=f.updateQueue,f!==null&&(f=f.shared,(_&4194240)!==0)){var b=f.lanes;b&=h.pendingLanes,_|=b,f.lanes=_,Es(h,_)}}function ch(h,f){var _=h.updateQueue,b=h.alternate;if(b!==null&&(b=b.updateQueue,_===b)){var R=null,D=null;if(_=_.firstBaseUpdate,_!==null){do{var q={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};D===null?R=D=q:D=D.next=q,_=_.next}while(_!==null);D===null?R=D=f:D=D.next=f}else R=D=f;_={baseState:b.baseState,firstBaseUpdate:R,lastBaseUpdate:D,shared:b.shared,effects:b.effects},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=f:h.next=f,_.lastBaseUpdate=f}function hh(h,f,_,b){var R=h.updateQueue;Or=!1;var D=R.firstBaseUpdate,q=R.lastBaseUpdate,he=R.shared.pending;if(he!==null){R.shared.pending=null;var Me=he,ze=Me.next;Me.next=null,q===null?D=ze:q.next=ze,q=Me;var it=h.alternate;it!==null&&(it=it.updateQueue,he=it.lastBaseUpdate,he!==q&&(he===null?it.firstBaseUpdate=ze:he.next=ze,it.lastBaseUpdate=Me))}if(D!==null){var Rt=R.baseState;q=0,it=ze=Me=null,he=D;do{var St=he.lane,Bt=he.eventTime;if((b&St)===St){it!==null&&(it=it.next={eventTime:Bt,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var Je=h,bi=he;switch(St=f,Bt=_,bi.tag){case 1:if(Je=bi.payload,typeof Je=="function"){Rt=Je.call(Bt,Rt,St);break e}Rt=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=bi.payload,St=typeof Je=="function"?Je.call(Bt,Rt,St):Je,St==null)break e;Rt=s({},Rt,St);break e;case 2:Or=!0}}he.callback!==null&&he.lane!==0&&(h.flags|=64,St=R.effects,St===null?R.effects=[he]:St.push(he))}else Bt={eventTime:Bt,lane:St,tag:he.tag,payload:he.payload,callback:he.callback,next:null},it===null?(ze=it=Bt,Me=Rt):it=it.next=Bt,q|=St;if(he=he.next,he===null){if(he=R.shared.pending,he===null)break;St=he,he=St.next,St.next=null,R.lastBaseUpdate=St,R.shared.pending=null}}while(!0);if(it===null&&(Me=Rt),R.baseState=Me,R.firstBaseUpdate=ze,R.lastBaseUpdate=it,f=R.shared.interleaved,f!==null){R=f;do q|=R.lane,R=R.next;while(R!==f)}else D===null&&(R.shared.lanes=0);Ps|=q,h.lanes=q,h.memoizedState=Rt}}function dg(h,f,_){if(h=f.effects,f.effects=null,h!==null)for(f=0;f<h.length;f++){var b=h[f],R=b.callback;if(R!==null){if(b.callback=null,b=_,typeof R!="function")throw Error(o(191,R));R.call(b)}}}var pg=new i.Component().refs;function wd(h,f,_,b){f=h.memoizedState,_=_(b,f),_=_==null?f:s({},f,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var fh={isMounted:function(h){return(h=h._reactInternals)?U(h)===h:!1},enqueueSetState:function(h,f,_){h=h._reactInternals;var b=on(),R=ls(h),D=Hs(b,R);D.payload=f,_!=null&&(D.callback=_),Do(h,D),f=ki(h,R,b),f!==null&&uh(f,h,R)},enqueueReplaceState:function(h,f,_){h=h._reactInternals;var b=on(),R=ls(h),D=Hs(b,R);D.tag=1,D.payload=f,_!=null&&(D.callback=_),Do(h,D),f=ki(h,R,b),f!==null&&uh(f,h,R)},enqueueForceUpdate:function(h,f){h=h._reactInternals;var _=on(),b=ls(h),R=Hs(_,b);R.tag=2,f!=null&&(R.callback=f),Do(h,R),f=ki(h,b,_),f!==null&&uh(f,h,b)}};function Sd(h,f,_,b,R,D,q){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(b,D,q):f.prototype&&f.prototype.isPureReactComponent?!ts(_,b)||!ts(R,D):!0}function mg(h,f,_){var b=!1,R=Mn,D=f.contextType;return typeof D=="object"&&D!==null?D=nr(D):(R=qn(f)?Qr:$n.current,b=f.contextTypes,D=(b=b!=null)?es(h,R):Mn),f=new f(_,D),h.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=fh,h.stateNode=f,f._reactInternals=h,b&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=R,h.__reactInternalMemoizedMaskedChildContext=D),f}function gg(h,f,_,b){h=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(_,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(_,b),f.state!==h&&fh.enqueueReplaceState(f,f.state,null)}function Md(h,f,_,b){var R=h.stateNode;R.props=_,R.state=h.memoizedState,R.refs=pg,ml(h);var D=f.contextType;typeof D=="object"&&D!==null?R.context=nr(D):(D=qn(f)?Qr:$n.current,R.context=es(h,D)),R.state=h.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(wd(h,f,D,_),R.state=h.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(f=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),f!==R.state&&fh.enqueueReplaceState(R,R.state,null),hh(h,_,R,b),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308)}var gl=[],ko=0,dh=null,ph=0,Fr=[],gr=0,pa=null,Ws=1,Gs="";function ma(h,f){gl[ko++]=ph,gl[ko++]=dh,dh=h,ph=f}function yg(h,f,_){Fr[gr++]=Ws,Fr[gr++]=Gs,Fr[gr++]=pa,pa=h;var b=Ws;h=Gs;var R=32-Ir(b)-1;b&=~(1<<R),_+=1;var D=32-Ir(f)+R;if(30<D){var q=R-R%5;D=(b&(1<<q)-1).toString(32),b>>=q,R-=q,Ws=1<<32-Ir(f)+R|_<<R|b,Gs=D+h}else Ws=1<<D|_<<R|b,Gs=h}function Ed(h){h.return!==null&&(ma(h,1),yg(h,1,0))}function bd(h){for(;h===dh;)dh=gl[--ko],gl[ko]=null,ph=gl[--ko],gl[ko]=null;for(;h===pa;)pa=Fr[--gr],Fr[gr]=null,Gs=Fr[--gr],Fr[gr]=null,Ws=Fr[--gr],Fr[gr]=null}var Wi=null,_i=null,Ln=!1,yl=!1,Br=null;function Td(h,f){var _=Mr(5,null,null,0);_.elementType="DELETED",_.stateNode=f,_.return=h,f=h.deletions,f===null?(h.deletions=[_],h.flags|=16):f.push(_)}function Ad(h,f){switch(h.tag){case 5:return f=Li(f,h.type,h.pendingProps),f!==null?(h.stateNode=f,Wi=h,_i=ye(f),!0):!1;case 6:return f=Po(f,h.pendingProps),f!==null?(h.stateNode=f,Wi=h,_i=null,!0):!1;case 13:if(f=Ro(f),f!==null){var _=pa!==null?{id:Ws,overflow:Gs}:null;return h.memoizedState={dehydrated:f,treeContext:_,retryLane:1073741824},_=Mr(18,null,null,0),_.stateNode=f,_.return=h,h.child=_,Wi=h,_i=null,!0}return!1;default:return!1}}function mh(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Uo(h){if(Ln){var f=_i;if(f){var _=f;if(!Ad(h,f)){if(mh(h))throw Error(o(418));f=j(_);var b=Wi;f&&Ad(h,f)?Td(b,_):(h.flags=h.flags&-4097|2,Ln=!1,Wi=h)}}else{if(mh(h))throw Error(o(418));h.flags=h.flags&-4097|2,Ln=!1,Wi=h}}}function vg(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Wi=h}function Cu(h){if(!Se||h!==Wi)return!1;if(!Ln)return vg(h),Ln=!0,!1;if(h.tag!==3&&(h.tag!==5||un(h.type)&&!Ee(h.type,h.memoizedProps))){var f=_i;if(f){if(mh(h)){for(h=_i;h;)h=j(h);throw Error(o(418))}for(;f;)Td(h,f),f=j(f)}}if(vg(h),h.tag===13){if(!Se)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));_i=At(h)}else _i=Wi?j(h.stateNode):null;return!0}function vl(){Se&&(_i=Wi=null,yl=Ln=!1)}function gh(h){Br===null?Br=[h]:Br.push(h)}function xl(h,f,_){if(h=_.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var b=_.stateNode}if(!b)throw Error(o(147,h));var R=b,D=""+h;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===D?f.ref:(f=function(q){var he=R.refs;he===pg&&(he=R.refs={}),q===null?delete he[D]:he[D]=q},f._stringRef=D,f)}if(typeof h!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,h))}return h}function Oo(h,f){throw h=Object.prototype.toString.call(f),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":h))}function _l(h){var f=h._init;return f(h._payload)}function xg(h){function f(ve,de){if(h){var we=ve.deletions;we===null?(ve.deletions=[de],ve.flags|=16):we.push(de)}}function _(ve,de){if(!h)return null;for(;de!==null;)f(ve,de),de=de.sibling;return null}function b(ve,de){for(ve=new Map;de!==null;)de.key!==null?ve.set(de.key,de):ve.set(de.index,de),de=de.sibling;return ve}function R(ve,de){return ve=ro(ve,de),ve.index=0,ve.sibling=null,ve}function D(ve,de,we){return ve.index=we,h?(we=ve.alternate,we!==null?(we=we.index,we<de?(ve.flags|=2,de):we):(ve.flags|=2,de)):(ve.flags|=1048576,de)}function q(ve){return h&&ve.alternate===null&&(ve.flags|=2),ve}function he(ve,de,we,Ye){return de===null||de.tag!==6?(de=Wh(we,ve.mode,Ye),de.return=ve,de):(de=R(de,we),de.return=ve,de)}function Me(ve,de,we,Ye){var ct=we.type;return ct===p?it(ve,de,we.props.children,Ye,we.key):de!==null&&(de.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===T&&_l(ct)===de.type)?(Ye=R(de,we.props),Ye.ref=xl(ve,de,we),Ye.return=ve,Ye):(Ye=Hh(we.type,we.key,we.props,null,ve.mode,Ye),Ye.ref=xl(ve,de,we),Ye.return=ve,Ye)}function ze(ve,de,we,Ye){return de===null||de.tag!==4||de.stateNode.containerInfo!==we.containerInfo||de.stateNode.implementation!==we.implementation?(de=Gh(we,ve.mode,Ye),de.return=ve,de):(de=R(de,we.children||[]),de.return=ve,de)}function it(ve,de,we,Ye,ct){return de===null||de.tag!==7?(de=Oa(we,ve.mode,Ye,ct),de.return=ve,de):(de=R(de,we),de.return=ve,de)}function Rt(ve,de,we){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Wh(""+de,ve.mode,we),de.return=ve,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case c:return we=Hh(de.type,de.key,de.props,null,ve.mode,we),we.ref=xl(ve,null,de),we.return=ve,we;case d:return de=Gh(de,ve.mode,we),de.return=ve,de;case T:var Ye=de._init;return Rt(ve,Ye(de._payload),we)}if(se(de)||k(de))return de=Oa(de,ve.mode,we,null),de.return=ve,de;Oo(ve,de)}return null}function St(ve,de,we,Ye){var ct=de!==null?de.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return ct!==null?null:he(ve,de,""+we,Ye);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case c:return we.key===ct?Me(ve,de,we,Ye):null;case d:return we.key===ct?ze(ve,de,we,Ye):null;case T:return ct=we._init,St(ve,de,ct(we._payload),Ye)}if(se(we)||k(we))return ct!==null?null:it(ve,de,we,Ye,null);Oo(ve,we)}return null}function Bt(ve,de,we,Ye,ct){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return ve=ve.get(we)||null,he(de,ve,""+Ye,ct);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case c:return ve=ve.get(Ye.key===null?we:Ye.key)||null,Me(de,ve,Ye,ct);case d:return ve=ve.get(Ye.key===null?we:Ye.key)||null,ze(de,ve,Ye,ct);case T:var Dt=Ye._init;return Bt(ve,de,we,Dt(Ye._payload),ct)}if(se(Ye)||k(Ye))return ve=ve.get(we)||null,it(de,ve,Ye,ct,null);Oo(de,Ye)}return null}function Je(ve,de,we,Ye){for(var ct=null,Dt=null,Nt=de,tn=de=0,Kn=null;Nt!==null&&tn<we.length;tn++){Nt.index>tn?(Kn=Nt,Nt=null):Kn=Nt.sibling;var Zt=St(ve,Nt,we[tn],Ye);if(Zt===null){Nt===null&&(Nt=Kn);break}h&&Nt&&Zt.alternate===null&&f(ve,Nt),de=D(Zt,de,tn),Dt===null?ct=Zt:Dt.sibling=Zt,Dt=Zt,Nt=Kn}if(tn===we.length)return _(ve,Nt),Ln&&ma(ve,tn),ct;if(Nt===null){for(;tn<we.length;tn++)Nt=Rt(ve,we[tn],Ye),Nt!==null&&(de=D(Nt,de,tn),Dt===null?ct=Nt:Dt.sibling=Nt,Dt=Nt);return Ln&&ma(ve,tn),ct}for(Nt=b(ve,Nt);tn<we.length;tn++)Kn=Bt(Nt,ve,tn,we[tn],Ye),Kn!==null&&(h&&Kn.alternate!==null&&Nt.delete(Kn.key===null?tn:Kn.key),de=D(Kn,de,tn),Dt===null?ct=Kn:Dt.sibling=Kn,Dt=Kn);return h&&Nt.forEach(function(so){return f(ve,so)}),Ln&&ma(ve,tn),ct}function bi(ve,de,we,Ye){var ct=k(we);if(typeof ct!="function")throw Error(o(150));if(we=ct.call(we),we==null)throw Error(o(151));for(var Dt=ct=null,Nt=de,tn=de=0,Kn=null,Zt=we.next();Nt!==null&&!Zt.done;tn++,Zt=we.next()){Nt.index>tn?(Kn=Nt,Nt=null):Kn=Nt.sibling;var so=St(ve,Nt,Zt.value,Ye);if(so===null){Nt===null&&(Nt=Kn);break}h&&Nt&&so.alternate===null&&f(ve,Nt),de=D(so,de,tn),Dt===null?ct=so:Dt.sibling=so,Dt=so,Nt=Kn}if(Zt.done)return _(ve,Nt),Ln&&ma(ve,tn),ct;if(Nt===null){for(;!Zt.done;tn++,Zt=we.next())Zt=Rt(ve,Zt.value,Ye),Zt!==null&&(de=D(Zt,de,tn),Dt===null?ct=Zt:Dt.sibling=Zt,Dt=Zt);return Ln&&ma(ve,tn),ct}for(Nt=b(ve,Nt);!Zt.done;tn++,Zt=we.next())Zt=Bt(Nt,ve,tn,Zt.value,Ye),Zt!==null&&(h&&Zt.alternate!==null&&Nt.delete(Zt.key===null?tn:Zt.key),de=D(Zt,de,tn),Dt===null?ct=Zt:Dt.sibling=Zt,Dt=Zt);return h&&Nt.forEach(function(rp){return f(ve,rp)}),Ln&&ma(ve,tn),ct}function Er(ve,de,we,Ye){if(typeof we=="object"&&we!==null&&we.type===p&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case c:e:{for(var ct=we.key,Dt=de;Dt!==null;){if(Dt.key===ct){if(ct=we.type,ct===p){if(Dt.tag===7){_(ve,Dt.sibling),de=R(Dt,we.props.children),de.return=ve,ve=de;break e}}else if(Dt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===T&&_l(ct)===Dt.type){_(ve,Dt.sibling),de=R(Dt,we.props),de.ref=xl(ve,Dt,we),de.return=ve,ve=de;break e}_(ve,Dt);break}else f(ve,Dt);Dt=Dt.sibling}we.type===p?(de=Oa(we.props.children,ve.mode,Ye,we.key),de.return=ve,ve=de):(Ye=Hh(we.type,we.key,we.props,null,ve.mode,Ye),Ye.ref=xl(ve,de,we),Ye.return=ve,ve=Ye)}return q(ve);case d:e:{for(Dt=we.key;de!==null;){if(de.key===Dt)if(de.tag===4&&de.stateNode.containerInfo===we.containerInfo&&de.stateNode.implementation===we.implementation){_(ve,de.sibling),de=R(de,we.children||[]),de.return=ve,ve=de;break e}else{_(ve,de);break}else f(ve,de);de=de.sibling}de=Gh(we,ve.mode,Ye),de.return=ve,ve=de}return q(ve);case T:return Dt=we._init,Er(ve,de,Dt(we._payload),Ye)}if(se(we))return Je(ve,de,we,Ye);if(k(we))return bi(ve,de,we,Ye);Oo(ve,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,de!==null&&de.tag===6?(_(ve,de.sibling),de=R(de,we),de.return=ve,ve=de):(_(ve,de),de=Wh(we,ve.mode,Ye),de.return=ve,ve=de),q(ve)):_(ve,de)}return Er}var js=xg(!0),_g=xg(!1),wl={},ir=xi(wl),ga=xi(wl),ya=xi(wl);function ns(h){if(h===wl)throw Error(o(174));return h}function yh(h,f){It(ya,f),It(ga,h),It(ir,wl),h=ie(f),$t(ir),It(ir,h)}function Sl(){$t(ir),$t(ga),$t(ya)}function wg(h){var f=ns(ya.current),_=ns(ir.current);f=V(_,h.type,f),_!==f&&(It(ga,h),It(ir,f))}function Cd(h){ga.current===h&&($t(ir),$t(ga))}var kn=xi(0);function vh(h){for(var f=h;f!==null;){if(f.tag===13){var _=f.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Jc(_)||Bs(_)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var yr=[];function va(){for(var h=0;h<yr.length;h++){var f=yr[h];Ie?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}yr.length=0}var Pu=l.ReactCurrentDispatcher,vr=l.ReactCurrentBatchConfig,xa=0,Un=null,ci=null,hi=null,xh=!1,Ts=!1,_a=0,Ru=0;function fi(){throw Error(o(321))}function _h(h,f){if(f===null)return!1;for(var _=0;_<f.length&&_<h.length;_++)if(!Vi(h[_],f[_]))return!1;return!0}function Ml(h,f,_,b,R,D){if(xa=D,Un=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Pu.current=h===null||h.memoizedState===null?Dd:kd,h=_(b,R),Ts){D=0;do{if(Ts=!1,_a=0,25<=D)throw Error(o(301));D+=1,hi=ci=null,f.updateQueue=null,Pu.current=Ud,h=_(b,R)}while(Ts)}if(Pu.current=Al,f=ci!==null&&ci.next!==null,xa=0,hi=ci=Un=null,xh=!1,f)throw Error(o(300));return h}function Fo(){var h=_a!==0;return _a=0,h}function is(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Un.memoizedState=hi=h:hi=hi.next=h,hi}function rs(){if(ci===null){var h=Un.alternate;h=h!==null?h.memoizedState:null}else h=ci.next;var f=hi===null?Un.memoizedState:hi.next;if(f!==null)hi=f,ci=h;else{if(h===null)throw Error(o(310));ci=h,h={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},hi===null?Un.memoizedState=hi=h:hi=hi.next=h}return hi}function As(h,f){return typeof f=="function"?f(h):f}function Nu(h){var f=rs(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var b=ci,R=b.baseQueue,D=_.pending;if(D!==null){if(R!==null){var q=R.next;R.next=D.next,D.next=q}b.baseQueue=R=D,_.pending=null}if(R!==null){D=R.next,b=b.baseState;var he=q=null,Me=null,ze=D;do{var it=ze.lane;if((xa&it)===it)Me!==null&&(Me=Me.next={lane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),b=ze.hasEagerState?ze.eagerState:h(b,ze.action);else{var Rt={lane:it,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null};Me===null?(he=Me=Rt,q=b):Me=Me.next=Rt,Un.lanes|=it,Ps|=it}ze=ze.next}while(ze!==null&&ze!==D);Me===null?q=b:Me.next=he,Vi(b,f.memoizedState)||(di=!0),f.memoizedState=b,f.baseState=q,f.baseQueue=Me,_.lastRenderedState=b}if(h=_.interleaved,h!==null){R=h;do D=R.lane,Un.lanes|=D,Ps|=D,R=R.next;while(R!==h)}else R===null&&(_.lanes=0);return[f.memoizedState,_.dispatch]}function Lu(h){var f=rs(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var b=_.dispatch,R=_.pending,D=f.memoizedState;if(R!==null){_.pending=null;var q=R=R.next;do D=h(D,q.action),q=q.next;while(q!==R);Vi(D,f.memoizedState)||(di=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),_.lastRenderedState=D}return[D,b]}function Pd(){}function Rd(h,f){var _=Un,b=rs(),R=f(),D=!Vi(b.memoizedState,R);if(D&&(b.memoizedState=R,di=!0),b=b.queue,El(Xs.bind(null,_,b,h),[h]),b.getSnapshot!==f||D||hi!==null&&hi.memoizedState.tag&1){if(_.flags|=2048,Du(9,Ld.bind(null,_,b,R,f),void 0,null),Wn===null)throw Error(o(349));(xa&30)!==0||Nd(_,f,R)}return R}function Nd(h,f,_){h.flags|=16384,h={getSnapshot:f,value:_},f=Un.updateQueue,f===null?(f={lastEffect:null,stores:null},Un.updateQueue=f,f.stores=[h]):(_=f.stores,_===null?f.stores=[h]:_.push(h))}function Ld(h,f,_,b){f.value=_,f.getSnapshot=b,wh(f)&&ki(h,1,-1)}function Xs(h,f,_){return _(function(){wh(f)&&ki(h,1,-1)})}function wh(h){var f=h.getSnapshot;h=h.value;try{var _=f();return!Vi(h,_)}catch{return!0}}function Iu(h){var f=is();return typeof h=="function"&&(h=h()),f.memoizedState=f.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:h},f.queue=h,h=h.dispatch=Wv.bind(null,Un,h),[f.memoizedState,h]}function Du(h,f,_,b){return h={tag:h,create:f,destroy:_,deps:b,next:null},f=Un.updateQueue,f===null?(f={lastEffect:null,stores:null},Un.updateQueue=f,f.lastEffect=h.next=h):(_=f.lastEffect,_===null?f.lastEffect=h.next=h:(b=_.next,_.next=h,h.next=b,f.lastEffect=h)),h}function Sg(){return rs().memoizedState}function Bo(h,f,_,b){var R=is();Un.flags|=h,R.memoizedState=Du(1|f,_,void 0,b===void 0?null:b)}function Sh(h,f,_,b){var R=rs();b=b===void 0?null:b;var D=void 0;if(ci!==null){var q=ci.memoizedState;if(D=q.destroy,b!==null&&_h(b,q.deps)){R.memoizedState=Du(f,_,D,b);return}}Un.flags|=h,R.memoizedState=Du(1|f,_,D,b)}function Mh(h,f){return Bo(8390656,8,h,f)}function El(h,f){return Sh(2048,8,h,f)}function En(h,f){return Sh(4,2,h,f)}function Eh(h,f){return Sh(4,4,h,f)}function ku(h,f){if(typeof f=="function")return h=h(),f(h),function(){f(null)};if(f!=null)return h=h(),f.current=h,function(){f.current=null}}function bl(h,f,_){return _=_!=null?_.concat([h]):null,Sh(4,4,ku.bind(null,f,h),_)}function bh(){}function Th(h,f){var _=rs();f=f===void 0?null:f;var b=_.memoizedState;return b!==null&&f!==null&&_h(f,b[1])?b[0]:(_.memoizedState=[h,f],h)}function Tl(h,f){var _=rs();f=f===void 0?null:f;var b=_.memoizedState;return b!==null&&f!==null&&_h(f,b[1])?b[0]:(h=h(),_.memoizedState=[h,f],h)}function Ah(h,f){var _=Wt;Wt=_!==0&&4>_?_:4,h(!0);var b=vr.transition;vr.transition={};try{h(!1),f()}finally{Wt=_,vr.transition=b}}function wa(){return rs().memoizedState}function Mg(h,f,_){var b=ls(h);_={lane:b,action:_,hasEagerState:!1,eagerState:null,next:null},Eg(h)?Id(f,_):(Uu(h,f,_),_=on(),h=ki(h,b,_),h!==null&&Ou(h,f,b))}function Wv(h,f,_){var b=ls(h),R={lane:b,action:_,hasEagerState:!1,eagerState:null,next:null};if(Eg(h))Id(f,R);else{Uu(h,f,R);var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var q=f.lastRenderedState,he=D(q,_);if(R.hasEagerState=!0,R.eagerState=he,Vi(he,q))return}catch{}finally{}_=on(),h=ki(h,b,_),h!==null&&Ou(h,f,b)}}function Eg(h){var f=h.alternate;return h===Un||f!==null&&f===Un}function Id(h,f){Ts=xh=!0;var _=h.pending;_===null?f.next=f:(f.next=_.next,_.next=f),h.pending=f}function Uu(h,f,_){Wn!==null&&(h.mode&1)!==0&&(kt&2)===0?(h=f.interleaved,h===null?(_.next=_,Ur===null?Ur=[f]:Ur.push(f)):(_.next=h.next,h.next=_),f.interleaved=_):(h=f.pending,h===null?_.next=_:(_.next=h.next,h.next=_),f.pending=_)}function Ou(h,f,_){if((_&4194240)!==0){var b=f.lanes;b&=h.pendingLanes,_|=b,f.lanes=_,Es(h,_)}}var Al={readContext:nr,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Dd={readContext:nr,useCallback:function(h,f){return is().memoizedState=[h,f===void 0?null:f],h},useContext:nr,useEffect:Mh,useImperativeHandle:function(h,f,_){return _=_!=null?_.concat([h]):null,Bo(4194308,4,ku.bind(null,f,h),_)},useLayoutEffect:function(h,f){return Bo(4194308,4,h,f)},useInsertionEffect:function(h,f){return Bo(4,2,h,f)},useMemo:function(h,f){var _=is();return f=f===void 0?null:f,h=h(),_.memoizedState=[h,f],h},useReducer:function(h,f,_){var b=is();return f=_!==void 0?_(f):f,b.memoizedState=b.baseState=f,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:f},b.queue=h,h=h.dispatch=Mg.bind(null,Un,h),[b.memoizedState,h]},useRef:function(h){var f=is();return h={current:h},f.memoizedState=h},useState:Iu,useDebugValue:bh,useDeferredValue:function(h){var f=Iu(h),_=f[0],b=f[1];return Mh(function(){var R=vr.transition;vr.transition={};try{b(h)}finally{vr.transition=R}},[h]),_},useTransition:function(){var h=Iu(!1),f=h[0];return h=Ah.bind(null,h[1]),is().memoizedState=h,[f,h]},useMutableSource:function(){},useSyncExternalStore:function(h,f,_){var b=Un,R=is();if(Ln){if(_===void 0)throw Error(o(407));_=_()}else{if(_=f(),Wn===null)throw Error(o(349));(xa&30)!==0||Nd(b,f,_)}R.memoizedState=_;var D={value:_,getSnapshot:f};return R.queue=D,Mh(Xs.bind(null,b,D,h),[h]),b.flags|=2048,Du(9,Ld.bind(null,b,D,_,f),void 0,null),_},useId:function(){var h=is(),f=Wn.identifierPrefix;if(Ln){var _=Gs,b=Ws;_=(b&~(1<<32-Ir(b)-1)).toString(32)+_,f=":"+f+"R"+_,_=_a++,0<_&&(f+="H"+_.toString(32)),f+=":"}else _=Ru++,f=":"+f+"r"+_.toString(32)+":";return h.memoizedState=f},unstable_isNewReconciler:!1},kd={readContext:nr,useCallback:Th,useContext:nr,useEffect:El,useImperativeHandle:bl,useInsertionEffect:En,useLayoutEffect:Eh,useMemo:Tl,useReducer:Nu,useRef:Sg,useState:function(){return Nu(As)},useDebugValue:bh,useDeferredValue:function(h){var f=Nu(As),_=f[0],b=f[1];return El(function(){var R=vr.transition;vr.transition={};try{b(h)}finally{vr.transition=R}},[h]),_},useTransition:function(){var h=Nu(As)[0],f=rs().memoizedState;return[h,f]},useMutableSource:Pd,useSyncExternalStore:Rd,useId:wa,unstable_isNewReconciler:!1},Ud={readContext:nr,useCallback:Th,useContext:nr,useEffect:El,useImperativeHandle:bl,useInsertionEffect:En,useLayoutEffect:Eh,useMemo:Tl,useReducer:Lu,useRef:Sg,useState:function(){return Lu(As)},useDebugValue:bh,useDeferredValue:function(h){var f=Lu(As),_=f[0],b=f[1];return El(function(){var R=vr.transition;vr.transition={};try{b(h)}finally{vr.transition=R}},[h]),_},useTransition:function(){var h=Lu(As)[0],f=rs().memoizedState;return[h,f]},useMutableSource:Pd,useSyncExternalStore:Rd,useId:wa,unstable_isNewReconciler:!1};function Od(h,f){try{var _="",b=f;do _+=xd(b),b=b.return;while(b);var R=_}catch(D){R=`
Error generating stack: `+D.message+`
`+D.stack}return{value:h,source:f,stack:R}}function Ch(h,f){try{console.error(f.value)}catch(_){setTimeout(function(){throw _})}}var Gv=typeof WeakMap=="function"?WeakMap:Map;function bg(h,f,_){_=Hs(-1,_),_.tag=3,_.payload={element:null};var b=f.value;return _.callback=function(){Il||(Il=!0,Nn=b),Ch(h,f)},_}function Ph(h,f,_){_=Hs(-1,_),_.tag=3;var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var R=f.value;_.payload=function(){return b(R)},_.callback=function(){Ch(h,f)}}var D=h.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(_.callback=function(){Ch(h,f),typeof b!="function"&&(as===null?as=new Set([this]):as.add(this));var q=f.stack;this.componentDidCatch(f.value,{componentStack:q!==null?q:""})}),_}function $s(h,f,_){var b=h.pingCache;if(b===null){b=h.pingCache=new Gv;var R=new Set;b.set(f,R)}else R=b.get(f),R===void 0&&(R=new Set,b.set(f,R));R.has(_)||(R.add(_),h=tp.bind(null,h,f,_),f.then(h,h))}function Fd(h){do{var f;if((f=h.tag===13)&&(f=h.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return h;h=h.return}while(h!==null);return null}function Sa(h,f,_,b,R){return(h.mode&1)===0?(h===f?h.flags|=65536:(h.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(f=Hs(-1,1),f.tag=2,Do(_,f))),_.lanes|=1),h):(h.flags|=65536,h.lanes=R,h)}function ri(h){h.flags|=4}function Cl(h,f){if(h!==null&&h.child===f.child)return!0;if((f.flags&16)!==0)return!1;for(h=f.child;h!==null;){if((h.flags&12854)!==0||(h.subtreeFlags&12854)!==0)return!1;h=h.sibling}return!0}var xr,Ma,Rh,Nh;if(Ke)xr=function(h,f){for(var _=f.child;_!==null;){if(_.tag===5||_.tag===6)Z(h,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Ma=function(){},Rh=function(h,f,_,b,R){if(h=h.memoizedProps,h!==b){var D=f.stateNode,q=ns(ir.current);_=fe(D,_,h,b,R,q),(f.updateQueue=_)&&ri(f)}},Nh=function(h,f,_,b){_!==b&&ri(f)};else if(Re){xr=function(h,f,_,b){for(var R=f.child;R!==null;){if(R.tag===5){var D=R.stateNode;_&&b&&(D=wn(D,R.type,R.memoizedProps,R)),Z(h,D)}else if(R.tag===6)D=R.stateNode,_&&b&&(D=Ni(D,R.memoizedProps,R)),Z(h,D);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)D=R.child,D!==null&&(D.return=R),xr(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var zo=function(h,f,_,b){for(var R=f.child;R!==null;){if(R.tag===5){var D=R.stateNode;_&&b&&(D=wn(D,R.type,R.memoizedProps,R)),ln(h,D)}else if(R.tag===6)D=R.stateNode,_&&b&&(D=Ni(D,R.memoizedProps,R)),ln(h,D);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)D=R.child,D!==null&&(D.return=R),zo(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};Ma=function(h,f){var _=f.stateNode;if(!Cl(h,f)){h=_.containerInfo;var b=an(h);zo(b,f,!1,!1),_.pendingChildren=b,ri(f),ni(h,b)}},Rh=function(h,f,_,b,R){var D=h.stateNode,q=h.memoizedProps;if((h=Cl(h,f))&&q===b)f.stateNode=D;else{var he=f.stateNode,Me=ns(ir.current),ze=null;q!==b&&(ze=fe(he,_,q,b,R,Me)),h&&ze===null?f.stateNode=D:(D=ut(D,ze,_,q,b,f,h,he),ce(D,_,b,R,Me)&&ri(f),f.stateNode=D,h?ri(f):xr(D,f,!1,!1))}},Nh=function(h,f,_,b){_!==b?(h=ns(ya.current),_=ns(ir.current),f.stateNode=be(b,h,_,f),ri(f)):f.stateNode=h.stateNode}}else Ma=function(){},Rh=function(){},Nh=function(){};function qs(h,f){if(!Ln)switch(h.tailMode){case"hidden":f=h.tail;for(var _=null;f!==null;)f.alternate!==null&&(_=f),f=f.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var b=null;_!==null;)_.alternate!==null&&(b=_),_=_.sibling;b===null?f||h.tail===null?h.tail=null:h.tail.sibling=null:b.sibling=null}}function Hn(h){var f=h.alternate!==null&&h.alternate.child===h.child,_=0,b=0;if(f)for(var R=h.child;R!==null;)_|=R.lanes|R.childLanes,b|=R.subtreeFlags&14680064,b|=R.flags&14680064,R.return=h,R=R.sibling;else for(R=h.child;R!==null;)_|=R.lanes|R.childLanes,b|=R.subtreeFlags,b|=R.flags,R.return=h,R=R.sibling;return h.subtreeFlags|=b,h.childLanes=_,f}function Lh(h,f,_){var b=f.pendingProps;switch(bd(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(f),null;case 1:return qn(f.type)&&Lo(),Hn(f),null;case 3:return b=f.stateNode,Sl(),$t(gn),$t($n),va(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(Cu(f)?ri(f):h===null||h.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Br!==null&&(Ku(Br),Br=null))),Ma(h,f),Hn(f),null;case 5:Cd(f),_=ns(ya.current);var R=f.type;if(h!==null&&f.stateNode!=null)Rh(h,f,R,b,_),h.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!b){if(f.stateNode===null)throw Error(o(166));return Hn(f),null}if(h=ns(ir.current),Cu(f)){if(!Se)throw Error(o(175));h=Pe(f.stateNode,f.type,f.memoizedProps,_,h,f,!yl),f.updateQueue=h,h!==null&&ri(f)}else{var D=G(R,b,_,h,f);xr(D,f,!1,!1),f.stateNode=D,ce(D,R,b,_,h)&&ri(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Hn(f),null;case 6:if(h&&f.stateNode!=null)Nh(h,f,h.memoizedProps,b);else{if(typeof b!="string"&&f.stateNode===null)throw Error(o(166));if(h=ns(ya.current),_=ns(ir.current),Cu(f)){if(!Se)throw Error(o(176));if(h=f.stateNode,b=f.memoizedProps,(_=at(h,b,f,!yl))&&(R=Wi,R!==null))switch(D=(R.mode&1)!==0,R.tag){case 3:vi(R.stateNode.containerInfo,h,b,D);break;case 5:mr(R.type,R.memoizedProps,R.stateNode,h,b,D)}_&&ri(f)}else f.stateNode=be(b,h,_,f)}return Hn(f),null;case 13:if($t(kn),b=f.memoizedState,Ln&&_i!==null&&(f.mode&1)!==0&&(f.flags&128)===0){for(h=_i;h;)h=j(h);return vl(),f.flags|=98560,f}if(b!==null&&b.dehydrated!==null){if(b=Cu(f),h===null){if(!b)throw Error(o(318));if(!Se)throw Error(o(344));if(h=f.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));wt(h,f)}else vl(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;return Hn(f),null}return Br!==null&&(Ku(Br),Br=null),(f.flags&128)!==0?(f.lanes=_,f):(b=b!==null,_=!1,h===null?Cu(f):_=h.memoizedState!==null,b&&!_&&(f.child.flags|=8192,(f.mode&1)!==0&&(h===null||(kn.current&1)!==0?Bn===0&&(Bn=3):Bh())),f.updateQueue!==null&&(f.flags|=4),Hn(f),null);case 4:return Sl(),Ma(h,f),h===null&&tt(f.stateNode.containerInfo),Hn(f),null;case 10:return Au(f.type._context),Hn(f),null;case 17:return qn(f.type)&&Lo(),Hn(f),null;case 19:if($t(kn),R=f.memoizedState,R===null)return Hn(f),null;if(b=(f.flags&128)!==0,D=R.rendering,D===null)if(b)qs(R,!1);else{if(Bn!==0||h!==null&&(h.flags&128)!==0)for(h=f.child;h!==null;){if(D=vh(h),D!==null){for(f.flags|=128,qs(R,!1),h=D.updateQueue,h!==null&&(f.updateQueue=h,f.flags|=4),f.subtreeFlags=0,h=_,b=f.child;b!==null;)_=b,R=h,_.flags&=14680066,D=_.alternate,D===null?(_.childLanes=0,_.lanes=R,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=D.childLanes,_.lanes=D.lanes,_.child=D.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=D.memoizedProps,_.memoizedState=D.memoizedState,_.updateQueue=D.updateQueue,_.type=D.type,R=D.dependencies,_.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),b=b.sibling;return It(kn,kn.current&1|2),f.child}h=h.sibling}R.tail!==null&&ii()>Wo&&(f.flags|=128,b=!0,qs(R,!1),f.lanes=4194304)}else{if(!b)if(h=vh(D),h!==null){if(f.flags|=128,b=!0,h=h.updateQueue,h!==null&&(f.updateQueue=h,f.flags|=4),qs(R,!0),R.tail===null&&R.tailMode==="hidden"&&!D.alternate&&!Ln)return Hn(f),null}else 2*ii()-R.renderingStartTime>Wo&&_!==1073741824&&(f.flags|=128,b=!0,qs(R,!1),f.lanes=4194304);R.isBackwards?(D.sibling=f.child,f.child=D):(h=R.last,h!==null?h.sibling=D:f.child=D,R.last=D)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=ii(),f.sibling=null,h=kn.current,It(kn,b?h&1|2:h&1),f):(Hn(f),null);case 22:case 23:return Ju(),b=f.memoizedState!==null,h!==null&&h.memoizedState!==null!==b&&(f.flags|=8192),b&&(f.mode&1)!==0?(Di&1073741824)!==0&&(Hn(f),Ke&&f.subtreeFlags&6&&(f.flags|=8192)):Hn(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var Bd=l.ReactCurrentOwner,di=!1;function Fn(h,f,_,b){f.child=h===null?_g(f,null,_,b):js(f,h.child,_,b)}function bn(h,f,_,b,R){_=_.render;var D=f.ref;return pl(f,R),b=Ml(h,f,_,b,D,R),_=Fo(),h!==null&&!di?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~R,rr(h,f,R)):(Ln&&_&&Ed(f),f.flags|=1,Fn(h,f,b,R),f.child)}function xn(h,f,_,b,R){if(h===null){var D=_.type;return typeof D=="function"&&!Vh(D)&&D.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(f.tag=15,f.type=D,Ys(h,f,D,b,R)):(h=Hh(_.type,null,b,f,f.mode,R),h.ref=f.ref,h.return=f,f.child=h)}if(D=h.child,(h.lanes&R)===0){var q=D.memoizedProps;if(_=_.compare,_=_!==null?_:ts,_(q,b)&&h.ref===f.ref)return rr(h,f,R)}return f.flags|=1,h=ro(D,b),h.ref=f.ref,h.return=f,f.child=h}function Ys(h,f,_,b,R){if(h!==null&&ts(h.memoizedProps,b)&&h.ref===f.ref)if(di=!1,(h.lanes&R)!==0)(h.flags&131072)!==0&&(di=!0);else return f.lanes=h.lanes,rr(h,f,R);return Ks(h,f,_,b,R)}function wi(h,f,_){var b=f.pendingProps,R=b.children,D=h!==null?h.memoizedState:null;if(b.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null},It(La,Di),Di|=_;else if((_&1073741824)!==0)f.memoizedState={baseLanes:0,cachePool:null},b=D!==null?D.baseLanes:_,It(La,Di),Di|=b;else return h=D!==null?D.baseLanes|_:_,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:h,cachePool:null},f.updateQueue=null,It(La,Di),Di|=h,null;else D!==null?(b=D.baseLanes|_,f.memoizedState=null):b=_,It(La,Di),Di|=b;return Fn(h,f,R,_),f.child}function Gi(h,f){var _=f.ref;(h===null&&_!==null||h!==null&&h.ref!==_)&&(f.flags|=512,f.flags|=2097152)}function Ks(h,f,_,b,R){var D=qn(_)?Qr:$n.current;return D=es(f,D),pl(f,R),_=Ml(h,f,_,b,D,R),b=Fo(),h!==null&&!di?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~R,rr(h,f,R)):(Ln&&b&&Ed(f),f.flags|=1,Fn(h,f,_,R),f.child)}function Ea(h,f,_,b,R){if(qn(_)){var D=!0;Zc(f)}else D=!1;if(pl(f,R),f.stateNode===null)h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),mg(f,_,b),Md(f,_,b,R),b=!0;else if(h===null){var q=f.stateNode,he=f.memoizedProps;q.props=he;var Me=q.context,ze=_.contextType;typeof ze=="object"&&ze!==null?ze=nr(ze):(ze=qn(_)?Qr:$n.current,ze=es(f,ze));var it=_.getDerivedStateFromProps,Rt=typeof it=="function"||typeof q.getSnapshotBeforeUpdate=="function";Rt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(he!==b||Me!==ze)&&gg(f,q,b,ze),Or=!1;var St=f.memoizedState;q.state=St,hh(f,b,q,R),Me=f.memoizedState,he!==b||St!==Me||gn.current||Or?(typeof it=="function"&&(wd(f,_,it,b),Me=f.memoizedState),(he=Or||Sd(f,_,he,b,St,Me,ze))?(Rt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=Me),q.props=b,q.state=Me,q.context=ze,b=he):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{q=f.stateNode,_d(h,f),he=f.memoizedProps,ze=f.type===f.elementType?he:tr(f.type,he),q.props=ze,Rt=f.pendingProps,St=q.context,Me=_.contextType,typeof Me=="object"&&Me!==null?Me=nr(Me):(Me=qn(_)?Qr:$n.current,Me=es(f,Me));var Bt=_.getDerivedStateFromProps;(it=typeof Bt=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(he!==Rt||St!==Me)&&gg(f,q,b,Me),Or=!1,St=f.memoizedState,q.state=St,hh(f,b,q,R);var Je=f.memoizedState;he!==Rt||St!==Je||gn.current||Or?(typeof Bt=="function"&&(wd(f,_,Bt,b),Je=f.memoizedState),(ze=Or||Sd(f,_,ze,b,St,Je,Me)||!1)?(it||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(b,Je,Me),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(b,Je,Me)),typeof q.componentDidUpdate=="function"&&(f.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof q.componentDidUpdate!="function"||he===h.memoizedProps&&St===h.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||he===h.memoizedProps&&St===h.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=Je),q.props=b,q.state=Je,q.context=Me,b=ze):(typeof q.componentDidUpdate!="function"||he===h.memoizedProps&&St===h.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||he===h.memoizedProps&&St===h.memoizedState||(f.flags|=1024),b=!1)}return Ii(h,f,_,b,D,R)}function Ii(h,f,_,b,R,D){Gi(h,f);var q=(f.flags&128)!==0;if(!b&&!q)return R&&Qc(f,_,!1),rr(h,f,D);b=f.stateNode,Bd.current=f;var he=q&&typeof _.getDerivedStateFromError!="function"?null:b.render();return f.flags|=1,h!==null&&q?(f.child=js(f,h.child,null,D),f.child=js(f,null,he,D)):Fn(h,f,he,D),f.memoizedState=b.state,R&&Qc(f,_,!0),f.child}function Fu(h){var f=h.stateNode;f.pendingContext?_u(h,f.pendingContext,f.pendingContext!==f.context):f.context&&_u(h,f.context,!1),yh(h,f.containerInfo)}function zd(h,f,_,b,R){return vl(),gh(R),f.flags|=256,Fn(h,f,_,b),f.child}var Bu={dehydrated:null,treeContext:null,retryLane:0};function ba(h){return{baseLanes:h,cachePool:null}}function Vd(h,f,_){var b=f.pendingProps,R=kn.current,D=!1,q=(f.flags&128)!==0,he;if((he=q)||(he=h!==null&&h.memoizedState===null?!1:(R&2)!==0),he?(D=!0,f.flags&=-129):(h===null||h.memoizedState!==null)&&(R|=1),It(kn,R&1),h===null)return Uo(f),h=f.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((f.mode&1)===0?f.lanes=1:Bs(h)?f.lanes=8:f.lanes=1073741824,null):(R=b.children,h=b.fallback,D?(b=f.mode,D=f.child,R={mode:"hidden",children:R},(b&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=R):D=ec(R,b,0,null),h=Oa(h,b,_,null),D.return=f,h.return=f,D.sibling=h,f.child=D,f.child.memoizedState=ba(_),f.memoizedState=Bu,h):ss(f,R));if(R=h.memoizedState,R!==null){if(he=R.dehydrated,he!==null){if(q)return f.flags&256?(f.flags&=-257,Vu(h,f,_,Error(o(422)))):f.memoizedState!==null?(f.child=h.child,f.flags|=128,null):(D=b.fallback,R=f.mode,b=ec({mode:"visible",children:b.children},R,0,null),D=Oa(D,R,_,null),D.flags|=2,b.return=f,D.return=f,b.sibling=D,f.child=b,(f.mode&1)!==0&&js(f,h.child,null,_),f.child.memoizedState=ba(_),f.memoizedState=Bu,D);if((f.mode&1)===0)f=Vu(h,f,_,null);else if(Bs(he))f=Vu(h,f,_,Error(o(419)));else if(b=(_&h.childLanes)!==0,di||b){if(b=Wn,b!==null){switch(_&-_){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}b=(D&(b.suspendedLanes|_))!==0?0:D,b!==0&&b!==R.retryLane&&(R.retryLane=b,ki(h,b,-1))}Bh(),f=Vu(h,f,_,Error(o(421)))}else Jc(he)?(f.flags|=128,f.child=h.child,f=Rg.bind(null,h),cl(he,f),f=null):(_=R.treeContext,Se&&(_i=me(he),Wi=f,Ln=!0,Br=null,yl=!1,_!==null&&(Fr[gr++]=Ws,Fr[gr++]=Gs,Fr[gr++]=pa,Ws=_.id,Gs=_.overflow,pa=f)),f=ss(f,f.pendingProps.children),f.flags|=4096);return f}return D?(b=Ih(h,f,b.children,b.fallback,_),D=f.child,R=h.child.memoizedState,D.memoizedState=R===null?ba(_):{baseLanes:R.baseLanes|_,cachePool:null},D.childLanes=h.childLanes&~_,f.memoizedState=Bu,b):(_=zu(h,f,b.children,_),f.memoizedState=null,_)}return D?(b=Ih(h,f,b.children,b.fallback,_),D=f.child,R=h.child.memoizedState,D.memoizedState=R===null?ba(_):{baseLanes:R.baseLanes|_,cachePool:null},D.childLanes=h.childLanes&~_,f.memoizedState=Bu,b):(_=zu(h,f,b.children,_),f.memoizedState=null,_)}function ss(h,f){return f=ec({mode:"visible",children:f},h.mode,0,null),f.return=h,h.child=f}function zu(h,f,_,b){var R=h.child;return h=R.sibling,_=ro(R,{mode:"visible",children:_}),(f.mode&1)===0&&(_.lanes=b),_.return=f,_.sibling=null,h!==null&&(b=f.deletions,b===null?(f.deletions=[h],f.flags|=16):b.push(h)),f.child=_}function Ih(h,f,_,b,R){var D=f.mode;h=h.child;var q=h.sibling,he={mode:"hidden",children:_};return(D&1)===0&&f.child!==h?(_=f.child,_.childLanes=0,_.pendingProps=he,f.deletions=null):(_=ro(h,he),_.subtreeFlags=h.subtreeFlags&14680064),q!==null?b=ro(q,b):(b=Oa(b,D,R,null),b.flags|=2),b.return=f,_.return=f,_.sibling=b,f.child=_,b}function Vu(h,f,_,b){return b!==null&&gh(b),js(f,h.child,null,_),h=ss(f,f.pendingProps.children),h.flags|=2,f.memoizedState=null,h}function Tg(h,f,_){h.lanes|=f;var b=h.alternate;b!==null&&(b.lanes|=f),da(h.return,f,_)}function Cs(h,f,_,b,R){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:_,tailMode:R}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=b,D.tail=_,D.tailMode=R)}function Ta(h,f,_){var b=f.pendingProps,R=b.revealOrder,D=b.tail;if(Fn(h,f,b.children,_),b=kn.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=f.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Tg(h,_,f);else if(h.tag===19)Tg(h,_,f);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break e;for(;h.sibling===null;){if(h.return===null||h.return===f)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}b&=1}if(It(kn,b),(f.mode&1)===0)f.memoizedState=null;else switch(R){case"forwards":for(_=f.child,R=null;_!==null;)h=_.alternate,h!==null&&vh(h)===null&&(R=_),_=_.sibling;_=R,_===null?(R=f.child,f.child=null):(R=_.sibling,_.sibling=null),Cs(f,!1,R,_,D);break;case"backwards":for(_=null,R=f.child,f.child=null;R!==null;){if(h=R.alternate,h!==null&&vh(h)===null){f.child=R;break}h=R.sibling,R.sibling=_,_=R,R=h}Cs(f,!0,_,null,D);break;case"together":Cs(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function rr(h,f,_){if(h!==null&&(f.dependencies=h.dependencies),Ps|=f.lanes,(_&f.childLanes)===0)return null;if(h!==null&&f.child!==h.child)throw Error(o(153));if(f.child!==null){for(h=f.child,_=ro(h,h.pendingProps),f.child=_,_.return=f;h.sibling!==null;)h=h.sibling,_=_.sibling=ro(h,h.pendingProps),_.return=f;_.sibling=null}return f.child}function Dh(h,f,_){switch(f.tag){case 3:Fu(f),vl();break;case 5:wg(f);break;case 1:qn(f.type)&&Zc(f);break;case 4:yh(f,f.stateNode.containerInfo);break;case 10:fa(f,f.type._context,f.memoizedProps.value);break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(It(kn,kn.current&1),f.flags|=128,null):(_&f.child.childLanes)!==0?Vd(h,f,_):(It(kn,kn.current&1),h=rr(h,f,_),h!==null?h.sibling:null);It(kn,kn.current&1);break;case 19:if(b=(_&f.childLanes)!==0,(h.flags&128)!==0){if(b)return Ta(h,f,_);f.flags|=128}var R=f.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),It(kn,kn.current),b)break;return null;case 22:case 23:return f.lanes=0,wi(h,f,_)}return rr(h,f,_)}function kh(h,f){switch(bd(f),f.tag){case 1:return qn(f.type)&&Lo(),h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 3:return Sl(),$t(gn),$t($n),va(),h=f.flags,(h&65536)!==0&&(h&128)===0?(f.flags=h&-65537|128,f):null;case 5:return Cd(f),null;case 13:if($t(kn),h=f.memoizedState,h!==null&&h.dehydrated!==null){if(f.alternate===null)throw Error(o(340));vl()}return h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 19:return $t(kn),null;case 4:return Sl(),null;case 10:return Au(f.type._context),null;case 22:case 23:return Ju(),null;case 24:return null;default:return null}}var ji=!1,pi=!1,Aa=typeof WeakSet=="function"?WeakSet:Set,We=null;function zr(h,f){var _=h.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(b){$i(h,f,b)}else _.current=null}function Js(h,f,_){try{_()}catch(b){$i(h,f,b)}}var Hd=!1;function Wd(h,f){for(te(h.containerInfo),We=f;We!==null;)if(h=We,f=h.child,(h.subtreeFlags&1028)!==0&&f!==null)f.return=h,We=f;else for(;We!==null;){h=We;try{var _=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,R=_.memoizedState,D=h.stateNode,q=D.getSnapshotBeforeUpdate(h.elementType===h.type?b:tr(h.type,b),R);D.__reactInternalSnapshotBeforeUpdate=q}break;case 3:Ke&&qe(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(he){$i(h,h.return,he)}if(f=h.sibling,f!==null){f.return=h.return,We=f;break}We=h.return}return _=Hd,Hd=!1,_}function Zs(h,f,_){var b=f.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var R=b=b.next;do{if((R.tag&h)===h){var D=R.destroy;R.destroy=void 0,D!==void 0&&Js(f,_,D)}R=R.next}while(R!==b)}}function Si(h,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var _=f=f.next;do{if((_.tag&h)===h){var b=_.create;_.destroy=b()}_=_.next}while(_!==f)}}function Xi(h){var f=h.ref;if(f!==null){var _=h.stateNode;switch(h.tag){case 5:h=ne(_);break;default:h=_}typeof f=="function"?f(h):f.current=h}}function Rn(h,f,_){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(Mu,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(h=f.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var b=h=h.next;do{var R=b,D=R.destroy;R=R.tag,D!==void 0&&((R&2)!==0||(R&4)!==0)&&Js(f,_,D),b=b.next}while(b!==h)}break;case 1:if(zr(f,_),h=f.stateNode,typeof h.componentWillUnmount=="function")try{h.props=f.memoizedProps,h.state=f.memoizedState,h.componentWillUnmount()}catch(q){$i(f,_,q)}break;case 5:zr(f,_);break;case 4:Ke?Xd(h,f,_):Re&&Re&&(f=f.stateNode.containerInfo,_=an(f),Lr(f,_))}}function Vr(h,f,_){for(var b=f;;)if(Rn(h,b,_),b.child===null||Ke&&b.tag===4){if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function Gd(h){var f=h.alternate;f!==null&&(h.alternate=null,Gd(f)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(f=h.stateNode,f!==null&&yt(f)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function jd(h){return h.tag===5||h.tag===3||h.tag===4}function Uh(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||jd(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Oh(h){if(Ke){e:{for(var f=h.return;f!==null;){if(jd(f))break e;f=f.return}throw Error(o(160))}var _=f;switch(_.tag){case 5:f=_.stateNode,_.flags&32&&(en(f),_.flags&=-33),_=Uh(h),Pl(h,_,f);break;case 3:case 4:f=_.stateNode.containerInfo,_=Uh(h),Fh(h,_,f);break;default:throw Error(o(161))}}}function Fh(h,f,_){var b=h.tag;if(b===5||b===6)h=h.stateNode,f?nt(_,h,f):Qe(_,h);else if(b!==4&&(h=h.child,h!==null))for(Fh(h,f,_),h=h.sibling;h!==null;)Fh(h,f,_),h=h.sibling}function Pl(h,f,_){var b=h.tag;if(b===5||b===6)h=h.stateNode,f?_t(_,h,f):vt(_,h);else if(b!==4&&(h=h.child,h!==null))for(Pl(h,f,_),h=h.sibling;h!==null;)Pl(h,f,_),h=h.sibling}function Xd(h,f,_){for(var b=f,R=!1,D,q;;){if(!R){R=b.return;e:for(;;){if(R===null)throw Error(o(160));switch(D=R.stateNode,R.tag){case 5:q=!1;break e;case 3:D=D.containerInfo,q=!0;break e;case 4:D=D.containerInfo,q=!0;break e}R=R.return}R=!0}if(b.tag===5||b.tag===6)Vr(h,b,_),q?Xt(D,b.stateNode):dt(D,b.stateNode);else if(b.tag===18)q?Ht(D,b.stateNode):Ot(D,b.stateNode);else if(b.tag===4){if(b.child!==null){D=b.stateNode.containerInfo,q=!0,b.child.return=b,b=b.child;continue}}else if(Rn(h,b,_),b.child!==null){b.child.return=b,b=b.child;continue}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return,b.tag===4&&(R=!1)}b.sibling.return=b.return,b=b.sibling}}function Vo(h,f){if(Ke){switch(f.tag){case 0:case 11:case 14:case 15:Zs(3,f,f.return),Si(3,f),Zs(5,f,f.return);return;case 1:return;case 5:var _=f.stateNode;if(_!=null){var b=f.memoizedProps;h=h!==null?h.memoizedProps:b;var R=f.type,D=f.updateQueue;f.updateQueue=null,D!==null&&mt(_,D,R,h,b,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));_=f.memoizedProps,Ae(f.stateNode,h!==null?h.memoizedProps:_,_);return;case 3:Se&&h!==null&&h.memoizedState.isDehydrated&&Lt(f.stateNode.containerInfo);return;case 12:return;case 13:Rl(f);return;case 19:Rl(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:Zs(3,f,f.return),Si(3,f),Zs(5,f,f.return);return;case 12:return;case 13:Rl(f);return;case 19:Rl(f);return;case 3:Se&&h!==null&&h.memoizedState.isDehydrated&&Lt(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Re){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Lr(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Rl(h){var f=h.updateQueue;if(f!==null){h.updateQueue=null;var _=h.stateNode;_===null&&(_=h.stateNode=new Aa),f.forEach(function(b){var R=Ng.bind(null,h,b);_.has(b)||(_.add(b),b.then(R,R))})}}function jv(h,f){for(We=f;We!==null;){f=We;var _=f.deletions;if(_!==null)for(var b=0;b<_.length;b++){var R=_[b];try{var D=h;Ke?Xd(D,R,f):Vr(D,R,f);var q=R.alternate;q!==null&&(q.return=null),R.return=null}catch(ct){$i(R,f,ct)}}if(_=f.child,(f.subtreeFlags&12854)!==0&&_!==null)_.return=f,We=_;else for(;We!==null;){f=We;try{var he=f.flags;if(he&32&&Ke&&en(f.stateNode),he&512){var Me=f.alternate;if(Me!==null){var ze=Me.ref;ze!==null&&(typeof ze=="function"?ze(null):ze.current=null)}}if(he&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var it=f.alternate;(it===null||it.memoizedState===null)&&(qu=ii())}break;case 22:var Rt=f.memoizedState!==null,St=f.alternate,Bt=St!==null&&St.memoizedState!==null;if(_=f,Ke){e:if(b=_,R=Rt,D=null,Ke)for(var Je=b;;){if(Je.tag===5){if(D===null){D=Je;var bi=Je.stateNode;R?Pn(bi):Te(Je.stateNode,Je.memoizedProps)}}else if(Je.tag===6){if(D===null){var Er=Je.stateNode;R?le(Er):De(Er,Je.memoizedProps)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===b)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===b)break;for(;Je.sibling===null;){if(Je.return===null||Je.return===b)break e;D===Je&&(D=null),Je=Je.return}D===Je&&(D=null),Je.sibling.return=Je.return,Je=Je.sibling}}if(Rt&&!Bt&&(_.mode&1)!==0){We=_;for(var ve=_.child;ve!==null;){for(_=We=ve;We!==null;){b=We;var de=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Zs(4,b,b.return);break;case 1:zr(b,b.return);var we=b.stateNode;if(typeof we.componentWillUnmount=="function"){var Ye=b.return;try{we.props=b.memoizedProps,we.state=b.memoizedState,we.componentWillUnmount()}catch(ct){$i(b,Ye,ct)}}break;case 5:zr(b,b.return);break;case 22:if(b.memoizedState!==null){qd(_);continue}}de!==null?(de.return=b,We=de):qd(_)}ve=ve.sibling}}}switch(he&4102){case 2:Oh(f),f.flags&=-3;break;case 6:Oh(f),f.flags&=-3,Vo(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Vo(f.alternate,f);break;case 4:Vo(f.alternate,f)}}catch(ct){$i(f,f.return,ct)}if(_=f.sibling,_!==null){_.return=f.return,We=_;break}We=f.return}}}function Hu(h,f,_){We=h,Wu(h)}function Wu(h,f,_){for(var b=(h.mode&1)!==0;We!==null;){var R=We,D=R.child;if(R.tag===22&&b){var q=R.memoizedState!==null||ji;if(!q){var he=R.alternate,Me=he!==null&&he.memoizedState!==null||pi;he=ji;var ze=pi;if(ji=q,(pi=Me)&&!ze)for(We=R;We!==null;)q=We,Me=q.child,q.tag===22&&q.memoizedState!==null?Ca(R):Me!==null?(Me.return=q,We=Me):Ca(R);for(;D!==null;)We=D,Wu(D),D=D.sibling;We=R,ji=he,pi=ze}$d(h)}else(R.subtreeFlags&8772)!==0&&D!==null?(D.return=R,We=D):$d(h)}}function $d(h){for(;We!==null;){var f=We;if((f.flags&8772)!==0){var _=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:pi||Si(5,f);break;case 1:var b=f.stateNode;if(f.flags&4&&!pi)if(_===null)b.componentDidMount();else{var R=f.elementType===f.type?_.memoizedProps:tr(f.type,_.memoizedProps);b.componentDidUpdate(R,_.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var D=f.updateQueue;D!==null&&dg(f,D,b);break;case 3:var q=f.updateQueue;if(q!==null){if(_=null,f.child!==null)switch(f.child.tag){case 5:_=ne(f.child.stateNode);break;case 1:_=f.child.stateNode}dg(f,q,_)}break;case 5:var he=f.stateNode;_===null&&f.flags&4&&rt(he,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&f.memoizedState===null){var Me=f.alternate;if(Me!==null){var ze=Me.memoizedState;if(ze!==null){var it=ze.dehydrated;it!==null&&Ut(it)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}pi||f.flags&512&&Xi(f)}catch(Rt){$i(f,f.return,Rt)}}if(f===h){We=null;break}if(_=f.sibling,_!==null){_.return=f.return,We=_;break}We=f.return}}function qd(h){for(;We!==null;){var f=We;if(f===h){We=null;break}var _=f.sibling;if(_!==null){_.return=f.return,We=_;break}We=f.return}}function Ca(h){for(;We!==null;){var f=We;try{switch(f.tag){case 0:case 11:case 15:var _=f.return;try{Si(4,f)}catch(Me){$i(f,_,Me)}break;case 1:var b=f.stateNode;if(typeof b.componentDidMount=="function"){var R=f.return;try{b.componentDidMount()}catch(Me){$i(f,R,Me)}}var D=f.return;try{Xi(f)}catch(Me){$i(f,D,Me)}break;case 5:var q=f.return;try{Xi(f)}catch(Me){$i(f,q,Me)}}}catch(Me){$i(f,f.return,Me)}if(f===h){We=null;break}var he=f.sibling;if(he!==null){he.return=f.return,We=he;break}We=f.return}}var Gu=0,Pa=1,Ra=2,Qs=3,Nl=4;if(typeof Symbol=="function"&&Symbol.for){var Na=Symbol.for;Gu=Na("selector.component"),Pa=Na("selector.has_pseudo_class"),Ra=Na("selector.role"),Qs=Na("selector.test_id"),Nl=Na("selector.text")}function ju(h){var f=Ne(h);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(h=Vt(h),h===null)throw Error(o(362));return h.stateNode.current}function Xu(h,f){switch(f.$$typeof){case Gu:if(h.type===f.value)return!0;break;case Pa:e:{f=f.value,h=[h,0];for(var _=0;_<h.length;){var b=h[_++],R=h[_++],D=f[R];if(b.tag!==5||!_e(b)){for(;D!=null&&Xu(b,D);)R++,D=f[R];if(R===f.length){f=!0;break e}else for(b=b.child;b!==null;)h.push(b,R),b=b.sibling}}f=!1}return f;case Ra:if(h.tag===5&&Oe(h.stateNode,f.value))return!0;break;case Nl:if((h.tag===5||h.tag===6)&&(h=W(h),h!==null&&0<=h.indexOf(f.value)))return!0;break;case Qs:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ho(h){switch(h.$$typeof){case Gu:return"<"+(B(h.value)||"Unknown")+">";case Pa:return":has("+(Ho(h)||"")+")";case Ra:return'[role="'+h.value+'"]';case Nl:return'"'+h.value+'"';case Qs:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function _r(h,f){var _=[];h=[h,0];for(var b=0;b<h.length;){var R=h[b++],D=h[b++],q=f[D];if(R.tag!==5||!_e(R)){for(;q!=null&&Xu(R,q);)D++,q=f[D];if(D===f.length)_.push(R);else for(R=R.child;R!==null;)h.push(R,D),R=R.sibling}}return _}function eo(h,f){if(!bt)throw Error(o(363));h=ju(h),h=_r(h,f),f=[],h=Array.from(h);for(var _=0;_<h.length;){var b=h[_++];if(b.tag===5)_e(b)||f.push(b.stateNode);else for(b=b.child;b!==null;)h.push(b),b=b.sibling}return f}var Yd=Math.ceil,$u=l.ReactCurrentDispatcher,os=l.ReactCurrentOwner,yn=l.ReactCurrentBatchConfig,kt=0,Wn=null,vn=null,In=0,Di=0,La=xi(0),Bn=0,Ll=null,Ps=0,wr=0,Ia=0,to=null,Yn=null,qu=0,Wo=1/0;function Da(){Wo=ii()+500}var Il=!1,Nn=null,as=null,Dl=!1,Rs=null,ka=0,Ua=0,no=null,Tn=-1,zn=0;function on(){return(kt&6)!==0?ii():Tn!==-1?Tn:Tn=ii()}function ls(h){return(h.mode&1)===0?1:(kt&2)!==0&&In!==0?In&-In:fg.transition!==null?(zn===0&&(h=hl,hl<<=1,(hl&4194240)===0&&(hl=64),zn=h),zn):(h=Wt,h!==0?h:Ge())}function ki(h,f,_){if(50<Ua)throw Ua=0,no=null,Error(o(185));var b=Go(h,f);return b===null?null:(la(b,f,_),((kt&2)===0||b!==Wn)&&(b===Wn&&((kt&2)===0&&(wr|=f),Bn===4&&Ei(b,In)),sr(b,_),f===1&&kt===0&&(h.mode&1)===0&&(Da(),sh&&kr())),b)}function Go(h,f){h.lanes|=f;var _=h.alternate;for(_!==null&&(_.lanes|=f),_=h,h=h.return;h!==null;)h.childLanes|=f,_=h.alternate,_!==null&&(_.childLanes|=f),_=h,h=h.return;return _.tag===3?_.stateNode:null}function sr(h,f){var _=h.callbackNode;hg(h,f);var b=Su(h,h===Wn?In:0);if(b===0)_!==null&&dl(_),h.callbackNode=null,h.callbackPriority=0;else if(f=b&-b,h.callbackPriority!==f){if(_!=null&&dl(_),f===1)h.tag===0?ah(Sr.bind(null,h)):oh(Sr.bind(null,h)),xt?pt(function(){kt===0&&kr()}):ua(ca,kr),_=null;else{switch(zs(b)){case 1:_=ca;break;case 4:_=Hv;break;case 16:_=ih;break;case 536870912:_=rh;break;default:_=ih}_=zh(_,Mi.bind(null,h))}h.callbackPriority=f,h.callbackNode=_}}function Mi(h,f){if(Tn=-1,zn=0,(kt&6)!==0)throw Error(o(327));var _=h.callbackNode;if(Ns()&&h.callbackNode!==_)return null;var b=Su(h,h===Wn?In:0);if(b===0)return null;if((b&30)!==0||(b&h.expiredLanes)!==0||f)f=Zu(h,b);else{f=b;var R=kt;kt|=2;var D=Zd();(Wn!==h||In!==f)&&(Da(),io(h,f));do try{Cg();break}catch(he){Jd(h,he)}while(!0);Hi(),$u.current=D,kt=R,vn!==null?f=0:(Wn=null,In=0,f=Bn)}if(f!==0){if(f===2&&(R=eh(h),R!==0&&(b=R,f=Yu(h,R))),f===1)throw _=Ll,io(h,0),Ei(h,b),sr(h,ii()),_;if(f===6)Ei(h,b);else{if(R=h.current.alternate,(b&30)===0&&!Kd(R)&&(f=Zu(h,b),f===2&&(D=eh(h),D!==0&&(b=D,f=Yu(h,D))),f===1))throw _=Ll,io(h,0),Ei(h,b),sr(h,ii()),_;switch(h.finishedWork=R,h.finishedLanes=b,f){case 0:case 1:throw Error(o(345));case 2:us(h,Yn);break;case 3:if(Ei(h,b),(b&130023424)===b&&(f=qu+500-ii(),10<f)){if(Su(h,0)!==0)break;if(R=h.suspendedLanes,(R&b)!==b){on(),h.pingedLanes|=h.suspendedLanes&R;break}h.timeoutHandle=ee(us.bind(null,h,Yn),f);break}us(h,Yn);break;case 4:if(Ei(h,b),(b&4194240)===b)break;for(f=h.eventTimes,R=-1;0<b;){var q=31-Ir(b);D=1<<q,q=f[q],q>R&&(R=q),b&=~D}if(b=R,b=ii()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*Yd(b/1960))-b,10<b){h.timeoutHandle=ee(us.bind(null,h,Yn),b);break}us(h,Yn);break;case 5:us(h,Yn);break;default:throw Error(o(329))}}}return sr(h,ii()),h.callbackNode===_?Mi.bind(null,h):null}function Yu(h,f){var _=to;return h.current.memoizedState.isDehydrated&&(io(h,f).flags|=256),h=Zu(h,f),h!==2&&(f=Yn,Yn=_,f!==null&&Ku(f)),h}function Ku(h){Yn===null?Yn=h:Yn.push.apply(Yn,h)}function Kd(h){for(var f=h;;){if(f.flags&16384){var _=f.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var b=0;b<_.length;b++){var R=_[b],D=R.getSnapshot;R=R.value;try{if(!Vi(D(),R))return!1}catch{return!1}}}if(_=f.child,f.subtreeFlags&16384&&_!==null)_.return=f,f=_;else{if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ei(h,f){for(f&=~Ia,f&=~wr,h.suspendedLanes|=f,h.pingedLanes&=~f,h=h.expirationTimes;0<f;){var _=31-Ir(f),b=1<<_;h[_]=-1,f&=~b}}function Sr(h){if((kt&6)!==0)throw Error(o(327));Ns();var f=Su(h,0);if((f&1)===0)return sr(h,ii()),null;var _=Zu(h,f);if(h.tag!==0&&_===2){var b=eh(h);b!==0&&(f=b,_=Yu(h,b))}if(_===1)throw _=Ll,io(h,0),Ei(h,f),sr(h,ii()),_;if(_===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=f,us(h,Yn),sr(h,ii()),null}function kl(h){Rs!==null&&Rs.tag===0&&(kt&6)===0&&Ns();var f=kt;kt|=1;var _=yn.transition,b=Wt;try{if(yn.transition=null,Wt=1,h)return h()}finally{Wt=b,yn.transition=_,kt=f,(kt&6)===0&&kr()}}function Ju(){Di=La.current,$t(La)}function io(h,f){h.finishedWork=null,h.finishedLanes=0;var _=h.timeoutHandle;if(_!==je&&(h.timeoutHandle=je,Ve(_)),vn!==null)for(_=vn.return;_!==null;){var b=_;switch(bd(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Lo();break;case 3:Sl(),$t(gn),$t($n),va();break;case 5:Cd(b);break;case 4:Sl();break;case 13:$t(kn);break;case 19:$t(kn);break;case 10:Au(b.type._context);break;case 22:case 23:Ju()}_=_.return}if(Wn=h,vn=h=ro(h.current,null),In=Di=f,Bn=0,Ll=null,Ia=wr=Ps=0,Yn=to=null,Ur!==null){for(f=0;f<Ur.length;f++)if(_=Ur[f],b=_.interleaved,b!==null){_.interleaved=null;var R=b.next,D=_.pending;if(D!==null){var q=D.next;D.next=R,b.next=q}_.pending=b}Ur=null}return h}function Jd(h,f){do{var _=vn;try{if(Hi(),Pu.current=Al,xh){for(var b=Un.memoizedState;b!==null;){var R=b.queue;R!==null&&(R.pending=null),b=b.next}xh=!1}if(xa=0,hi=ci=Un=null,Ts=!1,_a=0,os.current=null,_===null||_.return===null){Bn=1,Ll=f,vn=null;break}e:{var D=h,q=_.return,he=_,Me=f;if(f=In,he.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var ze=Me,it=he,Rt=it.tag;if((it.mode&1)===0&&(Rt===0||Rt===11||Rt===15)){var St=it.alternate;St?(it.updateQueue=St.updateQueue,it.memoizedState=St.memoizedState,it.lanes=St.lanes):(it.updateQueue=null,it.memoizedState=null)}var Bt=Fd(q);if(Bt!==null){Bt.flags&=-257,Sa(Bt,q,he,D,f),Bt.mode&1&&$s(D,ze,f),f=Bt,Me=ze;var Je=f.updateQueue;if(Je===null){var bi=new Set;bi.add(Me),f.updateQueue=bi}else Je.add(Me);break e}else{if((f&1)===0){$s(D,ze,f),Bh();break e}Me=Error(o(426))}}else if(Ln&&he.mode&1){var Er=Fd(q);if(Er!==null){(Er.flags&65536)===0&&(Er.flags|=256),Sa(Er,q,he,D,f),gh(Me);break e}}D=Me,Bn!==4&&(Bn=2),to===null?to=[D]:to.push(D),Me=Od(Me,he),he=q;do{switch(he.tag){case 3:he.flags|=65536,f&=-f,he.lanes|=f;var ve=bg(he,Me,f);ch(he,ve);break e;case 1:D=Me;var de=he.type,we=he.stateNode;if((he.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(as===null||!as.has(we)))){he.flags|=65536,f&=-f,he.lanes|=f;var Ye=Ph(he,D,f);ch(he,Ye);break e}}he=he.return}while(he!==null)}ep(_)}catch(ct){f=ct,vn===_&&_!==null&&(vn=_=_.return);continue}break}while(!0)}function Zd(){var h=$u.current;return $u.current=Al,h===null?Al:h}function Bh(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Wn===null||(Ps&268435455)===0&&(wr&268435455)===0||Ei(Wn,In)}function Zu(h,f){var _=kt;kt|=2;var b=Zd();Wn===h&&In===f||io(h,f);do try{Ag();break}catch(R){Jd(h,R)}while(!0);if(Hi(),kt=_,$u.current=b,vn!==null)throw Error(o(261));return Wn=null,In=0,Bn}function Ag(){for(;vn!==null;)Qd(vn)}function Cg(){for(;vn!==null&&!Io();)Qd(vn)}function Qd(h){var f=ip(h.alternate,h,Di);h.memoizedProps=h.pendingProps,f===null?ep(h):vn=f,os.current=null}function ep(h){var f=h;do{var _=f.alternate;if(h=f.return,(f.flags&32768)===0){if(_=Lh(_,f,Di),_!==null){vn=_;return}}else{if(_=kh(_,f),_!==null){_.flags&=32767,vn=_;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Bn=6,vn=null;return}}if(f=f.sibling,f!==null){vn=f;return}vn=f=h}while(f!==null);Bn===0&&(Bn=5)}function us(h,f){var _=Wt,b=yn.transition;try{yn.transition=null,Wt=1,Pg(h,f,_)}finally{yn.transition=b,Wt=_}return null}function Pg(h,f,_){do Ns();while(Rs!==null);if((kt&6)!==0)throw Error(o(327));var b=h.finishedWork,R=h.finishedLanes;if(b===null)return null;if(h.finishedWork=null,h.finishedLanes=0,b===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var D=b.lanes|b.childLanes;if(nh(h,D),h===Wn&&(vn=Wn=null,In=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Dl||(Dl=!0,zh(ih,function(){return Ns(),null})),D=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||D){D=yn.transition,yn.transition=null;var q=Wt;Wt=1;var he=kt;kt|=4,os.current=null,Wd(h,b),jv(h,b),$(h.containerInfo),h.current=b,Hu(b),Vv(),kt=he,Wt=q,yn.transition=D}else h.current=b;if(Dl&&(Dl=!1,Rs=h,ka=R),D=h.pendingLanes,D===0&&(as=null),Eu(b.stateNode),sr(h,ii()),f!==null)for(_=h.onRecoverableError,b=0;b<f.length;b++)_(f[b]);if(Il)throw Il=!1,h=Nn,Nn=null,h;return(ka&1)!==0&&h.tag!==0&&Ns(),D=h.pendingLanes,(D&1)!==0?h===no?Ua++:(Ua=0,no=h):Ua=0,kr(),null}function Ns(){if(Rs!==null){var h=zs(ka),f=yn.transition,_=Wt;try{if(yn.transition=null,Wt=16>h?16:h,Rs===null)var b=!1;else{if(h=Rs,Rs=null,ka=0,(kt&6)!==0)throw Error(o(331));var R=kt;for(kt|=4,We=h.current;We!==null;){var D=We,q=D.child;if((We.flags&16)!==0){var he=D.deletions;if(he!==null){for(var Me=0;Me<he.length;Me++){var ze=he[Me];for(We=ze;We!==null;){var it=We;switch(it.tag){case 0:case 11:case 15:Zs(8,it,D)}var Rt=it.child;if(Rt!==null)Rt.return=it,We=Rt;else for(;We!==null;){it=We;var St=it.sibling,Bt=it.return;if(Gd(it),it===ze){We=null;break}if(St!==null){St.return=Bt,We=St;break}We=Bt}}}var Je=D.alternate;if(Je!==null){var bi=Je.child;if(bi!==null){Je.child=null;do{var Er=bi.sibling;bi.sibling=null,bi=Er}while(bi!==null)}}We=D}}if((D.subtreeFlags&2064)!==0&&q!==null)q.return=D,We=q;else e:for(;We!==null;){if(D=We,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Zs(9,D,D.return)}var ve=D.sibling;if(ve!==null){ve.return=D.return,We=ve;break e}We=D.return}}var de=h.current;for(We=de;We!==null;){q=We;var we=q.child;if((q.subtreeFlags&2064)!==0&&we!==null)we.return=q,We=we;else e:for(q=de;We!==null;){if(he=We,(he.flags&2048)!==0)try{switch(he.tag){case 0:case 11:case 15:Si(9,he)}}catch(ct){$i(he,he.return,ct)}if(he===q){We=null;break e}var Ye=he.sibling;if(Ye!==null){Ye.return=he.return,We=Ye;break e}We=he.return}}if(kt=R,kr(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(Mu,h)}catch{}b=!0}return b}finally{Wt=_,yn.transition=f}}return!1}function Qu(h,f,_){f=Od(_,f),f=bg(h,f,1),Do(h,f),f=on(),h=Go(h,1),h!==null&&(la(h,1,f),sr(h,f))}function $i(h,f,_){if(h.tag===3)Qu(h,h,_);else for(;f!==null;){if(f.tag===3){Qu(f,h,_);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(as===null||!as.has(b))){h=Od(_,h),h=Ph(f,h,1),Do(f,h),h=on(),f=Go(f,1),f!==null&&(la(f,1,h),sr(f,h));break}}f=f.return}}function tp(h,f,_){var b=h.pingCache;b!==null&&b.delete(f),f=on(),h.pingedLanes|=h.suspendedLanes&_,Wn===h&&(In&_)===_&&(Bn===4||Bn===3&&(In&130023424)===In&&500>ii()-qu?io(h,0):Ia|=_),sr(h,f)}function np(h,f){f===0&&((h.mode&1)===0?f=1:(f=sn,sn<<=1,(sn&130023424)===0&&(sn=4194304)));var _=on();h=Go(h,f),h!==null&&(la(h,f,_),sr(h,_))}function Rg(h){var f=h.memoizedState,_=0;f!==null&&(_=f.retryLane),np(h,_)}function Ng(h,f){var _=0;switch(h.tag){case 13:var b=h.stateNode,R=h.memoizedState;R!==null&&(_=R.retryLane);break;case 19:b=h.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(f),np(h,_)}var ip;ip=function(h,f,_){if(h!==null)if(h.memoizedProps!==f.pendingProps||gn.current)di=!0;else{if((h.lanes&_)===0&&(f.flags&128)===0)return di=!1,Dh(h,f,_);di=(h.flags&131072)!==0}else di=!1,Ln&&(f.flags&1048576)!==0&&yg(f,ph,f.index);switch(f.lanes=0,f.tag){case 2:var b=f.type;h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),h=f.pendingProps;var R=es(f,$n.current);pl(f,_),R=Ml(null,f,b,h,R,_);var D=Fo();return f.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,qn(b)?(D=!0,Zc(f)):D=!1,f.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,ml(f),R.updater=fh,f.stateNode=R,R._reactInternals=f,Md(f,b,h,_),f=Ii(null,f,b,!0,D,_)):(f.tag=0,Ln&&D&&Ed(f),Fn(null,f,R,_),f=f.child),f;case 16:b=f.elementType;e:{switch(h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),h=f.pendingProps,R=b._init,b=R(b._payload),f.type=b,R=f.tag=Xv(b),h=tr(b,h),R){case 0:f=Ks(null,f,b,h,_);break e;case 1:f=Ea(null,f,b,h,_);break e;case 11:f=bn(null,f,b,h,_);break e;case 14:f=xn(null,f,b,tr(b.type,h),_);break e}throw Error(o(306,b,""))}return f;case 0:return b=f.type,R=f.pendingProps,R=f.elementType===b?R:tr(b,R),Ks(h,f,b,R,_);case 1:return b=f.type,R=f.pendingProps,R=f.elementType===b?R:tr(b,R),Ea(h,f,b,R,_);case 3:e:{if(Fu(f),h===null)throw Error(o(387));b=f.pendingProps,D=f.memoizedState,R=D.element,_d(h,f),hh(f,b,null,_);var q=f.memoizedState;if(b=q.element,Se&&D.isDehydrated)if(D={element:b,isDehydrated:!1,cache:q.cache,transitions:q.transitions},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){R=Error(o(423)),f=zd(h,f,b,_,R);break e}else if(b!==R){R=Error(o(424)),f=zd(h,f,b,_,R);break e}else for(Se&&(_i=Ce(f.stateNode.containerInfo),Wi=f,Ln=!0,Br=null,yl=!1),_=_g(f,null,b,_),f.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(vl(),b===R){f=rr(h,f,_);break e}Fn(h,f,b,_)}f=f.child}return f;case 5:return wg(f),h===null&&Uo(f),b=f.type,R=f.pendingProps,D=h!==null?h.memoizedProps:null,q=R.children,Ee(b,R)?q=null:D!==null&&Ee(b,D)&&(f.flags|=32),Gi(h,f),Fn(h,f,q,_),f.child;case 6:return h===null&&Uo(f),null;case 13:return Vd(h,f,_);case 4:return yh(f,f.stateNode.containerInfo),b=f.pendingProps,h===null?f.child=js(f,null,b,_):Fn(h,f,b,_),f.child;case 11:return b=f.type,R=f.pendingProps,R=f.elementType===b?R:tr(b,R),bn(h,f,b,R,_);case 7:return Fn(h,f,f.pendingProps,_),f.child;case 8:return Fn(h,f,f.pendingProps.children,_),f.child;case 12:return Fn(h,f,f.pendingProps.children,_),f.child;case 10:e:{if(b=f.type._context,R=f.pendingProps,D=f.memoizedProps,q=R.value,fa(f,b,q),D!==null)if(Vi(D.value,q)){if(D.children===R.children&&!gn.current){f=rr(h,f,_);break e}}else for(D=f.child,D!==null&&(D.return=f);D!==null;){var he=D.dependencies;if(he!==null){q=D.child;for(var Me=he.firstContext;Me!==null;){if(Me.context===b){if(D.tag===1){Me=Hs(-1,_&-_),Me.tag=2;var ze=D.updateQueue;if(ze!==null){ze=ze.shared;var it=ze.pending;it===null?Me.next=Me:(Me.next=it.next,it.next=Me),ze.pending=Me}}D.lanes|=_,Me=D.alternate,Me!==null&&(Me.lanes|=_),da(D.return,_,f),he.lanes|=_;break}Me=Me.next}}else if(D.tag===10)q=D.type===f.type?null:D.child;else if(D.tag===18){if(q=D.return,q===null)throw Error(o(341));q.lanes|=_,he=q.alternate,he!==null&&(he.lanes|=_),da(q,_,f),q=D.sibling}else q=D.child;if(q!==null)q.return=D;else for(q=D;q!==null;){if(q===f){q=null;break}if(D=q.sibling,D!==null){D.return=q.return,q=D;break}q=q.return}D=q}Fn(h,f,R.children,_),f=f.child}return f;case 9:return R=f.type,b=f.pendingProps.children,pl(f,_),R=nr(R),b=b(R),f.flags|=1,Fn(h,f,b,_),f.child;case 14:return b=f.type,R=tr(b,f.pendingProps),R=tr(b.type,R),xn(h,f,b,R,_);case 15:return Ys(h,f,f.type,f.pendingProps,_);case 17:return b=f.type,R=f.pendingProps,R=f.elementType===b?R:tr(b,R),h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,qn(b)?(h=!0,Zc(f)):h=!1,pl(f,_),mg(f,b,R),Md(f,b,R,_),Ii(null,f,b,!0,h,_);case 19:return Ta(h,f,_);case 22:return wi(h,f,_)}throw Error(o(156,f.tag))};function zh(h,f){return ua(h,f)}function Lg(h,f,_,b){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(h,f,_,b){return new Lg(h,f,_,b)}function Vh(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Xv(h){if(typeof h=="function")return Vh(h)?1:0;if(h!=null){if(h=h.$$typeof,h===E)return 11;if(h===C)return 14}return 2}function ro(h,f){var _=h.alternate;return _===null?(_=Mr(h.tag,f,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=f,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&14680064,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,f=h.dependencies,_.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_}function Hh(h,f,_,b,R,D){var q=2;if(b=h,typeof h=="function")Vh(h)&&(q=1);else if(typeof h=="string")q=5;else e:switch(h){case p:return Oa(_.children,R,D,f);case m:q=8,R|=8;break;case y:return h=Mr(12,_,f,R|2),h.elementType=y,h.lanes=D,h;case M:return h=Mr(13,_,f,R),h.elementType=M,h.lanes=D,h;case x:return h=Mr(19,_,f,R),h.elementType=x,h.lanes=D,h;case P:return ec(_,R,D,f);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case v:q=10;break e;case S:q=9;break e;case E:q=11;break e;case C:q=14;break e;case T:q=16,b=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return f=Mr(q,_,f,R),f.elementType=h,f.type=b,f.lanes=D,f}function Oa(h,f,_,b){return h=Mr(7,h,b,f),h.lanes=_,h}function ec(h,f,_,b){return h=Mr(22,h,b,f),h.elementType=P,h.lanes=_,h.stateNode={},h}function Wh(h,f,_){return h=Mr(6,h,null,f),h.lanes=_,h}function Gh(h,f,_){return f=Mr(4,h.children!==null?h.children:[],h.key,f),f.lanes=_,f.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},f}function jh(h,f,_,b,R){this.tag=f,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=th(0),this.expirationTimes=th(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=th(0),this.identifierPrefix=b,this.onRecoverableError=R,Se&&(this.mutableSourceEagerHydrationData=null)}function Ig(h,f,_,b,R,D,q,he,Me){return h=new jh(h,f,_,he,Me),f===1?(f=1,D===!0&&(f|=8)):f=0,D=Mr(3,null,null,f),h.current=D,D.stateNode=h,D.memoizedState={element:b,isDehydrated:_,cache:null,transitions:null},ml(D),h}function Dg(h){if(!h)return Mn;h=h._reactInternals;e:{if(U(h)!==h||h.tag!==1)throw Error(o(170));var f=h;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(qn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(h.tag===1){var _=h.type;if(qn(_))return cg(h,_,f)}return f}function kg(h){var f=h._reactInternals;if(f===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=ae(f),h===null?null:h.stateNode}function Hr(h,f){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<f?_:f}}function tc(h,f){Hr(h,f),(h=h.alternate)&&Hr(h,f)}function Xh(h){return h=ae(h),h===null?null:h.stateNode}function Ug(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var f=on();ki(h,134217728,f),tc(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var f=on(),_=ls(h);ki(h,_,f),tc(h,_)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var f=h.stateNode;if(f.current.memoizedState.isDehydrated){var _=fl(f.pendingLanes);_!==0&&(Es(f,_|1),sr(f,ii()),(kt&6)===0&&(Da(),kr()))}break;case 13:var b=on();kl(function(){return ki(h,1,b)}),tc(h,1)}},t.batchedUpdates=function(h,f){var _=kt;kt|=1;try{return h(f)}finally{kt=_,kt===0&&(Da(),sh&&kr())}},t.createComponentSelector=function(h){return{$$typeof:Gu,value:h}},t.createContainer=function(h,f,_,b,R,D,q){return Ig(h,f,!1,null,_,b,R,D,q)},t.createHasPseudoClassSelector=function(h){return{$$typeof:Pa,value:h}},t.createHydrationContainer=function(h,f,_,b,R,D,q,he,Me){return h=Ig(_,b,!0,h,R,D,q,he,Me),h.context=Dg(null),_=h.current,b=on(),R=ls(_),D=Hs(b,R),D.callback=f??null,Do(_,D),h.current.lanes=R,la(h,R,b),sr(h,b),h},t.createPortal=function(h,f,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:b==null?null:""+b,children:h,containerInfo:f,implementation:_}},t.createRoleSelector=function(h){return{$$typeof:Ra,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Qs,value:h}},t.createTextSelector=function(h){return{$$typeof:Nl,value:h}},t.deferredUpdates=function(h){var f=Wt,_=yn.transition;try{return yn.transition=null,Wt=16,h()}finally{Wt=f,yn.transition=_}},t.discreteUpdates=function(h,f,_,b,R){var D=Wt,q=yn.transition;try{return yn.transition=null,Wt=1,h(f,_,b,R)}finally{Wt=D,yn.transition=q,kt===0&&Da()}},t.findAllNodes=eo,t.findBoundingRects=function(h,f){if(!bt)throw Error(o(363));f=eo(h,f),h=[];for(var _=0;_<f.length;_++)h.push(Y(f[_]));for(f=h.length-1;0<f;f--){_=h[f];for(var b=_.x,R=b+_.width,D=_.y,q=D+_.height,he=f-1;0<=he;he--)if(f!==he){var Me=h[he],ze=Me.x,it=ze+Me.width,Rt=Me.y,St=Rt+Me.height;if(b>=ze&&D>=Rt&&R<=it&&q<=St){h.splice(f,1);break}else if(b!==ze||_.width!==Me.width||St<D||Rt>q){if(!(D!==Rt||_.height!==Me.height||it<b||ze>R)){ze>b&&(Me.width+=ze-b,Me.x=b),it<R&&(Me.width=R-ze),h.splice(f,1);break}}else{Rt>D&&(Me.height+=Rt-D,Me.y=D),St<q&&(Me.height=q-Rt),h.splice(f,1);break}}}return h},t.findHostInstance=kg,t.findHostInstanceWithNoPortals=function(h){return h=K(h),h=h!==null?H(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return kg(h)},t.flushControlled=function(h){var f=kt;kt|=1;var _=yn.transition,b=Wt;try{yn.transition=null,Wt=1,h()}finally{Wt=b,yn.transition=_,kt=f,kt===0&&(Da(),kr())}},t.flushPassiveEffects=Ns,t.flushSync=kl,t.focusWithin=function(h,f){if(!bt)throw Error(o(363));for(h=ju(h),f=_r(h,f),f=Array.from(f),h=0;h<f.length;){var _=f[h++];if(!_e(_)){if(_.tag===5&&Fe(_.stateNode))return!0;for(_=_.child;_!==null;)f.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Wt},t.getFindAllNodesFailureDescription=function(h,f){if(!bt)throw Error(o(363));var _=0,b=[];h=[ju(h),0];for(var R=0;R<h.length;){var D=h[R++],q=h[R++],he=f[q];if((D.tag!==5||!_e(D))&&(Xu(D,he)&&(b.push(Ho(he)),q++,q>_&&(_=q)),q<f.length))for(D=D.child;D!==null;)h.push(D,q),D=D.sibling}if(_<f.length){for(h=[];_<f.length;_++)h.push(Ho(f[_]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return ne(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:Xh,findFiberByHostInstance:h.findFiberByHostInstance||Ug,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)h=!0;else{try{Mu=f.inject(h),bs=f}catch{}h=!!f.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,f,_,b){if(!bt)throw Error(o(363));h=eo(h,f);var R=Xe(h,_,b).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(h,f){var _=f._getVersion;_=_(f._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[f,_]:h.mutableSourceEagerHydrationData.push(f,_)},t.runWithPriority=function(h,f){var _=Wt;try{return Wt=h,f()}finally{Wt=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,f,_,b){var R=f.current,D=on(),q=ls(R);return _=Dg(_),f.context===null?f.context=_:f.pendingContext=_,f=Hs(D,q),f.payload={element:h},b=b===void 0?null:b,b!==null&&(f.callback=b),Do(R,f),h=ki(R,q,D),h!==null&&uh(h,R,q),q},t}),i_}var Bb;function r5(){return Bb||(Bb=1,e_.exports=i5()),e_.exports}var s5=r5();const o5=fS(s5);var zb=TP();const e1={},a5=n=>void Object.assign(e1,n);function l5(n,e){function t(p,{args:m=[],attach:y,...v},S){let E=`${p[0].toUpperCase()}${p.slice(1)}`,M;if(p==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=v.object;M=Ef(x,{type:p,root:S,attach:y,primitive:!0})}else{const x=e1[E];if(!x)throw new Error(`R3F: ${E} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");M=Ef(new x(...m),{type:p,root:S,attach:y,memoizedProps:{args:m}})}return M.__r3f.attach===void 0&&(M instanceof jt?M.__r3f.attach="geometry":M instanceof er&&(M.__r3f.attach="material")),E!=="inject"&&o_(M,v),M}function i(p,m){let y=!1;if(m){var v,S;(v=m.__r3f)!=null&&v.attach?s_(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),y=!0),y||(S=p.__r3f)==null||S.objects.push(m),m.__r3f||Ef(m,{}),m.__r3f.parent=p,Cw(m),bf(m)}}function r(p,m,y){let v=!1;if(m){var S,E;if((S=m.__r3f)!=null&&S.attach)s_(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"});const M=p.children.filter(C=>C!==m),x=M.indexOf(y);p.children=[...M.slice(0,x),m,...M.slice(x)],v=!0}v||(E=p.__r3f)==null||E.objects.push(m),m.__r3f||Ef(m,{}),m.__r3f.parent=p,Cw(m),bf(m)}}function s(p,m,y=!1){p&&[...p].forEach(v=>o(m,v,y))}function o(p,m,y){if(m){var v,S,E;if(m.__r3f&&(m.__r3f.parent=null),(v=p.__r3f)!=null&&v.objects&&(p.__r3f.objects=p.__r3f.objects.filter(P=>P!==m)),(S=m.__r3f)!=null&&S.attach)jb(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var M;p.remove(m),(M=m.__r3f)!=null&&M.root&&m5(m.__r3f.root,m)}const C=(E=m.__r3f)==null?void 0:E.primitive,T=y===void 0?m.dispose!==null&&!C:y;if(!C){var x;s((x=m.__r3f)==null?void 0:x.objects,m,T),s(m.children,m,T)}delete m.__r3f,T&&m.dispose&&m.type!=="Scene"&&zb.unstable_scheduleCallback(zb.unstable_IdlePriority,()=>{try{m.dispose()}catch{}}),bf(p)}}function l(p,m,y,v){var S;const E=(S=p.__r3f)==null?void 0:S.parent;if(!E)return;const M=t(m,y,p.__r3f.root);if(p.children){for(const x of p.children)x.__r3f&&i(M,x);p.children=p.children.filter(x=>!x.__r3f)}p.__r3f.objects.forEach(x=>i(M,x)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(E,p),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),i(E,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[v,v.alternate].forEach(x=>{x!==null&&(x.stateNode=M,x.ref&&(typeof x.ref=="function"?x.ref(M):x.ref.current=M))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:o5({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const y=p.getState().scene;y.__r3f&&(y.__r3f.root=p,i(y,m))},removeChildFromContainer:(p,m)=>{m&&o(p.getState().scene,m)},insertInContainerBefore:(p,m,y)=>{if(!m||!y)return;const v=p.getState().scene;v.__r3f&&r(v,m,y)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p==null?void 0:p.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,y,v){var S;if(((S=p==null?void 0:p.__r3f)!=null?S:{}).primitive&&v.object&&v.object!==p)return[!0];{const{args:M=[],children:x,...C}=v,{args:T=[],children:P,...I}=y;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((B,z)=>B!==T[z]))return[!0];const k=IP(p,C,I,!0);return k.changes.length?[!1,k]:null}},commitUpdate(p,[m,y],v,S,E,M){m?l(p,v,E,M):o_(p,y)},commitMount(p,m,y,v){var S;const E=(S=p.__r3f)!=null?S:{};p.raycast&&E.handlers&&E.eventCount&&p.__r3f.root.getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Ef(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:y,parent:v}=(m=p.__r3f)!=null?m:{};y&&v&&jb(v,p,y),p.isObject3D&&(p.visible=!1),bf(p)},unhideInstance(p,m){var y;const{attach:v,parent:S}=(y=p.__r3f)!=null?y:{};v&&S&&s_(S,p,v),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),bf(p)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Lf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Vn.fun(performance.now)?performance.now:Vn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Vn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Vn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:o_}}var Vb,Hb;const r_=n=>"colorSpace"in n||"outputColorSpace"in n,AP=()=>{var n;return(n=e1.ColorManagement)!=null?n:null},CP=n=>n&&n.isOrthographicCamera,u5=n=>n&&n.hasOwnProperty("current"),Km=typeof window<"u"&&((Vb=window.document)!=null&&Vb.createElement||((Hb=window.navigator)==null?void 0:Hb.product)==="ReactNative")?J.useLayoutEffect:J.useEffect;function PP(n){const e=J.useRef(n);return Km(()=>void(e.current=n),[n]),e}function c5({set:n}){return Km(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class RP extends J.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}RP.getDerivedStateFromError=()=>({error:!0});const NP="__default",Wb=new Map,h5=n=>n&&!!n.memoized&&!!n.changes;function LP(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Sp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Vn={obj:n=>n===Object(n)&&!Vn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Vn.str(n)||Vn.num(n))return n===e;const s=Vn.obj(n);if(s&&i==="reference")return n===e;const o=Vn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!Vn.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(Vn.und(l)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function f5(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Ef(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Aw(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const Gb=/-\d+$/;function s_(n,e,t){if(Vn.str(t)){if(Gb.test(t)){const s=t.replace(Gb,""),{target:o,key:l}=Aw(n,s);Array.isArray(o[l])||(o[l]=[])}const{target:i,key:r}=Aw(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function jb(n,e,t){var i,r;if(Vn.str(t)){const{target:s,key:o}=Aw(n,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function IP(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:l,...c}={},d=!1){var p;const m=(p=n==null?void 0:n.__r3f)!=null?p:{},y=Object.entries(r),v=[];if(d){const E=Object.keys(c);for(let M=0;M<E.length;M++)r.hasOwnProperty(E[M])||y.unshift([E[M],NP+"remove"])}y.forEach(([E,M])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&E==="object"||Vn.equ(M,c[E]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(E))return v.push([E,M,!0,[]]);let C=[];E.includes("-")&&(C=E.split("-")),v.push([E,M,!1,C]);for(const T in r){const P=r[T];T.startsWith(`${E}-`)&&v.push([T,P,!1,T.split("-")])}});const S={...r};return m.memoizedProps&&m.memoizedProps.args&&(S.args=m.memoizedProps.args),m.memoizedProps&&m.memoizedProps.attach&&(S.attach=m.memoizedProps.attach),{memoized:S,changes:v}}function o_(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,l=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:c,changes:d}=h5(e)?e:IP(n,e),p=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=c);for(let y=0;y<d.length;y++){let[v,S,E,M]=d[y];if(r_(n)){const P="srgb",I="srgb-linear";v==="encoding"?(v="colorSpace",S=S===3001?P:I):v==="outputEncoding"&&(v="outputColorSpace",S=S===3001?P:I)}let x=n,C=x[v];if(M.length&&(C=M.reduce((T,P)=>T[P],n),!(C&&C.set))){const[T,...P]=M.reverse();x=P.reverse().reduce((I,k)=>I[k],n),v=T}if(S===NP+"remove")if(x.constructor){let T=Wb.get(x.constructor);T||(T=new x.constructor,Wb.set(x.constructor,T)),S=T[v]}else S=0;if(E)S?s.handlers[v]=S:delete s.handlers[v],s.eventCount=Object.keys(s.handlers).length;else if(C&&C.set&&(C.copy||C instanceof Ic)){if(Array.isArray(S))C.fromArray?C.fromArray(S):C.set(...S);else if(C.copy&&S&&S.constructor&&C.constructor===S.constructor)C.copy(S);else if(S!==void 0){const T=C instanceof et;!T&&C.setScalar?C.setScalar(S):C instanceof Ic&&S instanceof Ic?C.mask=S.mask:C.set(S),!AP()&&!l.linear&&T&&C.convertSRGBToLinear()}}else if(x[v]=S,x[v]instanceof ti&&x[v].format===Yr&&x[v].type===rl){const T=x[v];r_(T)&&r_(l.gl)?T.colorSpace=l.gl.outputColorSpace:T.encoding=l.gl.outputEncoding}bf(n)}if(s.parent&&l.internal&&n.raycast&&p!==s.eventCount){const y=l.internal.interaction.indexOf(n);y>-1&&l.internal.interaction.splice(y,1),s.eventCount&&l.internal.interaction.push(n)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(r=n.__r3f)!=null&&r.parent&&Cw(n),n}function bf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Cw(n){n.onUpdate==null||n.onUpdate(n)}function d5(n,e){n.manual||(CP(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function j0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function p5(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Lf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Lf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Lf.ContinuousEventPriority;default:return Lf.DefaultEventPriority}}function DP(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function m5(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{DP(t.capturedMap,e,i,r)})}function g5(n){function e(c){const{internal:d}=n.getState(),p=c.offsetX-d.initialClick[0],m=c.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function t(c){return c.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=d.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function i(c,d){const p=n.getState(),m=new Set,y=[],v=d?d(p.internal.interaction):p.internal.interaction;for(let x=0;x<v.length;x++){const C=Sp(v[x]);C&&(C.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function S(x){const C=Sp(x);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var T;C.events.compute==null||C.events.compute(c,C,(T=C.previousRoot)==null?void 0:T.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(x,!0):[]}let E=v.flatMap(S).sort((x,C)=>{const T=Sp(x.object),P=Sp(C.object);return!T||!P?x.distance-C.distance:P.events.priority-T.events.priority||x.distance-C.distance}).filter(x=>{const C=j0(x);return m.has(C)?!1:(m.add(C),!0)});p.events.filter&&(E=p.events.filter(E,p));for(const x of E){let C=x.object;for(;C;){var M;(M=C.__r3f)!=null&&M.eventCount&&y.push({...x,eventObject:C}),C=C.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let x of p.internal.capturedMap.get(c.pointerId).values())m.has(j0(x.intersection))||y.push(x.intersection);return y}function r(c,d,p,m){const y=n.getState();if(c.length){const v={stopped:!1};for(const S of c){const E=Sp(S.object)||y,{raycaster:M,pointer:x,camera:C,internal:T}=E,P=new X(x.x,x.y,0).unproject(C),I=F=>{var K,ae;return(K=(ae=T.capturedMap.get(F))==null?void 0:ae.has(S.eventObject))!=null?K:!1},k=F=>{const K={intersection:S,target:d.target};T.capturedMap.has(F)?T.capturedMap.get(F).set(S.eventObject,K):T.capturedMap.set(F,new Map([[S.eventObject,K]])),d.target.setPointerCapture(F)},B=F=>{const K=T.capturedMap.get(F);K&&DP(T.capturedMap,S.eventObject,K,F)};let z={};for(let F in d){let K=d[F];typeof K!="function"&&(z[F]=K)}let U={...S,...z,pointer:x,intersections:c,stopped:v.stopped,delta:p,unprojectedPoint:P,ray:M.ray,camera:C,stopPropagation(){const F="pointerId"in d&&T.capturedMap.get(d.pointerId);if((!F||F.has(S.eventObject))&&(U.stopped=v.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(K=>K.eventObject===S.eventObject))){const K=c.slice(0,c.indexOf(S));s([...K,S])}},target:{hasPointerCapture:I,setPointerCapture:k,releasePointerCapture:B},currentTarget:{hasPointerCapture:I,setPointerCapture:k,releasePointerCapture:B},nativeEvent:d};if(m(U),v.stopped===!0)break}}return c}function s(c){const{internal:d}=n.getState();for(const p of d.hovered.values())if(!c.length||!c.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const y=p.eventObject.__r3f,v=y==null?void 0:y.handlers;if(d.hovered.delete(j0(p)),y!=null&&y.eventCount){const S={...p,intersections:c};v.onPointerOut==null||v.onPointerOut(S),v.onPointerLeave==null||v.onPointerLeave(S)}}}function o(c,d){for(let p=0;p<d.length;p++){const m=d[p].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:p}=n.getState();"pointerId"in d&&p.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),s([]))})}}return function(p){const{onPointerMissed:m,internal:y}=n.getState();y.lastEvent.current=p;const v=c==="onPointerMove",S=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=i(p,v?t:void 0),x=S?e(p):0;c==="onPointerDown"&&(y.initialClick=[p.offsetX,p.offsetY],y.initialHits=M.map(T=>T.eventObject)),S&&!M.length&&x<=2&&(o(p,y.interaction),m&&m(p)),v&&s(M);function C(T){const P=T.eventObject,I=P.__r3f,k=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(v){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const B=j0(T),z=y.hovered.get(B);z?z.stopped&&T.stopPropagation():(y.hovered.set(B,T),k.onPointerOver==null||k.onPointerOver(T),k.onPointerEnter==null||k.onPointerEnter(T))}k.onPointerMove==null||k.onPointerMove(T)}else{const B=k[c];B?(!S||y.initialHits.includes(P))&&(o(p,y.interaction.filter(z=>!y.initialHits.includes(z))),B(T)):S&&y.initialHits.includes(P)&&o(p,y.interaction.filter(z=>!y.initialHits.includes(z)))}}r(M,p,x,C)}}return{handlePointer:l}}const kP=n=>!!(n!=null&&n.render),UP=J.createContext(null),y5=(n,e)=>{const t=t5((l,c)=>{const d=new X,p=new X,m=new X;function y(x=c().camera,C=p,T=c().size){const{width:P,height:I,top:k,left:B}=T,z=P/I;C instanceof X?m.copy(C):m.set(...C);const U=x.getWorldPosition(d).distanceTo(m);if(CP(x))return{width:P/x.zoom,height:I/x.zoom,top:k,left:B,factor:1,distance:U,aspect:z};{const F=x.fov*Math.PI/180,K=2*Math.tan(F/2)*U,ae=K*(P/I);return{width:ae,height:K,top:k,left:B,factor:P/ae,distance:U,aspect:z}}}let v;const S=x=>l(C=>({performance:{...C.performance,current:x}})),E=new Le;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>n(c(),x),advance:(x,C)=>e(x,C,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new KS,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();v&&clearTimeout(v),x.performance.current!==x.performance.min&&S(x.performance.min),v=setTimeout(()=>S(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:x=>l(C=>({...C,events:{...C.events,...x}})),setSize:(x,C,T,P,I)=>{const k=c().camera,B={width:x,height:C,top:P||0,left:I||0,updateStyle:T};l(z=>({size:B,viewport:{...z.viewport,...y(k,p,B)}}))},setDpr:x=>l(C=>{const T=LP(x);return{viewport:{...C.viewport,dpr:T,initialDpr:C.viewport.initialDpr||T}}}),setFrameloop:(x="always")=>{const C=c().clock;C.stop(),C.elapsedTime=0,x!=="never"&&(C.start(),C.elapsedTime=0),l(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:J.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,C,T)=>{const P=c().internal;return P.priority=P.priority+(C>0?1:0),P.subscribers.push({ref:x,priority:C,store:T}),P.subscribers=P.subscribers.sort((I,k)=>I.priority-k.priority),()=>{const I=c().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(C>0?1:0),I.subscribers=I.subscribers.filter(k=>k.ref!==x))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:d,gl:p,set:m}=t.getState();if(c!==r||d.dpr!==s){var y;r=c,s=d.dpr,d5(l,c),p.setPixelRatio(d.dpr);const v=(y=c.updateStyle)!=null?y:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,v)}l!==o&&(o=l,m(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};let X0,v5=new Set,x5=new Set,_5=new Set;function a_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Mp(n,e){switch(n){case"before":return a_(v5,e);case"after":return a_(x5,e);case"tail":return a_(_5,e)}}let l_,u_;function c_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),l_=e.internal.subscribers,X0=0;X0<l_.length;X0++)u_=l_[X0],u_.ref.current(u_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function w5(n){let e=!1,t,i,r;function s(c){i=requestAnimationFrame(s),e=!0,t=0,Mp("before",c);for(const p of n.values()){var d;r=p.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((d=r.gl.xr)!=null&&d.isPresenting)&&(t+=c_(c,r))}if(Mp("after",c),t===0)return Mp("tail",c),e=!1,cancelAnimationFrame(i)}function o(c,d=1){var p;if(!c)return n.forEach(m=>o(m.store.getState()),d);(p=c.gl.xr)!=null&&p.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+d),e||(e=!0,requestAnimationFrame(s)))}function l(c,d=!0,p,m){if(d&&Mp("before",c),p)c_(c,p,m);else for(const y of n.values())c_(c,y.store.getState());d&&Mp("after",c)}return{loop:s,invalidate:o,advance:l}}function S5(){const n=J.useContext(UP);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function OP(n,e=0){const t=S5(),i=t.getState().internal.subscribe,r=PP(n);return Km(()=>i(r,e,t),[e,i,t]),null}const Jf=new Map,{invalidate:Xb,advance:$b}=w5(Jf),{reconciler:Oy,applyProps:_f}=l5(Jf,p5),wf={objects:"shallow",strict:!1},M5=(n,e)=>{const t=typeof n=="function"?n(e):n;return kP(t)?t:new LS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function E5(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function b5(n){const e=Jf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||y5(Xb,$b),o=t||Oy.createContainer(s,Lf.ConcurrentRoot,null,!1,null,"",r,null);e||Jf.set(n,{fiber:o,store:s});let l,c=!1,d;return{configure(p={}){let{gl:m,size:y,scene:v,events:S,onCreated:E,shadows:M=!1,linear:x=!1,flat:C=!1,legacy:T=!1,orthographic:P=!1,frameloop:I="always",dpr:k=[1,2],performance:B,raycaster:z,camera:U,onPointerMissed:F}=p,K=s.getState(),ae=K.gl;K.gl||K.set({gl:ae=M5(m,n)});let re=K.raycaster;re||K.set({raycaster:re=new MP});const{params:H,...se}=z||{};if(Vn.equ(se,re,wf)||_f(re,{...se}),Vn.equ(H,re.params,wf)||_f(re,{params:{...re.params,...H}}),!K.camera||K.camera===d&&!Vn.equ(d,U,wf)){d=U;const G=U instanceof Dm,Z=G?U:P?new Um(0,0,0,0,.1,1e3):new zi(75,0,.1,1e3);G||(Z.position.z=5,U&&_f(Z,U),!K.camera&&!(U!=null&&U.rotation)&&Z.lookAt(0,0,0)),K.set({camera:Z})}if(!K.scene){let G;v instanceof Uy?G=v:(G=new Uy,v&&_f(G,v)),K.set({scene:Ef(G)})}if(!K.xr){const G=(fe,Ee)=>{const be=s.getState();be.frameloop!=="never"&&$b(fe,!0,be,Ee)},Z=()=>{const fe=s.getState();fe.gl.xr.enabled=fe.gl.xr.isPresenting,fe.gl.xr.setAnimationLoop(fe.gl.xr.isPresenting?G:null),fe.gl.xr.isPresenting||Xb(fe)},ce={connect(){const fe=s.getState().gl;fe.xr.addEventListener("sessionstart",Z),fe.xr.addEventListener("sessionend",Z)},disconnect(){const fe=s.getState().gl;fe.xr.removeEventListener("sessionstart",Z),fe.xr.removeEventListener("sessionend",Z)}};ae.xr&&ce.connect(),K.set({xr:ce})}if(ae.shadowMap){const G=ae.shadowMap.enabled,Z=ae.shadowMap.type;if(ae.shadowMap.enabled=!!M,Vn.boo(M))ae.shadowMap.type=zp;else if(Vn.str(M)){var ne;const ce={basic:MC,percentage:av,soft:zp,variance:go};ae.shadowMap.type=(ne=ce[M])!=null?ne:zp}else Vn.obj(M)&&Object.assign(ae.shadowMap,M);(G!==ae.shadowMap.enabled||Z!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}const ie=AP();ie&&("enabled"in ie?ie.enabled=!T:"legacyMode"in ie&&(ie.legacyMode=T)),_f(ae,{outputEncoding:x?3e3:3001,toneMapping:C?So:vS}),K.legacy!==T&&K.set(()=>({legacy:T})),K.linear!==x&&K.set(()=>({linear:x})),K.flat!==C&&K.set(()=>({flat:C})),m&&!Vn.fun(m)&&!kP(m)&&!Vn.equ(m,ae,wf)&&_f(ae,m),S&&!K.events.handlers&&K.set({events:S(s)});const $=E5(n,y);return Vn.equ($,K.size,wf)||K.setSize($.width,$.height,$.updateStyle,$.top,$.left),k&&K.viewport.dpr!==LP(k)&&K.setDpr(k),K.frameloop!==I&&K.setFrameloop(I),K.onPointerMissed||K.set({onPointerMissed:F}),B&&!Vn.equ(B,K.performance,wf)&&K.set(G=>({performance:{...G.performance,...B}})),l=E,c=!0,this},render(p){return c||this.configure(),Oy.updateContainer(J.createElement(T5,{store:s,children:p,onCreated:l,rootElement:n}),o,null,()=>{}),s},unmount(){FP(n)}}}function T5({store:n,children:e,onCreated:t,rootElement:i}){return Km(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),J.createElement(UP.Provider,{value:n},e)}function FP(n,e){const t=Jf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Oy.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),f5(r),Jf.delete(n)}catch{}},500)})}}Oy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:J.version});function Fy(){return Fy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Fy.apply(null,arguments)}function qb(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function A5({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=J.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=J.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,d=n?typeof n=="number"?n:n.resize:null,p=J.useRef(!1);J.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[m,y,v]=J.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:C,top:T,width:P,height:I,bottom:k,right:B,x:z,y:U}=l.current.element.getBoundingClientRect(),F={left:C,top:T,width:P,height:I,bottom:k,right:B,x:z,y:U};l.current.element instanceof HTMLElement&&i&&(F.height=l.current.element.offsetHeight,F.width=l.current.element.offsetWidth),Object.freeze(F),p.current&&!N5(l.current.lastBounds,F)&&o(l.current.lastBounds=F)};return[x,d?qb(x,d):x,c?qb(x,c):x]},[o,i,c,d]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function E(){l.current.element&&(l.current.resizeObserver=new r(v),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=x=>{!x||x===l.current.element||(S(),l.current.element=x,l.current.scrollContainers=BP(x),E())};return P5(v,!!e),C5(y),J.useEffect(()=>{S(),E()},[e,v,y]),J.useEffect(()=>S,[]),[M,s,m]}function C5(n){J.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function P5(n,e){J.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function BP(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...BP(n.parentElement)]}const R5=["x","y","top","bottom","left","right","width","height"],N5=(n,e)=>R5.every(t=>n[t]===e[t]);var L5=Object.defineProperty,I5=Object.defineProperties,D5=Object.getOwnPropertyDescriptors,Yb=Object.getOwnPropertySymbols,k5=Object.prototype.hasOwnProperty,U5=Object.prototype.propertyIsEnumerable,Kb=(n,e,t)=>e in n?L5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jb=(n,e)=>{for(var t in e||(e={}))k5.call(e,t)&&Kb(n,t,e[t]);if(Yb)for(var t of Yb(e))U5.call(e,t)&&Kb(n,t,e[t]);return n},O5=(n,e)=>I5(n,D5(e)),Zb,Qb;typeof window<"u"&&((Zb=window.document)!=null&&Zb.createElement||((Qb=window.navigator)==null?void 0:Qb.product)==="ReactNative")?J.useLayoutEffect:J.useEffect;function zP(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=zP(i,e,t);if(r)return r;i=i.sibling}}function VP(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const eT=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=eT;return}return eT.apply(this,arguments)};const t1=VP(J.createContext(null));class HP extends J.Component{render(){return J.createElement(t1.Provider,{value:this._reactInternals},this.props.children)}}function F5(){const n=J.useContext(t1);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=J.useId();return J.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=zP(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function B5(){const n=F5(),[e]=J.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==t1&&!e.has(r)&&e.set(r,J.useContext(VP(r)))}t=t.return}return e}function z5(){const n=B5();return J.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>J.createElement(e,null,J.createElement(t.Provider,O5(Jb({},i),{value:n.get(t)}))),e=>J.createElement(HP,Jb({},e))),[n])}const h_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function V5(n){const{handlePointer:e}=g5(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(h_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,l])=>{const[c,d]=h_[o];t.addEventListener(c,l,{passive:d})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[l]=h_[s];i.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const H5=J.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=V5,eventSource:l,eventPrefix:c,shadows:d,linear:p,flat:m,legacy:y,orthographic:v,frameloop:S,dpr:E,performance:M,raycaster:x,camera:C,onPointerMissed:T,onCreated:P,...I},k){J.useMemo(()=>a5(Kz),[]);const B=z5(),[z,U]=A5({scroll:!0,debounce:{scroll:50,resize:0},...i}),F=J.useRef(null),K=J.useRef(null);J.useImperativeHandle(k,()=>F.current);const ae=PP(T),[re,H]=J.useState(!1),[se,ne]=J.useState(!1);if(re)throw re;if(se)throw se;const ie=J.useRef(null);Km(()=>{const te=F.current;U.width>0&&U.height>0&&te&&(ie.current||(ie.current=b5(te)),ie.current.configure({gl:s,events:o,shadows:d,linear:p,flat:m,legacy:y,orthographic:v,frameloop:S,dpr:E,performance:M,raycaster:x,camera:C,size:U,onPointerMissed:(...$)=>ae.current==null?void 0:ae.current(...$),onCreated:$=>{$.events.connect==null||$.events.connect(l?u5(l)?l.current:l:K.current),c&&$.setEvents({compute:(G,Z)=>{const ce=G[c+"X"],fe=G[c+"Y"];Z.pointer.set(ce/Z.size.width*2-1,-(fe/Z.size.height)*2+1),Z.raycaster.setFromCamera(Z.pointer,Z.camera)}}),P==null||P($)}}),ie.current.render(J.createElement(B,null,J.createElement(RP,{set:ne},J.createElement(J.Suspense,{fallback:J.createElement(c5,{set:H})},e)))))}),J.useEffect(()=>{const te=F.current;if(te)return()=>FP(te)},[]);const V=l?"none":"auto";return J.createElement("div",Fy({ref:K,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...r}},I),J.createElement("div",{ref:z,style:{width:"100%",height:"100%"}},J.createElement("canvas",{ref:F,style:{display:"block"}},t)))}),W5=J.forwardRef(function(e,t){return J.createElement(HP,null,J.createElement(H5,Fy({},e,{ref:t})))});class G5 extends bo{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${parseInt(Rm.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const j5=n=>new X().setFromSpherical(new EP(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),X5=J.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},l)=>{const c=J.useRef(),[d,p,m]=J.useMemo(()=>{const v=[],S=[],E=Array.from({length:t},()=>(.5+.5*Math.random())*r),M=new et;let x=n+e;const C=e/t;for(let T=0;T<t;T++)x-=C*Math.random(),v.push(...j5(x).toArray()),M.setHSL(T/t,i,.9),S.push(M.r,M.g,M.b);return[new Float32Array(v),new Float32Array(S),new Float32Array(E)]},[t,e,r,n,i]);OP(v=>c.current&&(c.current.uniforms.time.value=v.clock.getElapsedTime()*o));const[y]=J.useState(()=>new G5);return J.createElement("points",{ref:l},J.createElement("bufferGeometry",null,J.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),J.createElement("bufferAttribute",{attach:"attributes-color",args:[p,3]}),J.createElement("bufferAttribute",{attach:"attributes-size",args:[m,1]})),J.createElement("primitive",{ref:c,object:y,attach:"material",blending:Ly,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))}),$5=()=>{const n=J.useRef(null),e=1e3,t=new Float32Array(e*3);for(let s=0;s<e;s++)t[s*3]=(Math.random()-.5)*50,t[s*3+1]=(Math.random()-.5)*50,t[s*3+2]=(Math.random()-.5)*50;OP(()=>{n.current&&(n.current.rotation.y+=5e-4,n.current.rotation.x+=2e-4)});const i=new jt;i.setAttribute("position",new Cn(t,3));const r=new yv({size:.05,color:"#ffffff",transparent:!0,opacity:.6,sizeAttenuation:!0});return L.jsx("points",{ref:n,geometry:i,material:r})},Yc=()=>L.jsx("div",{className:"fixed top-0 left-0 w-full h-full -z-10",children:L.jsxs(W5,{camera:{position:[0,0,20],fov:75},style:{background:"radial-gradient(circle at 50% 50%, #1a1a2e 0%, #0f0f1a 100%)"},children:[L.jsx("ambientLight",{intensity:.5}),L.jsx("pointLight",{position:[10,10,10]}),L.jsx(X5,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1}),L.jsx($5,{})]})}),n1=J.createContext({});function i1(n){const e=J.useRef(null);return e.current===null&&(e.current=n()),e.current}const Mv=J.createContext(null),r1=J.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class q5 extends J.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Y5({children:n,isPresent:e}){const t=J.useId(),i=J.useRef(null),r=J.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=J.useContext(r1);return J.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=r.current;if(e||!i.current||!o||!l)return;i.current.dataset.motionPopId=t;const p=document.createElement("style");return s&&(p.nonce=s),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),L.jsx(q5,{isPresent:e,childRef:i,sizeRef:r,children:J.cloneElement(n,{ref:i})})}const K5=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const l=i1(J5),c=J.useId(),d=J.useCallback(m=>{l.set(m,!0);for(const y of l.values())if(!y)return;i&&i()},[l,i]),p=J.useMemo(()=>({id:c,initial:e,isPresent:t,custom:r,onExitComplete:d,register:m=>(l.set(m,!1),()=>l.delete(m))}),s?[Math.random(),d]:[t,d]);return J.useMemo(()=>{l.forEach((m,y)=>l.set(y,!1))},[t]),J.useEffect(()=>{!t&&!l.size&&i&&i()},[t]),o==="popLayout"&&(n=L.jsx(Y5,{isPresent:t,children:n})),L.jsx(Mv.Provider,{value:p,children:n})};function J5(){return new Map}function WP(n=!0){const e=J.useContext(Mv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=J.useId();J.useEffect(()=>{n&&r(s)},[n]);const o=J.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const $0=n=>n.key||"";function tT(n){const e=[];return J.Children.forEach(n,t=>{J.isValidElement(t)&&e.push(t)}),e}const s1=typeof window<"u",GP=s1?J.useLayoutEffect:J.useEffect,Jm=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1})=>{const[l,c]=WP(o),d=J.useMemo(()=>tT(n),[n]),p=o&&!l?[]:d.map($0),m=J.useRef(!0),y=J.useRef(d),v=i1(()=>new Map),[S,E]=J.useState(d),[M,x]=J.useState(d);GP(()=>{m.current=!1,y.current=d;for(let P=0;P<M.length;P++){const I=$0(M[P]);p.includes(I)?v.delete(I):v.get(I)!==!0&&v.set(I,!1)}},[M,p.length,p.join("-")]);const C=[];if(d!==S){let P=[...d];for(let I=0;I<M.length;I++){const k=M[I],B=$0(k);p.includes(B)||(P.splice(I,0,k),C.push(k))}s==="wait"&&C.length&&(P=C),x(tT(P)),E(d);return}const{forceRender:T}=J.useContext(n1);return L.jsx(L.Fragment,{children:M.map(P=>{const I=$0(P),k=o&&!l?!1:d===M||p.includes(I),B=()=>{if(v.has(I))v.set(I,!0);else return;let z=!0;v.forEach(U=>{U||(z=!1)}),z&&(T==null||T(),x(y.current),o&&(c==null||c()),i&&i())};return L.jsx(K5,{isPresent:k,initial:!m.current||t?void 0:!1,custom:k?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:k?void 0:B,children:P},I)})})},vs=n=>n;let jP=vs;function o1(n){let e;return()=>(e===void 0&&(e=n()),e)}const Zf=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},tl=n=>n*1e3,nl=n=>n/1e3,Z5={useManualTiming:!1};function Q5(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(c.schedule(d),n()),d(o)}const c={schedule:(d,p=!1,m=!1)=>{const v=m&&i?e:t;return p&&s.add(d),v.has(d)||v.add(d),d},cancel:d=>{t.delete(d),s.delete(d)},process:d=>{if(o=d,i){r=!0;return}i=!0,[e,t]=[t,e],e.forEach(l),e.clear(),i=!1,r&&(r=!1,c.process(d))}};return c}const q0=["read","resolveKeyframes","update","preRender","render","postRender"],eV=40;function XP(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=q0.reduce((x,C)=>(x[C]=Q5(s),x),{}),{read:l,resolveKeyframes:c,update:d,preRender:p,render:m,postRender:y}=o,v=()=>{const x=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(x-r.timestamp,eV),1),r.timestamp=x,r.isProcessing=!0,l.process(r),c.process(r),d.process(r),p.process(r),m.process(r),y.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(v))},S=()=>{t=!0,i=!0,r.isProcessing||n(v)};return{schedule:q0.reduce((x,C)=>{const T=o[C];return x[C]=(P,I=!1,k=!1)=>(t||S(),T.schedule(P,I,k)),x},{}),cancel:x=>{for(let C=0;C<q0.length;C++)o[q0[C]].cancel(x)},state:r,steps:o}}const{schedule:On,cancel:hu,state:Ki,steps:f_}=XP(typeof requestAnimationFrame<"u"?requestAnimationFrame:vs,!0),$P=J.createContext({strict:!1}),nT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qf={};for(const n in nT)Qf[n]={isEnabled:e=>nT[n].some(t=>!!e[t])};function tV(n){for(const e in n)Qf[e]={...Qf[e],...n[e]}}const nV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function By(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||nV.has(n)}let qP=n=>!By(n);function iV(n){n&&(qP=e=>e.startsWith("on")?!By(e):n(e))}try{iV(require("@emotion/is-prop-valid").default)}catch{}function rV(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(qP(r)||t===!0&&By(r)||!e&&!By(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function sV(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Ev=J.createContext({});function ym(n){return typeof n=="string"||Array.isArray(n)}function bv(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const a1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],l1=["initial",...a1];function Tv(n){return bv(n.animate)||l1.some(e=>ym(n[e]))}function YP(n){return!!(Tv(n)||n.variants)}function oV(n,e){if(Tv(n)){const{initial:t,animate:i}=n;return{initial:t===!1||ym(t)?t:void 0,animate:ym(i)?i:void 0}}return n.inherit!==!1?e:{}}function aV(n){const{initial:e,animate:t}=oV(n,J.useContext(Ev));return J.useMemo(()=>({initial:e,animate:t}),[iT(e),iT(t)])}function iT(n){return Array.isArray(n)?n.join(" "):n}const lV=Symbol.for("motionComponentSymbol");function If(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function uV(n,e,t){return J.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):If(t)&&(t.current=i))},[e])}const u1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cV="framerAppearId",KP="data-"+u1(cV),{schedule:c1}=XP(queueMicrotask,!1),JP=J.createContext({});function hV(n,e,t,i,r){var s,o;const{visualElement:l}=J.useContext(Ev),c=J.useContext($P),d=J.useContext(Mv),p=J.useContext(r1).reducedMotion,m=J.useRef(null);i=i||c.renderer,!m.current&&i&&(m.current=i(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p}));const y=m.current,v=J.useContext(JP);y&&!y.projection&&r&&(y.type==="html"||y.type==="svg")&&fV(m.current,t,r,v);const S=J.useRef(!1);J.useInsertionEffect(()=>{y&&S.current&&y.update(t,d)});const E=t[KP],M=J.useRef(!!E&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,E))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,E)));return GP(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),c1.render(y.render),M.current&&y.animationState&&y.animationState.animateChanges())}),J.useEffect(()=>{y&&(!M.current&&y.animationState&&y.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,E)}),M.current=!1))}),y}function fV(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:ZP(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||l&&If(l),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:c,layoutRoot:d})}function ZP(n){if(n)return n.options.allowProjection!==!1?n.projection:ZP(n.parent)}function dV({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&tV(n);function l(d,p){let m;const y={...J.useContext(r1),...d,layoutId:pV(d)},{isStatic:v}=y,S=aV(d),E=i(d,v);if(!v&&s1){mV();const M=gV(y);m=M.MeasureLayout,S.visualElement=hV(r,E,y,e,M.ProjectionNode)}return L.jsxs(Ev.Provider,{value:S,children:[m&&S.visualElement?L.jsx(m,{visualElement:S.visualElement,...y}):null,t(r,d,uV(E,S.visualElement,p),E,v,S.visualElement)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const c=J.forwardRef(l);return c[lV]=r,c}function pV({layoutId:n}){const e=J.useContext(n1).id;return e&&n!==void 0?e+"-"+n:n}function mV(n,e){J.useContext($P).strict}function gV(n){const{drag:e,layout:t}=Qf;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const yV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function h1(n){return typeof n!="string"||n.includes("-")?!1:!!(yV.indexOf(n)>-1||/[A-Z]/u.test(n))}function rT(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function f1(n,e,t,i){if(typeof e=="function"){const[r,s]=rT(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=rT(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const Pw=n=>Array.isArray(n),vV=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),xV=n=>Pw(n)?n[n.length-1]||0:n,dr=n=>!!(n&&n.getVelocity);function yy(n){const e=dr(n)?n.get():n;return vV(e)?e.toValue():e}function _V({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:wV(i,r,s,n),renderState:e()};return t&&(o.onMount=l=>t({props:i,current:l,...o}),o.onUpdate=l=>t(l)),o}const QP=n=>(e,t)=>{const i=J.useContext(Ev),r=J.useContext(Mv),s=()=>_V(n,e,i,r);return t?s():i1(s)};function wV(n,e,t,i){const r={},s=i(n,{});for(const y in s)r[y]=yy(s[y]);let{initial:o,animate:l}=n;const c=Tv(n),d=YP(n);e&&d&&!c&&n.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const m=p?l:o;if(m&&typeof m!="boolean"&&!bv(m)){const y=Array.isArray(m)?m:[m];for(let v=0;v<y.length;v++){const S=f1(n,y[v]);if(S){const{transitionEnd:E,transition:M,...x}=S;for(const C in x){let T=x[C];if(Array.isArray(T)){const P=p?T.length-1:0;T=T[P]}T!==null&&(r[C]=T)}for(const C in E)r[C]=E[C]}}}return r}const hd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kc=new Set(hd),eR=n=>e=>typeof e=="string"&&e.startsWith(n),tR=eR("--"),SV=eR("var(--"),d1=n=>SV(n)?MV.test(n.split("/*")[0].trim()):!1,MV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nR=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ol=(n,e,t)=>t>e?e:t<n?n:t,fd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},vm={...fd,transform:n=>ol(0,1,n)},Y0={...fd,default:1},Zm=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Jl=Zm("deg"),ta=Zm("%"),Tt=Zm("px"),EV=Zm("vh"),bV=Zm("vw"),sT={...ta,parse:n=>ta.parse(n)/100,transform:n=>ta.transform(n*100)},TV={borderWidth:Tt,borderTopWidth:Tt,borderRightWidth:Tt,borderBottomWidth:Tt,borderLeftWidth:Tt,borderRadius:Tt,radius:Tt,borderTopLeftRadius:Tt,borderTopRightRadius:Tt,borderBottomRightRadius:Tt,borderBottomLeftRadius:Tt,width:Tt,maxWidth:Tt,height:Tt,maxHeight:Tt,top:Tt,right:Tt,bottom:Tt,left:Tt,padding:Tt,paddingTop:Tt,paddingRight:Tt,paddingBottom:Tt,paddingLeft:Tt,margin:Tt,marginTop:Tt,marginRight:Tt,marginBottom:Tt,marginLeft:Tt,backgroundPositionX:Tt,backgroundPositionY:Tt},AV={rotate:Jl,rotateX:Jl,rotateY:Jl,rotateZ:Jl,scale:Y0,scaleX:Y0,scaleY:Y0,scaleZ:Y0,skew:Jl,skewX:Jl,skewY:Jl,distance:Tt,translateX:Tt,translateY:Tt,translateZ:Tt,x:Tt,y:Tt,z:Tt,perspective:Tt,transformPerspective:Tt,opacity:vm,originX:sT,originY:sT,originZ:Tt},oT={...fd,transform:Math.round},p1={...TV,...AV,zIndex:oT,size:Tt,fillOpacity:vm,strokeOpacity:vm,numOctaves:oT},CV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PV=hd.length;function RV(n,e,t){let i="",r=!0;for(let s=0;s<PV;s++){const o=hd[s],l=n[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const d=nR(l,p1[o]);if(!c){r=!1;const p=CV[o]||o;i+=`${p}(${d}) `}t&&(e[o]=d)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function m1(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,l=!1;for(const c in e){const d=e[c];if(Kc.has(c)){o=!0;continue}else if(tR(c)){r[c]=d;continue}else{const p=nR(d,p1[c]);c.startsWith("origin")?(l=!0,s[c]=p):i[c]=p}}if(e.transform||(o||t?i.transform=RV(e,n.transform,t):i.transform&&(i.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:p=0}=s;i.transformOrigin=`${c} ${d} ${p}`}}const NV={offset:"stroke-dashoffset",array:"stroke-dasharray"},LV={offset:"strokeDashoffset",array:"strokeDasharray"};function IV(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?NV:LV;n[s.offset]=Tt.transform(-i);const o=Tt.transform(e),l=Tt.transform(t);n[s.array]=`${o} ${l}`}function aT(n,e,t){return typeof n=="string"?n:Tt.transform(e+t*n)}function DV(n,e,t){const i=aT(e,n.x,n.width),r=aT(t,n.y,n.height);return`${i} ${r}`}function g1(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},p,m){if(m1(n,d,m),p){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:v,dimensions:S}=n;y.transform&&(S&&(v.transform=y.transform),delete y.transform),S&&(r!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=DV(S,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),i!==void 0&&(y.scale=i),o!==void 0&&IV(y,o,l,c,!1)}const y1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),iR=()=>({...y1(),attrs:{}}),v1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function rR(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const sR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oR(n,e,t,i){rR(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(sR.has(r)?r:u1(r),e.attrs[r])}const zy={};function kV(n){Object.assign(zy,n)}function aR(n,{layout:e,layoutId:t}){return Kc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!zy[n]||n==="opacity")}function x1(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(dr(r[o])||e.style&&dr(e.style[o])||aR(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function lR(n,e,t){const i=x1(n,e,t);for(const r in n)if(dr(n[r])||dr(e[r])){const s=hd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function UV(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const lT=["x","y","width","height","cx","cy","r"],OV={useVisualState:QP({scrapeMotionValuesFromProps:lR,createRenderState:iR,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const l in r)if(Kc.has(l)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let l=0;l<lT.length;l++){const c=lT[l];n[c]!==e[c]&&(o=!0)}o&&On.read(()=>{UV(t,i),On.render(()=>{g1(i,r,v1(t.tagName),n.transformTemplate),oR(t,i)})})}})},FV={useVisualState:QP({scrapeMotionValuesFromProps:x1,createRenderState:y1})};function uR(n,e,t){for(const i in e)!dr(e[i])&&!aR(i,t)&&(n[i]=e[i])}function BV({transformTemplate:n},e){return J.useMemo(()=>{const t=y1();return m1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function zV(n,e){const t=n.style||{},i={};return uR(i,t,n),Object.assign(i,BV(n,e)),i}function VV(n,e){const t={},i=zV(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function HV(n,e,t,i){const r=J.useMemo(()=>{const s=iR();return g1(s,e,v1(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};uR(s,n.style,n),r.style={...s,...r.style}}return r}function WV(n=!1){return(t,i,r,{latestValues:s},o)=>{const c=(h1(t)?HV:VV)(i,s,o,t),d=rV(i,typeof t=="string",n),p=t!==J.Fragment?{...d,...c,ref:r}:{},{children:m}=i,y=J.useMemo(()=>dr(m)?m.get():m,[m]);return J.createElement(t,{...p,children:y})}}function GV(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...h1(i)?OV:FV,preloadedFeatures:n,useRender:WV(r),createVisualElement:e,Component:i};return dV(o)}}function cR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Av(n,e,t){const i=n.getProps();return f1(i,e,t!==void 0?t:i.custom,n)}const jV=o1(()=>window.ScrollTimeline!==void 0);class XV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(jV()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class $V extends XV{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function _1(n,e){return n?n[e]||n.default||n:void 0}const Rw=2e4;function hR(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Rw;)e+=t,i=n.next(e);return e>=Rw?1/0:e}function w1(n){return typeof n=="function"}function uT(n,e){n.timeline=e,n.onfinish=null}const S1=n=>Array.isArray(n)&&typeof n[0]=="number",qV={linearEasing:void 0};function YV(n,e){const t=o1(n);return()=>{var i;return(i=qV[e])!==null&&i!==void 0?i:t()}}const Vy=YV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fR=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(Zf(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function dR(n){return!!(typeof n=="function"&&Vy()||!n||typeof n=="string"&&(n in Nw||Vy())||S1(n)||Array.isArray(n)&&n.every(dR))}const Pp=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Nw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pp([0,.65,.55,1]),circOut:Pp([.55,0,1,.45]),backIn:Pp([.31,.01,.66,-.59]),backOut:Pp([.33,1.53,.69,.99])};function pR(n,e){if(n)return typeof n=="function"&&Vy()?fR(n,e):S1(n)?Pp(n):Array.isArray(n)?n.map(t=>pR(t,e)||Nw.easeOut):Nw[n]}const po={x:!1,y:!1};function mR(){return po.x||po.y}function KV(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function gR(n,e){const t=KV(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function cT(n){return e=>{e.pointerType==="touch"||mR()||n(e)}}function JV(n,e,t={}){const[i,r,s]=gR(n,t),o=cT(l=>{const{target:c}=l,d=e(l);if(typeof d!="function"||!c)return;const p=cT(m=>{d(m),c.removeEventListener("pointerleave",p)});c.addEventListener("pointerleave",p,r)});return i.forEach(l=>{l.addEventListener("pointerenter",o,r)}),s}const yR=(n,e)=>e?n===e?!0:yR(n,e.parentElement):!1,M1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,ZV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QV(n){return ZV.has(n.tagName)||n.tabIndex!==-1}const Rp=new WeakSet;function hT(n){return e=>{e.key==="Enter"&&n(e)}}function d_(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const e6=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=hT(()=>{if(Rp.has(t))return;d_(t,"down");const r=hT(()=>{d_(t,"up")}),s=()=>d_(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function fT(n){return M1(n)&&!mR()}function t6(n,e,t={}){const[i,r,s]=gR(n,t),o=l=>{const c=l.currentTarget;if(!fT(l)||Rp.has(c))return;Rp.add(c);const d=e(l),p=(v,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),!(!fT(v)||!Rp.has(c))&&(Rp.delete(c),typeof d=="function"&&d(v,{success:S}))},m=v=>{p(v,t.useGlobalTarget||yR(c,v.target))},y=v=>{p(v,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",y,r)};return i.forEach(l=>{!QV(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),l.addEventListener("focus",d=>e6(d,r),r)}),s}function n6(n){return n==="x"||n==="y"?po[n]?null:(po[n]=!0,()=>{po[n]=!1}):po.x||po.y?null:(po.x=po.y=!0,()=>{po.x=po.y=!1})}const vR=new Set(["width","height","top","left","right","bottom",...hd]);let vy;function i6(){vy=void 0}const na={now:()=>(vy===void 0&&na.set(Ki.isProcessing||Z5.useManualTiming?Ki.timestamp:performance.now()),vy),set:n=>{vy=n,queueMicrotask(i6)}};function E1(n,e){n.indexOf(e)===-1&&n.push(e)}function b1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class T1{constructor(){this.subscriptions=[]}add(e){return E1(this.subscriptions,e),()=>b1(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function xR(n,e){return e?n*(1e3/e):0}const dT=30,r6=n=>!isNaN(parseFloat(n));class s6{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=na.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=na.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=r6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new T1);const i=this.events[e].add(t);return e==="change"?()=>{i(),On.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=na.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,dT);return xR(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xm(n,e){return new s6(n,e)}function o6(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,xm(t))}function a6(n,e){const t=Av(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const l=xV(s[o]);o6(n,o,l)}}function l6(n){return!!(dr(n)&&n.add)}function Lw(n,e){const t=n.getValue("willChange");if(l6(t))return t.add(e)}function _R(n){return n.props[KP]}const wR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,u6=1e-7,c6=12;function h6(n,e,t,i,r){let s,o,l=0;do o=e+(t-e)/2,s=wR(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>u6&&++l<c6);return o}function Qm(n,e,t,i){if(n===e&&t===i)return vs;const r=s=>h6(s,0,1,n,t);return s=>s===0||s===1?s:wR(r(s),e,i)}const SR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,MR=n=>e=>1-n(1-e),ER=Qm(.33,1.53,.69,.99),A1=MR(ER),bR=SR(A1),TR=n=>(n*=2)<1?.5*A1(n):.5*(2-Math.pow(2,-10*(n-1))),C1=n=>1-Math.sin(Math.acos(n)),AR=MR(C1),CR=SR(C1),PR=n=>/^0[^.\s]+$/u.test(n);function f6(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||PR(n):!0}const Xp=n=>Math.round(n*1e5)/1e5,P1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function d6(n){return n==null}const p6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,R1=(n,e)=>t=>!!(typeof t=="string"&&p6.test(t)&&t.startsWith(n)||e&&!d6(t)&&Object.prototype.hasOwnProperty.call(t,e)),RR=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,l]=i.match(P1);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},m6=n=>ol(0,255,n),p_={...fd,transform:n=>Math.round(m6(n))},Ac={test:R1("rgb","red"),parse:RR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+p_.transform(n)+", "+p_.transform(e)+", "+p_.transform(t)+", "+Xp(vm.transform(i))+")"};function g6(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Iw={test:R1("#"),parse:g6,transform:Ac.transform},Df={test:R1("hsl","hue"),parse:RR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ta.transform(Xp(e))+", "+ta.transform(Xp(t))+", "+Xp(vm.transform(i))+")"},hr={test:n=>Ac.test(n)||Iw.test(n)||Df.test(n),parse:n=>Ac.test(n)?Ac.parse(n):Df.test(n)?Df.parse(n):Iw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ac.transform(n):Df.transform(n)},y6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function v6(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(P1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(y6))===null||t===void 0?void 0:t.length)||0)>0}const NR="number",LR="color",x6="var",_6="var(",pT="${}",w6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _m(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(w6,c=>(hr.test(c)?(i.color.push(s),r.push(LR),t.push(hr.parse(c))):c.startsWith(_6)?(i.var.push(s),r.push(x6),t.push(c)):(i.number.push(s),r.push(NR),t.push(parseFloat(c))),++s,pT)).split(pT);return{values:t,split:l,indexes:i,types:r}}function IR(n){return _m(n).values}function DR(n){const{split:e,types:t}=_m(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const l=t[o];l===NR?s+=Xp(r[o]):l===LR?s+=hr.transform(r[o]):s+=r[o]}return s}}const S6=n=>typeof n=="number"?0:n;function M6(n){const e=IR(n);return DR(n)(e.map(S6))}const fu={test:v6,parse:IR,createTransformer:DR,getAnimatableNone:M6},E6=new Set(["brightness","contrast","saturate","opacity"]);function b6(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(P1)||[];if(!i)return n;const r=t.replace(i,"");let s=E6.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const T6=/\b([a-z-]*)\(.*?\)/gu,Dw={...fu,getAnimatableNone:n=>{const e=n.match(T6);return e?e.map(b6).join(" "):n}},A6={...p1,color:hr,backgroundColor:hr,outlineColor:hr,fill:hr,stroke:hr,borderColor:hr,borderTopColor:hr,borderRightColor:hr,borderBottomColor:hr,borderLeftColor:hr,filter:Dw,WebkitFilter:Dw},N1=n=>A6[n];function kR(n,e){let t=N1(n);return t!==Dw&&(t=fu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const C6=new Set(["auto","none","0"]);function P6(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!C6.has(s)&&_m(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=kR(t,r)}const mT=n=>n===fd||n===Tt,gT=(n,e)=>parseFloat(n.split(", ")[e]),yT=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return gT(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?gT(s[1],n):0}},R6=new Set(["x","y","z"]),N6=hd.filter(n=>!R6.has(n));function L6(n){const e=[];return N6.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const ed={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:yT(4,13),y:yT(5,14)};ed.translateX=ed.x;ed.translateY=ed.y;const kc=new Set;let kw=!1,Uw=!1;function UR(){if(Uw){const n=Array.from(kc).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=L6(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var l;(l=i.getValue(s))===null||l===void 0||l.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Uw=!1,kw=!1,kc.forEach(n=>n.complete()),kc.clear()}function OR(){kc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Uw=!0)})}function I6(){OR(),UR()}class L1{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(kc.add(this),kw||(kw=!0,On.read(OR),On.resolveKeyframes(UR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const c=i.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),kc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,kc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const FR=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),D6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function k6(n){const e=D6.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function BR(n,e,t=1){const[i,r]=k6(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return FR(o)?parseFloat(o):o}return d1(r)?BR(r,e,t+1):r}const zR=n=>e=>e.test(n),U6={test:n=>n==="auto",parse:n=>n},VR=[fd,Tt,ta,Jl,bV,EV,U6],vT=n=>VR.find(zR(n));class HR extends L1{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),d1(d))){const p=BR(d,t.current);p!==void 0&&(e[c]=p),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!vR.has(i)||e.length!==2)return;const[r,s]=e,o=vT(r),l=vT(s);if(o!==l)if(mT(o)&&mT(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)f6(e[r])&&i.push(r);i.length&&P6(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ed[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=ed[i](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const xT=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(fu.test(n)||n==="0")&&!n.startsWith("url("));function O6(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function F6(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=xT(r,e),l=xT(s,e);return!o||!l?!1:O6(n)||(t==="spring"||w1(t))&&i}const B6=n=>n!==null;function Cv(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(B6),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const z6=40;class WR{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=na.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>z6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&I6(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=na.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!F6(e,i,r,s))if(o)this.options.duration=0;else{c&&c(Cv(e,this.options,t)),l&&l(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,t);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...p},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Xn=(n,e,t)=>n+(e-n)*t;function m_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function V6({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;r=m_(c,l,n+1/3),s=m_(c,l,n),o=m_(c,l,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Hy(n,e){return t=>t>0?e:n}const g_=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},H6=[Iw,Ac,Df],W6=n=>H6.find(e=>e.test(n));function _T(n){const e=W6(n);if(!e)return!1;let t=e.parse(n);return e===Df&&(t=V6(t)),t}const wT=(n,e)=>{const t=_T(n),i=_T(e);if(!t||!i)return Hy(n,e);const r={...t};return s=>(r.red=g_(t.red,i.red,s),r.green=g_(t.green,i.green,s),r.blue=g_(t.blue,i.blue,s),r.alpha=Xn(t.alpha,i.alpha,s),Ac.transform(r))},G6=(n,e)=>t=>e(n(t)),eg=(...n)=>n.reduce(G6),Ow=new Set(["none","hidden"]);function j6(n,e){return Ow.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function X6(n,e){return t=>Xn(n,e,t)}function I1(n){return typeof n=="number"?X6:typeof n=="string"?d1(n)?Hy:hr.test(n)?wT:Y6:Array.isArray(n)?GR:typeof n=="object"?hr.test(n)?wT:$6:Hy}function GR(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>I1(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function $6(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=I1(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function q6(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][r[o]],c=(t=n.values[l])!==null&&t!==void 0?t:0;i[s]=c,r[o]++}return i}const Y6=(n,e)=>{const t=fu.createTransformer(e),i=_m(n),r=_m(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Ow.has(n)&&!r.values.length||Ow.has(e)&&!i.values.length?j6(n,e):eg(GR(q6(i,r),r.values),t):Hy(n,e)};function jR(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Xn(n,e,t):I1(n)(n,e)}const K6=5;function XR(n,e,t){const i=Math.max(e-K6,0);return xR(t-n(i),e-i)}const Qn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ST=.001;function J6({duration:n=Qn.duration,bounce:e=Qn.bounce,velocity:t=Qn.velocity,mass:i=Qn.mass}){let r,s,o=1-e;o=ol(Qn.minDamping,Qn.maxDamping,o),n=ol(Qn.minDuration,Qn.maxDuration,nl(n)),o<1?(r=d=>{const p=d*o,m=p*n,y=p-t,v=Fw(d,o),S=Math.exp(-m);return ST-y/v*S},s=d=>{const m=d*o*n,y=m*t+t,v=Math.pow(o,2)*Math.pow(d,2)*n,S=Math.exp(-m),E=Fw(Math.pow(d,2),o);return(-r(d)+ST>0?-1:1)*((y-v)*S)/E}):(r=d=>{const p=Math.exp(-d*n),m=(d-t)*n+1;return-.001+p*m},s=d=>{const p=Math.exp(-d*n),m=(t-d)*(n*n);return p*m});const l=5/n,c=Q6(r,s,l);if(n=tl(n),isNaN(c))return{stiffness:Qn.stiffness,damping:Qn.damping,duration:n};{const d=Math.pow(c,2)*i;return{stiffness:d,damping:o*2*Math.sqrt(i*d),duration:n}}}const Z6=12;function Q6(n,e,t){let i=t;for(let r=1;r<Z6;r++)i=i-n(i)/e(i);return i}function Fw(n,e){return n*Math.sqrt(1-e*e)}const e8=["duration","bounce"],t8=["stiffness","damping","mass"];function MT(n,e){return e.some(t=>n[t]!==void 0)}function n8(n){let e={velocity:Qn.velocity,stiffness:Qn.stiffness,damping:Qn.damping,mass:Qn.mass,isResolvedFromDuration:!1,...n};if(!MT(n,t8)&&MT(n,e8))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*ol(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Qn.mass,stiffness:r,damping:s}}else{const t=J6(n);e={...e,...t,mass:Qn.mass},e.isResolvedFromDuration=!0}return e}function $R(n=Qn.visualDuration,e=Qn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:d,mass:p,duration:m,velocity:y,isResolvedFromDuration:v}=n8({...t,velocity:-nl(t.velocity||0)}),S=y||0,E=d/(2*Math.sqrt(c*p)),M=o-s,x=nl(Math.sqrt(c/p)),C=Math.abs(M)<5;i||(i=C?Qn.restSpeed.granular:Qn.restSpeed.default),r||(r=C?Qn.restDelta.granular:Qn.restDelta.default);let T;if(E<1){const I=Fw(x,E);T=k=>{const B=Math.exp(-E*x*k);return o-B*((S+E*x*M)/I*Math.sin(I*k)+M*Math.cos(I*k))}}else if(E===1)T=I=>o-Math.exp(-x*I)*(M+(S+x*M)*I);else{const I=x*Math.sqrt(E*E-1);T=k=>{const B=Math.exp(-E*x*k),z=Math.min(I*k,300);return o-B*((S+E*x*M)*Math.sinh(z)+I*M*Math.cosh(z))/I}}const P={calculatedDuration:v&&m||null,next:I=>{const k=T(I);if(v)l.done=I>=m;else{let B=0;E<1&&(B=I===0?tl(S):XR(T,I,k));const z=Math.abs(B)<=i,U=Math.abs(o-k)<=r;l.done=z&&U}return l.value=l.done?o:k,l},toString:()=>{const I=Math.min(hR(P),Rw),k=fR(B=>P.next(I*B).value,I,30);return I+"ms "+k}};return P}function ET({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:p}){const m=n[0],y={done:!1,value:m},v=z=>l!==void 0&&z<l||c!==void 0&&z>c,S=z=>l===void 0?c:c===void 0||Math.abs(l-z)<Math.abs(c-z)?l:c;let E=t*e;const M=m+E,x=o===void 0?M:o(M);x!==M&&(E=x-m);const C=z=>-E*Math.exp(-z/i),T=z=>x+C(z),P=z=>{const U=C(z),F=T(z);y.done=Math.abs(U)<=d,y.value=y.done?x:F};let I,k;const B=z=>{v(y.value)&&(I=z,k=$R({keyframes:[y.value,S(y.value)],velocity:XR(T,z,y.value),damping:r,stiffness:s,restDelta:d,restSpeed:p}))};return B(0),{calculatedDuration:null,next:z=>{let U=!1;return!k&&I===void 0&&(U=!0,P(z),B(z)),I!==void 0&&z>=I?k.next(z-I):(!U&&P(z),y)}}}const i8=Qm(.42,0,1,1),r8=Qm(0,0,.58,1),qR=Qm(.42,0,.58,1),s8=n=>Array.isArray(n)&&typeof n[0]!="number",o8={linear:vs,easeIn:i8,easeInOut:qR,easeOut:r8,circIn:C1,circInOut:CR,circOut:AR,backIn:A1,backInOut:bR,backOut:ER,anticipate:TR},bT=n=>{if(S1(n)){jP(n.length===4);const[e,t,i,r]=n;return Qm(e,t,i,r)}else if(typeof n=="string")return o8[n];return n};function a8(n,e,t){const i=[],r=t||jR,s=n.length-1;for(let o=0;o<s;o++){let l=r(n[o],n[o+1]);if(e){const c=Array.isArray(e)?e[o]||vs:e;l=eg(c,l)}i.push(l)}return i}function l8(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(jP(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=a8(e,i,r),c=l.length,d=p=>{if(o&&p<n[0])return e[0];let m=0;if(c>1)for(;m<n.length-2&&!(p<n[m+1]);m++);const y=Zf(n[m],n[m+1],p);return l[m](y)};return t?p=>d(ol(n[0],n[s-1],p)):d}function u8(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Zf(0,e,i);n.push(Xn(t,1,r))}}function c8(n){const e=[0];return u8(e,n.length-1),e}function h8(n,e){return n.map(t=>t*e)}function f8(n,e){return n.map(()=>e||qR).splice(0,n.length-1)}function Wy({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=s8(i)?i.map(bT):bT(i),s={done:!1,value:e[0]},o=h8(t&&t.length===e.length?t:c8(e),n),l=l8(o,e,{ease:Array.isArray(r)?r:f8(e,r)});return{calculatedDuration:n,next:c=>(s.value=l(c),s.done=c>=n,s)}}const d8=n=>{const e=({timestamp:t})=>n(t);return{start:()=>On.update(e,!0),stop:()=>hu(e),now:()=>Ki.isProcessing?Ki.timestamp:na.now()}},p8={decay:ET,inertia:ET,tween:Wy,keyframes:Wy,spring:$R},m8=n=>n/100;class D1 extends WR{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||L1,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(s,l,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,l=w1(t)?t:p8[t]||Wy;let c,d;l!==Wy&&typeof e[0]!="number"&&(c=eg(m8,jR(e[0],e[1])),e=[0,100]);const p=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=hR(p));const{calculatedDuration:m}=p,y=m+r,v=y*(i+1)-r;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:y,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:z}=this.options;return{done:!0,value:z[z.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:p,resolvedDuration:m}=i;if(this.startTime===null)return s.next(0);const{delay:y,repeat:v,repeatType:S,repeatDelay:E,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-y*(this.speed>=0?1:-1),C=this.speed>=0?x<0:x>p;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let T=this.currentTime,P=s;if(v){const z=Math.min(this.currentTime,p)/m;let U=Math.floor(z),F=z%1;!F&&z>=1&&(F=1),F===1&&U--,U=Math.min(U,v+1),!!(U%2)&&(S==="reverse"?(F=1-F,E&&(F-=E/m)):S==="mirror"&&(P=o)),T=ol(0,1,F)*m}const I=C?{done:!1,value:c[0]}:P.next(T);l&&(I.value=l(I.value));let{done:k}=I;!C&&d!==null&&(k=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return B&&r!==void 0&&(I.value=Cv(c,this.options,r)),M&&M(I.value),B&&this.finish(),I}get duration(){const{resolved:e}=this;return e?nl(e.calculatedDuration):0}get time(){return nl(this.currentTime)}set time(e){e=tl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=nl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=d8,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const g8=new Set(["opacity","clipPath","filter","transform"]);function y8(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[e]:t};c&&(d.offset=c);const p=pR(l,r);return Array.isArray(p)&&(d.easing=p),n.animate(d,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const v8=o1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gy=10,x8=2e4;function _8(n){return w1(n.type)||n.type==="spring"||!dR(n.ease)}function w8(n,e){const t=new D1({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<x8;)i=t.sample(s),r.push(i.value),s+=Gy;return{times:void 0,keyframes:r,duration:s-Gy,ease:"linear"}}const YR={anticipate:TR,backInOut:bR,circInOut:CR};function S8(n){return n in YR}class TT extends WR{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new HR(s,(o,l)=>this.onKeyframesResolved(o,l),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&Vy()&&S8(s)&&(s=YR[s]),_8(this.options)){const{onComplete:m,onUpdate:y,motionValue:v,element:S,...E}=this.options,M=w8(e,E);e=M.keyframes,e.length===1&&(e[1]=e[0]),i=M.duration,r=M.times,s=M.ease,o="keyframes"}const p=y8(l.owner.current,c,e,{...this.options,duration:i,times:r,ease:s});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(uT(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:m}=this.options;l.set(Cv(e,this.options,t)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return nl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return nl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=tl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return vs;const{animation:i}=t;uT(i,e)}return vs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:l}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:m,element:y,...v}=this.options,S=new D1({...v,keyframes:i,duration:r,type:s,ease:o,times:l,isGenerator:!0}),E=tl(this.time);d.setWithVelocity(S.sample(E-Gy).value,S.sample(E).value,Gy)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:l}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return v8()&&i&&g8.has(i)&&!c&&!d&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}}const M8={type:"spring",stiffness:500,damping:25,restSpeed:10},E8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),b8={type:"keyframes",duration:.8},T8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},A8=(n,{keyframes:e})=>e.length>2?b8:Kc.has(n)?n.startsWith("scale")?E8(e[1]):M8:T8;function C8({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:d,...p}){return!!Object.keys(p).length}const k1=(n,e,t,i={},r,s)=>o=>{const l=_1(i,n)||{},c=l.delay||i.delay||0;let{elapsed:d=0}=i;d=d-tl(c);let p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:s?void 0:r};C8(l)||(p={...p,...A8(n,p)}),p.duration&&(p.duration=tl(p.duration)),p.repeatDelay&&(p.repeatDelay=tl(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(m=!0)),m&&!s&&e.get()!==void 0){const y=Cv(p.keyframes,l);if(y!==void 0)return On.update(()=>{p.onUpdate(y),p.onComplete()}),new $V([])}return!s&&TT.supports(p)?new TT(p):new D1(p)};function P8({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function KR(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:l,...c}=e;i&&(o=i);const d=[],p=r&&n.animationState&&n.animationState.getState()[r];for(const m in c){const y=n.getValue(m,(s=n.latestValues[m])!==null&&s!==void 0?s:null),v=c[m];if(v===void 0||p&&P8(p,m))continue;const S={delay:t,..._1(o||{},m)};let E=!1;if(window.MotionHandoffAnimation){const x=_R(n);if(x){const C=window.MotionHandoffAnimation(x,m,On);C!==null&&(S.startTime=C,E=!0)}}Lw(n,m),y.start(k1(m,y,v,n.shouldReduceMotion&&vR.has(m)?{type:!1}:S,n,E));const M=y.animation;M&&d.push(M)}return l&&Promise.all(d).then(()=>{On.update(()=>{l&&a6(n,l)})}),d}function Bw(n,e,t={}){var i;const r=Av(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(KR(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:y}=s;return R8(n,e,p+d,m,y,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,p]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>p())}else return Promise.all([o(),l(t.delay)])}function R8(n,e,t=0,i=0,r=1,s){const o=[],l=(n.variantChildren.size-1)*i,c=r===1?(d=0)=>d*i:(d=0)=>l-d*i;return Array.from(n.variantChildren).sort(N8).forEach((d,p)=>{d.notify("AnimationStart",e),o.push(Bw(d,e,{...s,delay:t+c(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function N8(n,e){return n.sortNodePosition(e)}function L8(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Bw(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=Bw(n,e,t);else{const r=typeof e=="function"?Av(n,e,t.custom):e;i=Promise.all(KR(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const I8=l1.length;function JR(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?JR(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<I8;t++){const i=l1[t],r=n.props[i];(ym(r)||r===!1)&&(e[i]=r)}return e}const D8=[...a1].reverse(),k8=a1.length;function U8(n){return e=>Promise.all(e.map(({animation:t,options:i})=>L8(n,t,i)))}function O8(n){let e=U8(n),t=AT(),i=!0;const r=c=>(d,p)=>{var m;const y=Av(n,p,c==="exit"?(m=n.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(y){const{transition:v,transitionEnd:S,...E}=y;d={...d,...E,...S}}return d};function s(c){e=c(n)}function o(c){const{props:d}=n,p=JR(n.parent)||{},m=[],y=new Set;let v={},S=1/0;for(let M=0;M<k8;M++){const x=D8[M],C=t[x],T=d[x]!==void 0?d[x]:p[x],P=ym(T),I=x===c?C.isActive:null;I===!1&&(S=M);let k=T===p[x]&&T!==d[x]&&P;if(k&&i&&n.manuallyAnimateOnMount&&(k=!1),C.protectedKeys={...v},!C.isActive&&I===null||!T&&!C.prevProp||bv(T)||typeof T=="boolean")continue;const B=F8(C.prevProp,T);let z=B||x===c&&C.isActive&&!k&&P||M>S&&P,U=!1;const F=Array.isArray(T)?T:[T];let K=F.reduce(r(x),{});I===!1&&(K={});const{prevResolvedValues:ae={}}=C,re={...ae,...K},H=ie=>{z=!0,y.has(ie)&&(U=!0,y.delete(ie)),C.needsAnimating[ie]=!0;const V=n.getValue(ie);V&&(V.liveStyle=!1)};for(const ie in re){const V=K[ie],te=ae[ie];if(v.hasOwnProperty(ie))continue;let $=!1;Pw(V)&&Pw(te)?$=!cR(V,te):$=V!==te,$?V!=null?H(ie):y.add(ie):V!==void 0&&y.has(ie)?H(ie):C.protectedKeys[ie]=!0}C.prevProp=T,C.prevResolvedValues=K,C.isActive&&(v={...v,...K}),i&&n.blockInitialAnimation&&(z=!1),z&&(!(k&&B)||U)&&m.push(...F.map(ie=>({animation:ie,options:{type:x}})))}if(y.size){const M={};y.forEach(x=>{const C=n.getBaseTarget(x),T=n.getValue(x);T&&(T.liveStyle=!0),M[x]=C??null}),m.push({animation:M})}let E=!!m.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(m):Promise.resolve()}function l(c,d){var p;if(t[c].isActive===d)return Promise.resolve();(p=n.variantChildren)===null||p===void 0||p.forEach(y=>{var v;return(v=y.animationState)===null||v===void 0?void 0:v.setActive(c,d)}),t[c].isActive=d;const m=o(c);for(const y in t)t[y].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=AT(),i=!0}}}function F8(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!cR(e,n):!1}function mc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function AT(){return{animate:mc(!0),whileInView:mc(),whileHover:mc(),whileTap:mc(),whileDrag:mc(),whileFocus:mc(),exit:mc()}}class yu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class B8 extends yu{constructor(e){super(e),e.animationState||(e.animationState=O8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let z8=0;class V8 extends yu{constructor(){super(...arguments),this.id=z8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const H8={animation:{Feature:B8},exit:{Feature:V8}};function wm(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function tg(n){return{point:{x:n.pageX,y:n.pageY}}}const W8=n=>e=>M1(e)&&n(e,tg(e));function $p(n,e,t,i){return wm(n,e,W8(t),i)}const CT=(n,e)=>Math.abs(n-e);function G8(n,e){const t=CT(n.x,e.x),i=CT(n.y,e.y);return Math.sqrt(t**2+i**2)}class ZR{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=v_(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=G8(m.offset,{x:0,y:0})>=3;if(!y&&!v)return;const{point:S}=m,{timestamp:E}=Ki;this.history.push({...S,timestamp:E});const{onStart:M,onMove:x}=this.handlers;y||(M&&M(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=y_(y,this.transformPagePoint),On.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:v,onSessionEnd:S,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=v_(m.type==="pointercancel"?this.lastMoveEventInfo:y_(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,M),S&&S(m,M)},!M1(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=tg(e),l=y_(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=Ki;this.history=[{...c,timestamp:d}];const{onSessionStart:p}=t;p&&p(e,v_(l,this.history)),this.removeListeners=eg($p(this.contextWindow,"pointermove",this.handlePointerMove),$p(this.contextWindow,"pointerup",this.handlePointerUp),$p(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hu(this.updatePoint)}}function y_(n,e){return e?{point:e(n.point)}:n}function PT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function v_({point:n},e){return{point:n,delta:PT(n,QR(e)),offset:PT(n,j8(e)),velocity:X8(e,.1)}}function j8(n){return n[0]}function QR(n){return n[n.length-1]}function X8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=QR(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>tl(e)));)t--;if(!i)return{x:0,y:0};const s=nl(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const e3=1e-4,$8=1-e3,q8=1+e3,t3=.01,Y8=0-t3,K8=0+t3;function xs(n){return n.max-n.min}function J8(n,e,t){return Math.abs(n-e)<=t}function RT(n,e,t,i=.5){n.origin=i,n.originPoint=Xn(e.min,e.max,n.origin),n.scale=xs(t)/xs(e),n.translate=Xn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=$8&&n.scale<=q8||isNaN(n.scale))&&(n.scale=1),(n.translate>=Y8&&n.translate<=K8||isNaN(n.translate))&&(n.translate=0)}function qp(n,e,t,i){RT(n.x,e.x,t.x,i?i.originX:void 0),RT(n.y,e.y,t.y,i?i.originY:void 0)}function NT(n,e,t){n.min=t.min+e.min,n.max=n.min+xs(e)}function Z8(n,e,t){NT(n.x,e.x,t.x),NT(n.y,e.y,t.y)}function LT(n,e,t){n.min=e.min-t.min,n.max=n.min+xs(e)}function Yp(n,e,t){LT(n.x,e.x,t.x),LT(n.y,e.y,t.y)}function Q8(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Xn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Xn(t,n,i.max):Math.min(n,t)),n}function IT(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function eH(n,{top:e,left:t,bottom:i,right:r}){return{x:IT(n.x,t,r),y:IT(n.y,e,i)}}function DT(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function tH(n,e){return{x:DT(n.x,e.x),y:DT(n.y,e.y)}}function nH(n,e){let t=.5;const i=xs(n),r=xs(e);return r>i?t=Zf(e.min,e.max-i,n.min):i>r&&(t=Zf(n.min,n.max-r,e.min)),ol(0,1,t)}function iH(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const zw=.35;function rH(n=zw){return n===!1?n=0:n===!0&&(n=zw),{x:kT(n,"left","right"),y:kT(n,"top","bottom")}}function kT(n,e,t){return{min:UT(n,e),max:UT(n,t)}}function UT(n,e){return typeof n=="number"?n:n[e]||0}const OT=()=>({translate:0,scale:1,origin:0,originPoint:0}),kf=()=>({x:OT(),y:OT()}),FT=()=>({min:0,max:0}),ai=()=>({x:FT(),y:FT()});function Os(n){return[n("x"),n("y")]}function n3({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function sH({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function oH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function x_(n){return n===void 0||n===1}function Vw({scale:n,scaleX:e,scaleY:t}){return!x_(n)||!x_(e)||!x_(t)}function vc(n){return Vw(n)||i3(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function i3(n){return BT(n.x)||BT(n.y)}function BT(n){return n&&n!=="0%"}function jy(n,e,t){const i=n-t,r=e*i;return t+r}function zT(n,e,t,i,r){return r!==void 0&&(n=jy(n,r,i)),jy(n,t,i)+e}function Hw(n,e=0,t=1,i,r){n.min=zT(n.min,e,t,i,r),n.max=zT(n.max,e,t,i,r)}function r3(n,{x:e,y:t}){Hw(n.x,e.translate,e.scale,e.originPoint),Hw(n.y,t.translate,t.scale,t.originPoint)}const VT=.999999999999,HT=1.0000000000001;function aH(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let l=0;l<r;l++){s=t[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Of(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,r3(n,o)),i&&vc(s.latestValues)&&Of(n,s.latestValues))}e.x<HT&&e.x>VT&&(e.x=1),e.y<HT&&e.y>VT&&(e.y=1)}function Uf(n,e){n.min=n.min+e,n.max=n.max+e}function WT(n,e,t,i,r=.5){const s=Xn(n.min,n.max,r);Hw(n,e,t,s,i)}function Of(n,e){WT(n.x,e.x,e.scaleX,e.scale,e.originX),WT(n.y,e.y,e.scaleY,e.scale,e.originY)}function s3(n,e){return n3(oH(n.getBoundingClientRect(),e))}function lH(n,e,t){const i=s3(n,t),{scroll:r}=e;return r&&(Uf(i.x,r.offset.x),Uf(i.y,r.offset.y)),i}const o3=({current:n})=>n?n.ownerDocument.defaultView:null,uH=new WeakMap;class cH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ai(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(tg(p).point)},s=(p,m)=>{const{drag:y,dragPropagation:v,onDragStart:S}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n6(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Os(M=>{let x=this.getAxisMotionValue(M).get()||0;if(ta.test(x)){const{projection:C}=this.visualElement;if(C&&C.layout){const T=C.layout.layoutBox[M];T&&(x=xs(T)*(parseFloat(x)/100))}}this.originPoint[M]=x}),S&&On.postRender(()=>S(p,m)),Lw(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(p,m)=>{const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:S,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:M}=m;if(v&&this.currentDirection===null){this.currentDirection=hH(M),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",m.point,M),this.updateAxis("y",m.point,M),this.visualElement.render(),E&&E(p,m)},l=(p,m)=>this.stop(p,m),c=()=>Os(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new ZR(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:o3(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&On.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!K0(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Q8(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&If(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=eH(r.layoutBox,t):this.constraints=!1,this.elastic=rH(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Os(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=iH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!If(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=lH(i,r.root,this.visualElement.getTransformPagePoint());let o=tH(r.layout.layoutBox,s);if(t){const l=t(sH(o));this.hasMutatedConstraints=!!l,l&&(o=n3(l))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Os(p=>{if(!K0(p,t,this.currentDirection))return;let m=c&&c[p]||{};o&&(m={min:0,max:0});const y=r?200:1e6,v=r?40:1e7,S={type:"inertia",velocity:i?e[p]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(p,S)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Lw(this.visualElement,e),i.start(k1(e,i,0,t,this.visualElement,!1))}stopAnimation(){Os(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Os(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Os(t=>{const{drag:i}=this.getProps();if(!K0(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[t];s.set(e[t]-Xn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!If(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Os(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=nH({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Os(o=>{if(!K0(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Xn(c,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;uH.set(this.visualElement,this);const e=this.visualElement.current,t=$p(e,"pointerdown",c=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();If(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),On.read(i);const o=wm(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Os(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=c[p].translate,m.set(m.get()+c[p].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=zw,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function K0(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function hH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class fH extends yu{constructor(e){super(e),this.removeGroupControls=vs,this.removeListeners=vs,this.controls=new cH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vs}unmount(){this.removeGroupControls(),this.removeListeners()}}const GT=n=>(e,t)=>{n&&On.postRender(()=>n(e,t))};class dH extends yu{constructor(){super(...arguments),this.removePointerDownListener=vs}onPointerDown(e){this.session=new ZR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:o3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:GT(e),onStart:GT(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&On.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=$p(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ep={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Tt.test(n))n=parseFloat(n);else return n;const t=jT(n,e.target.x),i=jT(n,e.target.y);return`${t}% ${i}%`}},pH={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=fu.parse(n);if(r.length>5)return i;const s=fu.createTransformer(n),o=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const d=Xn(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),s(r)}};class mH extends J.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;kV(gH),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),xy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||On.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),c1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function a3(n){const[e,t]=WP(),i=J.useContext(n1);return L.jsx(mH,{...n,layoutGroup:i,switchLayoutGroup:J.useContext(JP),isPresent:e,safeToRemove:t})}const gH={borderRadius:{...Ep,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ep,borderTopRightRadius:Ep,borderBottomLeftRadius:Ep,borderBottomRightRadius:Ep,boxShadow:pH};function yH(n,e,t){const i=dr(n)?n:xm(n);return i.start(k1("",i,e,t)),i.animation}function vH(n){return n instanceof SVGElement&&n.tagName!=="svg"}const xH=(n,e)=>n.depth-e.depth;class _H{constructor(){this.children=[],this.isDirty=!1}add(e){E1(this.children,e),this.isDirty=!0}remove(e){b1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xH),this.isDirty=!1,this.children.forEach(e)}}function wH(n,e){const t=na.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(hu(i),n(s-e))};return On.read(i,!0),()=>hu(i)}const l3=["TopLeft","TopRight","BottomLeft","BottomRight"],SH=l3.length,XT=n=>typeof n=="string"?parseFloat(n):n,$T=n=>typeof n=="number"||Tt.test(n);function MH(n,e,t,i,r,s){r?(n.opacity=Xn(0,t.opacity!==void 0?t.opacity:1,EH(i)),n.opacityExit=Xn(e.opacity!==void 0?e.opacity:1,0,bH(i))):s&&(n.opacity=Xn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<SH;o++){const l=`border${l3[o]}Radius`;let c=qT(e,l),d=qT(t,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||$T(c)===$T(d)?(n[l]=Math.max(Xn(XT(c),XT(d),i),0),(ta.test(d)||ta.test(c))&&(n[l]+="%")):n[l]=d}(e.rotate||t.rotate)&&(n.rotate=Xn(e.rotate||0,t.rotate||0,i))}function qT(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const EH=u3(0,.5,AR),bH=u3(.5,.95,vs);function u3(n,e,t){return i=>i<n?0:i>e?1:t(Zf(n,e,i))}function YT(n,e){n.min=e.min,n.max=e.max}function ks(n,e){YT(n.x,e.x),YT(n.y,e.y)}function KT(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function JT(n,e,t,i,r){return n-=e,n=jy(n,1/t,i),r!==void 0&&(n=jy(n,1/r,i)),n}function TH(n,e=0,t=1,i=.5,r,s=n,o=n){if(ta.test(e)&&(e=parseFloat(e),e=Xn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Xn(s.min,s.max,i);n===s&&(l-=e),n.min=JT(n.min,e,t,l,r),n.max=JT(n.max,e,t,l,r)}function ZT(n,e,[t,i,r],s,o){TH(n,e[t],e[i],e[r],e.scale,s,o)}const AH=["x","scaleX","originX"],CH=["y","scaleY","originY"];function QT(n,e,t,i){ZT(n.x,e,AH,t?t.x:void 0,i?i.x:void 0),ZT(n.y,e,CH,t?t.y:void 0,i?i.y:void 0)}function eA(n){return n.translate===0&&n.scale===1}function c3(n){return eA(n.x)&&eA(n.y)}function tA(n,e){return n.min===e.min&&n.max===e.max}function PH(n,e){return tA(n.x,e.x)&&tA(n.y,e.y)}function nA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function h3(n,e){return nA(n.x,e.x)&&nA(n.y,e.y)}function iA(n){return xs(n.x)/xs(n.y)}function rA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class RH{constructor(){this.members=[]}add(e){E1(this.members,e),e.scheduleRender()}remove(e){if(b1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NH(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:p,rotateX:m,rotateY:y,skewX:v,skewY:S}=t;d&&(i=`perspective(${d}px) ${i}`),p&&(i+=`rotate(${p}deg) `),m&&(i+=`rotateX(${m}deg) `),y&&(i+=`rotateY(${y}deg) `),v&&(i+=`skewX(${v}deg) `),S&&(i+=`skewY(${S}deg) `)}const l=n.x.scale*e.x,c=n.y.scale*e.y;return(l!==1||c!==1)&&(i+=`scale(${l}, ${c})`),i||"none"}const xc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Np=typeof window<"u"&&window.MotionDebug!==void 0,__=["","X","Y","Z"],LH={visibility:"hidden"},sA=1e3;let IH=0;function w_(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function f3(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=_R(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",On,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&f3(i)}function d3({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=IH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Np&&(xc.totalNodes=xc.resolvedTargetDeltas=xc.recalculatedProjection=0),this.nodes.forEach(UH),this.nodes.forEach(VH),this.nodes.forEach(HH),this.nodes.forEach(OH),Np&&window.MotionDebug.record(xc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new _H)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new T1),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vH(o),this.instance=o;const{layoutId:c,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),n){let m;const y=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=wH(y,250),xy.hasAnimatedSinceResize&&(xy.hasAnimatedSinceResize=!1,this.nodes.forEach(aA))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeTargetChanged:v,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||$H,{onLayoutAnimationStart:M,onLayoutAnimationComplete:x}=p.getProps(),C=!this.targetLayout||!h3(this.targetLayout,S)||v,T=!y&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||y&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,T);const P={..._1(E,"layout"),onPlay:M,onComplete:x};(p.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else y||aA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&f3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(oA);return}this.isUpdating||this.nodes.forEach(BH),this.isUpdating=!1,this.nodes.forEach(zH),this.nodes.forEach(DH),this.nodes.forEach(kH),this.clearAllSnapshots();const l=na.now();Ki.delta=ol(0,1e3/60,l-Ki.timestamp),Ki.timestamp=l,Ki.isProcessing=!0,f_.update.process(Ki),f_.preRender.process(Ki),f_.render.process(Ki),Ki.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,c1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FH),this.sharedNodes.forEach(GH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,On.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){On.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ai(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!c3(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;o&&(l||vc(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),qH(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return ai();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(YH))){const{scroll:p}=this.root;p&&(Uf(c.x,p.offset.x),Uf(c.y,p.offset.y))}return c}removeElementScroll(o){var l;const c=ai();if(ks(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:m,options:y}=p;p!==this.root&&m&&y.layoutScroll&&(m.wasRoot&&ks(c,o),Uf(c.x,m.offset.x),Uf(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=ai();ks(c,o);for(let d=0;d<this.path.length;d++){const p=this.path[d];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Of(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),vc(p.latestValues)&&Of(c,p.latestValues)}return vc(this.latestValues)&&Of(c,this.latestValues),c}removeTransform(o){const l=ai();ks(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!vc(d.latestValues))continue;Vw(d.latestValues)&&d.updateSnapshot();const p=ai(),m=d.measurePageBox();ks(p,m),QT(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return vc(this.latestValues)&&QT(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ki.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!(!this.layout||!(m||y))){if(this.resolvedRelativeTargetAt=Ki.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ai(),this.relativeTargetOrigin=ai(),Yp(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ai(),this.targetWithTransforms=ai()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Z8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ks(this.target,this.layout.layoutBox),r3(this.target,this.targetDelta)):ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ai(),this.relativeTargetOrigin=ai(),Yp(this.relativeTargetOrigin,this.target,v.target),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Np&&xc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Vw(this.parent.latestValues)||i3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ki.timestamp&&(d=!1),d)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;ks(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;aH(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ai());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KT(this.prevProjectionDelta.x,this.projectionDelta.x),KT(this.prevProjectionDelta.y,this.projectionDelta.y)),qp(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!rA(this.projectionDelta.x,this.prevProjectionDelta.x)||!rA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Np&&xc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=kf(),this.projectionDelta=kf(),this.projectionDeltaWithTransform=kf()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},p={...this.latestValues},m=kf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=ai(),v=c?c.source:void 0,S=this.layout?this.layout.source:void 0,E=v!==S,M=this.getStack(),x=!M||M.members.length<=1,C=!!(E&&!x&&this.options.crossfade===!0&&!this.path.some(XH));this.animationProgress=0;let T;this.mixTargetDelta=P=>{const I=P/1e3;lA(m.x,o.x,I),lA(m.y,o.y,I),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yp(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jH(this.relativeTarget,this.relativeTargetOrigin,y,I),T&&PH(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=ai()),ks(T,this.relativeTarget)),E&&(this.animationValues=p,MH(p,d,this.latestValues,I,C,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=On.update(()=>{xy.hasAnimatedSinceResize=!0,this.currentAnimation=yH(0,sA,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:p}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&p3(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ai();const m=xs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const y=xs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+y}ks(l,c),Of(l,p),qp(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new RH),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&w_("z",o,d,this.animationValues);for(let p=0;p<__.length;p++)w_(`rotate${__[p]}`,o,d,this.animationValues),w_(`skew${__[p]}`,o,d,this.animationValues);o.render();for(const p in d)o.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return LH;const d={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=yy(o==null?void 0:o.pointerEvents)||"",d.transform=p?p(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=yy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!vc(this.latestValues)&&(E.transform=p?p({},""):"none",this.hasProjected=!1),E}const y=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=NH(this.projectionDeltaWithTransform,this.treeScale,y),p&&(d.transform=p(y,d.transform));const{x:v,y:S}=this.projectionDelta;d.transformOrigin=`${v.origin*100}% ${S.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=y.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:d.opacity=m===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const E in zy){if(y[E]===void 0)continue;const{correct:M,applyTo:x}=zy[E],C=d.transform==="none"?y[E]:M(y[E],m);if(x){const T=x.length;for(let P=0;P<T;P++)d[x[P]]=C}else d[E]=C}return this.options.layoutId&&(d.pointerEvents=m===this?yy(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(oA),this.root.sharedNodes.clear()}}}function DH(n){n.updateLayout()}function kH(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Os(m=>{const y=o?t.measuredBox[m]:t.layoutBox[m],v=xs(y);y.min=i[m].min,y.max=y.min+v}):p3(s,t.layoutBox,i)&&Os(m=>{const y=o?t.measuredBox[m]:t.layoutBox[m],v=xs(i[m]);y.max=y.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+v)});const l=kf();qp(l,i,t.layoutBox);const c=kf();o?qp(c,n.applyTransform(r,!0),t.measuredBox):qp(c,i,t.layoutBox);const d=!c3(l);let p=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:v}=m;if(y&&v){const S=ai();Yp(S,t.layoutBox,y.layoutBox);const E=ai();Yp(E,i,v.layoutBox),h3(S,E)||(p=!0),m.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=S,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:p})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function UH(n){Np&&xc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function OH(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function FH(n){n.clearSnapshot()}function oA(n){n.clearMeasurements()}function BH(n){n.isLayoutDirty=!1}function zH(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function aA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function VH(n){n.resolveTargetDelta()}function HH(n){n.calcProjection()}function WH(n){n.resetSkewAndRotation()}function GH(n){n.removeLeadSnapshot()}function lA(n,e,t){n.translate=Xn(e.translate,0,t),n.scale=Xn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function uA(n,e,t,i){n.min=Xn(e.min,t.min,i),n.max=Xn(e.max,t.max,i)}function jH(n,e,t,i){uA(n.x,e.x,t.x,i),uA(n.y,e.y,t.y,i)}function XH(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const $H={duration:.45,ease:[.4,0,.1,1]},cA=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),hA=cA("applewebkit/")&&!cA("chrome/")?Math.round:vs;function fA(n){n.min=hA(n.min),n.max=hA(n.max)}function qH(n){fA(n.x),fA(n.y)}function p3(n,e,t){return n==="position"||n==="preserve-aspect"&&!J8(iA(e),iA(t),.2)}function YH(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const KH=d3({attachResizeListener:(n,e)=>wm(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),S_={current:void 0},m3=d3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!S_.current){const n=new KH({});n.mount(window),n.setOptions({layoutScroll:!0}),S_.current=n}return S_.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),JH={pan:{Feature:dH},drag:{Feature:fH,ProjectionNode:m3,MeasureLayout:a3}};function dA(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&On.postRender(()=>s(e,tg(e)))}class ZH extends yu{mount(){const{current:e}=this.node;e&&(this.unmount=JV(e,t=>(dA(this.node,t,"Start"),i=>dA(this.node,i,"End"))))}unmount(){}}class QH extends yu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=eg(wm(this.node.current,"focus",()=>this.onFocus()),wm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function pA(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&On.postRender(()=>s(e,tg(e)))}class eW extends yu{mount(){const{current:e}=this.node;e&&(this.unmount=t6(e,t=>(pA(this.node,t,"Start"),(i,{success:r})=>pA(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ww=new WeakMap,M_=new WeakMap,tW=n=>{const e=Ww.get(n.target);e&&e(n)},nW=n=>{n.forEach(tW)};function iW({root:n,...e}){const t=n||document;M_.has(t)||M_.set(t,{});const i=M_.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(nW,{root:n,...e})),i[r]}function rW(n,e,t){const i=iW(e);return Ww.set(n,t),i.observe(n),()=>{Ww.delete(n),i.unobserve(n)}}const sW={some:0,all:1};class oW extends yu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:sW[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),y=d?p:m;y&&y(c)};return rW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(aW(e,t))&&this.startObserver()}unmount(){}}function aW({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const lW={inView:{Feature:oW},tap:{Feature:eW},focus:{Feature:QH},hover:{Feature:ZH}},uW={layout:{ProjectionNode:m3,MeasureLayout:a3}},Gw={current:null},g3={current:!1};function cW(){if(g3.current=!0,!!s1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gw.current=n.matches;n.addListener(e),e()}else Gw.current=!1}const hW=[...VR,hr,fu],fW=n=>hW.find(zR(n)),mA=new WeakMap;function dW(n,e,t){for(const i in e){const r=e[i],s=t[i];if(dr(r))n.addValue(i,r);else if(dr(s))n.addValue(i,xm(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,xm(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const gA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pW{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=L1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=na.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,On.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:p}=o;this.onUpdate=p,this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Tv(t),this.isVariantNode=YP(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in y){const S=y[v];c[v]!==void 0&&dr(S)&&S.set(c[v],!1)}}mount(e){this.current=e,mA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),g3.current||cW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){mA.delete(this.current),this.projection&&this.projection.unmount(),hu(this.notifyUpdate),hu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Kc.has(e),r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&On.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Qf){const t=Qf[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ai()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<gA.length;i++){const r=gA[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=dW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=xm(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(FR(r)||PR(r))?r=parseFloat(r):!fW(r)&&fu.test(t)&&(r=kR(e,t)),this.setBaseTarget(e,dr(r)?r.get():r)),dr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=f1(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!dr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new T1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class y3 extends pW{constructor(){super(...arguments),this.KeyframeResolver=HR}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;dr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function mW(n){return window.getComputedStyle(n)}class gW extends y3{constructor(){super(...arguments),this.type="html",this.renderInstance=rR}readValueFromInstance(e,t){if(Kc.has(t)){const i=N1(t);return i&&i.default||0}else{const i=mW(e),r=(tR(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return s3(e,t)}build(e,t,i){m1(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return x1(e,t,i)}}class yW extends y3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ai}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Kc.has(t)){const i=N1(t);return i&&i.default||0}return t=sR.has(t)?t:u1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return lR(e,t,i)}build(e,t,i){g1(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){oR(e,t,i,r)}mount(e){this.isSVGTag=v1(e.tagName),super.mount(e)}}const vW=(n,e)=>h1(n)?new yW(e):new gW(e,{allowProjection:n!==J.Fragment}),xW=GV({...H8,...lW,...JH,...uW},vW),Ct=sV(xW),_W=()=>L.jsxs(Ct.div,{className:"w-32 h-32 relative mb-8",initial:{scale:0},animate:{scale:1},transition:{duration:.5,type:"spring"},children:[L.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-16 h-16 bg-primary rounded-full"}),L.jsx(Ct.div,{className:"absolute w-full h-full",style:{borderRadius:"50%",border:"4px solid currentColor"},initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1}}),L.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-secondary rounded-full"}),L.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-accent rounded-full"})]}),yA=({type:n,description:e,color:t,onClick:i})=>L.jsxs(Ct.div,{className:`glass bg-gray-900/80 backdrop-blur-md p-8 rounded-xl cursor-pointer ${t} max-w-md mx-4 transition-all duration-300`,whileHover:{scale:1.05,boxShadow:"0 0 30px rgba(255,255,255,0.3)"},onClick:i,children:[L.jsx("h3",{className:"text-3xl font-bold mb-4",children:n}),L.jsx("p",{className:"text-gray-200 text-lg",children:e})]}),wW=()=>{const n=gC();return L.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-black via-blue-950 to-indigo-950",children:[L.jsx(Yc,{}),L.jsxs("div",{className:"container mx-auto px-4 py-16 relative z-10",children:[L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[L.jsx(_W,{}),L.jsx("h1",{className:"text-7xl font-bold mb-6 font-futuristic text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-400",children:"Welcome to Dots"}),L.jsx("p",{className:"text-2xl font-semibold text-gray-200 mb-12",children:"Connect. Grow. Inspire."})]}),L.jsxs(Ct.div,{className:"flex justify-center gap-8 flex-wrap mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[L.jsx(yA,{type:"Seekers",description:"Bold pioneers charting new territories of knowledge and experience. Join this clan if you're ready to explore and grow.",color:"border-purple-500/40 hover:border-purple-500/70",onClick:()=>n("/seekers")}),L.jsx(yA,{type:"Inspirators",description:"Guides and mentors sharing wisdom and creating opportunities. Join this clan if you're ready to lead and inspire.",color:"border-green-500/40 hover:border-green-500/70",onClick:()=>n("/inspirators")})]}),L.jsxs(Ct.div,{className:"flex flex-col items-center mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[L.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[L.jsx(Ct.button,{whileHover:{scale:1.05,y:-2},className:"px-6 py-3 bg-blue-600/80 backdrop-blur-sm rounded-lg text-white font-medium hover:bg-blue-600 transition-colors",onClick:()=>n("/communities"),children:"Explore Communities"}),L.jsx(Ct.button,{whileHover:{scale:1.05,y:-2},className:"px-6 py-3 bg-purple-600/80 backdrop-blur-sm rounded-lg text-white font-medium hover:bg-purple-600 transition-colors",onClick:()=>n("/success-stories"),children:"Bridges We Build"}),L.jsx(Ct.button,{whileHover:{scale:1.05,y:-2},className:"px-6 py-3 bg-pink-600/80 backdrop-blur-sm rounded-lg text-white font-medium hover:bg-pink-600 transition-colors",onClick:()=>n("/opportunities"),children:"Growing Together"})]}),L.jsx("p",{className:"text-gray-400 text-center max-w-2xl mt-4",children:"Discover how Dots connects people across the universe, creating bridges of opportunity, community, and growth for everyone seeking to make an impact."})]})]})]})};class v3{constructor(){uo(this,"config");uo(this,"experience",0);uo(this,"level",1);uo(this,"skills",[]);uo(this,"achievements",[]);uo(this,"subscribers",[]);this.config=JSON.parse(B_("VITE_PROGRESSION_SYSTEM_CONFIG")),this.initializeAchievements(),this.calculateLevel(),this.initializeSkills()}initializeAchievements(){this.config.achievementCategories.forEach(e=>{this.achievements.push({id:"first_commit",name:"First Steps",description:"Make your first code contribution",category:"Technical",points:50,unlocked:!1,requirements:["Make a commit to any repository"],icon:"🚀",challenge:{description:"Start your coding journey by making your first contribution",steps:["Fork a repository","Make changes to the code","Create a pull request"],currentStep:0}},{id:"bug_hunter",name:"Bug Hunter",description:"Find and fix your first bug",category:"Technical",points:75,unlocked:!1,requirements:["Fix a reported bug"],icon:"🐛",challenge:{description:"Track down and squash your first bug",steps:["Identify a bug in the issue tracker","Reproduce the bug locally","Fix the bug and test the solution"],currentStep:0}},{id:"team_player",name:"Team Player",description:"Collaborate with others on a project",category:"Community",points:100,unlocked:!1,requirements:["Work with at least 2 other contributors"],icon:"👥",challenge:{description:"Learn to work effectively in a team",steps:["Join a project team","Participate in team discussions","Complete a task with team input"],currentStep:0}},{id:"mentor",name:"Mentor Spirit",description:"Help another member with their journey",category:"Community",points:150,unlocked:!1,requirements:["Help resolve someone's question"],icon:"🎓",challenge:{description:"Share your knowledge with others",steps:["Find someone who needs help","Provide guidance and support","Follow up on their progress"],currentStep:0}},{id:"innovator",name:"Innovator",description:"Propose a new feature or improvement",category:"Creative",points:125,unlocked:!1,requirements:["Submit a feature proposal"],icon:"💡",challenge:{description:"Bring new ideas to life",steps:["Identify an opportunity for improvement","Draft a detailed proposal","Present your idea to the community"],currentStep:0}},{id:"designer",name:"UI Artist",description:"Improve the user interface of any project",category:"Creative",points:100,unlocked:!1,requirements:["Make UI/UX improvements"],icon:"🎨",challenge:{description:"Enhance the user experience through design",steps:["Identify UI/UX issues","Create mockups of improvements","Implement the design changes"],currentStep:0}},{id:"project_lead",name:"Project Pioneer",description:"Start your own project and gather contributors",category:"Leadership",points:200,unlocked:!1,requirements:["Create and maintain a project"],icon:"👑",challenge:{description:"Lead your own open source project",steps:["Create a project repository","Write clear documentation","Attract contributors"],currentStep:0}},{id:"community_builder",name:"Community Builder",description:"Organize a community event or workshop",category:"Leadership",points:175,unlocked:!1,requirements:["Organize one community event"],icon:"🌟",challenge:{description:"Bring the community together",steps:["Plan an event or workshop","Promote the event","Successfully host the event"],currentStep:0}})})}initializeSkills(){this.skills=[{id:"coding",name:"Coding",level:1,maxLevel:10,category:"Technical",experience:0,unlocked:!0},{id:"design",name:"Design",level:1,maxLevel:10,category:"Creative",experience:0,unlocked:!0},{id:"leadership",name:"Leadership",level:1,maxLevel:10,category:"Soft Skills",experience:0,unlocked:!0}]}addSkill(e,t){const i={id:`${t.toLowerCase()}_${e.toLowerCase().replace(/\s+/g,"_")}`,name:e,level:1,maxLevel:10,category:t,experience:0,unlocked:!0};return this.skills.push(i),this.checkAchievements(),i}addExperience(e){const t=this.level;this.experience+=e,this.calculateLevel(),this.level>t&&this.checkAchievements()}calculateLevel(){this.level=Math.floor(Math.pow(this.experience/100,1/1.5))+1}getLevel(){return this.level}getExperience(){return this.experience}getNextLevelExperience(){return Math.ceil(Math.pow(this.level,1.5)*100)}getProgress(){return{level:this.level,experience:this.experience,nextLevelExperience:this.getNextLevelExperience(),skills:this.skills,achievements:this.achievements,progressPercentage:this.calculateLevelProgress()}}calculateLevelProgress(){const e=Math.pow(this.level-1,2)*100*this.config.experienceMultiplier,i=Math.pow(this.level,2)*100*this.config.experienceMultiplier-e;return(this.experience-e)/i*100}subscribeToAchievements(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter(t=>t!==e)}}notifyAchievementUnlocked(e){this.subscribers.forEach(t=>t(e))}checkAchievements(){var e;this.level>=5&&!((e=this.achievements.find(t=>t.id==="level_5"))!=null&&e.unlocked)&&this.unlockAchievement("level_5")}unlockAchievement(e){const t=this.achievements.find(i=>i.id===e);t&&!t.unlocked&&(t.unlocked=!0,this.addExperience(t.points),this.notifyAchievementUnlocked(t))}advanceChallengeStep(e){const t=this.achievements.find(i=>i.id===e);t!=null&&t.challenge&&t.challenge.currentStep<t.challenge.steps.length-1&&(t.challenge.currentStep++,t.challenge.currentStep===t.challenge.steps.length-1&&this.unlockAchievement(e))}getSkills(){return this.skills}getAchievements(){return this.achievements}}const vA=new v3,x3=J.createContext(void 0),SW=()=>{const n=J.useContext(x3);if(!n)throw new Error("useProgression must be used within a ProgressionProvider");return n},MW=({children:n})=>{const[e]=J.useState(()=>new v3),[t,i]=J.useState(1),[r,s]=J.useState(0),[o,l]=J.useState(100),[c,d]=J.useState(0);return J.useEffect(()=>{const p=()=>{i(e.getLevel()),s(e.getExperience()),l(e.getNextLevelExperience());const y=e.getExperience(),v=e.getNextLevelExperience();d(y/v*100)};p();const m=e.subscribeToAchievements(()=>{p()});return()=>{m&&m()}},[e]),L.jsx(x3.Provider,{value:{progressionSystem:e,level:t,experience:r,nextLevelExperience:o,progress:c},children:n})},_3=J.createContext(void 0),EW=()=>{const n=J.useContext(_3);if(!n)throw new Error("useNova must be used within a NovaProvider");return n},bW=({children:n})=>{const[e,t]=J.useState([]),[i,r]=J.useState(!1),s=J.useCallback(async l=>{const c={id:Date.now().toString(),content:l,sender:"user",timestamp:new Date};t(d=>[...d,c]),r(!0);try{await new Promise(m=>setTimeout(m,1e3));const d=await TW(l),p={id:(Date.now()+1).toString(),content:d,sender:"nova",timestamp:new Date};t(m=>[...m,p])}catch(d){console.error("Error generating Nova response:",d);const p={id:(Date.now()+1).toString(),content:"I'm having trouble processing your request. Please try again later.",sender:"nova",timestamp:new Date};t(m=>[...m,p])}finally{r(!1)}},[]),o=J.useCallback(()=>{t([])},[]);return L.jsx(_3.Provider,{value:{messages:e,isTyping:i,sendMessage:s,clearMessages:o},children:n})},TW=async n=>{const e=["hello","hi","hey","greetings"],t=n.toLowerCase();return e.some(i=>t.includes(i))?"Hello! I'm Nova, your guide in the Dots community. How can I help you today?":t.includes("help")?"I can help you with various things like finding opportunities, tracking your progress, or learning new skills. What would you like to know more about?":t.includes("skill")||t.includes("learn")?"I see you're interested in learning! Our skill tree system allows you to track your progress in various areas. Would you like me to explain how it works?":t.includes("achievement")?"Achievements are a great way to track your progress and get recognized for your contributions. You can view your achievements in the dashboard. Would you like to see your current achievements?":"I understand you're interested in exploring the Dots community. Could you tell me more about what you'd like to know or achieve?"};var AW={value:()=>{}};function ng(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new _y(t)}function _y(n){this._=n}function CW(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}_y.prototype=ng.prototype={constructor:_y,on:function(n,e){var t=this._,i=CW(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=PW(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=xA(t[r],n.name,e);else if(e==null)for(r in t)t[r]=xA(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new _y(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function PW(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function xA(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=AW,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var jw="http://www.w3.org/1999/xhtml";const _A={svg:"http://www.w3.org/2000/svg",xhtml:jw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pv(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),_A.hasOwnProperty(e)?{space:_A[e],local:n}:n}function RW(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===jw&&e.documentElement.namespaceURI===jw?e.createElement(n):e.createElementNS(t,n)}}function NW(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function w3(n){var e=Pv(n);return(e.local?NW:RW)(e)}function LW(){}function U1(n){return n==null?LW:function(){return this.querySelector(n)}}function IW(n){typeof n!="function"&&(n=U1(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,l=i[r]=new Array(o),c,d,p=0;p<o;++p)(c=s[p])&&(d=n.call(c,c.__data__,p,s))&&("__data__"in c&&(d.__data__=c.__data__),l[p]=d);return new _s(i,this._parents)}function DW(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function kW(){return[]}function S3(n){return n==null?kW:function(){return this.querySelectorAll(n)}}function UW(n){return function(){return DW(n.apply(this,arguments))}}function OW(n){typeof n=="function"?n=UW(n):n=S3(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var o=e[s],l=o.length,c,d=0;d<l;++d)(c=o[d])&&(i.push(n.call(c,c.__data__,d,o)),r.push(c));return new _s(i,r)}function M3(n){return function(){return this.matches(n)}}function E3(n){return function(e){return e.matches(n)}}var FW=Array.prototype.find;function BW(n){return function(){return FW.call(this.children,n)}}function zW(){return this.firstElementChild}function VW(n){return this.select(n==null?zW:BW(typeof n=="function"?n:E3(n)))}var HW=Array.prototype.filter;function WW(){return Array.from(this.children)}function GW(n){return function(){return HW.call(this.children,n)}}function jW(n){return this.selectAll(n==null?WW:GW(typeof n=="function"?n:E3(n)))}function XW(n){typeof n!="function"&&(n=M3(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,l=i[r]=[],c,d=0;d<o;++d)(c=s[d])&&n.call(c,c.__data__,d,s)&&l.push(c);return new _s(i,this._parents)}function b3(n){return new Array(n.length)}function $W(){return new _s(this._enter||this._groups.map(b3),this._parents)}function Xy(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Xy.prototype={constructor:Xy,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function qW(n){return function(){return n}}function YW(n,e,t,i,r,s){for(var o=0,l,c=e.length,d=s.length;o<d;++o)(l=e[o])?(l.__data__=s[o],i[o]=l):t[o]=new Xy(n,s[o]);for(;o<c;++o)(l=e[o])&&(r[o]=l)}function KW(n,e,t,i,r,s,o){var l,c,d=new Map,p=e.length,m=s.length,y=new Array(p),v;for(l=0;l<p;++l)(c=e[l])&&(y[l]=v=o.call(c,c.__data__,l,e)+"",d.has(v)?r[l]=c:d.set(v,c));for(l=0;l<m;++l)v=o.call(n,s[l],l,s)+"",(c=d.get(v))?(i[l]=c,c.__data__=s[l],d.delete(v)):t[l]=new Xy(n,s[l]);for(l=0;l<p;++l)(c=e[l])&&d.get(y[l])===c&&(r[l]=c)}function JW(n){return n.__data__}function ZW(n,e){if(!arguments.length)return Array.from(this,JW);var t=e?KW:YW,i=this._parents,r=this._groups;typeof n!="function"&&(n=qW(n));for(var s=r.length,o=new Array(s),l=new Array(s),c=new Array(s),d=0;d<s;++d){var p=i[d],m=r[d],y=m.length,v=QW(n.call(p,p&&p.__data__,d,i)),S=v.length,E=l[d]=new Array(S),M=o[d]=new Array(S),x=c[d]=new Array(y);t(p,m,E,M,x,v,e);for(var C=0,T=0,P,I;C<S;++C)if(P=E[C]){for(C>=T&&(T=C+1);!(I=M[T])&&++T<S;);P._next=I||null}}return o=new _s(o,i),o._enter=l,o._exit=c,o}function QW(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function eG(){return new _s(this._exit||this._groups.map(b3),this._parents)}function tG(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),i&&r?i.merge(r).order():r}function nG(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),l=new Array(r),c=0;c<o;++c)for(var d=t[c],p=i[c],m=d.length,y=l[c]=new Array(m),v,S=0;S<m;++S)(v=d[S]||p[S])&&(y[S]=v);for(;c<r;++c)l[c]=t[c];return new _s(l,this._parents)}function iG(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function rG(n){n||(n=sG);function e(m,y){return m&&y?n(m.__data__,y.__data__):!m-!y}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var o=t[s],l=o.length,c=r[s]=new Array(l),d,p=0;p<l;++p)(d=o[p])&&(c[p]=d);c.sort(e)}return new _s(r,this._parents).order()}function sG(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function oG(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function aG(){return Array.from(this)}function lG(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function uG(){let n=0;for(const e of this)++n;return n}function cG(){return!this.node()}function hG(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],s=0,o=r.length,l;s<o;++s)(l=r[s])&&n.call(l,l.__data__,s,r);return this}function fG(n){return function(){this.removeAttribute(n)}}function dG(n){return function(){this.removeAttributeNS(n.space,n.local)}}function pG(n,e){return function(){this.setAttribute(n,e)}}function mG(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function gG(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function yG(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function vG(n,e){var t=Pv(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?dG:fG:typeof e=="function"?t.local?yG:gG:t.local?mG:pG)(t,e))}function T3(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function xG(n){return function(){this.style.removeProperty(n)}}function _G(n,e,t){return function(){this.style.setProperty(n,e,t)}}function wG(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function SG(n,e,t){return arguments.length>1?this.each((e==null?xG:typeof e=="function"?wG:_G)(n,e,t??"")):td(this.node(),n)}function td(n,e){return n.style.getPropertyValue(e)||T3(n).getComputedStyle(n,null).getPropertyValue(e)}function MG(n){return function(){delete this[n]}}function EG(n,e){return function(){this[n]=e}}function bG(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function TG(n,e){return arguments.length>1?this.each((e==null?MG:typeof e=="function"?bG:EG)(n,e)):this.node()[n]}function A3(n){return n.trim().split(/^|\s+/)}function O1(n){return n.classList||new C3(n)}function C3(n){this._node=n,this._names=A3(n.getAttribute("class")||"")}C3.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function P3(n,e){for(var t=O1(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function R3(n,e){for(var t=O1(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function AG(n){return function(){P3(this,n)}}function CG(n){return function(){R3(this,n)}}function PG(n,e){return function(){(e.apply(this,arguments)?P3:R3)(this,n)}}function RG(n,e){var t=A3(n+"");if(arguments.length<2){for(var i=O1(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?PG:e?AG:CG)(t,e))}function NG(){this.textContent=""}function LG(n){return function(){this.textContent=n}}function IG(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function DG(n){return arguments.length?this.each(n==null?NG:(typeof n=="function"?IG:LG)(n)):this.node().textContent}function kG(){this.innerHTML=""}function UG(n){return function(){this.innerHTML=n}}function OG(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function FG(n){return arguments.length?this.each(n==null?kG:(typeof n=="function"?OG:UG)(n)):this.node().innerHTML}function BG(){this.nextSibling&&this.parentNode.appendChild(this)}function zG(){return this.each(BG)}function VG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function HG(){return this.each(VG)}function WG(n){var e=typeof n=="function"?n:w3(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function GG(){return null}function jG(n,e){var t=typeof n=="function"?n:w3(n),i=e==null?GG:typeof e=="function"?e:U1(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function XG(){var n=this.parentNode;n&&n.removeChild(this)}function $G(){return this.each(XG)}function qG(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function YG(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function KG(n){return this.select(n?YG:qG)}function JG(n){return arguments.length?this.property("__data__",n):this.node().__data__}function ZG(n){return function(e){n.call(this,e,this.__data__)}}function QG(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function ej(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t<r;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function tj(n,e,t){return function(){var i=this.__on,r,s=ZG(e);if(i){for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function nj(n,e,t){var i=QG(n+""),r,s=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,p;c<d;++c)for(r=0,p=l[c];r<s;++r)if((o=i[r]).type===p.type&&o.name===p.name)return p.value}return}for(l=e?tj:ej,r=0;r<s;++r)this.each(l(i[r],e,t));return this}function N3(n,e,t){var i=T3(n),r=i.CustomEvent;typeof r=="function"?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function ij(n,e){return function(){return N3(this,n,e)}}function rj(n,e){return function(){return N3(this,n,e.apply(this,arguments))}}function sj(n,e){return this.each((typeof e=="function"?rj:ij)(n,e))}function*oj(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var L3=[null];function _s(n,e){this._groups=n,this._parents=e}function ig(){return new _s([[document.documentElement]],L3)}function aj(){return this}_s.prototype=ig.prototype={constructor:_s,select:IW,selectAll:OW,selectChild:VW,selectChildren:jW,filter:XW,data:ZW,enter:$W,exit:eG,join:tG,merge:nG,selection:aj,order:iG,sort:rG,call:oG,nodes:aG,node:lG,size:uG,empty:cG,each:hG,attr:vG,style:SG,property:TG,classed:RG,text:DG,html:FG,raise:zG,lower:HG,append:WG,insert:jG,remove:$G,clone:KG,datum:JG,on:nj,dispatch:sj,[Symbol.iterator]:oj};function Jo(n){return typeof n=="string"?new _s([[document.querySelector(n)]],[document.documentElement]):new _s([[n]],L3)}function lj(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Ka(n,e){if(n=lj(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}const uj={passive:!1},Sm={capture:!0,passive:!1};function E_(n){n.stopImmediatePropagation()}function Vf(n){n.preventDefault(),n.stopImmediatePropagation()}function I3(n){var e=n.document.documentElement,t=Jo(n).on("dragstart.drag",Vf,Sm);"onselectstart"in e?t.on("selectstart.drag",Vf,Sm):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function D3(n,e){var t=n.document.documentElement,i=Jo(n).on("dragstart.drag",null);e&&(i.on("click.drag",Vf,Sm),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const J0=n=>()=>n;function Xw(n,{sourceEvent:e,subject:t,target:i,identifier:r,active:s,x:o,y:l,dx:c,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}Xw.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function cj(n){return!n.ctrlKey&&!n.button}function hj(){return this.parentNode}function fj(n,e){return e??{x:n.x,y:n.y}}function dj(){return navigator.maxTouchPoints||"ontouchstart"in this}function pj(){var n=cj,e=hj,t=fj,i=dj,r={},s=ng("start","drag","end"),o=0,l,c,d,p,m=0;function y(P){P.on("mousedown.drag",v).filter(i).on("touchstart.drag",M).on("touchmove.drag",x,uj).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(P,I){if(!(p||!n.call(this,P,I))){var k=T(this,e.call(this,P,I),P,I,"mouse");k&&(Jo(P.view).on("mousemove.drag",S,Sm).on("mouseup.drag",E,Sm),I3(P.view),E_(P),d=!1,l=P.clientX,c=P.clientY,k("start",P))}}function S(P){if(Vf(P),!d){var I=P.clientX-l,k=P.clientY-c;d=I*I+k*k>m}r.mouse("drag",P)}function E(P){Jo(P.view).on("mousemove.drag mouseup.drag",null),D3(P.view,d),Vf(P),r.mouse("end",P)}function M(P,I){if(n.call(this,P,I)){var k=P.changedTouches,B=e.call(this,P,I),z=k.length,U,F;for(U=0;U<z;++U)(F=T(this,B,P,I,k[U].identifier,k[U]))&&(E_(P),F("start",P,k[U]))}}function x(P){var I=P.changedTouches,k=I.length,B,z;for(B=0;B<k;++B)(z=r[I[B].identifier])&&(Vf(P),z("drag",P,I[B]))}function C(P){var I=P.changedTouches,k=I.length,B,z;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),B=0;B<k;++B)(z=r[I[B].identifier])&&(E_(P),z("end",P,I[B]))}function T(P,I,k,B,z,U){var F=s.copy(),K=Ka(U||k,I),ae,re,H;if((H=t.call(P,new Xw("beforestart",{sourceEvent:k,target:y,identifier:z,active:o,x:K[0],y:K[1],dx:0,dy:0,dispatch:F}),B))!=null)return ae=H.x-K[0]||0,re=H.y-K[1]||0,function se(ne,ie,V){var te=K,$;switch(ne){case"start":r[z]=se,$=o++;break;case"end":delete r[z],--o;case"drag":K=Ka(V||ie,I),$=o;break}F.call(ne,P,new Xw(ne,{sourceEvent:ie,subject:H,target:y,identifier:z,active:$,x:K[0]+ae,y:K[1]+re,dx:K[0]-te[0],dy:K[1]-te[1],dispatch:F}),B)}}return y.filter=function(P){return arguments.length?(n=typeof P=="function"?P:J0(!!P),y):n},y.container=function(P){return arguments.length?(e=typeof P=="function"?P:J0(P),y):e},y.subject=function(P){return arguments.length?(t=typeof P=="function"?P:J0(P),y):t},y.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:J0(!!P),y):i},y.on=function(){var P=s.on.apply(s,arguments);return P===s?y:P},y.clickDistance=function(P){return arguments.length?(m=(P=+P)*P,y):Math.sqrt(m)},y}function F1(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function k3(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function rg(){}var Mm=.7,$y=1/Mm,Hf="\\s*([+-]?\\d+)\\s*",Em="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mj=/^#([0-9a-f]{3,8})$/,gj=new RegExp(`^rgb\\(${Hf},${Hf},${Hf}\\)$`),yj=new RegExp(`^rgb\\(${ia},${ia},${ia}\\)$`),vj=new RegExp(`^rgba\\(${Hf},${Hf},${Hf},${Em}\\)$`),xj=new RegExp(`^rgba\\(${ia},${ia},${ia},${Em}\\)$`),_j=new RegExp(`^hsl\\(${Em},${ia},${ia}\\)$`),wj=new RegExp(`^hsla\\(${Em},${ia},${ia},${Em}\\)$`),wA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};F1(rg,bm,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:SA,formatHex:SA,formatHex8:Sj,formatHsl:Mj,formatRgb:MA,toString:MA});function SA(){return this.rgb().formatHex()}function Sj(){return this.rgb().formatHex8()}function Mj(){return U3(this).formatHsl()}function MA(){return this.rgb().formatRgb()}function bm(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=mj.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?EA(e):t===3?new Kr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Z0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Z0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gj.exec(n))?new Kr(e[1],e[2],e[3],1):(e=yj.exec(n))?new Kr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vj.exec(n))?Z0(e[1],e[2],e[3],e[4]):(e=xj.exec(n))?Z0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_j.exec(n))?AA(e[1],e[2]/100,e[3]/100,1):(e=wj.exec(n))?AA(e[1],e[2]/100,e[3]/100,e[4]):wA.hasOwnProperty(n)?EA(wA[n]):n==="transparent"?new Kr(NaN,NaN,NaN,0):null}function EA(n){return new Kr(n>>16&255,n>>8&255,n&255,1)}function Z0(n,e,t,i){return i<=0&&(n=e=t=NaN),new Kr(n,e,t,i)}function Ej(n){return n instanceof rg||(n=bm(n)),n?(n=n.rgb(),new Kr(n.r,n.g,n.b,n.opacity)):new Kr}function $w(n,e,t,i){return arguments.length===1?Ej(n):new Kr(n,e,t,i??1)}function Kr(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}F1(Kr,$w,k3(rg,{brighter(n){return n=n==null?$y:Math.pow($y,n),new Kr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Mm:Math.pow(Mm,n),new Kr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Kr(Uc(this.r),Uc(this.g),Uc(this.b),qy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bA,formatHex:bA,formatHex8:bj,formatRgb:TA,toString:TA}));function bA(){return`#${Cc(this.r)}${Cc(this.g)}${Cc(this.b)}`}function bj(){return`#${Cc(this.r)}${Cc(this.g)}${Cc(this.b)}${Cc((isNaN(this.opacity)?1:this.opacity)*255)}`}function TA(){const n=qy(this.opacity);return`${n===1?"rgb(":"rgba("}${Uc(this.r)}, ${Uc(this.g)}, ${Uc(this.b)}${n===1?")":`, ${n})`}`}function qy(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Uc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Cc(n){return n=Uc(n),(n<16?"0":"")+n.toString(16)}function AA(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new xo(n,e,t,i)}function U3(n){if(n instanceof xo)return new xo(n.h,n.s,n.l,n.opacity);if(n instanceof rg||(n=bm(n)),!n)return new xo;if(n instanceof xo)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,l=s-r,c=(s+r)/2;return l?(e===s?o=(t-i)/l+(t<i)*6:t===s?o=(i-e)/l+2:o=(e-t)/l+4,l/=c<.5?s+r:2-s-r,o*=60):l=c>0&&c<1?0:o,new xo(o,l,c,n.opacity)}function Tj(n,e,t,i){return arguments.length===1?U3(n):new xo(n,e,t,i??1)}function xo(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}F1(xo,Tj,k3(rg,{brighter(n){return n=n==null?$y:Math.pow($y,n),new xo(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Mm:Math.pow(Mm,n),new xo(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new Kr(b_(n>=240?n-240:n+120,r,i),b_(n,r,i),b_(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new xo(CA(this.h),Q0(this.s),Q0(this.l),qy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=qy(this.opacity);return`${n===1?"hsl(":"hsla("}${CA(this.h)}, ${Q0(this.s)*100}%, ${Q0(this.l)*100}%${n===1?")":`, ${n})`}`}}));function CA(n){return n=(n||0)%360,n<0?n+360:n}function Q0(n){return Math.max(0,Math.min(1,n||0))}function b_(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const O3=n=>()=>n;function Aj(n,e){return function(t){return n+t*e}}function Cj(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function Pj(n){return(n=+n)==1?F3:function(e,t){return t-e?Cj(e,t,n):O3(isNaN(e)?t:e)}}function F3(n,e){var t=e-n;return t?Aj(n,t):O3(isNaN(n)?e:n)}const PA=function n(e){var t=Pj(e);function i(r,s){var o=t((r=$w(r)).r,(s=$w(s)).r),l=t(r.g,s.g),c=t(r.b,s.b),d=F3(r.opacity,s.opacity);return function(p){return r.r=o(p),r.g=l(p),r.b=c(p),r.opacity=d(p),r+""}}return i.gamma=n,i}(1);function Ql(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var qw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,T_=new RegExp(qw.source,"g");function Rj(n){return function(){return n}}function Nj(n){return function(e){return n(e)+""}}function Lj(n,e){var t=qw.lastIndex=T_.lastIndex=0,i,r,s,o=-1,l=[],c=[];for(n=n+"",e=e+"";(i=qw.exec(n))&&(r=T_.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:Ql(i,r)})),t=T_.lastIndex;return t<e.length&&(s=e.slice(t),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Nj(c[0].x):Rj(e):(e=c.length,function(d){for(var p=0,m;p<e;++p)l[(m=c[p]).i]=m.x(d);return l.join("")})}var RA=180/Math.PI,Yw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B3(n,e,t,i,r,s){var o,l,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*i)&&(t-=n*c,i-=e*c),(l=Math.sqrt(t*t+i*i))&&(t/=l,i/=l,c/=l),n*i<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*RA,skewX:Math.atan(c)*RA,scaleX:o,scaleY:l}}var ey;function Ij(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Yw:B3(e.a,e.b,e.c,e.d,e.e,e.f)}function Dj(n){return n==null||(ey||(ey=document.createElementNS("http://www.w3.org/2000/svg","g")),ey.setAttribute("transform",n),!(n=ey.transform.baseVal.consolidate()))?Yw:(n=n.matrix,B3(n.a,n.b,n.c,n.d,n.e,n.f))}function z3(n,e,t,i){function r(d){return d.length?d.pop()+" ":""}function s(d,p,m,y,v,S){if(d!==m||p!==y){var E=v.push("translate(",null,e,null,t);S.push({i:E-4,x:Ql(d,m)},{i:E-2,x:Ql(p,y)})}else(m||y)&&v.push("translate("+m+e+y+t)}function o(d,p,m,y){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),y.push({i:m.push(r(m)+"rotate(",null,i)-2,x:Ql(d,p)})):p&&m.push(r(m)+"rotate("+p+i)}function l(d,p,m,y){d!==p?y.push({i:m.push(r(m)+"skewX(",null,i)-2,x:Ql(d,p)}):p&&m.push(r(m)+"skewX("+p+i)}function c(d,p,m,y,v,S){if(d!==m||p!==y){var E=v.push(r(v)+"scale(",null,",",null,")");S.push({i:E-4,x:Ql(d,m)},{i:E-2,x:Ql(p,y)})}else(m!==1||y!==1)&&v.push(r(v)+"scale("+m+","+y+")")}return function(d,p){var m=[],y=[];return d=n(d),p=n(p),s(d.translateX,d.translateY,p.translateX,p.translateY,m,y),o(d.rotate,p.rotate,m,y),l(d.skewX,p.skewX,m,y),c(d.scaleX,d.scaleY,p.scaleX,p.scaleY,m,y),d=p=null,function(v){for(var S=-1,E=y.length,M;++S<E;)m[(M=y[S]).i]=M.x(v);return m.join("")}}}var kj=z3(Ij,"px, ","px)","deg)"),Uj=z3(Dj,", ",")",")"),Oj=1e-12;function NA(n){return((n=Math.exp(n))+1/n)/2}function Fj(n){return((n=Math.exp(n))-1/n)/2}function Bj(n){return((n=Math.exp(2*n))-1)/(n+1)}const zj=function n(e,t,i){function r(s,o){var l=s[0],c=s[1],d=s[2],p=o[0],m=o[1],y=o[2],v=p-l,S=m-c,E=v*v+S*S,M,x;if(E<Oj)x=Math.log(y/d)/e,M=function(B){return[l+B*v,c+B*S,d*Math.exp(e*B*x)]};else{var C=Math.sqrt(E),T=(y*y-d*d+i*E)/(2*d*t*C),P=(y*y-d*d-i*E)/(2*y*t*C),I=Math.log(Math.sqrt(T*T+1)-T),k=Math.log(Math.sqrt(P*P+1)-P);x=(k-I)/e,M=function(B){var z=B*x,U=NA(I),F=d/(t*C)*(U*Bj(e*z+I)-Fj(I));return[l+F*v,c+F*S,d*U/NA(e*z+I)]}}return M.duration=x*1e3*e/Math.SQRT2,M}return r.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return n(o,l,c)},r}(Math.SQRT2,2,4);var nd=0,Lp=0,bp=0,V3=1e3,Yy,Ip,Ky=0,Hc=0,Rv=0,Tm=typeof performance=="object"&&performance.now?performance:Date,H3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function B1(){return Hc||(H3(Vj),Hc=Tm.now()+Rv)}function Vj(){Hc=0}function Jy(){this._call=this._time=this._next=null}Jy.prototype=z1.prototype={constructor:Jy,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?B1():+t)+(e==null?0:+e),!this._next&&Ip!==this&&(Ip?Ip._next=this:Yy=this,Ip=this),this._call=n,this._time=t,Kw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kw())}};function z1(n,e,t){var i=new Jy;return i.restart(n,e,t),i}function Hj(){B1(),++nd;for(var n=Yy,e;n;)(e=Hc-n._time)>=0&&n._call.call(void 0,e),n=n._next;--nd}function LA(){Hc=(Ky=Tm.now())+Rv,nd=Lp=0;try{Hj()}finally{nd=0,Gj(),Hc=0}}function Wj(){var n=Tm.now(),e=n-Ky;e>V3&&(Rv-=e,Ky=n)}function Gj(){for(var n,e=Yy,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Yy=t);Ip=n,Kw(i)}function Kw(n){if(!nd){Lp&&(Lp=clearTimeout(Lp));var e=n-Hc;e>24?(n<1/0&&(Lp=setTimeout(LA,n-Tm.now()-Rv)),bp&&(bp=clearInterval(bp))):(bp||(Ky=Tm.now(),bp=setInterval(Wj,V3)),nd=1,H3(LA))}}function IA(n,e,t){var i=new Jy;return e=e==null?0:+e,i.restart(r=>{i.stop(),n(r+e)},e,t),i}var jj=ng("start","end","cancel","interrupt"),Xj=[],W3=0,DA=1,Jw=2,wy=3,kA=4,Zw=5,Sy=6;function Nv(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;$j(n,t,{name:e,index:i,group:r,on:jj,tween:Xj,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:W3})}function V1(n,e){var t=Co(n,e);if(t.state>W3)throw new Error("too late; already scheduled");return t}function aa(n,e){var t=Co(n,e);if(t.state>wy)throw new Error("too late; already running");return t}function Co(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function $j(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=z1(s,0,t.time);function s(d){t.state=DA,t.timer.restart(o,t.delay,t.time),t.delay<=d&&o(d-t.delay)}function o(d){var p,m,y,v;if(t.state!==DA)return c();for(p in i)if(v=i[p],v.name===t.name){if(v.state===wy)return IA(o);v.state===kA?(v.state=Sy,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete i[p]):+p<e&&(v.state=Sy,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete i[p])}if(IA(function(){t.state===wy&&(t.state=kA,t.timer.restart(l,t.delay,t.time),l(d))}),t.state=Jw,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Jw){for(t.state=wy,r=new Array(y=t.tween.length),p=0,m=-1;p<y;++p)(v=t.tween[p].value.call(n,n.__data__,t.index,t.group))&&(r[++m]=v);r.length=m+1}}function l(d){for(var p=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(c),t.state=Zw,1),m=-1,y=r.length;++m<y;)r[m].call(n,p);t.state===Zw&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){t.state=Sy,t.timer.stop(),delete i[e];for(var d in i)return;delete n.__transition}}function My(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state>Jw&&i.state<Zw,i.state=Sy,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}s&&delete n.__transition}}function qj(n){return this.each(function(){My(this,n)})}function Yj(n,e){var t,i;return function(){var r=aa(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,l=i.length;o<l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function Kj(n,e,t){var i,r;if(typeof t!="function")throw new Error;return function(){var s=aa(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var l={name:e,value:t},c=0,d=r.length;c<d;++c)if(r[c].name===e){r[c]=l;break}c===d&&r.push(l)}s.tween=r}}function Jj(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=Co(this.node(),t).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?Yj:Kj)(t,n,e))}function H1(n,e,t){var i=n._id;return n.each(function(){var r=aa(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Co(r,i).value[e]}}function G3(n,e){var t;return(typeof e=="number"?Ql:e instanceof bm?PA:(t=bm(e))?(e=t,PA):Lj)(n,e)}function Zj(n){return function(){this.removeAttribute(n)}}function Qj(n){return function(){this.removeAttributeNS(n.space,n.local)}}function e9(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function t9(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function n9(n,e,t){var i,r,s;return function(){var o,l=t(this),c;return l==null?void this.removeAttribute(n):(o=this.getAttribute(n),c=l+"",o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,l)))}}function i9(n,e,t){var i,r,s;return function(){var o,l=t(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),c=l+"",o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,l)))}}function r9(n,e){var t=Pv(n),i=t==="transform"?Uj:G3;return this.attrTween(n,typeof e=="function"?(t.local?i9:n9)(t,i,H1(this,"attr."+n,e)):e==null?(t.local?Qj:Zj)(t):(t.local?t9:e9)(t,i,e))}function s9(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function o9(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function a9(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&o9(n,s)),t}return r._value=e,r}function l9(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&s9(n,s)),t}return r._value=e,r}function u9(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=Pv(n);return this.tween(t,(i.local?a9:l9)(i,e))}function c9(n,e){return function(){V1(this,n).delay=+e.apply(this,arguments)}}function h9(n,e){return e=+e,function(){V1(this,n).delay=e}}function f9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?c9:h9)(e,n)):Co(this.node(),e).delay}function d9(n,e){return function(){aa(this,n).duration=+e.apply(this,arguments)}}function p9(n,e){return e=+e,function(){aa(this,n).duration=e}}function m9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?d9:p9)(e,n)):Co(this.node(),e).duration}function g9(n,e){if(typeof e!="function")throw new Error;return function(){aa(this,n).ease=e}}function y9(n){var e=this._id;return arguments.length?this.each(g9(e,n)):Co(this.node(),e).ease}function v9(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;aa(this,n).ease=t}}function x9(n){if(typeof n!="function")throw new Error;return this.each(v9(this._id,n))}function _9(n){typeof n!="function"&&(n=M3(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,l=i[r]=[],c,d=0;d<o;++d)(c=s[d])&&n.call(c,c.__data__,d,s)&&l.push(c);return new al(i,this._parents,this._name,this._id)}function w9(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),l=0;l<s;++l)for(var c=e[l],d=t[l],p=c.length,m=o[l]=new Array(p),y,v=0;v<p;++v)(y=c[v]||d[v])&&(m[v]=y);for(;l<i;++l)o[l]=e[l];return new al(o,this._parents,this._name,this._id)}function S9(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function M9(n,e,t){var i,r,s=S9(e)?V1:aa;return function(){var o=s(this,n),l=o.on;l!==i&&(r=(i=l).copy()).on(e,t),o.on=r}}function E9(n,e){var t=this._id;return arguments.length<2?Co(this.node(),t).on.on(n):this.each(M9(t,n,e))}function b9(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function T9(){return this.on("end.remove",b9(this._id))}function A9(n){var e=this._name,t=this._id;typeof n!="function"&&(n=U1(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var l=i[o],c=l.length,d=s[o]=new Array(c),p,m,y=0;y<c;++y)(p=l[y])&&(m=n.call(p,p.__data__,y,l))&&("__data__"in p&&(m.__data__=p.__data__),d[y]=m,Nv(d[y],e,t,y,d,Co(p,t)));return new al(s,this._parents,e,t)}function C9(n){var e=this._name,t=this._id;typeof n!="function"&&(n=S3(n));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l<r;++l)for(var c=i[l],d=c.length,p,m=0;m<d;++m)if(p=c[m]){for(var y=n.call(p,p.__data__,m,c),v,S=Co(p,t),E=0,M=y.length;E<M;++E)(v=y[E])&&Nv(v,e,t,E,y,S);s.push(y),o.push(p)}return new al(s,o,e,t)}var P9=ig.prototype.constructor;function R9(){return new P9(this._groups,this._parents)}function N9(n,e){var t,i,r;return function(){var s=td(this,n),o=(this.style.removeProperty(n),td(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}function j3(n){return function(){this.style.removeProperty(n)}}function L9(n,e,t){var i,r=t+"",s;return function(){var o=td(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function I9(n,e,t){var i,r,s;return function(){var o=td(this,n),l=t(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),td(this,n))),o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,l))}}function D9(n,e){var t,i,r,s="style."+e,o="end."+s,l;return function(){var c=aa(this,n),d=c.on,p=c.value[s]==null?l||(l=j3(e)):void 0;(d!==t||r!==p)&&(i=(t=d).copy()).on(o,r=p),c.on=i}}function k9(n,e,t){var i=(n+="")=="transform"?kj:G3;return e==null?this.styleTween(n,N9(n,i)).on("end.style."+n,j3(n)):typeof e=="function"?this.styleTween(n,I9(n,i,H1(this,"style."+n,e))).each(D9(this._id,n)):this.styleTween(n,L9(n,i,e),t).on("end.style."+n,null)}function U9(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function O9(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&U9(n,o,t)),i}return s._value=e,s}function F9(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,O9(n,e,t??""))}function B9(n){return function(){this.textContent=n}}function z9(n){return function(){var e=n(this);this.textContent=e??""}}function V9(n){return this.tween("text",typeof n=="function"?z9(H1(this,"text",n)):B9(n==null?"":n+""))}function H9(n){return function(e){this.textContent=n.call(this,e)}}function W9(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&H9(r)),e}return i._value=n,i}function G9(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,W9(n))}function j9(){for(var n=this._name,e=this._id,t=X3(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,c,d=0;d<l;++d)if(c=o[d]){var p=Co(c,e);Nv(c,n,t,d,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new al(i,this._parents,n,t)}function X9(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--r===0&&s()}};t.each(function(){var d=aa(this,i),p=d.on;p!==n&&(e=(n=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),d.on=e}),r===0&&s()})}var $9=0;function al(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function X3(){return++$9}var $a=ig.prototype;al.prototype={constructor:al,select:A9,selectAll:C9,selectChild:$a.selectChild,selectChildren:$a.selectChildren,filter:_9,merge:w9,selection:R9,transition:j9,call:$a.call,nodes:$a.nodes,node:$a.node,size:$a.size,empty:$a.empty,each:$a.each,on:E9,attr:r9,attrTween:u9,style:k9,styleTween:F9,text:V9,textTween:G9,remove:T9,tween:Jj,delay:f9,duration:m9,ease:y9,easeVarying:x9,end:X9,[Symbol.iterator]:$a[Symbol.iterator]};function q9(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Y9={time:null,delay:0,duration:250,ease:q9};function K9(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function J9(n){var e,t;n instanceof al?(e=n._id,n=n._name):(e=X3(),(t=Y9).time=B1(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,c,d=0;d<l;++d)(c=o[d])&&Nv(c,n,e,d,o,t||K9(c,e));return new al(i,this._parents,n,e)}ig.prototype.interrupt=qj;ig.prototype.transition=J9;function Z9(n,e){var t,i=1;n==null&&(n=0),e==null&&(e=0);function r(){var s,o=t.length,l,c=0,d=0;for(s=0;s<o;++s)l=t[s],c+=l.x,d+=l.y;for(c=(c/o-n)*i,d=(d/o-e)*i,s=0;s<o;++s)l=t[s],l.x-=c,l.y-=d}return r.initialize=function(s){t=s},r.x=function(s){return arguments.length?(n=+s,r):n},r.y=function(s){return arguments.length?(e=+s,r):e},r.strength=function(s){return arguments.length?(i=+s,r):i},r}function Q9(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return $3(this.cover(e,t),e,t,n)}function $3(n,e,t,i){if(isNaN(e)||isNaN(t))return n;var r,s=n._root,o={data:i},l=n._x0,c=n._y0,d=n._x1,p=n._y1,m,y,v,S,E,M,x,C;if(!s)return n._root=o,n;for(;s.length;)if((E=e>=(m=(l+d)/2))?l=m:d=m,(M=t>=(y=(c+p)/2))?c=y:p=y,r=s,!(s=s[x=M<<1|E]))return r[x]=o,n;if(v=+n._x.call(null,s.data),S=+n._y.call(null,s.data),e===v&&t===S)return o.next=s,r?r[x]=o:n._root=o,n;do r=r?r[x]=new Array(4):n._root=new Array(4),(E=e>=(m=(l+d)/2))?l=m:d=m,(M=t>=(y=(c+p)/2))?c=y:p=y;while((x=M<<1|E)===(C=(S>=y)<<1|v>=m));return r[C]=s,r[x]=o,n}function e7(n){var e,t,i=n.length,r,s,o=new Array(i),l=new Array(i),c=1/0,d=1/0,p=-1/0,m=-1/0;for(t=0;t<i;++t)isNaN(r=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=r,l[t]=s,r<c&&(c=r),r>p&&(p=r),s<d&&(d=s),s>m&&(m=s));if(c>p||d>m)return this;for(this.cover(c,d).cover(p,m),t=0;t<i;++t)$3(this,o[t],l[t],n[t]);return this}function t7(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(t))r=(t=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var o=r-t||1,l=this._root,c,d;t>n||n>=r||i>e||e>=s;)switch(d=(e<i)<<1|n<t,c=new Array(4),c[d]=l,l=c,o*=2,d){case 0:r=t+o,s=i+o;break;case 1:t=r-o,s=i+o;break;case 2:r=t+o,i=s-o;break;case 3:t=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=i,this._x1=r,this._y1=s,this}function n7(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function i7(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Cr(n,e,t,i,r){this.node=n,this.x0=e,this.y0=t,this.x1=i,this.y1=r}function r7(n,e,t){var i,r=this._x0,s=this._y0,o,l,c,d,p=this._x1,m=this._y1,y=[],v=this._root,S,E;for(v&&y.push(new Cr(v,r,s,p,m)),t==null?t=1/0:(r=n-t,s=e-t,p=n+t,m=e+t,t*=t);S=y.pop();)if(!(!(v=S.node)||(o=S.x0)>p||(l=S.y0)>m||(c=S.x1)<r||(d=S.y1)<s))if(v.length){var M=(o+c)/2,x=(l+d)/2;y.push(new Cr(v[3],M,x,c,d),new Cr(v[2],o,x,M,d),new Cr(v[1],M,l,c,x),new Cr(v[0],o,l,M,x)),(E=(e>=x)<<1|n>=M)&&(S=y[y.length-1],y[y.length-1]=y[y.length-1-E],y[y.length-1-E]=S)}else{var C=n-+this._x.call(null,v.data),T=e-+this._y.call(null,v.data),P=C*C+T*T;if(P<t){var I=Math.sqrt(t=P);r=n-I,s=e-I,p=n+I,m=e+I,i=v.data}}return i}function s7(n){if(isNaN(p=+this._x.call(null,n))||isNaN(m=+this._y.call(null,n)))return this;var e,t=this._root,i,r,s,o=this._x0,l=this._y0,c=this._x1,d=this._y1,p,m,y,v,S,E,M,x;if(!t)return this;if(t.length)for(;;){if((S=p>=(y=(o+c)/2))?o=y:c=y,(E=m>=(v=(l+d)/2))?l=v:d=v,e=t,!(t=t[M=E<<1|S]))return this;if(!t.length)break;(e[M+1&3]||e[M+2&3]||e[M+3&3])&&(i=e,x=M)}for(;t.data!==n;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[M]=s:delete e[M],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(i?i[x]=t:this._root=t),this):(this._root=s,this)}function o7(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function a7(){return this._root}function l7(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function u7(n){var e=[],t,i=this._root,r,s,o,l,c;for(i&&e.push(new Cr(i,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(i=t.node,s=t.x0,o=t.y0,l=t.x1,c=t.y1)&&i.length){var d=(s+l)/2,p=(o+c)/2;(r=i[3])&&e.push(new Cr(r,d,p,l,c)),(r=i[2])&&e.push(new Cr(r,s,p,d,c)),(r=i[1])&&e.push(new Cr(r,d,o,l,p)),(r=i[0])&&e.push(new Cr(r,s,o,d,p))}return this}function c7(n){var e=[],t=[],i;for(this._root&&e.push(new Cr(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,l=i.y0,c=i.x1,d=i.y1,p=(o+c)/2,m=(l+d)/2;(s=r[0])&&e.push(new Cr(s,o,l,p,m)),(s=r[1])&&e.push(new Cr(s,p,l,c,m)),(s=r[2])&&e.push(new Cr(s,o,m,p,d)),(s=r[3])&&e.push(new Cr(s,p,m,c,d))}t.push(i)}for(;i=t.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function h7(n){return n[0]}function f7(n){return arguments.length?(this._x=n,this):this._x}function d7(n){return n[1]}function p7(n){return arguments.length?(this._y=n,this):this._y}function W1(n,e,t){var i=new G1(e??h7,t??d7,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function G1(n,e,t,i,r,s){this._x=n,this._y=e,this._x0=t,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function UA(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Nr=W1.prototype=G1.prototype;Nr.copy=function(){var n=new G1(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,i;if(!e)return n;if(!e.length)return n._root=UA(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?t.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=UA(i));return n};Nr.add=Q9;Nr.addAll=e7;Nr.cover=t7;Nr.data=n7;Nr.extent=i7;Nr.find=r7;Nr.remove=s7;Nr.removeAll=o7;Nr.root=a7;Nr.size=l7;Nr.visit=u7;Nr.visitAfter=c7;Nr.x=f7;Nr.y=p7;function Oc(n){return function(){return n}}function nu(n){return(n()-.5)*1e-6}function m7(n){return n.x+n.vx}function g7(n){return n.y+n.vy}function y7(n){var e,t,i,r=1,s=1;typeof n!="function"&&(n=Oc(n==null?1:+n));function o(){for(var d,p=e.length,m,y,v,S,E,M,x=0;x<s;++x)for(m=W1(e,m7,g7).visitAfter(l),d=0;d<p;++d)y=e[d],E=t[y.index],M=E*E,v=y.x+y.vx,S=y.y+y.vy,m.visit(C);function C(T,P,I,k,B){var z=T.data,U=T.r,F=E+U;if(z){if(z.index>y.index){var K=v-z.x-z.vx,ae=S-z.y-z.vy,re=K*K+ae*ae;re<F*F&&(K===0&&(K=nu(i),re+=K*K),ae===0&&(ae=nu(i),re+=ae*ae),re=(F-(re=Math.sqrt(re)))/re*r,y.vx+=(K*=re)*(F=(U*=U)/(M+U)),y.vy+=(ae*=re)*F,z.vx-=K*(F=1-F),z.vy-=ae*F)}return}return P>v+F||k<v-F||I>S+F||B<S-F}}function l(d){if(d.data)return d.r=t[d.data.index];for(var p=d.r=0;p<4;++p)d[p]&&d[p].r>d.r&&(d.r=d[p].r)}function c(){if(e){var d,p=e.length,m;for(t=new Array(p),d=0;d<p;++d)m=e[d],t[m.index]=+n(m,d,e)}}return o.initialize=function(d,p){e=d,i=p,c()},o.iterations=function(d){return arguments.length?(s=+d,o):s},o.strength=function(d){return arguments.length?(r=+d,o):r},o.radius=function(d){return arguments.length?(n=typeof d=="function"?d:Oc(+d),c(),o):n},o}function v7(n){return n.index}function OA(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function x7(n){var e=v7,t=m,i,r=Oc(30),s,o,l,c,d,p=1;n==null&&(n=[]);function m(M){return 1/Math.min(l[M.source.index],l[M.target.index])}function y(M){for(var x=0,C=n.length;x<p;++x)for(var T=0,P,I,k,B,z,U,F;T<C;++T)P=n[T],I=P.source,k=P.target,B=k.x+k.vx-I.x-I.vx||nu(d),z=k.y+k.vy-I.y-I.vy||nu(d),U=Math.sqrt(B*B+z*z),U=(U-s[T])/U*M*i[T],B*=U,z*=U,k.vx-=B*(F=c[T]),k.vy-=z*F,I.vx+=B*(F=1-F),I.vy+=z*F}function v(){if(o){var M,x=o.length,C=n.length,T=new Map(o.map((I,k)=>[e(I,k,o),I])),P;for(M=0,l=new Array(x);M<C;++M)P=n[M],P.index=M,typeof P.source!="object"&&(P.source=OA(T,P.source)),typeof P.target!="object"&&(P.target=OA(T,P.target)),l[P.source.index]=(l[P.source.index]||0)+1,l[P.target.index]=(l[P.target.index]||0)+1;for(M=0,c=new Array(C);M<C;++M)P=n[M],c[M]=l[P.source.index]/(l[P.source.index]+l[P.target.index]);i=new Array(C),S(),s=new Array(C),E()}}function S(){if(o)for(var M=0,x=n.length;M<x;++M)i[M]=+t(n[M],M,n)}function E(){if(o)for(var M=0,x=n.length;M<x;++M)s[M]=+r(n[M],M,n)}return y.initialize=function(M,x){o=M,d=x,v()},y.links=function(M){return arguments.length?(n=M,v(),y):n},y.id=function(M){return arguments.length?(e=M,y):e},y.iterations=function(M){return arguments.length?(p=+M,y):p},y.strength=function(M){return arguments.length?(t=typeof M=="function"?M:Oc(+M),S(),y):t},y.distance=function(M){return arguments.length?(r=typeof M=="function"?M:Oc(+M),E(),y):r},y}const _7=1664525,w7=1013904223,FA=4294967296;function S7(){let n=1;return()=>(n=(_7*n+w7)%FA)/FA}function M7(n){return n.x}function E7(n){return n.y}var b7=10,T7=Math.PI*(3-Math.sqrt(5));function A7(n){var e,t=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,l=new Map,c=z1(m),d=ng("tick","end"),p=S7();n==null&&(n=[]);function m(){y(),d.call("tick",e),t<i&&(c.stop(),d.call("end",e))}function y(E){var M,x=n.length,C;E===void 0&&(E=1);for(var T=0;T<E;++T)for(t+=(s-t)*r,l.forEach(function(P){P(t)}),M=0;M<x;++M)C=n[M],C.fx==null?C.x+=C.vx*=o:(C.x=C.fx,C.vx=0),C.fy==null?C.y+=C.vy*=o:(C.y=C.fy,C.vy=0);return e}function v(){for(var E=0,M=n.length,x;E<M;++E){if(x=n[E],x.index=E,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var C=b7*Math.sqrt(.5+E),T=E*T7;x.x=C*Math.cos(T),x.y=C*Math.sin(T)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function S(E){return E.initialize&&E.initialize(n,p),E}return v(),e={tick:y,restart:function(){return c.restart(m),e},stop:function(){return c.stop(),e},nodes:function(E){return arguments.length?(n=E,v(),l.forEach(S),e):n},alpha:function(E){return arguments.length?(t=+E,e):t},alphaMin:function(E){return arguments.length?(i=+E,e):i},alphaDecay:function(E){return arguments.length?(r=+E,e):+r},alphaTarget:function(E){return arguments.length?(s=+E,e):s},velocityDecay:function(E){return arguments.length?(o=1-E,e):1-o},randomSource:function(E){return arguments.length?(p=E,l.forEach(S),e):p},force:function(E,M){return arguments.length>1?(M==null?l.delete(E):l.set(E,S(M)),e):l.get(E)},find:function(E,M,x){var C=0,T=n.length,P,I,k,B,z;for(x==null?x=1/0:x*=x,C=0;C<T;++C)B=n[C],P=E-B.x,I=M-B.y,k=P*P+I*I,k<x&&(z=B,x=k);return z},on:function(E,M){return arguments.length>1?(d.on(E,M),e):d.on(E)}}}function C7(){var n,e,t,i,r=Oc(-30),s,o=1,l=1/0,c=.81;function d(v){var S,E=n.length,M=W1(n,M7,E7).visitAfter(m);for(i=v,S=0;S<E;++S)e=n[S],M.visit(y)}function p(){if(n){var v,S=n.length,E;for(s=new Array(S),v=0;v<S;++v)E=n[v],s[E.index]=+r(E,v,n)}}function m(v){var S=0,E,M,x=0,C,T,P;if(v.length){for(C=T=P=0;P<4;++P)(E=v[P])&&(M=Math.abs(E.value))&&(S+=E.value,x+=M,C+=M*E.x,T+=M*E.y);v.x=C/x,v.y=T/x}else{E=v,E.x=E.data.x,E.y=E.data.y;do S+=s[E.data.index];while(E=E.next)}v.value=S}function y(v,S,E,M){if(!v.value)return!0;var x=v.x-e.x,C=v.y-e.y,T=M-S,P=x*x+C*C;if(T*T/c<P)return P<l&&(x===0&&(x=nu(t),P+=x*x),C===0&&(C=nu(t),P+=C*C),P<o&&(P=Math.sqrt(o*P)),e.vx+=x*v.value*i/P,e.vy+=C*v.value*i/P),!0;if(v.length||P>=l)return;(v.data!==e||v.next)&&(x===0&&(x=nu(t),P+=x*x),C===0&&(C=nu(t),P+=C*C),P<o&&(P=Math.sqrt(o*P)));do v.data!==e&&(T=s[v.data.index]*i/P,e.vx+=x*T,e.vy+=C*T);while(v=v.next)}return d.initialize=function(v,S){n=v,t=S,p()},d.strength=function(v){return arguments.length?(r=typeof v=="function"?v:Oc(+v),p(),d):r},d.distanceMin=function(v){return arguments.length?(o=v*v,d):Math.sqrt(o)},d.distanceMax=function(v){return arguments.length?(l=v*v,d):Math.sqrt(l)},d.theta=function(v){return arguments.length?(c=v*v,d):Math.sqrt(c)},d}const ty=n=>()=>n;function P7(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Qa(n,e,t){this.k=n,this.x=e,this.y=t}Qa.prototype={constructor:Qa,scale:function(n){return n===1?this:new Qa(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Qa(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var q3=new Qa(1,0,0);Qa.prototype;function A_(n){n.stopImmediatePropagation()}function Tp(n){n.preventDefault(),n.stopImmediatePropagation()}function R7(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function N7(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function BA(){return this.__zoom||q3}function L7(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function I7(){return navigator.maxTouchPoints||"ontouchstart"in this}function D7(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function k7(){var n=R7,e=N7,t=D7,i=L7,r=I7,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=zj,d=ng("start","zoom","end"),p,m,y,v=500,S=150,E=0,M=10;function x(H){H.property("__zoom",BA).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",F).filter(r).on("touchstart.zoom",K).on("touchmove.zoom",ae).on("touchend.zoom touchcancel.zoom",re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(H,se,ne,ie){var V=H.selection?H.selection():H;V.property("__zoom",BA),H!==V?I(H,se,ne,ie):V.interrupt().each(function(){k(this,arguments).event(ie).start().zoom(null,typeof se=="function"?se.apply(this,arguments):se).end()})},x.scaleBy=function(H,se,ne,ie){x.scaleTo(H,function(){var V=this.__zoom.k,te=typeof se=="function"?se.apply(this,arguments):se;return V*te},ne,ie)},x.scaleTo=function(H,se,ne,ie){x.transform(H,function(){var V=e.apply(this,arguments),te=this.__zoom,$=ne==null?P(V):typeof ne=="function"?ne.apply(this,arguments):ne,G=te.invert($),Z=typeof se=="function"?se.apply(this,arguments):se;return t(T(C(te,Z),$,G),V,o)},ne,ie)},x.translateBy=function(H,se,ne,ie){x.transform(H,function(){return t(this.__zoom.translate(typeof se=="function"?se.apply(this,arguments):se,typeof ne=="function"?ne.apply(this,arguments):ne),e.apply(this,arguments),o)},null,ie)},x.translateTo=function(H,se,ne,ie,V){x.transform(H,function(){var te=e.apply(this,arguments),$=this.__zoom,G=ie==null?P(te):typeof ie=="function"?ie.apply(this,arguments):ie;return t(q3.translate(G[0],G[1]).scale($.k).translate(typeof se=="function"?-se.apply(this,arguments):-se,typeof ne=="function"?-ne.apply(this,arguments):-ne),te,o)},ie,V)};function C(H,se){return se=Math.max(s[0],Math.min(s[1],se)),se===H.k?H:new Qa(se,H.x,H.y)}function T(H,se,ne){var ie=se[0]-ne[0]*H.k,V=se[1]-ne[1]*H.k;return ie===H.x&&V===H.y?H:new Qa(H.k,ie,V)}function P(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function I(H,se,ne,ie){H.on("start.zoom",function(){k(this,arguments).event(ie).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(ie).end()}).tween("zoom",function(){var V=this,te=arguments,$=k(V,te).event(ie),G=e.apply(V,te),Z=ne==null?P(G):typeof ne=="function"?ne.apply(V,te):ne,ce=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),fe=V.__zoom,Ee=typeof se=="function"?se.apply(V,te):se,be=c(fe.invert(Z).concat(ce/fe.k),Ee.invert(Z).concat(ce/Ee.k));return function(ee){if(ee===1)ee=Ee;else{var Ve=be(ee),je=ce/Ve[2];ee=new Qa(je,Z[0]-Ve[0]*je,Z[1]-Ve[1]*je)}$.zoom(null,ee)}})}function k(H,se,ne){return!ne&&H.__zooming||new B(H,se)}function B(H,se){this.that=H,this.args=se,this.active=0,this.sourceEvent=null,this.extent=e.apply(H,se),this.taps=0}B.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,se){return this.mouse&&H!=="mouse"&&(this.mouse[1]=se.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=se.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=se.invert(this.touch1[0])),this.that.__zoom=se,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var se=Jo(this.that).datum();d.call(H,this.that,new P7(H,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:d}),se)}};function z(H,...se){if(!n.apply(this,arguments))return;var ne=k(this,se).event(H),ie=this.__zoom,V=Math.max(s[0],Math.min(s[1],ie.k*Math.pow(2,i.apply(this,arguments)))),te=Ka(H);if(ne.wheel)(ne.mouse[0][0]!==te[0]||ne.mouse[0][1]!==te[1])&&(ne.mouse[1]=ie.invert(ne.mouse[0]=te)),clearTimeout(ne.wheel);else{if(ie.k===V)return;ne.mouse=[te,ie.invert(te)],My(this),ne.start()}Tp(H),ne.wheel=setTimeout($,S),ne.zoom("mouse",t(T(C(ie,V),ne.mouse[0],ne.mouse[1]),ne.extent,o));function $(){ne.wheel=null,ne.end()}}function U(H,...se){if(y||!n.apply(this,arguments))return;var ne=H.currentTarget,ie=k(this,se,!0).event(H),V=Jo(H.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",ce,!0),te=Ka(H,ne),$=H.clientX,G=H.clientY;I3(H.view),A_(H),ie.mouse=[te,this.__zoom.invert(te)],My(this),ie.start();function Z(fe){if(Tp(fe),!ie.moved){var Ee=fe.clientX-$,be=fe.clientY-G;ie.moved=Ee*Ee+be*be>E}ie.event(fe).zoom("mouse",t(T(ie.that.__zoom,ie.mouse[0]=Ka(fe,ne),ie.mouse[1]),ie.extent,o))}function ce(fe){V.on("mousemove.zoom mouseup.zoom",null),D3(fe.view,ie.moved),Tp(fe),ie.event(fe).end()}}function F(H,...se){if(n.apply(this,arguments)){var ne=this.__zoom,ie=Ka(H.changedTouches?H.changedTouches[0]:H,this),V=ne.invert(ie),te=ne.k*(H.shiftKey?.5:2),$=t(T(C(ne,te),ie,V),e.apply(this,se),o);Tp(H),l>0?Jo(this).transition().duration(l).call(I,$,ie,H):Jo(this).call(x.transform,$,ie,H)}}function K(H,...se){if(n.apply(this,arguments)){var ne=H.touches,ie=ne.length,V=k(this,se,H.changedTouches.length===ie).event(H),te,$,G,Z;for(A_(H),$=0;$<ie;++$)G=ne[$],Z=Ka(G,this),Z=[Z,this.__zoom.invert(Z),G.identifier],V.touch0?!V.touch1&&V.touch0[2]!==Z[2]&&(V.touch1=Z,V.taps=0):(V.touch0=Z,te=!0,V.taps=1+!!p);p&&(p=clearTimeout(p)),te&&(V.taps<2&&(m=Z[0],p=setTimeout(function(){p=null},v)),My(this),V.start())}}function ae(H,...se){if(this.__zooming){var ne=k(this,se).event(H),ie=H.changedTouches,V=ie.length,te,$,G,Z;for(Tp(H),te=0;te<V;++te)$=ie[te],G=Ka($,this),ne.touch0&&ne.touch0[2]===$.identifier?ne.touch0[0]=G:ne.touch1&&ne.touch1[2]===$.identifier&&(ne.touch1[0]=G);if($=ne.that.__zoom,ne.touch1){var ce=ne.touch0[0],fe=ne.touch0[1],Ee=ne.touch1[0],be=ne.touch1[1],ee=(ee=Ee[0]-ce[0])*ee+(ee=Ee[1]-ce[1])*ee,Ve=(Ve=be[0]-fe[0])*Ve+(Ve=be[1]-fe[1])*Ve;$=C($,Math.sqrt(ee/Ve)),G=[(ce[0]+Ee[0])/2,(ce[1]+Ee[1])/2],Z=[(fe[0]+be[0])/2,(fe[1]+be[1])/2]}else if(ne.touch0)G=ne.touch0[0],Z=ne.touch0[1];else return;ne.zoom("touch",t(T($,G,Z),ne.extent,o))}}function re(H,...se){if(this.__zooming){var ne=k(this,se).event(H),ie=H.changedTouches,V=ie.length,te,$;for(A_(H),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),te=0;te<V;++te)$=ie[te],ne.touch0&&ne.touch0[2]===$.identifier?delete ne.touch0:ne.touch1&&ne.touch1[2]===$.identifier&&delete ne.touch1;if(ne.touch1&&!ne.touch0&&(ne.touch0=ne.touch1,delete ne.touch1),ne.touch0)ne.touch0[1]=this.__zoom.invert(ne.touch0[0]);else if(ne.end(),ne.taps===2&&($=Ka($,this),Math.hypot(m[0]-$[0],m[1]-$[1])<M)){var G=Jo(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return x.wheelDelta=function(H){return arguments.length?(i=typeof H=="function"?H:ty(+H),x):i},x.filter=function(H){return arguments.length?(n=typeof H=="function"?H:ty(!!H),x):n},x.touchable=function(H){return arguments.length?(r=typeof H=="function"?H:ty(!!H),x):r},x.extent=function(H){return arguments.length?(e=typeof H=="function"?H:ty([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),x):e},x.scaleExtent=function(H){return arguments.length?(s[0]=+H[0],s[1]=+H[1],x):[s[0],s[1]]},x.translateExtent=function(H){return arguments.length?(o[0][0]=+H[0][0],o[1][0]=+H[1][0],o[0][1]=+H[0][1],o[1][1]=+H[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(H){return arguments.length?(t=H,x):t},x.duration=function(H){return arguments.length?(l=+H,x):l},x.interpolate=function(H){return arguments.length?(c=H,x):c},x.on=function(){var H=d.on.apply(d,arguments);return H===d?x:H},x.clickDistance=function(H){return arguments.length?(E=(H=+H)*H,x):Math.sqrt(E)},x.tapDistance=function(H){return arguments.length?(M=+H,x):M},x}const U7=[{id:"coding",name:"Coding",description:"Master the art of programming",level:0,maxLevel:5,category:"Technical",prerequisites:[],unlocked:!0},{id:"webdev",name:"Web Development",description:"Create modern web applications",level:0,maxLevel:5,category:"Technical",prerequisites:["coding"],unlocked:!1},{id:"leadership",name:"Leadership",description:"Lead and inspire teams",level:0,maxLevel:5,category:"Soft Skills",prerequisites:[],unlocked:!0},{id:"teamwork",name:"Teamwork",description:"Collaborate effectively in teams",level:0,maxLevel:5,category:"Soft Skills",prerequisites:["leadership"],unlocked:!1}],O7=()=>{const n=J.useRef(null),[e,t]=J.useState(null),[i,r]=J.useState(U7);J.useEffect(()=>{if(!n.current)return;const o=800,l=600,c=Jo(n.current);c.selectAll("*").remove();const d=c.append("g"),p=k7().scaleExtent([.5,2]).on("zoom",T=>{d.attr("transform",T.transform)});c.call(p);const m=i.map(T=>({...T,x:o/2,y:l/2})),y=i.flatMap(T=>T.prerequisites.map(P=>({source:P,target:T.id}))),v=A7(m).force("link",x7(y).id(T=>T.id).distance(100)).force("charge",C7().strength(-200)).force("center",Z9(o/2,l/2)).force("collision",y7().radius(50)),S=d.append("g").selectAll("line").data(y).join("line").attr("stroke","#666").attr("stroke-width",2).attr("stroke-dasharray","5,5"),E=d.append("g").selectAll("g").data(m).join("g").attr("class","skill-node").call(pj().on("start",M).on("drag",x).on("end",C));E.append("circle").attr("r",30).attr("fill",T=>T.unlocked?"#4CAF50":"#666").attr("stroke","#fff").attr("stroke-width",2),E.append("text").text(T=>T.name).attr("text-anchor","middle").attr("dy",5).attr("fill","#fff").style("font-size","12px"),E.append("text").text(T=>`${T.level}/${T.maxLevel}`).attr("text-anchor","middle").attr("dy",20).attr("fill","#fff").style("font-size","10px"),v.on("tick",()=>{S.attr("x1",T=>T.source.x).attr("y1",T=>T.source.y).attr("x2",T=>T.target.x).attr("y2",T=>T.target.y),E.attr("transform",T=>`translate(${T.x},${T.y})`)});function M(T,P){T.active||v.alphaTarget(.3).restart(),P.fx=P.x,P.fy=P.y}function x(T,P){P.fx=T.x,P.fy=T.y}function C(T,P){T.active||v.alphaTarget(0),P.fx=null,P.fy=null}return E.on("click",(T,P)=>{T.stopPropagation(),t(P)}),()=>{v.stop()}},[i]);const s=o=>{r(l=>l.map(c=>c.id===o&&c.level<c.maxLevel?{...c,level:c.level+1}:c))};return L.jsxs("div",{className:"relative w-full h-screen bg-gray-900",children:[L.jsx("svg",{ref:n,className:"w-full h-full",viewBox:"0 0 800 600",preserveAspectRatio:"xMidYMid meet"}),e&&L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"absolute bottom-4 left-4 p-6 glass rounded-xl max-w-md",children:[L.jsx("button",{className:"absolute top-2 right-2 text-white/60 hover:text-white",onClick:()=>t(null),children:"×"}),L.jsx("h3",{className:"text-xl font-bold mb-2",children:e.name}),L.jsx("p",{className:"text-gray-300 mb-4",children:e.description}),L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsxs("div",{children:["Level: ",e.level,"/",e.maxLevel]}),e.unlocked&&e.level<e.maxLevel&&L.jsx("button",{className:"btn btn-primary",onClick:()=>s(e.id),children:"Upgrade"})]})]})]})},F7=()=>{const[n,e]=J.useState([]),[t,i]=J.useState("all"),[r,s]=J.useState(!1),[o,l]=J.useState(null);J.useEffect(()=>{const m=vA.getProgress();e(m.achievements);const y=vA.subscribeToAchievements(v=>{c(v)});return()=>{y()}},[]);const c=m=>{l(m),s(!0),setTimeout(()=>{s(!1),l(null)},3e3)},d=n.filter(m=>t==="all"||m.category===t),p=["all",...new Set(n.map(m=>m.category))];return L.jsxs("div",{className:"container mx-auto px-4 py-8",children:[L.jsx("div",{className:"flex space-x-4 mb-8 overflow-x-auto pb-2",children:p.map(m=>L.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${t===m?"bg-primary-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,onClick:()=>i(m),children:m.charAt(0).toUpperCase()+m.slice(1)},m))}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(m=>L.jsxs(Ct.div,{className:`relative overflow-hidden rounded-lg ${m.isUnlocked?"bg-gradient-to-br from-primary-900/50 to-primary-800/50":"bg-gray-900/50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},transition:{duration:.2},children:[L.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent to-black/30"}),L.jsxs("div",{className:"relative p-6",children:[L.jsxs("div",{className:"flex items-start justify-between mb-4",children:[L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx("span",{className:"text-3xl",children:m.icon}),L.jsxs("div",{children:[L.jsx("h3",{className:"text-lg font-semibold text-white",children:m.name}),L.jsx("p",{className:"text-sm text-gray-300",children:m.description})]})]}),m.isUnlocked&&L.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-green-500 rounded-full",children:L.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),L.jsxs("div",{className:"mb-4",children:[L.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[L.jsx("span",{children:"Progress"}),L.jsxs("span",{children:[m.progress,"%"]})]}),L.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:L.jsx(Ct.div,{className:"h-full bg-gradient-to-r from-primary-500 to-secondary-500",initial:{width:0},animate:{width:`${m.progress}%`},transition:{duration:1,ease:"easeOut"}})})]}),L.jsxs("div",{className:"text-sm",children:[L.jsx("span",{className:"text-gray-400",children:"Reward: "}),L.jsx("span",{className:"text-primary-300",children:m.reward.description})]})]})]},m.id))}),L.jsx(Jm,{children:r&&o&&L.jsxs(Ct.div,{className:"fixed inset-0 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[L.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),L.jsxs(Ct.div,{className:"relative bg-gray-900 rounded-lg p-8 text-center",initial:{scale:.5,y:100},animate:{scale:1,y:0},exit:{scale:.5,y:100},children:[L.jsx("div",{className:"text-6xl mb-4",children:o.icon}),L.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Achievement Unlocked!"}),L.jsx("p",{className:"text-xl text-primary-300 mb-4",children:o.name}),L.jsx("p",{className:"text-gray-400",children:o.reward.description})]})]})})]})},Qw="RFC3986",eS={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},B7="RFC1738",z7=Array.isArray,$o=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),C_=1024,V7=(n,e,t,i,r)=>{if(n.length===0)return n;let s=n;if(typeof n=="symbol"?s=Symbol.prototype.toString.call(n):typeof n!="string"&&(s=String(n)),t==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let o="";for(let l=0;l<s.length;l+=C_){const c=s.length>=C_?s.slice(l,l+C_):s,d=[];for(let p=0;p<c.length;++p){let m=c.charCodeAt(p);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||r===B7&&(m===40||m===41)){d[d.length]=c.charAt(p);continue}if(m<128){d[d.length]=$o[m];continue}if(m<2048){d[d.length]=$o[192|m>>6]+$o[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=$o[224|m>>12]+$o[128|m>>6&63]+$o[128|m&63];continue}p+=1,m=65536+((m&1023)<<10|c.charCodeAt(p)&1023),d[d.length]=$o[240|m>>18]+$o[128|m>>12&63]+$o[128|m>>6&63]+$o[128|m&63]}o+=d.join("")}return o};function H7(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function zA(n,e){if(z7(n)){const t=[];for(let i=0;i<n.length;i+=1)t.push(e(n[i]));return t}return e(n)}const W7=Object.prototype.hasOwnProperty,Y3={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},qo=Array.isArray,G7=Array.prototype.push,K3=function(n,e){G7.apply(n,qo(e)?e:[e])},j7=Date.prototype.toISOString,Ci={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:V7,encodeValuesOnly:!1,format:Qw,formatter:eS[Qw],indices:!1,serializeDate(n){return j7.call(n)},skipNulls:!1,strictNullHandling:!1};function X7(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const P_={};function J3(n,e,t,i,r,s,o,l,c,d,p,m,y,v,S,E,M,x){let C=n,T=x,P=0,I=!1;for(;(T=T.get(P_))!==void 0&&!I;){const F=T.get(n);if(P+=1,typeof F<"u"){if(F===P)throw new RangeError("Cyclic object value");I=!0}typeof T.get(P_)>"u"&&(P=0)}if(typeof d=="function"?C=d(e,C):C instanceof Date?C=y==null?void 0:y(C):t==="comma"&&qo(C)&&(C=zA(C,function(F){return F instanceof Date?y==null?void 0:y(F):F})),C===null){if(s)return c&&!E?c(e,Ci.encoder,M,"key",v):e;C=""}if(X7(C)||H7(C)){if(c){const F=E?e:c(e,Ci.encoder,M,"key",v);return[(S==null?void 0:S(F))+"="+(S==null?void 0:S(c(C,Ci.encoder,M,"value",v)))]}return[(S==null?void 0:S(e))+"="+(S==null?void 0:S(String(C)))]}const k=[];if(typeof C>"u")return k;let B;if(t==="comma"&&qo(C))E&&c&&(C=zA(C,c)),B=[{value:C.length>0?C.join(",")||null:void 0}];else if(qo(d))B=d;else{const F=Object.keys(C);B=p?F.sort(p):F}const z=l?String(e).replace(/\./g,"%2E"):String(e),U=i&&qo(C)&&C.length===1?z+"[]":z;if(r&&qo(C)&&C.length===0)return U+"[]";for(let F=0;F<B.length;++F){const K=B[F],ae=typeof K=="object"&&typeof K.value<"u"?K.value:C[K];if(o&&ae===null)continue;const re=m&&l?K.replace(/\./g,"%2E"):K,H=qo(C)?typeof t=="function"?t(U,re):U:U+(m?"."+re:"["+re+"]");x.set(n,P);const se=new WeakMap;se.set(P_,x),K3(k,J3(ae,H,t,i,r,s,o,l,t==="comma"&&E&&qo(C)?null:c,d,p,m,y,v,S,E,M,se))}return k}function $7(n=Ci){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Ci.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=Qw;if(typeof n.format<"u"){if(!W7.call(eS,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const i=eS[t];let r=Ci.filter;(typeof n.filter=="function"||qo(n.filter))&&(r=n.filter);let s;if(n.arrayFormat&&n.arrayFormat in Y3?s=n.arrayFormat:"indices"in n?s=n.indices?"indices":"repeat":s=Ci.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Ci.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Ci.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Ci.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Ci.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Ci.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Ci.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Ci.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Ci.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Ci.encodeValuesOnly,filter:r,format:t,formatter:i,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Ci.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Ci.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Ci.strictNullHandling}}function q7(n,e={}){let t=n;const i=$7(e);let r,s;typeof i.filter=="function"?(s=i.filter,t=s("",t)):qo(i.filter)&&(s=i.filter,r=s);const o=[];if(typeof t!="object"||t===null)return"";const l=Y3[i.arrayFormat],c=l==="comma"&&i.commaRoundTrip;r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);const d=new WeakMap;for(let y=0;y<r.length;++y){const v=r[y];i.skipNulls&&t[v]===null||K3(o,J3(t[v],v,l,c,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,d))}const p=o.join(i.delimiter);let m=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),p.length>0?m+p:""}const Tf="4.86.2";let VA=!1,Kp,Z3,Q3,tS,eN,tN,nN,iN,rN;function Y7(n,e={auto:!1}){if(VA)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Kp)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Kp}'\``);VA=e.auto,Kp=n.kind,Z3=n.fetch,Q3=n.FormData,tS=n.File,eN=n.ReadableStream,tN=n.getMultipartRequestOptions,nN=n.getDefaultAgent,iN=n.fileFromPath,rN=n.isFsReadStream}class K7{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function J7({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,i,r,s;try{t=fetch,i=Request,r=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:i,Response:r,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,l)=>({...l,body:new K7(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}Kp||Y7(J7(),{auto:!0});class Qt extends Error{}class Qi extends Qt{constructor(e,t,i,r){super(`${Qi.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"],this.error=t;const s=t;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Lv({message:i,cause:iS(t)});const s=t==null?void 0:t.error;return e===400?new sN(e,s,i,r):e===401?new oN(e,s,i,r):e===403?new aN(e,s,i,r):e===404?new lN(e,s,i,r):e===409?new uN(e,s,i,r):e===422?new cN(e,s,i,r):e===429?new hN(e,s,i,r):e>=500?new fN(e,s,i,r):new Qi(e,s,i,r)}}class _o extends Qi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Lv extends Qi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class j1 extends Lv{constructor({message:e}={}){super({message:e??"Request timed out."})}}class sN extends Qi{}class oN extends Qi{}class aN extends Qi{}class lN extends Qi{}class uN extends Qi{}class cN extends Qi{}class hN extends Qi{}class fN extends Qi{}class dN extends Qt{constructor(){super("Could not parse response content as the length limit was reached")}}class pN extends Qt{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var ny=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},gc=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ps;class Iv{constructor(){ps.set(this,void 0),this.buffer=new Uint8Array,ny(this,ps,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let i=new Uint8Array(this.buffer.length+t.length);i.set(this.buffer),i.set(t,this.buffer.length),this.buffer=i;const r=[];let s;for(;(s=Z7(this.buffer,gc(this,ps,"f")))!=null;){if(s.carriage&&gc(this,ps,"f")==null){ny(this,ps,s.index,"f");continue}if(gc(this,ps,"f")!=null&&(s.index!==gc(this,ps,"f")+1||s.carriage)){r.push(this.decodeText(this.buffer.slice(0,gc(this,ps,"f")-1))),this.buffer=this.buffer.slice(gc(this,ps,"f")),ny(this,ps,null,"f");continue}const o=gc(this,ps,"f")!==null?s.preceding-1:s.preceding,l=this.decodeText(this.buffer.slice(0,o));r.push(l),this.buffer=this.buffer.slice(s.index),ny(this,ps,null,"f")}return r}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Qt(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Qt(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Qt("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}ps=new WeakMap;Iv.NEWLINE_CHARS=new Set([`
`,"\r"]);Iv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Z7(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Q7(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}function mN(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Zo{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let i=!1;async function*r(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let s=!1;try{for await(const o of eX(e,t))if(!s){if(o.data.startsWith("[DONE]")){s=!0;continue}if(o.event===null){let l;try{l=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(l&&l.error)throw new Qi(void 0,l.error,void 0,void 0);yield l}else{let l;try{l=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(o.event=="error")throw new Qi(void 0,l.error,l.message,void 0);yield{event:o.event,data:l}}}s=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{s||t.abort()}}return new Zo(r,t)}static fromReadableStream(e,t){let i=!1;async function*r(){const o=new Iv,l=mN(e);for await(const c of l)for(const d of o.decode(c))yield d;for(const c of o.flush())yield c}async function*s(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of r())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||t.abort()}}return new Zo(s,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const o=i.next();e.push(o),t.push(o)}return s.shift()}});return[new Zo(()=>r(e),this.controller),new Zo(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const i=new TextEncoder;return new eN({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:o}=await t.next();if(o)return r.close();const l=i.encode(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*eX(n,e){if(!n.body)throw e.abort(),new Qt("Attempted to iterate over a response with no body");const t=new nX,i=new Iv,r=mN(n.body);for await(const s of tX(r))for(const o of i.decode(s)){const l=t.decode(o);l&&(yield l)}for(const s of i.flush()){const o=t.decode(s);o&&(yield o)}}async function*tX(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const i=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let s;for(;(s=Q7(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class nX{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=iX(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function iX(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const gN=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",yN=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Dv(n),Dv=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",rX=n=>yN(n)||gN(n)||rN(n);async function vN(n,e,t){var r;if(n=await n,yN(n))return n;if(gN(n)){const s=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Dv(s)?[await s.arrayBuffer()]:[s];return new tS(o,e,t)}const i=await sX(n);if(e||(e=aX(n)??"unknown_file"),!(t!=null&&t.type)){const s=(r=i[0])==null?void 0:r.type;typeof s=="string"&&(t={...t,type:s})}return new tS(i,e,t)}async function sX(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(Dv(n))e.push(await n.arrayBuffer());else if(lX(n))for await(const i of n)e.push(i);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${oX(n)}`);return e}function oX(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function aX(n){var e;return R_(n.name)||R_(n.filename)||((e=R_(n.path))==null?void 0:e.split(/[\\/]/).pop())}const R_=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},lX=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",HA=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",id=async n=>{const e=await uX(n.body);return tN(e,n)},uX=async n=>{const e=new Q3;return await Promise.all(Object.entries(n||{}).map(([t,i])=>nS(e,t,i))),e},nS=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(rX(t)){const i=await vN(t);n.append(e,i)}else if(Array.isArray(t))await Promise.all(t.map(i=>nS(n,e+"[]",i)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([i,r])=>nS(n,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Wf={},cX=function(n,e,t,i,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},hX=function(n,e,t,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},iy;async function xN(n){const{response:e}=n;if(n.options.stream)return Gf("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):Zo.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const s=await e.json();return Gf("response",e.status,e.url,e.headers,s),_N(s,e)}const r=await e.text();return Gf("response",e.status,e.url,e.headers,r),r}function _N(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class kv extends Promise{constructor(e,t=xN){super(i=>{i(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new kv(this.responsePromise,async t=>_N(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class fX{constructor({baseURL:e,maxRetries:t=2,timeout:i=6e5,httpAgent:r,fetch:s}){this.baseURL=e,this.maxRetries=N_("maxRetries",t),this.timeout=N_("timeout",i),this.httpAgent=r,this.fetch=s??Z3}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...vX(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${SX()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(async r=>{const s=r&&Dv(r==null?void 0:r.body)?new DataView(await r.body.arrayBuffer()):(r==null?void 0:r.body)instanceof DataView?r.body:(r==null?void 0:r.body)instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r==null?void 0:r.body)?new DataView(r.body.buffer):r==null?void 0:r.body;return{method:e,path:t,...r,body:s}}))}getAPIList(e,t,i){return this.requestAPIList(t,{method:"get",path:e,...i})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var S;e={...e};const{method:i,path:r,query:s,headers:o={}}=e,l=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:HA(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,c=this.calculateContentLength(l),d=this.buildURL(r,s);"timeout"in e&&N_("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const p=e.httpAgent??this.httpAgent??nN(d),m=e.timeout+1e3;typeof((S=p==null?void 0:p.options)==null?void 0:S.timeout)=="number"&&m>(p.options.timeout??0)&&(p.options.timeout=m),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const y=this.buildHeaders({options:e,headers:o,contentLength:c,retryCount:t});return{req:{method:i,...l&&{body:l},headers:y,...p&&{agent:p},signal:e.signal??null},url:d,timeout:e.timeout}}buildHeaders({options:e,headers:t,contentLength:i,retryCount:r}){const s={};i&&(s["content-length"]=i);const o=this.defaultHeaders(e);return XA(s,o),XA(s,t),HA(e.body)&&Kp!=="node"&&delete s["content-type"],sy(o,"x-stainless-retry-count")===void 0&&sy(t,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(r)),sy(o,"x-stainless-timeout")===void 0&&sy(t,"x-stainless-timeout")===void 0&&e.timeout&&(s["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(s,t),s}async prepareOptions(e){}async prepareRequest(e,{url:t,options:i}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,i,r){return Qi.generate(e,t,i,r)}request(e,t=null){return new kv(this.makeRequest(e,t))}async makeRequest(e,t){var m,y;const i=await e,r=i.maxRetries??this.maxRetries;t==null&&(t=r),await this.prepareOptions(i);const{req:s,url:o,timeout:l}=this.buildRequest(i,{retryCount:r-t});if(await this.prepareRequest(s,{url:o,options:i}),Gf("request",o,i,s.headers),(m=i.signal)!=null&&m.aborted)throw new _o;const c=new AbortController,d=await this.fetchWithTimeout(o,s,l,c).catch(iS);if(d instanceof Error){if((y=i.signal)!=null&&y.aborted)throw new _o;if(t)return this.retryRequest(i,t);throw d.name==="AbortError"?new j1:new Lv({cause:d})}const p=pX(d.headers);if(!d.ok){if(t&&this.shouldRetry(d)){const C=`retrying, ${t} attempts remaining`;return Gf(`response (error; ${C})`,d.status,o,p),this.retryRequest(i,t,p)}const v=await d.text().catch(C=>iS(C).message),S=xX(v),E=S?void 0:v;throw Gf(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,d.status,o,p,E),this.makeStatusError(d.status,S,E,p)}return{response:d,options:i,controller:c}}requestAPIList(e,t){const i=this.makeRequest(t,null);return new dX(this,i,e)}buildURL(e,t){const i=wX(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return SN(r)||(t={...r,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Qt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,i,r){const{signal:s,...o}=t||{};s&&s.addEventListener("abort",()=>r.abort());const l=setTimeout(()=>r.abort(),i),c={signal:r.signal,...o};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(l)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i){let r;const s=i==null?void 0:i["retry-after-ms"];if(s){const l=parseFloat(s);Number.isNaN(l)||(r=l)}const o=i==null?void 0:i["retry-after"];if(o&&!r){const l=parseFloat(o);Number.isNaN(l)?r=Date.parse(o)-Date.now():r=l*1e3}if(!(r&&0<=r&&r<60*1e3)){const l=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,l)}return await sg(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const s=t-e,o=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return o*l*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Tf}`}}class wN{constructor(e,t,i,r){iy.set(this,void 0),cX(this,iy,e),this.options=r,this.response=t,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Qt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const i=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[r,s]of i)e.url.searchParams.set(r,s);t.query=void 0,t.path=e.url.toString()}return await hX(this,iy,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(iy=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class dX extends kv{constructor(e,t,i){super(t,async r=>new i(e,r.response,await xN(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const pX=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const i=t.toString();return e[i.toLowerCase()]||e[i]}}),mX={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},pr=n=>typeof n=="object"&&n!==null&&!SN(n)&&Object.keys(n).every(e=>MN(mX,e)),gX=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tf,"X-Stainless-OS":GA(Deno.build.os),"X-Stainless-Arch":WA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tf,"X-Stainless-OS":GA(process.platform),"X-Stainless-Arch":WA(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=yX();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yX(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,o=i[3]||0;return{browser:e,version:`${r}.${s}.${o}`}}}return null}const WA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",GA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let jA;const vX=()=>jA??(jA=gX()),xX=n=>{try{return JSON.parse(n)}catch{return}},_X=/^[a-z][a-z0-9+.-]*:/i,wX=n=>_X.test(n),sg=n=>new Promise(e=>setTimeout(e,n)),N_=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Qt(`${n} must be an integer`);if(e<0)throw new Qt(`${n} must be a positive integer`);return e},iS=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},ry=n=>{var e,t,i,r;if(typeof process<"u")return((e=Wf==null?void 0:Wf[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(i=(t=Deno.env)==null?void 0:t.get)==null?void 0:i.call(t,n))==null?void 0:r.trim()};function SN(n){if(!n)return!0;for(const e in n)return!1;return!0}function MN(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function XA(n,e){for(const t in e){if(!MN(e,t))continue;const i=t.toLowerCase();if(!i)continue;const r=e[t];r===null?delete n[i]:r!==void 0&&(n[i]=r)}}const $A=new Set(["authorization","api-key"]);function Gf(n,...e){if(typeof process<"u"&&(Wf==null?void 0:Wf.DEBUG)==="true"){const t=e.map(i=>{if(!i)return i;if(i.headers){const s={...i,headers:{...i.headers}};for(const o in i.headers)$A.has(o.toLowerCase())&&(s.headers[o]="REDACTED");return s}let r=null;for(const s in i)$A.has(s.toLowerCase())&&(r??(r={...i}),r[s]="REDACTED");return r??i});console.log(`OpenAI:DEBUG:${n}`,...t)}}const SX=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),MX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",EX=n=>typeof(n==null?void 0:n.get)=="function",sy=(n,e)=>{var i;const t=e.toLowerCase();if(EX(n)){const r=((i=e[0])==null?void 0:i.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(s,o,l)=>o+l.toUpperCase());for(const s of[e,t,e.toUpperCase(),r]){const o=n.get(s);if(o)return o}}for(const[r,s]of Object.entries(n))if(r.toLowerCase()===t)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${e} header, using the first entry.`),s[0]):s};function L_(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class bX extends wN{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ss extends wN{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var i;const e=this.getPaginatedItems();if(!e.length)return null;const t=(i=e[e.length-1])==null?void 0:i.id;return t?{params:{after:t}}:null}}class mn{constructor(e){this._client=e}}let EN=class extends mn{list(e,t={},i){return pr(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,TX,{query:t,...i})}},Uv=class extends mn{constructor(){super(...arguments),this.messages=new EN(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,i){return this._client.post(`/chat/completions/${e}`,{body:t,...i})}list(e={},t){return pr(e)?this.list({},e):this._client.getAPIList("/chat/completions",Ov,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class Ov extends Ss{}class TX extends Ss{}Uv.ChatCompletionsPage=Ov;Uv.Messages=EN;let Fv=class extends mn{constructor(){super(...arguments),this.completions=new Uv(this._client)}};Fv.Completions=Uv;Fv.ChatCompletionsPage=Ov;class bN extends mn{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class TN extends mn{create(e,t){return this._client.post("/audio/transcriptions",id({body:e,...t,__metadata:{model:e.model}}))}}class AN extends mn{create(e,t){return this._client.post("/audio/translations",id({body:e,...t,__metadata:{model:e.model}}))}}class og extends mn{constructor(){super(...arguments),this.transcriptions=new TN(this._client),this.translations=new AN(this._client),this.speech=new bN(this._client)}}og.Transcriptions=TN;og.Translations=AN;og.Speech=bN;class X1 extends mn{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return pr(e)?this.list({},e):this._client.getAPIList("/batches",$1,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class $1 extends Ss{}X1.BatchesPage=$1;class q1 extends mn{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,i){return this._client.post(`/assistants/${e}`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e={},t){return pr(e)?this.list({},e):this._client.getAPIList("/assistants",Y1,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Y1 extends Ss{}q1.AssistantsPage=Y1;function qA(n){return typeof n.parse=="function"}const jf=n=>(n==null?void 0:n.role)==="assistant",CN=n=>(n==null?void 0:n.role)==="function",PN=n=>(n==null?void 0:n.role)==="tool";var mo=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Gn=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},rS,Ey,by,Dp,kp,Ty,Up,Ya,Op,Zy,Qy,Af,RN;class NN{constructor(){rS.add(this),this.controller=new AbortController,Ey.set(this,void 0),by.set(this,()=>{}),Dp.set(this,()=>{}),kp.set(this,void 0),Ty.set(this,()=>{}),Up.set(this,()=>{}),Ya.set(this,{}),Op.set(this,!1),Zy.set(this,!1),Qy.set(this,!1),Af.set(this,!1),mo(this,Ey,new Promise((e,t)=>{mo(this,by,e,"f"),mo(this,Dp,t,"f")}),"f"),mo(this,kp,new Promise((e,t)=>{mo(this,Ty,e,"f"),mo(this,Up,t,"f")}),"f"),Gn(this,Ey,"f").catch(()=>{}),Gn(this,kp,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Gn(this,rS,"m",RN).bind(this))},0)}_connected(){this.ended||(Gn(this,by,"f").call(this),this._emit("connect"))}get ended(){return Gn(this,Op,"f")}get errored(){return Gn(this,Zy,"f")}get aborted(){return Gn(this,Qy,"f")}abort(){this.controller.abort()}on(e,t){return(Gn(this,Ya,"f")[e]||(Gn(this,Ya,"f")[e]=[])).push({listener:t}),this}off(e,t){const i=Gn(this,Ya,"f")[e];if(!i)return this;const r=i.findIndex(s=>s.listener===t);return r>=0&&i.splice(r,1),this}once(e,t){return(Gn(this,Ya,"f")[e]||(Gn(this,Ya,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,i)=>{mo(this,Af,!0,"f"),e!=="error"&&this.once("error",i),this.once(e,t)})}async done(){mo(this,Af,!0,"f"),await Gn(this,kp,"f")}_emit(e,...t){if(Gn(this,Op,"f"))return;e==="end"&&(mo(this,Op,!0,"f"),Gn(this,Ty,"f").call(this));const i=Gn(this,Ya,"f")[e];if(i&&(Gn(this,Ya,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!Gn(this,Af,"f")&&!(i!=null&&i.length)&&Promise.reject(r),Gn(this,Dp,"f").call(this,r),Gn(this,Up,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!Gn(this,Af,"f")&&!(i!=null&&i.length)&&Promise.reject(r),Gn(this,Dp,"f").call(this,r),Gn(this,Up,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Ey=new WeakMap,by=new WeakMap,Dp=new WeakMap,kp=new WeakMap,Ty=new WeakMap,Up=new WeakMap,Ya=new WeakMap,Op=new WeakMap,Zy=new WeakMap,Qy=new WeakMap,Af=new WeakMap,rS=new WeakSet,RN=function(e){if(mo(this,Zy,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new _o),e instanceof _o)return mo(this,Qy,!0,"f"),this._emit("abort",e);if(e instanceof Qt)return this._emit("error",e);if(e instanceof Error){const t=new Qt(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Qt(String(e)))};function LN(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function ag(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function AX(n,e){return!e||!IN(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:K1(n,e)}function K1(n,e){const t=n.choices.map(i=>{var r;if(i.finish_reason==="length")throw new dN;if(i.finish_reason==="content_filter")throw new pN;return{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:((r=i.message.tool_calls)==null?void 0:r.map(s=>PX(e,s)))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?CX(e,i.message.content):null}}});return{...n,choices:t}}function CX(n,e){var t,i;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((i=n.response_format)==null?void 0:i.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function PX(n,e){var i;const t=(i=n.tools)==null?void 0:i.find(r=>{var s;return((s=r.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ag(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function RX(n,e){var i;if(!n)return!1;const t=(i=n.tools)==null?void 0:i.find(r=>{var s;return((s=r.function)==null?void 0:s.name)===e.function.name});return ag(t)||(t==null?void 0:t.function.strict)||!1}function IN(n){var e;return LN(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>ag(t)||t.type==="function"&&t.function.strict===!0))??!1}function NX(n){for(const e of n??[]){if(e.type!=="function")throw new Qt(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Qt(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var $r=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},cr,sS,ev,oS,aS,lS,DN,uS;const YA=10;class kN extends NN{constructor(){super(...arguments),cr.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var i;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(i=e.choices[0])==null?void 0:i.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(CN(e)||PN(e))&&e.content)this._emit("functionCallResult",e.content);else if(jf(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(jf(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Qt("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),$r(this,cr,"m",sS).call(this)}async finalMessage(){return await this.done(),$r(this,cr,"m",ev).call(this)}async finalFunctionCall(){return await this.done(),$r(this,cr,"m",oS).call(this)}async finalFunctionCallResult(){return await this.done(),$r(this,cr,"m",aS).call(this)}async totalUsage(){return await this.done(),$r(this,cr,"m",lS).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=$r(this,cr,"m",ev).call(this);t&&this._emit("finalMessage",t);const i=$r(this,cr,"m",sS).call(this);i&&this._emit("finalContent",i);const r=$r(this,cr,"m",oS).call(this);r&&this._emit("finalFunctionCall",r);const s=$r(this,cr,"m",aS).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",$r(this,cr,"m",lS).call(this))}async _createChatCompletion(e,t,i){const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),$r(this,cr,"m",DN).call(this,t);const s=await e.chat.completions.create({...t,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(K1(s,t))}async _runChatCompletion(e,t,i){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,i)}async _runFunctions(e,t,i){var y;const r="function",{function_call:s="auto",stream:o,...l}=t,c=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:d=YA}=i||{},p={};for(const v of t.functions)p[v.name||v.function.name]=v;const m=t.functions.map(v=>({name:v.name||v.function.name,parameters:v.parameters,description:v.description}));for(const v of t.messages)this._addMessage(v,!1);for(let v=0;v<d;++v){const E=(y=(await this._createChatCompletion(e,{...l,function_call:s,functions:m,messages:[...this.messages]},i)).choices[0])==null?void 0:y.message;if(!E)throw new Qt("missing message in ChatCompletion response");if(!E.function_call)return;const{name:M,arguments:x}=E.function_call,C=p[M];if(C){if(c&&c!==M){const k=`Invalid function_call: ${JSON.stringify(M)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:r,name:M,content:k});continue}}else{const k=`Invalid function_call: ${JSON.stringify(M)}. Available options are: ${m.map(B=>JSON.stringify(B.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:M,content:k});continue}let T;try{T=qA(C)?await C.parse(x):x}catch(k){this._addMessage({role:r,name:M,content:k instanceof Error?k.message:String(k)});continue}const P=await C.function(T,this),I=$r(this,cr,"m",uS).call(this,P);if(this._addMessage({role:r,name:M,content:I}),c)return}}async _runTools(e,t,i){var v,S,E;const r="tool",{tool_choice:s="auto",stream:o,...l}=t,c=typeof s!="string"&&((v=s==null?void 0:s.function)==null?void 0:v.name),{maxChatCompletions:d=YA}=i||{},p=t.tools.map(M=>{if(ag(M)){if(!M.$callback)throw new Qt("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:M.$callback,name:M.function.name,description:M.function.description||"",parameters:M.function.parameters,parse:M.$parseRaw,strict:!0}}}return M}),m={};for(const M of p)M.type==="function"&&(m[M.function.name||M.function.function.name]=M.function);const y="tools"in t?p.map(M=>M.type==="function"?{type:"function",function:{name:M.function.name||M.function.function.name,parameters:M.function.parameters,description:M.function.description,strict:M.function.strict}}:M):void 0;for(const M of t.messages)this._addMessage(M,!1);for(let M=0;M<d;++M){const C=(S=(await this._createChatCompletion(e,{...l,tool_choice:s,tools:y,messages:[...this.messages]},i)).choices[0])==null?void 0:S.message;if(!C)throw new Qt("missing message in ChatCompletion response");if(!((E=C.tool_calls)!=null&&E.length))return;for(const T of C.tool_calls){if(T.type!=="function")continue;const P=T.id,{name:I,arguments:k}=T.function,B=m[I];if(B){if(c&&c!==I){const K=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:r,tool_call_id:P,content:K});continue}}else{const K=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(m).map(ae=>JSON.stringify(ae)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:P,content:K});continue}let z;try{z=qA(B)?await B.parse(k):k}catch(K){const ae=K instanceof Error?K.message:String(K);this._addMessage({role:r,tool_call_id:P,content:ae});continue}const U=await B.function(z,this),F=$r(this,cr,"m",uS).call(this,U);if(this._addMessage({role:r,tool_call_id:P,content:F}),c)return}}}}cr=new WeakSet,sS=function(){return $r(this,cr,"m",ev).call(this).content??null},ev=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(jf(t)){const{function_call:i,...r}=t,s={...r,content:t.content??null,refusal:t.refusal??null};return i&&(s.function_call=i),s}}throw new Qt("stream ended without producing a ChatCompletionMessage with role=assistant")},oS=function(){var e,t;for(let i=this.messages.length-1;i>=0;i--){const r=this.messages[i];if(jf(r)&&(r!=null&&r.function_call))return r.function_call;if(jf(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},aS=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(CN(t)&&t.content!=null||PN(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(i=>{var r;return i.role==="assistant"&&((r=i.tool_calls)==null?void 0:r.some(s=>s.type==="function"&&s.id===t.tool_call_id))}))return t.content}},lS=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},DN=function(e){if(e.n!=null&&e.n>1)throw new Qt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},uS=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Am extends kN{static runFunctions(e,t,i){const r=new Am,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,i){const r=new Am,s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}_addMessage(e,t=!0){super._addMessage(e,t),jf(e)&&e.content&&this._emit("content",e.content)}}const UN=1,ON=2,FN=4,BN=8,zN=16,VN=32,HN=64,WN=128,GN=256,jN=WN|GN,XN=zN|VN|jN|HN,$N=UN|ON|XN,qN=FN|BN,LX=$N|qN,Bi={STR:UN,NUM:ON,ARR:FN,OBJ:BN,NULL:zN,BOOL:VN,NAN:HN,INFINITY:WN,MINUS_INFINITY:GN,INF:jN,SPECIAL:XN,ATOM:$N,COLLECTION:qN,ALL:LX};class IX extends Error{}class DX extends Error{}function kX(n,e=Bi.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return UX(n.trim(),e)}const UX=(n,e)=>{const t=n.length;let i=0;const r=y=>{throw new IX(`${y} at position ${i}`)},s=y=>{throw new DX(`${y} at position ${i}`)},o=()=>(m(),i>=t&&r("Unexpected end of input"),n[i]==='"'?l():n[i]==="{"?c():n[i]==="["?d():n.substring(i,i+4)==="null"||Bi.NULL&e&&t-i<4&&"null".startsWith(n.substring(i))?(i+=4,null):n.substring(i,i+4)==="true"||Bi.BOOL&e&&t-i<4&&"true".startsWith(n.substring(i))?(i+=4,!0):n.substring(i,i+5)==="false"||Bi.BOOL&e&&t-i<5&&"false".startsWith(n.substring(i))?(i+=5,!1):n.substring(i,i+8)==="Infinity"||Bi.INFINITY&e&&t-i<8&&"Infinity".startsWith(n.substring(i))?(i+=8,1/0):n.substring(i,i+9)==="-Infinity"||Bi.MINUS_INFINITY&e&&1<t-i&&t-i<9&&"-Infinity".startsWith(n.substring(i))?(i+=9,-1/0):n.substring(i,i+3)==="NaN"||Bi.NAN&e&&t-i<3&&"NaN".startsWith(n.substring(i))?(i+=3,NaN):p()),l=()=>{const y=i;let v=!1;for(i++;i<t&&(n[i]!=='"'||v&&n[i-1]==="\\");)v=n[i]==="\\"?!v:!1,i++;if(n.charAt(i)=='"')try{return JSON.parse(n.substring(y,++i-Number(v)))}catch(S){s(String(S))}else if(Bi.STR&e)try{return JSON.parse(n.substring(y,i-Number(v))+'"')}catch{return JSON.parse(n.substring(y,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},c=()=>{i++,m();const y={};try{for(;n[i]!=="}";){if(m(),i>=t&&Bi.OBJ&e)return y;const v=l();m(),i++;try{const S=o();Object.defineProperty(y,v,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(Bi.OBJ&e)return y;throw S}m(),n[i]===","&&i++}}catch{if(Bi.OBJ&e)return y;r("Expected '}' at end of object")}return i++,y},d=()=>{i++;const y=[];try{for(;n[i]!=="]";)y.push(o()),m(),n[i]===","&&i++}catch{if(Bi.ARR&e)return y;r("Expected ']' at end of array")}return i++,y},p=()=>{if(i===0){n==="-"&&Bi.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(v){if(Bi.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}s(String(v))}}const y=i;for(n[i]==="-"&&i++;n[i]&&!",]}".includes(n[i]);)i++;i==t&&!(Bi.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(y,i))}catch{n.substring(y,i)==="-"&&Bi.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(y,n.lastIndexOf("e")))}catch(S){s(String(S))}}},m=()=>{for(;i<t&&` 
\r	`.includes(n[i]);)i++};return o()},KA=n=>kX(n,Bi.ALL^Bi.NUM);var Sf=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},An=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ai,qa,Mf,Yl,I_,oy,D_,k_,U_,ay,O_,JA;class Cm extends kN{constructor(e){super(),Ai.add(this),qa.set(this,void 0),Mf.set(this,void 0),Yl.set(this,void 0),Sf(this,qa,e,"f"),Sf(this,Mf,[],"f")}get currentChatCompletionSnapshot(){return An(this,Yl,"f")}static fromReadableStream(e){const t=new Cm(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,i){const r=new Cm(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,i){var o;super._createChatCompletion;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),An(this,Ai,"m",I_).call(this);const s=await e.chat.completions.create({...t,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const l of s)An(this,Ai,"m",D_).call(this,l);if((o=s.controller.signal)!=null&&o.aborted)throw new _o;return this._addChatCompletion(An(this,Ai,"m",ay).call(this))}async _fromReadableStream(e,t){var o;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),An(this,Ai,"m",I_).call(this),this._connected();const r=Zo.fromReadableStream(e,this.controller);let s;for await(const l of r)s&&s!==l.id&&this._addChatCompletion(An(this,Ai,"m",ay).call(this)),An(this,Ai,"m",D_).call(this,l),s=l.id;if((o=r.controller.signal)!=null&&o.aborted)throw new _o;return this._addChatCompletion(An(this,Ai,"m",ay).call(this))}[(qa=new WeakMap,Mf=new WeakMap,Yl=new WeakMap,Ai=new WeakSet,I_=function(){this.ended||Sf(this,Yl,void 0,"f")},oy=function(t){let i=An(this,Mf,"f")[t.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},An(this,Mf,"f")[t.index]=i,i)},D_=function(t){var r,s,o,l,c,d,p,m,y,v,S,E,M,x,C;if(this.ended)return;const i=An(this,Ai,"m",JA).call(this,t);this._emit("chunk",t,i);for(const T of t.choices){const P=i.choices[T.index];T.delta.content!=null&&((r=P.message)==null?void 0:r.role)==="assistant"&&((s=P.message)!=null&&s.content)&&(this._emit("content",T.delta.content,P.message.content),this._emit("content.delta",{delta:T.delta.content,snapshot:P.message.content,parsed:P.message.parsed})),T.delta.refusal!=null&&((o=P.message)==null?void 0:o.role)==="assistant"&&((l=P.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:T.delta.refusal,snapshot:P.message.refusal}),((c=T.logprobs)==null?void 0:c.content)!=null&&((d=P.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(p=T.logprobs)==null?void 0:p.content,snapshot:((m=P.logprobs)==null?void 0:m.content)??[]}),((y=T.logprobs)==null?void 0:y.refusal)!=null&&((v=P.message)==null?void 0:v.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(S=T.logprobs)==null?void 0:S.refusal,snapshot:((E=P.logprobs)==null?void 0:E.refusal)??[]});const I=An(this,Ai,"m",oy).call(this,P);P.finish_reason&&(An(this,Ai,"m",U_).call(this,P),I.current_tool_call_index!=null&&An(this,Ai,"m",k_).call(this,P,I.current_tool_call_index));for(const k of T.delta.tool_calls??[])I.current_tool_call_index!==k.index&&(An(this,Ai,"m",U_).call(this,P),I.current_tool_call_index!=null&&An(this,Ai,"m",k_).call(this,P,I.current_tool_call_index)),I.current_tool_call_index=k.index;for(const k of T.delta.tool_calls??[]){const B=(M=P.message.tool_calls)==null?void 0:M[k.index];B!=null&&B.type&&((B==null?void 0:B.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(x=B.function)==null?void 0:x.name,index:k.index,arguments:B.function.arguments,parsed_arguments:B.function.parsed_arguments,arguments_delta:((C=k.function)==null?void 0:C.arguments)??""}):(B==null||B.type,void 0))}}},k_=function(t,i){var o,l,c;if(An(this,Ai,"m",oy).call(this,t).done_tool_calls.has(i))return;const s=(o=t.message.tool_calls)==null?void 0:o[i];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const d=(c=(l=An(this,qa,"f"))==null?void 0:l.tools)==null?void 0:c.find(p=>p.type==="function"&&p.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:i,arguments:s.function.arguments,parsed_arguments:ag(d)?d.$parseRaw(s.function.arguments):d!=null&&d.function.strict?JSON.parse(s.function.arguments):null})}else s.type},U_=function(t){var r,s;const i=An(this,Ai,"m",oy).call(this,t);if(t.message.content&&!i.content_done){i.content_done=!0;const o=An(this,Ai,"m",O_).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(s=t.logprobs)!=null&&s.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},ay=function(){if(this.ended)throw new Qt("stream has ended, this shouldn't happen");const t=An(this,Yl,"f");if(!t)throw new Qt("request ended without sending any chunks");return Sf(this,Yl,void 0,"f"),Sf(this,Mf,[],"f"),OX(t,An(this,qa,"f"))},O_=function(){var i;const t=(i=An(this,qa,"f"))==null?void 0:i.response_format;return LN(t)?t:null},JA=function(t){var i,r,s,o;let l=An(this,Yl,"f");const{choices:c,...d}=t;l?Object.assign(l,d):l=Sf(this,Yl,{...d,choices:[]},"f");for(const{delta:p,finish_reason:m,index:y,logprobs:v=null,...S}of t.choices){let E=l.choices[y];if(E||(E=l.choices[y]={finish_reason:m,index:y,message:{},logprobs:v,...S}),v)if(!E.logprobs)E.logprobs=Object.assign({},v);else{const{content:k,refusal:B,...z}=v;Object.assign(E.logprobs,z),k&&((i=E.logprobs).content??(i.content=[]),E.logprobs.content.push(...k)),B&&((r=E.logprobs).refusal??(r.refusal=[]),E.logprobs.refusal.push(...B))}if(m&&(E.finish_reason=m,An(this,qa,"f")&&IN(An(this,qa,"f")))){if(m==="length")throw new dN;if(m==="content_filter")throw new pN}if(Object.assign(E,S),!p)continue;const{content:M,refusal:x,function_call:C,role:T,tool_calls:P,...I}=p;if(Object.assign(E.message,I),x&&(E.message.refusal=(E.message.refusal||"")+x),T&&(E.message.role=T),C&&(E.message.function_call?(C.name&&(E.message.function_call.name=C.name),C.arguments&&((s=E.message.function_call).arguments??(s.arguments=""),E.message.function_call.arguments+=C.arguments)):E.message.function_call=C),M&&(E.message.content=(E.message.content||"")+M,!E.message.refusal&&An(this,Ai,"m",O_).call(this)&&(E.message.parsed=KA(E.message.content))),P){E.message.tool_calls||(E.message.tool_calls=[]);for(const{index:k,id:B,type:z,function:U,...F}of P){const K=(o=E.message.tool_calls)[k]??(o[k]={});Object.assign(K,F),B&&(K.id=B),z&&(K.type=z),U&&(K.function??(K.function={name:U.name??"",arguments:""})),U!=null&&U.name&&(K.function.name=U.name),U!=null&&U.arguments&&(K.function.arguments+=U.arguments,RX(An(this,qa,"f"),K)&&(K.function.parsed_arguments=KA(K.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("chunk",r=>{const s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,o)=>t.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Zo(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function OX(n,e){const{id:t,choices:i,created:r,model:s,system_fingerprint:o,...l}=n,c={...l,id:t,choices:i.map(({message:d,finish_reason:p,index:m,logprobs:y,...v})=>{if(!p)throw new Qt(`missing finish_reason for choice ${m}`);const{content:S=null,function_call:E,tool_calls:M,...x}=d,C=d.role;if(!C)throw new Qt(`missing role for choice ${m}`);if(E){const{arguments:T,name:P}=E;if(T==null)throw new Qt(`missing function_call.arguments for choice ${m}`);if(!P)throw new Qt(`missing function_call.name for choice ${m}`);return{...v,message:{content:S,function_call:{arguments:T,name:P},role:C,refusal:d.refusal??null},finish_reason:p,index:m,logprobs:y}}return M?{...v,index:m,finish_reason:p,logprobs:y,message:{...x,role:C,content:S,refusal:d.refusal??null,tool_calls:M.map((T,P)=>{const{function:I,type:k,id:B,...z}=T,{arguments:U,name:F,...K}=I||{};if(B==null)throw new Qt(`missing choices[${m}].tool_calls[${P}].id
${ly(n)}`);if(k==null)throw new Qt(`missing choices[${m}].tool_calls[${P}].type
${ly(n)}`);if(F==null)throw new Qt(`missing choices[${m}].tool_calls[${P}].function.name
${ly(n)}`);if(U==null)throw new Qt(`missing choices[${m}].tool_calls[${P}].function.arguments
${ly(n)}`);return{...z,id:B,type:k,function:{...K,name:F,arguments:U}}})}}:{...v,message:{...x,content:S,role:C,refusal:d.refusal??null},finish_reason:p,index:m,logprobs:y}}),created:r,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return AX(c,e)}function ly(n){return JSON.stringify(n)}class Xf extends Cm{static fromReadableStream(e){const t=new Xf(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,i){const r=new Xf(null),s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,i){const r=new Xf(t),s={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}}let YN=class extends mn{parse(e,t){return NX(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(i=>K1(i,e))}runFunctions(e,t){return e.stream?Xf.runFunctions(this._client,e,t):Am.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Xf.runTools(this._client,e,t):Am.runTools(this._client,e,t)}stream(e,t){return Cm.createChatCompletion(this._client,e,t)}};class cS extends mn{constructor(){super(...arguments),this.completions=new YN(this._client)}}(function(n){n.Completions=YN})(cS||(cS={}));class KN extends mn{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class J1 extends mn{constructor(){super(...arguments),this.sessions=new KN(this._client)}}J1.Sessions=KN;var gt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ds=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ji,hS,Yo,Ay,yo,Pc,Ff,Sc,tv,ms,Cy,Py,Jp,Fp,Bp,ZA,QA,eC,tC,nC,iC,rC;class wo extends NN{constructor(){super(...arguments),Ji.add(this),hS.set(this,[]),Yo.set(this,{}),Ay.set(this,{}),yo.set(this,void 0),Pc.set(this,void 0),Ff.set(this,void 0),Sc.set(this,void 0),tv.set(this,void 0),ms.set(this,void 0),Cy.set(this,void 0),Py.set(this,void 0),Jp.set(this,void 0)}[(hS=new WeakMap,Yo=new WeakMap,Ay=new WeakMap,yo=new WeakMap,Pc=new WeakMap,Ff=new WeakMap,Sc=new WeakMap,tv=new WeakMap,ms=new WeakMap,Cy=new WeakMap,Py=new WeakMap,Jp=new WeakMap,Ji=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const s of t)s.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((s,o)=>t.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new wo;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var s;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Zo.fromReadableStream(e,this.controller);for await(const o of r)gt(this,Ji,"m",Fp).call(this,o);if((s=r.controller.signal)!=null&&s.aborted)throw new _o;return this._addRun(gt(this,Ji,"m",Bp).call(this))}toReadableStream(){return new Zo(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,i,r,s){const o=new wo;return o._run(()=>o._runToolAssistantStream(e,t,i,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,i,r,s){var d;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.submitToolOutputs(t,i,l,{...s,signal:this.controller.signal});this._connected();for await(const p of c)gt(this,Ji,"m",Fp).call(this,p);if((d=c.controller.signal)!=null&&d.aborted)throw new _o;return this._addRun(gt(this,Ji,"m",Bp).call(this))}static createThreadAssistantStream(e,t,i){const r=new wo;return r._run(()=>r._threadAssistantStream(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,i,r){const s=new wo;return s._run(()=>s._runAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return gt(this,Cy,"f")}currentRun(){return gt(this,Py,"f")}currentMessageSnapshot(){return gt(this,yo,"f")}currentRunStepSnapshot(){return gt(this,Jp,"f")}async finalRunSteps(){return await this.done(),Object.values(gt(this,Yo,"f"))}async finalMessages(){return await this.done(),Object.values(gt(this,Ay,"f"))}async finalRun(){if(await this.done(),!gt(this,Pc,"f"))throw Error("Final run was not received.");return gt(this,Pc,"f")}async _createThreadAssistantStream(e,t,i){var l;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const s={...t,stream:!0},o=await e.createAndRun(s,{...i,signal:this.controller.signal});this._connected();for await(const c of o)gt(this,Ji,"m",Fp).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new _o;return this._addRun(gt(this,Ji,"m",Bp).call(this))}async _createAssistantStream(e,t,i,r){var c;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},l=await e.create(t,o,{...r,signal:this.controller.signal});this._connected();for await(const d of l)gt(this,Ji,"m",Fp).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new _o;return this._addRun(gt(this,Ji,"m",Bp).call(this))}static accumulateDelta(e,t){for(const[i,r]of Object.entries(t)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let s=e[i];if(s==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof s=="string"&&typeof r=="string")s+=r;else if(typeof s=="number"&&typeof r=="number")s+=r;else if(L_(s)&&L_(r))s=this.accumulateDelta(s,r);else if(Array.isArray(s)&&Array.isArray(r)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...r);continue}for(const o of r){if(!L_(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const l=o.index;if(l==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const c=s[l];c==null?s.push(o):s[l]=this.accumulateDelta(c,o)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${s}`);e[i]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,t,i){return await this._createThreadAssistantStream(t,e,i)}async _runAssistantStream(e,t,i,r){return await this._createAssistantStream(t,e,i,r)}async _runToolAssistantStream(e,t,i,r,s){return await this._createToolAssistantStream(i,e,t,r,s)}}Fp=function(e){if(!this.ended)switch(ds(this,Cy,e,"f"),gt(this,Ji,"m",eC).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":gt(this,Ji,"m",rC).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":gt(this,Ji,"m",QA).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":gt(this,Ji,"m",ZA).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Bp=function(){if(this.ended)throw new Qt("stream has ended, this shouldn't happen");if(!gt(this,Pc,"f"))throw Error("Final run has not been received");return gt(this,Pc,"f")},ZA=function(e){const[t,i]=gt(this,Ji,"m",nC).call(this,e,gt(this,yo,"f"));ds(this,yo,t,"f"),gt(this,Ay,"f")[t.id]=t;for(const r of i){const s=t.content[r.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let s=r.text,o=t.content[r.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=gt(this,Ff,"f")){if(gt(this,Sc,"f"))switch(gt(this,Sc,"f").type){case"text":this._emit("textDone",gt(this,Sc,"f").text,gt(this,yo,"f"));break;case"image_file":this._emit("imageFileDone",gt(this,Sc,"f").image_file,gt(this,yo,"f"));break}ds(this,Ff,r.index,"f")}ds(this,Sc,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(gt(this,Ff,"f")!==void 0){const r=e.data.content[gt(this,Ff,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,gt(this,yo,"f"));break;case"text":this._emit("textDone",r.text,gt(this,yo,"f"));break}}gt(this,yo,"f")&&this._emit("messageDone",e.data),ds(this,yo,void 0,"f")}},QA=function(e){const t=gt(this,Ji,"m",tC).call(this,e);switch(ds(this,Jp,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const s of i.step_details.tool_calls)s.index==gt(this,tv,"f")?this._emit("toolCallDelta",s,t.step_details.tool_calls[s.index]):(gt(this,ms,"f")&&this._emit("toolCallDone",gt(this,ms,"f")),ds(this,tv,s.index,"f"),ds(this,ms,t.step_details.tool_calls[s.index],"f"),gt(this,ms,"f")&&this._emit("toolCallCreated",gt(this,ms,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ds(this,Jp,void 0,"f"),e.data.step_details.type=="tool_calls"&&gt(this,ms,"f")&&(this._emit("toolCallDone",gt(this,ms,"f")),ds(this,ms,void 0,"f")),this._emit("runStepDone",e.data,t);break}},eC=function(e){gt(this,hS,"f").push(e),this._emit("event",e)},tC=function(e){switch(e.event){case"thread.run.step.created":return gt(this,Yo,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=gt(this,Yo,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=wo.accumulateDelta(t,i.delta);gt(this,Yo,"f")[e.data.id]=r}return gt(this,Yo,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":gt(this,Yo,"f")[e.data.id]=e.data;break}if(gt(this,Yo,"f")[e.data.id])return gt(this,Yo,"f")[e.data.id];throw new Error("No snapshot available")},nC=function(e,t){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const s of r.delta.content)if(s.index in t.content){let o=t.content[s.index];t.content[s.index]=gt(this,Ji,"m",iC).call(this,s,o)}else t.content[s.index]=s,i.push(s);return[t,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},iC=function(e,t){return wo.accumulateDelta(t,e)},rC=function(e){switch(ds(this,Py,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ds(this,Pc,e.data,"f"),gt(this,ms,"f")&&(this._emit("toolCallDone",gt(this,ms,"f")),ds(this,ms,void 0,"f"));break}};class Z1 extends mn{create(e,t,i){return this._client.post(`/threads/${e}/messages`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,t,i){return this._client.get(`/threads/${e}/messages/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(e,t,i,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},i){return pr(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Q1,{query:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,t,i){return this._client.delete(`/threads/${e}/messages/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Q1 extends Ss{}Z1.MessagesPage=Q1;class eM extends mn{retrieve(e,t,i,r={},s){return pr(r)?this.retrieve(e,t,i,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${i}`,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t,i={},r){return pr(i)?this.list(e,t,{},i):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,tM,{query:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class tM extends Ss{}eM.RunStepsPage=tM;class lg extends mn{constructor(){super(...arguments),this.steps=new eM(this._client)}create(e,t,i){const{include:r,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:s,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:t.stream??!1})}retrieve(e,t,i){return this._client.get(`/threads/${e}/runs/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}update(e,t,i,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},i){return pr(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,nM,{query:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(e,t,i){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(e,r.id,i)}createAndStream(e,t,i){return wo.createAssistantStream(e,this._client.beta.threads.runs,t,i)}async poll(e,t,i){const r={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...i,headers:{...i==null?void 0:i.headers,...r}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(i!=null&&i.pollIntervalMs)l=i.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await sg(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,i){return wo.createAssistantStream(e,this._client.beta.threads.runs,t,i)}submitToolOutputs(e,t,i,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:i.stream??!1})}async submitToolOutputsAndPoll(e,t,i,r){const s=await this.submitToolOutputs(e,t,i,r);return await this.poll(e,s.id,r)}submitToolOutputsStream(e,t,i,r){return wo.createToolAssistantStream(e,t,this._client.beta.threads.runs,i,r)}}class nM extends Ss{}lg.RunsPage=nM;lg.Steps=eM;lg.RunStepsPage=tM;class dd extends mn{constructor(){super(...arguments),this.runs=new lg(this._client),this.messages=new Z1(this._client)}create(e={},t){return pr(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,i){return this._client.post(`/threads/${e}`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const i=await this.createAndRun(e,t);return await this.runs.poll(i.thread_id,i.id,t)}createAndRunStream(e,t){return wo.createThreadAssistantStream(e,this._client.beta.threads,t)}}dd.Runs=lg;dd.RunsPage=nM;dd.Messages=Z1;dd.MessagesPage=Q1;const FX=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};let iM=class extends mn{create(e,t,i){return this._client.post(`/vector_stores/${e}/files`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,t,i){return this._client.get(`/vector_stores/${e}/files/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},i){return pr(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Bv,{query:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}del(e,t,i){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(e,r.id,i)}async poll(e,t,i){const r={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const s=await this.retrieve(e,t,{...i,headers:r}).withResponse(),o=s.data;switch(o.status){case"in_progress":let l=5e3;if(i!=null&&i.pollIntervalMs)l=i.pollIntervalMs;else{const c=s.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await sg(l);break;case"failed":case"completed":return o}}}async upload(e,t,i){const r=await this._client.files.create({file:t,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,t,i){const r=await this.upload(e,t,i);return await this.poll(e,r.id,i)}};class Bv extends Ss{}iM.VectorStoreFilesPage=Bv;class JN extends mn{create(e,t,i){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}retrieve(e,t,i){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}cancel(e,t,i){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async createAndPoll(e,t,i){const r=await this.create(e,t);return await this.poll(e,r.id,i)}listFiles(e,t,i={},r){return pr(i)?this.listFiles(e,t,{},i):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Bv,{query:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,t,i){const r={...i==null?void 0:i.headers,"X-Stainless-Poll-Helper":"true"};for(i!=null&&i.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=i.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...i,headers:r}).withResponse();switch(s.status){case"in_progress":let l=5e3;if(i!=null&&i.pollIntervalMs)l=i.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(l=d)}}await sg(l);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:i=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(r==null?void 0:r.maxConcurrency)??5,o=Math.min(s,t.length),l=this._client,c=t.values(),d=[...i];async function p(y){for(let v of y){const S=await l.files.create({file:v,purpose:"assistants"},r);d.push(S.id)}}const m=Array(o).fill(c).map(p);return await FX(m),await this.createAndPoll(e,{file_ids:d})}}class pd extends mn{constructor(){super(...arguments),this.files=new iM(this._client),this.fileBatches=new JN(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,i){return this._client.post(`/vector_stores/${e}`,{body:t,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e={},t){return pr(e)?this.list({},e):this._client.getAPIList("/vector_stores",rM,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class rM extends Ss{}pd.VectorStoresPage=rM;pd.Files=iM;pd.VectorStoreFilesPage=Bv;pd.FileBatches=JN;class vu extends mn{constructor(){super(...arguments),this.realtime=new J1(this._client),this.vectorStores=new pd(this._client),this.chat=new cS(this._client),this.assistants=new q1(this._client),this.threads=new dd(this._client)}}vu.Realtime=J1;vu.VectorStores=pd;vu.VectorStoresPage=rM;vu.Assistants=q1;vu.AssistantsPage=Y1;vu.Threads=dd;class ZN extends mn{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class QN extends mn{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class sM extends mn{create(e,t){return this._client.post("/files",id({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return pr(e)?this.list({},e):this._client.getAPIList("/files",oM,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:i=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await sg(t),o=await this.retrieve(e),Date.now()-s>i)throw new j1({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return o}}class oM extends Ss{}sM.FileObjectsPage=oM;class aM extends mn{list(e,t={},i){return pr(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,lM,{query:t,...i})}}class lM extends Ss{}aM.FineTuningJobCheckpointsPage=lM;class md extends mn{constructor(){super(...arguments),this.checkpoints=new aM(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return pr(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",uM,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},i){return pr(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,cM,{query:t,...i})}}class uM extends Ss{}class cM extends Ss{}md.FineTuningJobsPage=uM;md.FineTuningJobEventsPage=cM;md.Checkpoints=aM;md.FineTuningJobCheckpointsPage=lM;class ug extends mn{constructor(){super(...arguments),this.jobs=new md(this._client)}}ug.Jobs=md;ug.FineTuningJobsPage=uM;ug.FineTuningJobEventsPage=cM;class eL extends mn{createVariation(e,t){return this._client.post("/images/variations",id({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",id({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class hM extends mn{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",fM,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class fM extends bX{}hM.ModelsPage=fM;class tL extends mn{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class nL extends mn{create(e,t,i){return this._client.post(`/uploads/${e}/parts`,id({body:t,...i}))}}class dM extends mn{constructor(){super(...arguments),this.parts=new nL(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,i){return this._client.post(`/uploads/${e}/complete`,{body:t,...i})}}dM.Parts=nL;var iL;class rn extends fX{constructor({baseURL:e=ry("OPENAI_BASE_URL"),apiKey:t=ry("OPENAI_API_KEY"),organization:i=ry("OPENAI_ORG_ID")??null,project:r=ry("OPENAI_PROJECT_ID")??null,...s}={}){if(t===void 0)throw new Qt("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:i,project:r,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&MX())throw new Qt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new ZN(this),this.chat=new Fv(this),this.embeddings=new QN(this),this.files=new sM(this),this.images=new eL(this),this.audio=new og(this),this.moderations=new tL(this),this.models=new hM(this),this.fineTuning=new ug(this),this.beta=new vu(this),this.batches=new X1(this),this.uploads=new dM(this),this._options=o,this.apiKey=t,this.organization=i,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return q7(e,{arrayFormat:"brackets"})}}iL=rn;rn.OpenAI=iL;rn.DEFAULT_TIMEOUT=6e5;rn.OpenAIError=Qt;rn.APIError=Qi;rn.APIConnectionError=Lv;rn.APIConnectionTimeoutError=j1;rn.APIUserAbortError=_o;rn.NotFoundError=lN;rn.ConflictError=uN;rn.RateLimitError=hN;rn.BadRequestError=sN;rn.AuthenticationError=oN;rn.InternalServerError=fN;rn.PermissionDeniedError=aN;rn.UnprocessableEntityError=cN;rn.toFile=vN;rn.fileFromPath=iN;rn.Completions=ZN;rn.Chat=Fv;rn.ChatCompletionsPage=Ov;rn.Embeddings=QN;rn.Files=sM;rn.FileObjectsPage=oM;rn.Images=eL;rn.Audio=og;rn.Moderations=tL;rn.Models=hM;rn.ModelsPage=fM;rn.FineTuning=ug;rn.Beta=vu;rn.Batches=X1;rn.BatchesPage=$1;rn.Uploads=dM;class BX{constructor(){uo(this,"personality");uo(this,"openai");uo(this,"conversationHistory",[]);uo(this,"MAX_HISTORY",10);const e=JSON.parse(B_("VITE_AI_PERSONALITY_CONFIG"));this.personality={...e,currentContext:"initial_greeting",emotionalState:"welcoming"},this.openai=new rn({apiKey:B_("VITE_OPENAI_API_KEY"),dangerouslyAllowBrowser:!0})}async generateResponse(e){var t,i,r;try{const s=this.buildPrompt(e),o=await this.openai.chat.completions.create({model:"gpt-4-turbo-preview",messages:[{role:"system",content:`You are Nova, an empathetic and inspiring AI guide. Your personality: ${this.personality.personality}. 
                     Your current emotional state: ${this.personality.emotionalState}.
                     Current context: ${this.personality.currentContext}`},{role:"user",content:s}],temperature:.8,max_tokens:150}),l=((i=(t=o.choices[0])==null?void 0:t.message)==null?void 0:i.content)||"I apologize, but I need a moment to process that.";return{message:l,suggestedActions:this.generateSuggestedActions(e,l),emotionalContext:this.updateEmotionalState(l),confidence:((r=o.choices[0])==null?void 0:r.finish_reason)==="stop"?.95:.7}}catch(s){return console.error("Error generating Nova response:",s),{message:"I seem to be having trouble processing that. Could you rephrase it?",suggestedActions:["Try again","Explore other options","Contact support"],emotionalContext:"concerned",confidence:.5}}}buildPrompt(e){return`${this.conversationHistory.slice(-this.MAX_HISTORY).join(`
`)}
User: ${e}
Nova:`}generateSuggestedActions(e,t){const i=["Explore opportunities","View your progress","Connect with others"];return e.toLowerCase().includes("skill")||t.toLowerCase().includes("skill")?["Browse skill paths","Find mentors","Join skill groups"]:e.toLowerCase().includes("project")||t.toLowerCase().includes("project")?["Browse projects","Create new project","Find collaborators"]:i}updateEmotionalState(e){return e.includes("sorry")||e.includes("apologize")?(this.personality.emotionalState="empathetic","empathetic"):e.includes("great")||e.includes("excellent")?(this.personality.emotionalState="excited","excited"):this.personality.emotionalState}async interact(e){this.conversationHistory.push(`User: ${e}`);const t=await this.generateResponse(e);return this.conversationHistory.push(`Nova: ${t.message}`),this.conversationHistory.length>this.MAX_HISTORY&&(this.conversationHistory=this.conversationHistory.slice(-this.MAX_HISTORY)),t}getCurrentPersonality(){return{...this.personality}}}const zX=new BX,VX=()=>{const[n,e]=J.useState([]),[t,i]=J.useState({categories:[],minLevel:1,skills:[],remote:!1}),[r,s]=J.useState(!1),[o,l]=J.useState(""),c=[{id:"op1",title:"AI for Climate Action",description:"Help develop machine learning models to analyze climate data and predict environmental changes.",category:"Technology",requiredLevel:3,skills:["Python","Machine Learning","Data Analysis"],tags:["Climate Change","AI/ML","Environmental"],impact:"Help combat climate change through data-driven solutions",organization:{name:"Climate Tech Initiative",logo:"/logos/climate-tech.png"},matchScore:92},{id:"op2",title:"Community Education Platform",description:"Build an accessible education platform for underserved communities.",category:"Education",requiredLevel:2,skills:["React","UI/UX","Education"],tags:["Education","Social Impact","Web Development"],impact:"Provide educational access to 1000+ students",organization:{name:"EduAccess Foundation",logo:"/logos/edu-access.png"},matchScore:88}];J.useEffect(()=>{e(c),d()},[]);const d=async()=>{s(!0);try{const m=await zX.interact("Based on the available opportunities, what insights can you provide about the current needs and impact potential?");l(m.message)}catch(m){console.error("Error getting Nova insights:",m)}s(!1)},p=m=>{i(y=>({...y,...m}))};return L.jsxs("div",{className:"container mx-auto px-4 py-8",children:[L.jsxs("div",{className:"mb-8",children:[L.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Nova's Insights"}),L.jsx(Ct.div,{className:"bg-gray-900/50 backdrop-blur-lg rounded-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:r?L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),L.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),L.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]}):L.jsx("p",{className:"text-gray-300",children:o})})]}),L.jsxs("div",{className:"mb-8",children:[L.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Filters"}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[L.jsxs("div",{className:"space-y-2",children:[L.jsx("label",{className:"text-gray-300",children:"Categories"}),L.jsxs("select",{className:"input w-full",multiple:!0,value:t.categories,onChange:m=>p({categories:Array.from(m.target.selectedOptions,y=>y.value)}),children:[L.jsx("option",{value:"Technology",children:"Technology"}),L.jsx("option",{value:"Education",children:"Education"}),L.jsx("option",{value:"Environment",children:"Environment"}),L.jsx("option",{value:"Social",children:"Social"})]})]}),L.jsxs("div",{className:"space-y-2",children:[L.jsx("label",{className:"text-gray-300",children:"Minimum Level"}),L.jsx("input",{type:"number",className:"input w-full",min:1,max:10,value:t.minLevel,onChange:m=>p({minLevel:parseInt(m.target.value)})})]}),L.jsxs("div",{className:"space-y-2",children:[L.jsx("label",{className:"text-gray-300",children:"Skills"}),L.jsxs("select",{className:"input w-full",multiple:!0,value:t.skills,onChange:m=>p({skills:Array.from(m.target.selectedOptions,y=>y.value)}),children:[L.jsx("option",{value:"Python",children:"Python"}),L.jsx("option",{value:"React",children:"React"}),L.jsx("option",{value:"Machine Learning",children:"Machine Learning"}),L.jsx("option",{value:"UI/UX",children:"UI/UX"})]})]}),L.jsxs("div",{className:"space-y-2",children:[L.jsx("label",{className:"text-gray-300",children:"Remote Only"}),L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("input",{type:"checkbox",className:"form-checkbox",checked:t.remote,onChange:m=>p({remote:m.target.checked})}),L.jsx("span",{className:"text-gray-300",children:"Remote Opportunities"})]})]})]})]}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.jsx(Jm,{children:n.map(m=>L.jsxs(Ct.div,{className:"bg-gray-900/50 backdrop-blur-lg rounded-lg overflow-hidden",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{scale:1.02},transition:{duration:.2},children:[L.jsxs("div",{className:"p-6",children:[L.jsxs("div",{className:"flex items-start justify-between mb-4",children:[L.jsxs("div",{children:[L.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:m.title}),L.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[L.jsx("span",{className:"text-sm text-gray-400",children:m.organization.name}),L.jsx("span",{className:"text-sm text-gray-400",children:"•"}),L.jsxs("span",{className:"text-sm text-gray-400",children:["Level ",m.requiredLevel,"+"]})]})]}),L.jsxs("div",{className:"flex items-center space-x-1",children:[L.jsx("div",{className:"text-2xl font-bold text-primary-500",children:m.matchScore}),L.jsx("div",{className:"text-sm text-gray-400",children:"%"})]})]}),L.jsx("p",{className:"text-gray-300 mb-4",children:m.description}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Required Skills"}),L.jsx("div",{className:"flex flex-wrap gap-2",children:m.skills.map(y=>L.jsx("span",{className:"px-2 py-1 bg-gray-800 text-gray-300 rounded text-sm",children:y},y))})]}),L.jsxs("div",{children:[L.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Impact"}),L.jsx("p",{className:"text-gray-300 text-sm",children:m.impact})]}),L.jsx("div",{className:"flex flex-wrap gap-2",children:m.tags.map(y=>L.jsx("span",{className:"px-2 py-1 bg-primary-500/20 text-primary-300 rounded-full text-sm",children:y},y))})]})]}),L.jsx("div",{className:"px-6 py-4 bg-gray-800/50 flex justify-end",children:L.jsx("button",{className:"btn btn-primary",children:"Learn More"})})]},m.id))})})]})},HX=()=>{const[n,e]=J.useState("overview"),[t,i]=J.useState({level:1,experience:0,nextLevelExperience:100,progress:0}),{progressionSystem:r,level:s,experience:o,nextLevelExperience:l,progress:c}=SW(),{messages:d,isTyping:p}=EW();J.useEffect(()=>{i({level:s,experience:o,nextLevelExperience:l,progress:c})},[s,o,l,c]);const m=()=>{switch(n){case"overview":return L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:[L.jsxs("div",{className:"glass p-6 rounded-xl",children:[L.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Your Progress"}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-between mb-2",children:[L.jsxs("span",{children:["Level ",t.level]}),L.jsxs("span",{children:[t.experience," / ",t.nextLevelExperience," XP"]})]}),L.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:L.jsx(Ct.div,{className:"h-full bg-gradient-to-r from-primary via-secondary to-accent",initial:{width:0},animate:{width:`${t.progress}%`},transition:{duration:1}})})]}),L.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L.jsxs("div",{className:"glass p-4 rounded-lg",children:[L.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Skills"}),L.jsx("p",{className:"text-3xl font-bold text-primary",children:r.getSkills().length})]}),L.jsxs("div",{className:"glass p-4 rounded-lg",children:[L.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Achievements"}),L.jsx("p",{className:"text-3xl font-bold text-secondary",children:r.getAchievements().filter(y=>y.unlocked).length})]})]})]})]}),L.jsxs("div",{className:"glass p-6 rounded-xl",children:[L.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Insights"}),L.jsxs("div",{className:"space-y-4",children:[d.slice(-3).map(y=>L.jsx("div",{className:`p-4 rounded-lg ${y.sender==="nova"?"bg-secondary/20 ml-4":"bg-primary/20 mr-4"}`,children:L.jsx("p",{children:y.content})},y.id)),p&&L.jsx("div",{className:"bg-secondary/20 p-4 rounded-lg ml-4",children:L.jsx("p",{children:"Nova is typing..."})})]})]})]});case"skills":return L.jsx(O7,{});case"achievements":return L.jsx(F7,{});case"opportunities":return L.jsx(VX,{});default:return null}};return L.jsxs("div",{className:"min-h-screen",children:[L.jsx("nav",{className:"glass sticky top-0 z-50 border-b border-white/10",children:L.jsx("div",{className:"container mx-auto px-4",children:L.jsxs("div",{className:"flex items-center justify-between h-16",children:[L.jsxs("div",{className:"flex items-center space-x-8",children:[L.jsx("h1",{className:"text-2xl font-bold",children:"Dots"}),L.jsx("div",{className:"hidden md:flex space-x-4",children:["overview","skills","achievements","opportunities"].map(y=>L.jsx("button",{className:`px-4 py-2 rounded-lg transition-colors ${n===y?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,onClick:()=>e(y),children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]}),L.jsxs("div",{className:"text-sm",children:["Level ",t.level," • ",t.experience," XP"]})]})})}),L.jsx("main",{className:"container mx-auto px-4 py-8",children:L.jsx(Jm,{mode:"wait",children:m()})})]})},WX=()=>{var C;const[n,e]=J.useState(0),[t,i]=J.useState([]),[r,s]=J.useState(""),[o,l]=J.useState(!1),[c,d]=J.useState({email:"",phone:"",city:""}),p=["Tallinn","Tartu","Narva","Pärnu","Kohtla-Järve","Viljandi","Rakvere","Maardu","Sillamäe","Kuressaare","Võru","Valga","Jõhvi","Haapsalu","Keila","Paide","Tapa","Põlva","Türi","Elva"],m=[{id:1,question:"What field are you most passionate about?",description:"Choose the area where you'd like to grow, learn, and connect with others. Your choice helps us match you with relevant opportunities and mentors.",options:["Technology","Design","Business","Science","Arts","Education","Other"],allowCustomInput:!0,inputPlaceholder:"Tell us about your passion..."},{id:2,question:"What is your current experience level?",description:"This helps us understand your current skills and tailor opportunities that will challenge you appropriately.",options:["Just starting out","Some experience","Experienced professional","Expert/Leader"]},{id:3,question:"What kind of opportunities are you looking for?",description:"Select the type of engagement that best fits your current lifestyle and career goals.",options:["Full-time job - Long-term commitment with regular hours","Internship - Structured learning experience with mentorship","Freelance work - Project-based, flexible schedule","Mentorship - Guided professional development","Learning resources - Self-paced growth","Networking - Building connections in your field"]},{id:4,question:"What's your timeline for finding opportunities?",description:"Let us know your urgency level so we can prioritize recommendations accordingly.",options:["As soon as possible","Within 3 months","Within 6 months","Just exploring for now"]},{id:5,question:"What are your top skills you'd like to leverage or develop?",description:"List skills you already have or ones you'd like to develop. This helps us match you with opportunities for growth.",allowCustomInput:!0,inputPlaceholder:"List your skills separated by commas..."},{id:6,question:"We'd like to know a bit more about you",description:"Your contact information helps us connect you with opportunities. This information will only be shared with Inspirators you choose to connect with.",isContactInfo:!0},{id:7,question:"Where are you located?",description:"Select the Estonian city where you're currently based or willing to engage in activities.",isLocation:!0}],y=T=>{i([...t,{questionId:m[n].id,answer:T}]),n<m.length-1?e(n+1):l(!0)},v=()=>{r.trim()&&(y(r),s(""))},S=T=>{const{name:P,value:I}=T.target;d({...c,[P]:I})},E=()=>{c.email&&c.phone&&(i([...t,{questionId:m[n].id,answer:`Email: ${c.email}, Phone: ${c.phone}`}]),n<m.length-1?e(n+1):l(!0))},M=T=>{d({...c,city:T}),i([...t,{questionId:m[n].id,answer:`City: ${T}`}]),n<m.length-1?e(n+1):l(!0)},x=()=>{i([]),e(0),l(!1),d({email:"",phone:"",city:""})};return L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-blue-950 to-indigo-950 text-white flex flex-col",children:[L.jsx(Yc,{}),L.jsx("header",{className:"glass sticky top-0 z-50 border-b border-white/10",children:L.jsx("div",{className:"container mx-auto px-4",children:L.jsxs("div",{className:"flex items-center justify-between h-16",children:[L.jsx(nn,{to:"/",className:"text-2xl font-bold",children:"Dots"}),L.jsxs("nav",{className:"flex space-x-4",children:[L.jsx(nn,{to:"/",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Home"}),L.jsx(nn,{to:"/seekers",className:"px-3 py-2 rounded-lg bg-white/10 text-white",children:"Seekers"}),L.jsx(nn,{to:"/inspirators",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Inspirators"}),L.jsx(nn,{to:"/success-stories",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Success Stories"}),L.jsx(nn,{to:"/communities",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Communities"})]})]})})}),L.jsxs("main",{className:"flex-grow container mx-auto px-4 py-12 flex flex-col items-center justify-center",children:[L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[L.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Seekers' Journey"}),L.jsx("p",{className:"text-xl text-gray-300",children:"Discover your path and connect with opportunities"})]}),L.jsx("div",{className:"w-full max-w-2xl",children:L.jsx(Jm,{mode:"wait",children:o?L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass p-8 rounded-xl shadow-xl",children:[L.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Your Journey Profile"}),L.jsx("div",{className:"space-y-6 mb-8",children:t.map((T,P)=>{const I=m.find(k=>k.id===T.questionId);return L.jsxs("div",{className:"border-b border-white/10 pb-4",children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:I==null?void 0:I.question}),L.jsx("p",{className:"text-xl",children:T.answer})]},P)})}),L.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 p-6 rounded-lg mb-8",children:[L.jsx("h3",{className:"text-xl font-bold mb-3",children:"Recommended Next Steps"}),L.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-300",children:[L.jsx("li",{children:"Complete your detailed profile to get personalized matches"}),L.jsx("li",{children:"Explore opportunities in your field of interest"}),L.jsx("li",{children:"Connect with mentors who can guide your journey"}),L.jsx("li",{children:"Join communities that align with your career goals"})]})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[L.jsxs("div",{className:"glass p-6 rounded-xl border-t-4 border-blue-500",children:[L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Communities"}),L.jsx("p",{className:"text-gray-300 mb-4",children:"Join industry-specific communities to connect with like-minded professionals."}),L.jsx(nn,{to:"/communities",className:"text-blue-400 hover:text-blue-300 font-medium",children:"Explore Communities →"})]}),L.jsxs("div",{className:"glass p-6 rounded-xl border-t-4 border-green-500",children:[L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Success Stories"}),L.jsx("p",{className:"text-gray-300 mb-4",children:"Discover how other Seekers have found opportunities and grown through our platform."}),L.jsx(nn,{to:"/success-stories",className:"text-green-400 hover:text-green-300 font-medium",children:"Read Stories →"})]})]}),L.jsxs("div",{className:"flex flex-wrap gap-4",children:[L.jsx(Ct.button,{className:"px-6 py-3 bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,children:"Start Over"}),L.jsx(Ct.button,{className:"px-6 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Explore Opportunities"}),L.jsx(Ct.button,{className:"px-6 py-3 glass rounded-lg hover:bg-white/10 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Complete Profile"})]})]},"results"):L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass p-8 rounded-xl shadow-xl",children:[L.jsxs("div",{className:"mb-6",children:[L.jsxs("div",{className:"flex justify-between mb-2 text-sm",children:[L.jsx("span",{children:"Progress"}),L.jsxs("span",{children:[n+1," of ",m.length]})]}),L.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:L.jsx(Ct.div,{className:"h-full bg-gradient-to-r from-purple-500 via-blue-500 to-teal-500",initial:{width:`${n/m.length*100}%`},animate:{width:`${(n+1)/m.length*100}%`},transition:{duration:.5}})})]}),L.jsx("h2",{className:"text-2xl font-bold mb-3",children:m[n].question}),m[n].description&&L.jsx("p",{className:"text-gray-300 mb-6",children:m[n].description}),!m[n].isContactInfo&&!m[n].isLocation&&L.jsxs("div",{className:"space-y-3",children:[(C=m[n].options)==null?void 0:C.map((T,P)=>L.jsx(Ct.button,{className:"w-full p-4 text-left rounded-lg glass hover:bg-white/10 transition-colors border border-white/10",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>y(T),children:T},P)),m[n].allowCustomInput&&L.jsx("div",{className:"mt-6",children:L.jsxs("div",{className:"flex",children:[L.jsx("input",{type:"text",value:r,onChange:T=>s(T.target.value),placeholder:m[n].inputPlaceholder||"Type your answer...",className:"flex-grow p-4 bg-gray-800/50 rounded-l-lg border border-white/10 focus:outline-none focus:border-purple-500",onKeyPress:T=>T.key==="Enter"&&v()}),L.jsx("button",{className:"px-4 bg-purple-600 rounded-r-lg hover:bg-purple-700 transition-colors",onClick:v,children:"Submit"})]})})]}),m[n].isContactInfo&&L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address *"}),L.jsx("input",{type:"email",name:"email",value:c.email,onChange:S,placeholder:"your.email@example.com",className:"w-full p-4 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-purple-500",required:!0})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number *"}),L.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:S,placeholder:"+372 XXXXXXXX",className:"w-full p-4 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-purple-500",required:!0})]}),L.jsx("div",{className:"mt-6 flex justify-end",children:L.jsx("button",{className:"px-6 py-3 bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors",onClick:E,disabled:!c.email||!c.phone,children:"Continue"})})]}),m[n].isLocation&&L.jsxs("div",{className:"space-y-4",children:[L.jsx("p",{className:"text-gray-300 mb-4",children:"Choose the Estonian city where you're currently located:"}),L.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:p.map((T,P)=>L.jsx(Ct.button,{className:"p-3 text-center rounded-lg glass hover:bg-white/10 transition-colors border border-white/10",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>M(T),children:T},P))})]})]},"questions")})})]})]})},GX=()=>{const[n,e]=J.useState("filter"),[t,i]=J.useState({skills:[],experience:[],availability:[],passion:[]}),[r,s]=J.useState({title:"",description:"",requirements:"",location:"",type:"Full-time",contactEmail:"",peopleNeeded:"1",startDate:"",endDate:"",projectDescription:""}),[o,l]=J.useState(!1),c={skills:["Programming","Design","Writing","Marketing","Data Analysis","Communication","Leadership"],experience:["Entry-level","Mid-level","Senior","Expert"],availability:["Full-time","Part-time","Project-based","Weekends only"],passion:["Technology","Healthcare","Education","Environment","Arts","Social Impact"]},d=["Full-time","Part-time","Internship","Mentorship","Project-based","Volunteering"],p=["1","2-5","6-10","11-20","20+"],m=(E,M)=>{i(x=>{const C=[...x[E]],T=C.indexOf(M);return T===-1?{...x,[E]:[...C,M]}:(C.splice(T,1),{...x,[E]:C})})},y=E=>{const{name:M,value:x}=E.target;s(C=>({...C,[M]:x}))},v=E=>{E.preventDefault(),l(!0),console.log("Opportunity submitted:",r)},S=()=>{s({title:"",description:"",requirements:"",location:"",type:"Full-time",contactEmail:"",peopleNeeded:"1",startDate:"",endDate:"",projectDescription:""}),l(!1)};return L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-blue-950 to-indigo-950 text-white flex flex-col",children:[L.jsx(Yc,{}),L.jsx("header",{className:"glass sticky top-0 z-50 border-b border-white/10",children:L.jsx("div",{className:"container mx-auto px-4",children:L.jsxs("div",{className:"flex items-center justify-between h-16",children:[L.jsx(nn,{to:"/",className:"text-2xl font-bold",children:"Dots"}),L.jsxs("nav",{className:"flex space-x-4",children:[L.jsx(nn,{to:"/",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Home"}),L.jsx(nn,{to:"/seekers",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Seekers"}),L.jsx(nn,{to:"/inspirators",className:"px-3 py-2 rounded-lg bg-white/10 text-white",children:"Inspirators"}),L.jsx(nn,{to:"/success-stories",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Success Stories"}),L.jsx(nn,{to:"/communities",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Communities"})]})]})})}),L.jsxs("main",{className:"flex-grow container mx-auto px-4 py-12",children:[L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[L.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Inspirators' Journey"}),L.jsx("p",{className:"text-xl text-gray-300",children:"Find passionate individuals and create opportunities"})]}),L.jsx("div",{className:"flex justify-center mb-8",children:L.jsxs("div",{className:"inline-flex p-1 glass rounded-lg",children:[L.jsx("button",{className:`px-6 py-2 rounded-md transition-colors ${n==="filter"?"bg-green-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e("filter"),children:"Find Talent"}),L.jsx("button",{className:`px-6 py-2 rounded-md transition-colors ${n==="post"?"bg-green-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e("post"),children:"Post Opportunity"})]})}),L.jsx(Jm,{mode:"wait",children:n==="filter"?L.jsx(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:L.jsxs("div",{className:"glass p-8 rounded-xl shadow-xl mb-8",children:[L.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Find Your Perfect Match"}),L.jsx("p",{className:"text-gray-300 mb-8",children:"Use these filters to find individuals who match your organization's needs and values."}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(c).map(([E,M])=>L.jsxs("div",{className:"space-y-4",children:[L.jsx("h3",{className:"text-lg font-semibold capitalize",children:E}),L.jsx("div",{className:"space-y-2",children:M.map(x=>L.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[L.jsx("input",{type:"checkbox",className:"form-checkbox rounded text-green-500 bg-gray-800 border-gray-600",checked:t[E].includes(x),onChange:()=>m(E,x)}),L.jsx("span",{children:x})]},x))})]},E))}),L.jsx("div",{className:"mt-8 flex justify-center",children:L.jsx(Ct.button,{className:"px-8 py-3 bg-green-600 rounded-lg hover:bg-green-700 transition-colors text-lg font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Find Matches"})})]})},"filter"):L.jsx(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-3xl mx-auto",children:L.jsx("div",{className:"glass p-8 rounded-xl shadow-xl",children:o?L.jsxs(Ct.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-8",children:[L.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),L.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Opportunity Posted!"}),L.jsx("p",{className:"text-gray-300 mb-8 max-w-md mx-auto",children:"Your opportunity has been successfully posted. We'll notify you when potential matches express interest."}),L.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[L.jsx(Ct.button,{className:"px-6 py-3 bg-green-600 rounded-lg hover:bg-green-700 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,children:"Post Another"}),L.jsx(Ct.button,{className:"px-6 py-3 glass rounded-lg hover:bg-white/10 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("filter"),children:"Find Talent"})]})]}):L.jsxs(L.Fragment,{children:[L.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Post a New Opportunity"}),L.jsx("p",{className:"text-gray-300 mb-8",children:"Share details about your opportunity to attract the right talent."}),L.jsxs("form",{onSubmit:v,className:"space-y-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Opportunity Title"}),L.jsx("input",{type:"text",name:"title",value:r.title,onChange:y,required:!0,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",placeholder:"e.g., UI/UX Design Internship"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),L.jsx("textarea",{name:"description",value:r.description,onChange:y,required:!0,rows:4,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",placeholder:"Describe the opportunity, responsibilities, and what makes it unique..."})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Requirements"}),L.jsx("textarea",{name:"requirements",value:r.requirements,onChange:y,rows:3,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",placeholder:"Skills, experience, or qualities you're looking for..."})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location"}),L.jsx("input",{type:"text",name:"location",value:r.location,onChange:y,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",placeholder:"Remote, City, or Hybrid"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Opportunity Type"}),L.jsx("select",{name:"type",value:r.type,onChange:y,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",children:d.map(E=>L.jsx("option",{value:E,children:E},E))})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Email"}),L.jsx("input",{type:"email",name:"contactEmail",value:r.contactEmail,onChange:y,required:!0,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",placeholder:"Where applicants can reach you"})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Number of People Needed"}),L.jsx("select",{name:"peopleNeeded",value:r.peopleNeeded,onChange:y,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",children:p.map((E,M)=>L.jsx("option",{value:E,children:E},M))})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Description"}),L.jsx("input",{type:"text",name:"projectDescription",value:r.projectDescription,onChange:y,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500",placeholder:"Brief project description"})]})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),L.jsx("input",{type:"date",name:"startDate",value:r.startDate,onChange:y,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date (if applicable)"}),L.jsx("input",{type:"date",name:"endDate",value:r.endDate,onChange:y,className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-green-500"})]})]}),L.jsx("div",{className:"pt-4",children:L.jsx(Ct.button,{type:"submit",className:"w-full py-3 bg-green-600 rounded-lg hover:bg-green-700 transition-colors text-lg font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Post Opportunity"})})]})]})})},"post")})]})]})};var rL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sC=Qo.createContext&&Qo.createContext(rL),jX=["attr","size","title"];function XX(n,e){if(n==null)return{};var t=$X(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function $X(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function nv(){return nv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nv.apply(this,arguments)}function oC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function iv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oC(Object(t),!0).forEach(function(i){qX(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oC(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qX(n,e,t){return e=YX(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YX(n){var e=KX(n,"string");return typeof e=="symbol"?e:e+""}function KX(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sL(n){return n&&n.map((e,t)=>Qo.createElement(e.tag,iv({key:t},e.attr),sL(e.child)))}function xu(n){return e=>Qo.createElement(JX,nv({attr:iv({},n.attr)},e),sL(n.child))}function JX(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=XX(n,jX),l=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Qo.createElement("svg",nv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:c,style:iv(iv({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Qo.createElement("title",null,s),n.children)};return sC!==void 0?Qo.createElement(sC.Consumer,null,t=>e(t)):e(rL)}function ZX(n){return xu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function QX(n){return xu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function e$(n){return xu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(n)}function t$(n){return xu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(n)}function n$(n){return xu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function i$(n){return xu({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(n)}function r$(n){return xu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(n)}function s$(n){return xu({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(n)}const o$=()=>{const[n,e]=Qo.useState("all"),[t,i]=J.useState(null),r=J.useRef(null),[s,o]=J.useState(!0);J.useEffect(()=>{if(!s||!r.current)return;const p=r.current;let m;return p.scrollWidth>p.clientWidth&&(m=setInterval(()=>{p.scrollLeft+p.clientWidth>=p.scrollWidth?p.scrollTo({left:0,behavior:"smooth"}):p.scrollBy({left:200,behavior:"smooth"})},5e3)),()=>clearInterval(m)},[s,n]);const l=p=>{if(!r.current)return;o(!1),r.current.scrollBy({left:p==="left"?-350:350,behavior:"smooth"}),setTimeout(()=>o(!0),5e3)},c=[{id:1,title:"From Bootcamp to Senior Developer in 2 Years",description:"After completing a coding bootcamp, I struggled to find opportunities that would accept someone without a formal degree. Through Dots, I connected with a startup that valued passion over credentials. They took a chance on me, and with their mentorship, I've grown from a junior to a senior developer in just two years.",author:"Marten Kask",role:"Senior Frontend Developer",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"seeker",shortTestimonial:"Dots transformed my career by connecting me with people who saw my potential.",socialLinks:{linkedin:"https://linkedin.com/in/example",twitter:"https://twitter.com/example"}},{id:2,title:"Building a Design Team from Scratch",description:"As a startup founder, I needed to build a design team quickly but didn't have the network or resources to find the right talent. Dots connected me with passionate designers who were looking to make an impact. Today, our design team has won multiple awards, and several of those early hires are now in leadership positions.",author:"Liisa Tamm",role:"CEO, DesignFlow",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"inspirator",shortTestimonial:"Dots helped me build an award-winning design team from the ground up.",socialLinks:{linkedin:"https://linkedin.com/in/example2"}},{id:3,title:"Career Pivot into Data Science",description:"After 10 years in finance, I wanted to transition into data science but didn't know where to start. Through Dots, I found a mentor who guided my learning journey and introduced me to a part-time role where I could apply my new skills while still working my day job. Six months later, I made a full transition into a data science role I love.",author:"Tõnu Rebane",role:"Data Scientist",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"seeker",shortTestimonial:"Finding the right mentor through Dots made my career transition smooth and exciting.",socialLinks:{linkedin:"https://linkedin.com/in/example3",twitter:"https://twitter.com/example3"}},{id:4,title:"Mentoring Program that Transformed Our Company",description:"We started a mentorship program through Dots to give back to the community, but it ended up transforming our company culture. The fresh perspectives and enthusiasm from the individuals we mentored brought new energy to our teams. We've since hired three of our mentees full-time, and they're now among our top performers.",author:"Kati Pärn",role:"HR Director, TechEesti",image:"https://images.unsplash.com/photo-1619895862022-09114b41f16f?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"inspirator",shortTestimonial:"What started as giving back became a transformative program for our company.",socialLinks:{linkedin:"https://linkedin.com/in/example4"}},{id:5,title:"From Self-taught to Professional UI/UX Designer",description:"I was a self-taught designer with a passion for creating intuitive user interfaces but no formal portfolio or connections. Dots matched me with a mentor who helped refine my skills and introduced me to collaborative projects. After just a few months, I received multiple job offers and now work as a full-time UI/UX designer.",author:"Kristjan Mägi",role:"UI/UX Designer",image:"https://images.unsplash.com/photo-1531891437562-4301cf35b7e4?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"seeker",shortTestimonial:"Dots connected me with projects that turned my passion into a profession.",socialLinks:{twitter:"https://twitter.com/example5"}},{id:6,title:"Finding Top Talent for Remote Work",description:"When our company transitioned to remote-first, we struggled to find top talent who could thrive in a distributed environment. Through Dots, we connected with motivated individuals who had the perfect mix of technical skills and self-direction. Our remote team is now more productive than our office was, and we've expanded into new markets.",author:"Siim Lepik",role:"CTO, RemoteForce",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"inspirator",shortTestimonial:"Dots helped us find the perfect remote talent and expand our global reach.",socialLinks:{linkedin:"https://linkedin.com/in/example6",twitter:"https://twitter.com/example6"}}],d=n==="all"?c:c.filter(p=>p.category===n);return L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-blue-950 to-indigo-950 text-white flex flex-col",children:[L.jsx(Yc,{}),L.jsx("header",{className:"glass sticky top-0 z-50 border-b border-white/10",children:L.jsx("div",{className:"container mx-auto px-4",children:L.jsxs("div",{className:"flex items-center justify-between h-16",children:[L.jsx(nn,{to:"/",className:"text-2xl font-bold",children:"Dots"}),L.jsxs("nav",{className:"flex space-x-4",children:[L.jsx(nn,{to:"/",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Home"}),L.jsx(nn,{to:"/seekers",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Seekers"}),L.jsx(nn,{to:"/inspirators",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Inspirators"}),L.jsx(nn,{to:"/success-stories",className:"px-3 py-2 rounded-lg bg-white/10 text-white",children:"Bridges We Build"}),L.jsx(nn,{to:"/communities",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Communities"})]})]})})}),L.jsxs("main",{className:"flex-grow container mx-auto px-4 py-12",children:[L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[L.jsx("h1",{className:"text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-400",children:"Bridges We Build"}),L.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Discover how Dots has connected passionate individuals with opportunities and mentors, creating meaningful bridges that transform careers and lives."})]}),L.jsx("div",{className:"flex justify-center mb-8",children:L.jsxs("div",{className:"inline-flex p-1 glass rounded-lg",children:[L.jsx("button",{className:`px-6 py-2 rounded-md transition-colors ${n==="all"?"bg-purple-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e("all"),children:"All Stories"}),L.jsx("button",{className:`px-6 py-2 rounded-md transition-colors ${n==="seeker"?"bg-purple-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e("seeker"),children:"Seeker Stories"}),L.jsx("button",{className:`px-6 py-2 rounded-md transition-colors ${n==="inspirator"?"bg-green-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e("inspirator"),children:"Inspirator Stories"})]})}),L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h2",{className:"text-2xl font-semibold",children:"Featured Stories"}),L.jsxs("div",{className:"flex space-x-2",children:[L.jsx("button",{onClick:()=>l("left"),className:"p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors","aria-label":"Scroll left",children:L.jsx(e$,{})}),L.jsx("button",{onClick:()=>l("right"),className:"p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors","aria-label":"Scroll right",children:L.jsx(t$,{})})]})]}),L.jsx("div",{ref:r,className:"flex overflow-x-auto pb-8 space-x-6 hide-scrollbar snap-x snap-mandatory",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:d.map(p=>{var m,y;return L.jsx(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*(p.id%6)},className:`bg-gray-900/40 backdrop-blur-md rounded-xl overflow-hidden shadow-xl border-t-4 flex-shrink-0 w-[350px] snap-start ${p.category==="seeker"?"border-purple-500":"border-green-500"}`,whileHover:{scale:1.03,boxShadow:"0 0 25px rgba(255,255,255,0.15)",backgroundColor:"rgba(30, 30, 50, 0.6)"},onMouseEnter:()=>i(p.id),onMouseLeave:()=>i(null),children:L.jsxs("div",{className:"p-6 relative h-full flex flex-col",children:[t===p.id&&p.shortTestimonial&&L.jsx(Ct.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"absolute inset-0 flex items-center justify-center p-6 bg-gradient-to-b from-gray-900/90 to-gray-900/90 z-10",children:L.jsxs("p",{className:"text-xl font-medium text-center text-white",children:['"',p.shortTestimonial,'"']})}),L.jsxs("div",{className:"flex items-center mb-6 z-20",children:[L.jsx("img",{src:p.image,alt:p.author,className:"w-16 h-16 rounded-full object-cover mr-4 border-2 border-white/20"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-bold text-white",children:p.author}),L.jsx("p",{className:"text-sm text-gray-300",children:p.role})]})]}),L.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:p.title}),L.jsx("p",{className:"text-gray-300 mb-6 flex-grow",children:p.description}),L.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[L.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p.category==="seeker"?"bg-purple-500/20 text-purple-300":"bg-green-500/20 text-green-300"}`,children:p.category==="seeker"?"Seeker":"Inspirator"}),L.jsxs("div",{className:"flex space-x-2",children:[((m=p.socialLinks)==null?void 0:m.linkedin)&&L.jsx("a",{href:p.socialLinks.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors",children:L.jsx(ZX,{})}),((y=p.socialLinks)==null?void 0:y.twitter)&&L.jsx("a",{href:p.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400 transition-colors",children:L.jsx(QX,{})})]})]})]})},p.id)})}),L.jsx("style",{children:`.hide-scrollbar::-webkit-scrollbar {
            display: none;
          }`}),L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-16 text-center",children:[L.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Ready to create your own bridge to success?"}),L.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[L.jsx(nn,{to:"/seekers",className:"px-8 py-3 bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors",children:"Start as a Seeker"}),L.jsx(nn,{to:"/inspirators",className:"px-8 py-3 bg-green-600 rounded-lg hover:bg-green-700 transition-colors",children:"Start as an Inspirator"})]})]})]})]})},a$=()=>{const[n,e]=J.useState("all"),[t,i]=J.useState(""),[r,s]=J.useState(null),o=["all","technology","design","business","science","arts","education"],l=y=>y>=1e3?`${(y/1e3).toFixed(1).replace(/\.0$/,"")}k`:y.toString(),c=[{id:1,name:"Estonia Tech Innovators",description:"A community for tech professionals in Estonia sharing knowledge, job opportunities, and supporting each other's growth.",memberCount:1240,image:"https://images.unsplash.com/photo-1531482615713-2afd69097998?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"technology",topics:["Software Development","AI","Startups","Web3"],isFeatured:!0,relatedCommunities:[3,8]},{id:2,name:"UX/UI Design Enthusiasts",description:"Connect with fellow designers, share work, get feedback, and discover opportunities in the thriving Estonian design scene.",memberCount:845,image:"https://images.unsplash.com/photo-1561070791-2526d30994b5?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"design",topics:["UI Design","UX Research","User Testing","Design Systems"],relatedCommunities:[6]},{id:3,name:"Data Science Estonia",description:"For data scientists, analysts, and enthusiasts interested in data-driven decision making and advanced analytics.",memberCount:620,image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"technology",topics:["Machine Learning","Big Data","Visualization","Statistics"],relatedCommunities:[1,5]},{id:4,name:"Estonian Entrepreneurs",description:"Network with business leaders and entrepreneurs from Estonia's thriving startup ecosystem.",memberCount:980,image:"https://images.unsplash.com/photo-1556761175-b413da4baf72?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"business",topics:["Startups","Funding","Business Development","Networking"],isFeatured:!0,relatedCommunities:[9]},{id:5,name:"Healthcare Innovations",description:"Bringing together healthcare professionals and technologists to advance medical science and patient care.",memberCount:520,image:"https://images.unsplash.com/photo-1576091160550-2173dba999ef?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"science",topics:["Medical Tech","Biotechnology","Health IT","Research"],relatedCommunities:[3]},{id:6,name:"Creative Arts Collective",description:"A space for artists, musicians, writers, and creatives to collaborate and share their work.",memberCount:750,image:"https://images.unsplash.com/photo-1536924430914-91f9e2041b83?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"arts",topics:["Visual Arts","Music","Writing","Performance"],relatedCommunities:[2,7]},{id:7,name:"EdTech Innovators",description:"Educators and technologists collaborating to transform learning experiences through innovative technology.",memberCount:410,image:"https://images.unsplash.com/photo-1509062522246-3755977927d7?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"education",topics:["E-learning","Educational Apps","Learning Management","Assessment"],relatedCommunities:[6]},{id:8,name:"Estonia Game Developers",description:"For game developers, designers, artists, and enthusiasts building the next generation of games.",memberCount:380,image:"https://images.unsplash.com/photo-1511512578047-dfb367046420?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"technology",topics:["Game Development","3D Modeling","Game Design","Unity"],relatedCommunities:[1,2]},{id:9,name:"Sustainable Business Network",description:"Connecting businesses committed to sustainable practices and environmental responsibility.",memberCount:290,image:"https://images.unsplash.com/photo-1464938050520-ef2270bb8ce8?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80",category:"business",topics:["Sustainability","Green Business","CSR","Circular Economy"],relatedCommunities:[4]}],d=c.filter(y=>{const v=n==="all"||y.category===n,S=t===""||y.name.toLowerCase().includes(t.toLowerCase())||y.description.toLowerCase().includes(t.toLowerCase())||y.topics.some(E=>E.toLowerCase().includes(t.toLowerCase()));return v&&S}),p=c.filter(y=>y.isFeatured),m=y=>{const v=c.find(S=>S.id===y);return!v||!v.relatedCommunities?[]:c.filter(S=>{var E;return(E=v.relatedCommunities)==null?void 0:E.includes(S.id)})};return L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-blue-950 to-indigo-950 text-white flex flex-col",children:[L.jsx(Yc,{}),L.jsx("header",{className:"glass sticky top-0 z-50 border-b border-white/10",children:L.jsx("div",{className:"container mx-auto px-4",children:L.jsxs("div",{className:"flex items-center justify-between h-16",children:[L.jsx(nn,{to:"/",className:"text-2xl font-bold",children:"Dots"}),L.jsxs("nav",{className:"flex space-x-4",children:[L.jsx(nn,{to:"/",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Home"}),L.jsx(nn,{to:"/seekers",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Seekers"}),L.jsx(nn,{to:"/inspirators",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Inspirators"}),L.jsx(nn,{to:"/success-stories",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Bridges We Build"}),L.jsx(nn,{to:"/communities",className:"px-3 py-2 rounded-lg bg-white/10 text-white",children:"Communities - Hub"})]})]})})}),L.jsxs("main",{className:"flex-grow container mx-auto px-4 py-12",children:[L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[L.jsx("h1",{className:"text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-400",children:"Communities - Hub"}),L.jsxs("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:["There was a time when we came together to create, dream, and change the world. Why not bring that back? ",L.jsx("br",{}),L.jsx("span",{className:"font-medium text-white mt-2 inline-block",children:"Join communities that match your interests, grow your skills, connect with like-minded people, and launch new projects. If you don't find what you're looking for—create it!"})]})]}),p.length>0&&L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-16",children:[L.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Featured Communities"}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(y=>L.jsxs(Ct.div,{whileHover:{scale:1.02,boxShadow:"0 0 30px rgba(100,149,237,0.3)"},className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-xl overflow-hidden shadow-xl border-l-4 border-blue-500 flex",onMouseEnter:()=>s(y.id),onMouseLeave:()=>s(null),children:[L.jsx("img",{src:y.image,alt:y.name,className:"w-24 h-24 rounded-lg object-cover mr-4 border border-white/10"}),L.jsxs("div",{className:"flex-grow",children:[L.jsxs("div",{className:"flex justify-between items-start mb-2",children:[L.jsx("h3",{className:"text-xl font-bold",children:y.name}),L.jsxs("span",{className:"text-sm bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full",children:[l(y.memberCount)," members"]})]}),L.jsx("p",{className:"text-gray-300 mb-4",children:y.description}),L.jsx("button",{className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Join Community →"})]})]},y.id))})]}),L.jsx("div",{className:"mb-8",children:L.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[L.jsx("div",{className:"md:flex-grow",children:L.jsx("input",{type:"text",placeholder:"Search communities...",className:"w-full p-3 bg-gray-800/50 rounded-lg border border-white/10 focus:outline-none focus:border-blue-500",value:t,onChange:y=>i(y.target.value)})}),L.jsx("div",{className:"flex overflow-x-auto py-2 md:py-0 glass rounded-lg",children:o.map(y=>L.jsx("button",{className:`px-4 py-2 whitespace-nowrap rounded-md transition-colors ${n===y?"bg-blue-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e(y),children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]})}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.length>0?d.map(y=>L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*(y.id%6)},className:"bg-gray-900/40 backdrop-blur-md p-6 rounded-xl overflow-hidden shadow-xl border-t-4 border-blue-500",whileHover:{scale:1.03,boxShadow:"0 0 25px rgba(100,149,237,0.2)",backgroundColor:"rgba(30, 30, 50, 0.6)"},onMouseEnter:()=>s(y.id),onMouseLeave:()=>s(null),children:[L.jsx("img",{src:y.image,alt:y.name,className:"w-full h-40 object-cover -mt-6 -mx-6 mb-4 border-b border-white/10"}),L.jsxs("div",{className:"flex justify-between items-start mb-2",children:[L.jsx("h3",{className:"text-xl font-bold",children:y.name}),L.jsxs("span",{className:"text-sm bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full",children:[l(y.memberCount)," members"]})]}),L.jsx("p",{className:"text-gray-300 mb-4",children:y.description}),L.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:y.topics.map((v,S)=>L.jsx("span",{className:"text-xs px-2 py-1 bg-white/10 rounded-full text-gray-300",children:v},S))}),L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx("button",{className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Join Community"}),L.jsx("button",{className:"text-white/50 hover:text-white/80 text-sm transition-colors",children:"Learn More →"})]}),r===y.id&&y.relatedCommunities&&y.relatedCommunities.length>0&&L.jsxs(Ct.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 pt-4 border-t border-white/10",children:[L.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:"Related Communities:"}),L.jsx("div",{className:"flex flex-wrap gap-2",children:m(y.id).map(v=>L.jsx("button",{className:"text-xs px-2 py-1 bg-blue-500/10 rounded-full text-blue-300 hover:bg-blue-500/20 transition-colors",children:v.name},v.id))})]})]},y.id)):L.jsx("div",{className:"col-span-3 text-center py-8",children:L.jsx("p",{className:"text-gray-400 text-lg",children:"No communities match your filter criteria. Try a different category or search term."})})}),L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-16 text-center p-8 bg-gradient-to-r from-blue-900/40 to-purple-900/40 backdrop-blur-md rounded-xl",children:[L.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Don't see what you're looking for?"}),L.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Build your own community and connect with like-minded individuals. We'll help you grow and thrive together."}),L.jsx("button",{className:"px-8 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors text-white font-medium",children:"Create a Community"})]})]})]})},l$=()=>{const[n,e]=J.useState("discover"),[t,i]=J.useState("event"),[r,s]=J.useState(""),[o,l]=J.useState(""),[c,d]=J.useState(""),[p,m]=J.useState(!1),[y,v]=J.useState(!1),S=[{id:"event",title:"Event",icon:s$,description:"Organize gatherings for people to connect and learn"},{id:"workshop",title:"Workshop",icon:i$,description:"Share your knowledge and skills with others"},{id:"discussion",title:"Discussion Group",icon:n$,description:"Create a space for meaningful conversations"},{id:"project",title:"Project Collaboration",icon:r$,description:"Bring together people to work on ideas that matter"}],E=async M=>{M.preventDefault(),m(!0),setTimeout(()=>{m(!1),v(!0),setTimeout(()=>{i("event"),s(""),l(""),d(""),v(!1),e("discover")},3e3)},1500)};return L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-blue-950 to-indigo-950 text-white flex flex-col",children:[L.jsx(Yc,{}),L.jsx("header",{className:"glass sticky top-0 z-50 border-b border-white/10",children:L.jsx("div",{className:"container mx-auto px-4",children:L.jsxs("div",{className:"flex items-center justify-between h-16",children:[L.jsx(nn,{to:"/",className:"text-2xl font-bold",children:"Dots"}),L.jsxs("nav",{className:"flex space-x-4",children:[L.jsx(nn,{to:"/",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Home"}),L.jsx(nn,{to:"/seekers",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Seekers"}),L.jsx(nn,{to:"/inspirators",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Inspirators"}),L.jsx(nn,{to:"/success-stories",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Bridges We Build"}),L.jsx(nn,{to:"/communities",className:"px-3 py-2 rounded-lg text-white/60 hover:text-white hover:bg-white/5",children:"Communities - Hub"}),L.jsx(nn,{to:"/opportunities",className:"px-3 py-2 rounded-lg bg-white/10 text-white",children:"Growing Together"})]})]})})}),L.jsxs("main",{className:"flex-grow container mx-auto px-4 py-12",children:[L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[L.jsx("h1",{className:"text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-400",children:"Growing Together"}),L.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"We're more than just volunteering; we're about creating opportunities for everyone to grow, connect, and make an impact."})]}),L.jsx("div",{className:"mb-12",children:L.jsx("div",{className:"flex justify-center",children:L.jsxs("div",{className:"inline-flex bg-gray-900/50 rounded-lg p-1",children:[L.jsx("button",{className:`px-6 py-2 rounded-md transition-colors ${n==="discover"?"bg-blue-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e("discover"),children:"Discover Opportunities"}),L.jsx("button",{className:`px-6 py-2 rounded-md transition-colors ${n==="submit"?"bg-blue-600 text-white":"text-white/70 hover:text-white"}`,onClick:()=>e("submit"),children:"Submit Your Idea"})]})})}),n==="discover"&&L.jsxs(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[L.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-8 rounded-xl border-l-4 border-purple-500",children:[L.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Why Go Beyond Volunteering?"}),L.jsx("p",{className:"text-gray-300 mb-6",children:"While volunteering provides valuable experiences, sometimes you need more ways to grow, connect, and make a difference. Our platform helps you take the next step by creating and joining initiatives that align with your passions."}),L.jsxs("ul",{className:"space-y-2 text-gray-300",children:[L.jsxs("li",{className:"flex items-start",children:[L.jsx("span",{className:"text-purple-400 mr-2",children:"•"}),L.jsx("span",{children:"Develop leadership and organizational skills"})]}),L.jsxs("li",{className:"flex items-start",children:[L.jsx("span",{className:"text-purple-400 mr-2",children:"•"}),L.jsx("span",{children:"Build a network of passionate individuals"})]}),L.jsxs("li",{className:"flex items-start",children:[L.jsx("span",{className:"text-purple-400 mr-2",children:"•"}),L.jsx("span",{children:"Create meaningful impact in areas you care about"})]}),L.jsxs("li",{className:"flex items-start",children:[L.jsx("span",{className:"text-purple-400 mr-2",children:"•"}),L.jsx("span",{children:"Test your ideas in a supportive environment"})]})]})]}),L.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-md p-8 rounded-xl border-l-4 border-blue-500",children:[L.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How It Works"}),L.jsxs("ol",{className:"space-y-4",children:[L.jsxs("li",{className:"flex",children:[L.jsx("span",{className:"bg-blue-500/20 text-blue-300 rounded-full w-7 h-7 flex items-center justify-center mr-3 flex-shrink-0",children:"1"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-bold text-white",children:"Submit Your Idea"}),L.jsx("p",{className:"text-gray-300",children:"Share what you'd like to create or organize"})]})]}),L.jsxs("li",{className:"flex",children:[L.jsx("span",{className:"bg-blue-500/20 text-blue-300 rounded-full w-7 h-7 flex items-center justify-center mr-3 flex-shrink-0",children:"2"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-bold text-white",children:"Get Connected"}),L.jsx("p",{className:"text-gray-300",children:"We'll help match you with like-minded individuals"})]})]}),L.jsxs("li",{className:"flex",children:[L.jsx("span",{className:"bg-blue-500/20 text-blue-300 rounded-full w-7 h-7 flex items-center justify-center mr-3 flex-shrink-0",children:"3"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-bold text-white",children:"Receive Support"}),L.jsx("p",{className:"text-gray-300",children:"Access resources, guidance, and promotion for your initiative"})]})]}),L.jsxs("li",{className:"flex",children:[L.jsx("span",{className:"bg-blue-500/20 text-blue-300 rounded-full w-7 h-7 flex items-center justify-center mr-3 flex-shrink-0",children:"4"}),L.jsxs("div",{children:[L.jsx("h3",{className:"font-bold text-white",children:"Launch & Grow"}),L.jsx("p",{className:"text-gray-300",children:"Turn your idea into reality and build a community around it"})]})]})]})]})]}),L.jsx("div",{className:"text-center mb-12",children:L.jsx("button",{onClick:()=>e("submit"),className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Ready to Submit Your Idea?"})}),L.jsxs("div",{className:"bg-gray-900/30 backdrop-blur-md p-8 rounded-xl",children:[L.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Success Stories"}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[L.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-lg",children:[L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Tech Skills Workshop Series"}),L.jsx("p",{className:"text-gray-300 mb-4",children:`"I proposed a series of coding workshops and met three other developers who helped me create a monthly event that's now attended by over 50 people!"`}),L.jsx("p",{className:"text-sm text-gray-400",children:"— Kristjan, Web Developer"})]}),L.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-lg",children:[L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Environmental Discussion Club"}),L.jsx("p",{className:"text-gray-300 mb-4",children:`"My passion for sustainability found a home when I started a monthly discussion group. We've since organized two community clean-ups and influenced local policy."`}),L.jsx("p",{className:"text-sm text-gray-400",children:"— Mari, Environmental Advocate"})]}),L.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-lg",children:[L.jsx("h3",{className:"text-xl font-bold mb-2",children:"Art Therapy Sessions"}),L.jsx("p",{className:"text-gray-300 mb-4",children:'"I wanted to use my art therapy background to help others. Through this platform, I launched weekly sessions that have helped dozens of people express themselves."'}),L.jsx("p",{className:"text-sm text-gray-400",children:"— Liisa, Art Therapist"})]})]})]})]}),n==="submit"&&L.jsx(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:y?L.jsxs("div",{className:"bg-green-100 text-green-800 p-6 rounded-lg mb-8",children:[L.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Thank You for Your Submission!"}),L.jsx("p",{className:"mb-4",children:"We've received your idea and will be in touch soon to discuss next steps. Your initiative could be the next big opportunity in our community!"})]}):L.jsxs("form",{onSubmit:E,className:"bg-gray-900/40 backdrop-blur-md p-8 rounded-xl",children:[L.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Share Your Idea"}),L.jsxs("div",{className:"mb-6",children:[L.jsx("label",{className:"block text-white mb-2",children:"What type of opportunity would you like to create?"}),L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:S.map(M=>L.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${t===M.id?"border-blue-500 bg-blue-500/10":"border-gray-700 hover:border-blue-500/50"}`,onClick:()=>i(M.id),children:L.jsxs("div",{className:"flex flex-col items-center text-center",children:[L.jsx(M.icon,{className:"text-3xl mb-3 text-blue-400"}),L.jsx("h3",{className:"font-bold mb-1",children:M.title}),L.jsx("p",{className:"text-sm text-gray-300",children:M.description})]})},M.id))})]}),L.jsxs("div",{className:"mb-6",children:[L.jsx("label",{htmlFor:"title",className:"block text-white mb-2",children:"Title of your idea"}),L.jsx("input",{type:"text",id:"title",value:r,onChange:M=>s(M.target.value),className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:border-blue-500 text-white",placeholder:"e.g., 'Monthly Creative Writing Workshop'",required:!0})]}),L.jsxs("div",{className:"mb-6",children:[L.jsx("label",{htmlFor:"description",className:"block text-white mb-2",children:"Description"}),L.jsx("textarea",{id:"description",value:o,onChange:M=>l(M.target.value),className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:border-blue-500 text-white h-32",placeholder:"Describe your idea, who it's for, and what impact you hope to make...",required:!0})]}),L.jsxs("div",{className:"mb-6",children:[L.jsx("label",{htmlFor:"email",className:"block text-white mb-2",children:"Contact Email"}),L.jsx("input",{type:"email",id:"email",value:c,onChange:M=>d(M.target.value),className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:border-blue-500 text-white",placeholder:"Your email address",required:!0})]}),L.jsx("div",{className:"text-center",children:L.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors",disabled:p,children:p?"Submitting...":"Submit Your Idea"})})]})})]})]})},u$=()=>L.jsx(HI,{children:L.jsx(bW,{children:L.jsx(MW,{children:L.jsxs("div",{className:"min-h-screen",children:[L.jsx(Yc,{}),L.jsxs(kI,{children:[L.jsx(Kl,{path:"/",element:L.jsx(wW,{})}),L.jsx(Kl,{path:"/dashboard",element:L.jsx(HX,{})}),L.jsx(Kl,{path:"/seekers",element:L.jsx(WX,{})}),L.jsx(Kl,{path:"/inspirators",element:L.jsx(GX,{})}),L.jsx(Kl,{path:"/success-stories",element:L.jsx(o$,{})}),L.jsx(Kl,{path:"/communities",element:L.jsx(a$,{})}),L.jsx(Kl,{path:"/opportunities",element:L.jsx(l$,{})})]})]})})})}),aC={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_OPENAI_API_KEY:"",VITE_SUPABASE_ANON_KEY:"",VITE_SUPABASE_URL:""},c$=()=>{console.log("Environment Variables Check:");const n="";return console.log("VITE_OPENAI_API_KEY:","❌ Missing"),console.log("VITE_SUPABASE_URL:","❌ Missing"),console.log("VITE_SUPABASE_ANON_KEY:","❌ Missing"),console.log(`
All VITE_ Environment Variables:`),Object.keys(aC).forEach(e=>{if(e.startsWith("VITE_")){const t=aC[e],i=typeof t=="string"?`${t.substring(0,3)}...${t.substring(t.length-3)}`:t;console.log(`${e}: ${i}`)}}),{hasOpenAiKey:!!n,hasSupabaseUrl:!1,hasSupabaseKey:!1}},oL=c$();console.log("Environment check complete:",oL);oL.hasOpenAiKey||(console.error("============================================"),console.error("ERROR: OpenAI API key is missing!"),console.error("Make sure your .env file contains VITE_OPENAI_API_KEY"),console.error("Restart the development server after updating the .env file"),console.error("============================================"));WL.createRoot(document.getElementById("root")).render(L.jsx(Qo.StrictMode,{children:L.jsx(u$,{})}));
